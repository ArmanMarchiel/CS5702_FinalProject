(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();function lC(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var QE={exports:{}},ig={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var d5;function gV(){if(d5)return ig;d5=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(i,r,a){var s=null;if(a!==void 0&&(s=""+a),r.key!==void 0&&(s=""+r.key),"key"in r){a={};for(var o in r)o!=="key"&&(a[o]=r[o])}else a=r;return r=a.ref,{$$typeof:e,type:i,key:s,ref:r!==void 0?r:null,props:a}}return ig.Fragment=t,ig.jsx=n,ig.jsxs=n,ig}var h5;function pV(){return h5||(h5=1,QE.exports=gV()),QE.exports}var rt=pV(),ZE={exports:{}},Ye={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g5;function mV(){if(g5)return Ye;g5=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),s=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),h=Symbol.iterator;function p(F){return F===null||typeof F!="object"?null:(F=h&&F[h]||F["@@iterator"],typeof F=="function"?F:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,b={};function E(F,X,J){this.props=F,this.context=X,this.refs=b,this.updater=J||y}E.prototype.isReactComponent={},E.prototype.setState=function(F,X){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,X,"setState")},E.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function _(){}_.prototype=E.prototype;function w(F,X,J){this.props=F,this.context=X,this.refs=b,this.updater=J||y}var A=w.prototype=new _;A.constructor=w,v(A,E.prototype),A.isPureReactComponent=!0;var M=Array.isArray,T={H:null,A:null,T:null,S:null},R=Object.prototype.hasOwnProperty;function O(F,X,J,Z,ue,de){return J=de.ref,{$$typeof:e,type:F,key:X,ref:J!==void 0?J:null,props:de}}function k(F,X){return O(F.type,X,void 0,void 0,void 0,F.props)}function $(F){return typeof F=="object"&&F!==null&&F.$$typeof===e}function D(F){var X={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(J){return X[J]})}var z=/\/+/g;function P(F,X){return typeof F=="object"&&F!==null&&F.key!=null?D(""+F.key):X.toString(36)}function q(){}function j(F){switch(F.status){case"fulfilled":return F.value;case"rejected":throw F.reason;default:switch(typeof F.status=="string"?F.then(q,q):(F.status="pending",F.then(function(X){F.status==="pending"&&(F.status="fulfilled",F.value=X)},function(X){F.status==="pending"&&(F.status="rejected",F.reason=X)})),F.status){case"fulfilled":return F.value;case"rejected":throw F.reason}}throw F}function L(F,X,J,Z,ue){var de=typeof F;(de==="undefined"||de==="boolean")&&(F=null);var Ae=!1;if(F===null)Ae=!0;else switch(de){case"bigint":case"string":case"number":Ae=!0;break;case"object":switch(F.$$typeof){case e:case t:Ae=!0;break;case d:return Ae=F._init,L(Ae(F._payload),X,J,Z,ue)}}if(Ae)return ue=ue(F),Ae=Z===""?"."+P(F,0):Z,M(ue)?(J="",Ae!=null&&(J=Ae.replace(z,"$&/")+"/"),L(ue,X,J,"",function(se){return se})):ue!=null&&($(ue)&&(ue=k(ue,J+(ue.key==null||F&&F.key===ue.key?"":(""+ue.key).replace(z,"$&/")+"/")+Ae)),X.push(ue)),1;Ae=0;var tt=Z===""?".":Z+":";if(M(F))for(var we=0;we<F.length;we++)Z=F[we],de=tt+P(Z,we),Ae+=L(Z,X,J,de,ue);else if(we=p(F),typeof we=="function")for(F=we.call(F),we=0;!(Z=F.next()).done;)Z=Z.value,de=tt+P(Z,we++),Ae+=L(Z,X,J,de,ue);else if(de==="object"){if(typeof F.then=="function")return L(j(F),X,J,Z,ue);throw X=String(F),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return Ae}function U(F,X,J){if(F==null)return F;var Z=[],ue=0;return L(F,Z,"","",function(de){return X.call(J,de,ue++)}),Z}function I(F){if(F._status===-1){var X=F._result;X=X(),X.then(function(J){(F._status===0||F._status===-1)&&(F._status=1,F._result=J)},function(J){(F._status===0||F._status===-1)&&(F._status=2,F._result=J)}),F._status===-1&&(F._status=0,F._result=X)}if(F._status===1)return F._result.default;throw F._result}var V=typeof reportError=="function"?reportError:function(F){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof F=="object"&&F!==null&&typeof F.message=="string"?String(F.message):String(F),error:F});if(!window.dispatchEvent(X))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",F);return}console.error(F)};function G(){}return Ye.Children={map:U,forEach:function(F,X,J){U(F,function(){X.apply(this,arguments)},J)},count:function(F){var X=0;return U(F,function(){X++}),X},toArray:function(F){return U(F,function(X){return X})||[]},only:function(F){if(!$(F))throw Error("React.Children.only expected to receive a single React element child.");return F}},Ye.Component=E,Ye.Fragment=n,Ye.Profiler=r,Ye.PureComponent=w,Ye.StrictMode=i,Ye.Suspense=l,Ye.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=T,Ye.act=function(){throw Error("act(...) is not supported in production builds of React.")},Ye.cache=function(F){return function(){return F.apply(null,arguments)}},Ye.cloneElement=function(F,X,J){if(F==null)throw Error("The argument must be a React element, but you passed "+F+".");var Z=v({},F.props),ue=F.key,de=void 0;if(X!=null)for(Ae in X.ref!==void 0&&(de=void 0),X.key!==void 0&&(ue=""+X.key),X)!R.call(X,Ae)||Ae==="key"||Ae==="__self"||Ae==="__source"||Ae==="ref"&&X.ref===void 0||(Z[Ae]=X[Ae]);var Ae=arguments.length-2;if(Ae===1)Z.children=J;else if(1<Ae){for(var tt=Array(Ae),we=0;we<Ae;we++)tt[we]=arguments[we+2];Z.children=tt}return O(F.type,ue,void 0,void 0,de,Z)},Ye.createContext=function(F){return F={$$typeof:s,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null},F.Provider=F,F.Consumer={$$typeof:a,_context:F},F},Ye.createElement=function(F,X,J){var Z,ue={},de=null;if(X!=null)for(Z in X.key!==void 0&&(de=""+X.key),X)R.call(X,Z)&&Z!=="key"&&Z!=="__self"&&Z!=="__source"&&(ue[Z]=X[Z]);var Ae=arguments.length-2;if(Ae===1)ue.children=J;else if(1<Ae){for(var tt=Array(Ae),we=0;we<Ae;we++)tt[we]=arguments[we+2];ue.children=tt}if(F&&F.defaultProps)for(Z in Ae=F.defaultProps,Ae)ue[Z]===void 0&&(ue[Z]=Ae[Z]);return O(F,de,void 0,void 0,null,ue)},Ye.createRef=function(){return{current:null}},Ye.forwardRef=function(F){return{$$typeof:o,render:F}},Ye.isValidElement=$,Ye.lazy=function(F){return{$$typeof:d,_payload:{_status:-1,_result:F},_init:I}},Ye.memo=function(F,X){return{$$typeof:f,type:F,compare:X===void 0?null:X}},Ye.startTransition=function(F){var X=T.T,J={};T.T=J;try{var Z=F(),ue=T.S;ue!==null&&ue(J,Z),typeof Z=="object"&&Z!==null&&typeof Z.then=="function"&&Z.then(G,V)}catch(de){V(de)}finally{T.T=X}},Ye.unstable_useCacheRefresh=function(){return T.H.useCacheRefresh()},Ye.use=function(F){return T.H.use(F)},Ye.useActionState=function(F,X,J){return T.H.useActionState(F,X,J)},Ye.useCallback=function(F,X){return T.H.useCallback(F,X)},Ye.useContext=function(F){return T.H.useContext(F)},Ye.useDebugValue=function(){},Ye.useDeferredValue=function(F,X){return T.H.useDeferredValue(F,X)},Ye.useEffect=function(F,X){return T.H.useEffect(F,X)},Ye.useId=function(){return T.H.useId()},Ye.useImperativeHandle=function(F,X,J){return T.H.useImperativeHandle(F,X,J)},Ye.useInsertionEffect=function(F,X){return T.H.useInsertionEffect(F,X)},Ye.useLayoutEffect=function(F,X){return T.H.useLayoutEffect(F,X)},Ye.useMemo=function(F,X){return T.H.useMemo(F,X)},Ye.useOptimistic=function(F,X){return T.H.useOptimistic(F,X)},Ye.useReducer=function(F,X,J){return T.H.useReducer(F,X,J)},Ye.useRef=function(F){return T.H.useRef(F)},Ye.useState=function(F){return T.H.useState(F)},Ye.useSyncExternalStore=function(F,X,J){return T.H.useSyncExternalStore(F,X,J)},Ye.useTransition=function(){return T.H.useTransition()},Ye.version="19.0.0",Ye}var p5;function cC(){return p5||(p5=1,ZE.exports=mV()),ZE.exports}var Ys=cC();const Y_=lC(Ys);var KE={exports:{}},rg={},JE={exports:{}},eS={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m5;function yV(){return m5||(m5=1,function(e){function t(U,I){var V=U.length;U.push(I);e:for(;0<V;){var G=V-1>>>1,F=U[G];if(0<r(F,I))U[G]=I,U[V]=F,V=G;else break e}}function n(U){return U.length===0?null:U[0]}function i(U){if(U.length===0)return null;var I=U[0],V=U.pop();if(V!==I){U[0]=V;e:for(var G=0,F=U.length,X=F>>>1;G<X;){var J=2*(G+1)-1,Z=U[J],ue=J+1,de=U[ue];if(0>r(Z,V))ue<F&&0>r(de,Z)?(U[G]=de,U[ue]=V,G=ue):(U[G]=Z,U[J]=V,G=J);else if(ue<F&&0>r(de,V))U[G]=de,U[ue]=V,G=ue;else break e}}return I}function r(U,I){var V=U.sortIndex-I.sortIndex;return V!==0?V:U.id-I.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();e.unstable_now=function(){return s.now()-o}}var l=[],f=[],d=1,h=null,p=3,y=!1,v=!1,b=!1,E=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;function A(U){for(var I=n(f);I!==null;){if(I.callback===null)i(f);else if(I.startTime<=U)i(f),I.sortIndex=I.expirationTime,t(l,I);else break;I=n(f)}}function M(U){if(b=!1,A(U),!v)if(n(l)!==null)v=!0,j();else{var I=n(f);I!==null&&L(M,I.startTime-U)}}var T=!1,R=-1,O=5,k=-1;function $(){return!(e.unstable_now()-k<O)}function D(){if(T){var U=e.unstable_now();k=U;var I=!0;try{e:{v=!1,b&&(b=!1,_(R),R=-1),y=!0;var V=p;try{t:{for(A(U),h=n(l);h!==null&&!(h.expirationTime>U&&$());){var G=h.callback;if(typeof G=="function"){h.callback=null,p=h.priorityLevel;var F=G(h.expirationTime<=U);if(U=e.unstable_now(),typeof F=="function"){h.callback=F,A(U),I=!0;break t}h===n(l)&&i(l),A(U)}else i(l);h=n(l)}if(h!==null)I=!0;else{var X=n(f);X!==null&&L(M,X.startTime-U),I=!1}}break e}finally{h=null,p=V,y=!1}I=void 0}}finally{I?z():T=!1}}}var z;if(typeof w=="function")z=function(){w(D)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,q=P.port2;P.port1.onmessage=D,z=function(){q.postMessage(null)}}else z=function(){E(D,0)};function j(){T||(T=!0,z())}function L(U,I){R=E(function(){U(e.unstable_now())},I)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(U){U.callback=null},e.unstable_continueExecution=function(){v||y||(v=!0,j())},e.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<U?Math.floor(1e3/U):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(U){switch(p){case 1:case 2:case 3:var I=3;break;default:I=p}var V=p;p=I;try{return U()}finally{p=V}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(U,I){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var V=p;p=U;try{return I()}finally{p=V}},e.unstable_scheduleCallback=function(U,I,V){var G=e.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?G+V:G):V=G,U){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=V+F,U={id:d++,callback:I,priorityLevel:U,startTime:V,expirationTime:F,sortIndex:-1},V>G?(U.sortIndex=V,t(f,U),n(l)===null&&U===n(f)&&(b?(_(R),R=-1):b=!0,L(M,V-G))):(U.sortIndex=F,t(l,U),v||y||(v=!0,j())),U},e.unstable_shouldYield=$,e.unstable_wrapCallback=function(U){var I=p;return function(){var V=p;p=I;try{return U.apply(this,arguments)}finally{p=V}}}}(eS)),eS}var y5;function vV(){return y5||(y5=1,JE.exports=yV()),JE.exports}var tS={exports:{}},Wn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v5;function bV(){if(v5)return Wn;v5=1;var e=cC();function t(l){var f="https://react.dev/errors/"+l;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)f+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+l+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function a(l,f,d){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:h==null?null:""+h,children:l,containerInfo:f,implementation:d}}var s=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(l,f){if(l==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Wn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Wn.createPortal=function(l,f){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(t(299));return a(l,f,null,d)},Wn.flushSync=function(l){var f=s.T,d=i.p;try{if(s.T=null,i.p=2,l)return l()}finally{s.T=f,i.p=d,i.d.f()}},Wn.preconnect=function(l,f){typeof l=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,i.d.C(l,f))},Wn.prefetchDNS=function(l){typeof l=="string"&&i.d.D(l)},Wn.preinit=function(l,f){if(typeof l=="string"&&f&&typeof f.as=="string"){var d=f.as,h=o(d,f.crossOrigin),p=typeof f.integrity=="string"?f.integrity:void 0,y=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;d==="style"?i.d.S(l,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:h,integrity:p,fetchPriority:y}):d==="script"&&i.d.X(l,{crossOrigin:h,integrity:p,fetchPriority:y,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Wn.preinitModule=function(l,f){if(typeof l=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var d=o(f.as,f.crossOrigin);i.d.M(l,{crossOrigin:d,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&i.d.M(l)},Wn.preload=function(l,f){if(typeof l=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var d=f.as,h=o(d,f.crossOrigin);i.d.L(l,d,{crossOrigin:h,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Wn.preloadModule=function(l,f){if(typeof l=="string")if(f){var d=o(f.as,f.crossOrigin);i.d.m(l,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:d,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else i.d.m(l)},Wn.requestFormReset=function(l){i.d.r(l)},Wn.unstable_batchedUpdates=function(l,f){return l(f)},Wn.useFormState=function(l,f,d){return s.H.useFormState(l,f,d)},Wn.useFormStatus=function(){return s.H.useHostTransitionStatus()},Wn.version="19.0.0",Wn}var b5;function xV(){if(b5)return tS.exports;b5=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),tS.exports=bV(),tS.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x5;function EV(){if(x5)return rg;x5=1;var e=vV(),t=cC(),n=xV();function i(u){var c="https://react.dev/errors/"+u;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)c+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+u+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(u){return!(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)}var a=Symbol.for("react.element"),s=Symbol.for("react.transitional.element"),o=Symbol.for("react.portal"),l=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),h=Symbol.for("react.provider"),p=Symbol.for("react.consumer"),y=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),b=Symbol.for("react.suspense"),E=Symbol.for("react.suspense_list"),_=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),A=Symbol.for("react.offscreen"),M=Symbol.for("react.memo_cache_sentinel"),T=Symbol.iterator;function R(u){return u===null||typeof u!="object"?null:(u=T&&u[T]||u["@@iterator"],typeof u=="function"?u:null)}var O=Symbol.for("react.client.reference");function k(u){if(u==null)return null;if(typeof u=="function")return u.$$typeof===O?null:u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case l:return"Fragment";case o:return"Portal";case d:return"Profiler";case f:return"StrictMode";case b:return"Suspense";case E:return"SuspenseList"}if(typeof u=="object")switch(u.$$typeof){case y:return(u.displayName||"Context")+".Provider";case p:return(u._context.displayName||"Context")+".Consumer";case v:var c=u.render;return u=u.displayName,u||(u=c.displayName||c.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case _:return c=u.displayName||null,c!==null?c:k(u.type)||"Memo";case w:c=u._payload,u=u._init;try{return k(u(c))}catch{}}return null}var $=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,D=Object.assign,z,P;function q(u){if(z===void 0)try{throw Error()}catch(g){var c=g.stack.trim().match(/\n( *(at )?)/);z=c&&c[1]||"",P=-1<g.stack.indexOf(`
    at`)?" (<anonymous>)":-1<g.stack.indexOf("@")?"@unknown:0:0":""}return`
`+z+u+P}var j=!1;function L(u,c){if(!u||j)return"";j=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(c){var ce=function(){throw Error()};if(Object.defineProperty(ce.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ce,[])}catch(ne){var K=ne}Reflect.construct(u,[],ce)}else{try{ce.call()}catch(ne){K=ne}u.call(ce.prototype)}}else{try{throw Error()}catch(ne){K=ne}(ce=u())&&typeof ce.catch=="function"&&ce.catch(function(){})}}catch(ne){if(ne&&K&&typeof ne.stack=="string")return[ne.stack,K.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var x=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");x&&x.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var S=m.DetermineComponentFrameRoot(),C=S[0],N=S[1];if(C&&N){var B=C.split(`
`),Y=N.split(`
`);for(x=m=0;m<B.length&&!B[m].includes("DetermineComponentFrameRoot");)m++;for(;x<Y.length&&!Y[x].includes("DetermineComponentFrameRoot");)x++;if(m===B.length||x===Y.length)for(m=B.length-1,x=Y.length-1;1<=m&&0<=x&&B[m]!==Y[x];)x--;for(;1<=m&&0<=x;m--,x--)if(B[m]!==Y[x]){if(m!==1||x!==1)do if(m--,x--,0>x||B[m]!==Y[x]){var ae=`
`+B[m].replace(" at new "," at ");return u.displayName&&ae.includes("<anonymous>")&&(ae=ae.replace("<anonymous>",u.displayName)),ae}while(1<=m&&0<=x);break}}}finally{j=!1,Error.prepareStackTrace=g}return(g=u?u.displayName||u.name:"")?q(g):""}function U(u){switch(u.tag){case 26:case 27:case 5:return q(u.type);case 16:return q("Lazy");case 13:return q("Suspense");case 19:return q("SuspenseList");case 0:case 15:return u=L(u.type,!1),u;case 11:return u=L(u.type.render,!1),u;case 1:return u=L(u.type,!0),u;default:return""}}function I(u){try{var c="";do c+=U(u),u=u.return;while(u);return c}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}function V(u){var c=u,g=u;if(u.alternate)for(;c.return;)c=c.return;else{u=c;do c=u,c.flags&4098&&(g=c.return),u=c.return;while(u)}return c.tag===3?g:null}function G(u){if(u.tag===13){var c=u.memoizedState;if(c===null&&(u=u.alternate,u!==null&&(c=u.memoizedState)),c!==null)return c.dehydrated}return null}function F(u){if(V(u)!==u)throw Error(i(188))}function X(u){var c=u.alternate;if(!c){if(c=V(u),c===null)throw Error(i(188));return c!==u?null:u}for(var g=u,m=c;;){var x=g.return;if(x===null)break;var S=x.alternate;if(S===null){if(m=x.return,m!==null){g=m;continue}break}if(x.child===S.child){for(S=x.child;S;){if(S===g)return F(x),u;if(S===m)return F(x),c;S=S.sibling}throw Error(i(188))}if(g.return!==m.return)g=x,m=S;else{for(var C=!1,N=x.child;N;){if(N===g){C=!0,g=x,m=S;break}if(N===m){C=!0,m=x,g=S;break}N=N.sibling}if(!C){for(N=S.child;N;){if(N===g){C=!0,g=S,m=x;break}if(N===m){C=!0,m=S,g=x;break}N=N.sibling}if(!C)throw Error(i(189))}}if(g.alternate!==m)throw Error(i(190))}if(g.tag!==3)throw Error(i(188));return g.stateNode.current===g?u:c}function J(u){var c=u.tag;if(c===5||c===26||c===27||c===6)return u;for(u=u.child;u!==null;){if(c=J(u),c!==null)return c;u=u.sibling}return null}var Z=Array.isArray,ue=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,de={pending:!1,data:null,method:null,action:null},Ae=[],tt=-1;function we(u){return{current:u}}function se(u){0>tt||(u.current=Ae[tt],Ae[tt]=null,tt--)}function ye(u,c){tt++,Ae[tt]=u.current,u.current=c}var ve=we(null),re=we(null),Ie=we(null),Oe=we(null);function Be(u,c){switch(ye(Ie,c),ye(re,u),ye(ve,null),u=c.nodeType,u){case 9:case 11:c=(c=c.documentElement)&&(c=c.namespaceURI)?PD(c):0;break;default:if(u=u===8?c.parentNode:c,c=u.tagName,u=u.namespaceURI)u=PD(u),c=ID(u,c);else switch(c){case"svg":c=1;break;case"math":c=2;break;default:c=0}}se(ve),ye(ve,c)}function Te(){se(ve),se(re),se(Ie)}function pt(u){u.memoizedState!==null&&ye(Oe,u);var c=ve.current,g=ID(c,u.type);c!==g&&(ye(re,u),ye(ve,g))}function Ve(u){re.current===u&&(se(ve),se(re)),Oe.current===u&&(se(Oe),Kh._currentValue=de)}var Et=Object.prototype.hasOwnProperty,Bt=e.unstable_scheduleCallback,ka=e.unstable_cancelCallback,gr=e.unstable_shouldYield,Qu=e.unstable_requestPaint,Tt=e.unstable_now,pr=e.unstable_getCurrentPriorityLevel,Kt=e.unstable_ImmediatePriority,Rn=e.unstable_UserBlockingPriority,Mi=e.unstable_NormalPriority,sh=e.unstable_LowPriority,oh=e.unstable_IdlePriority,Ao=e.log,mr=e.unstable_setDisableYieldValue,Wr=null,Yn=null;function KG(u){if(Yn&&typeof Yn.onCommitFiberRoot=="function")try{Yn.onCommitFiberRoot(Wr,u,void 0,(u.current.flags&128)===128)}catch{}}function Co(u){if(typeof Ao=="function"&&mr(u),Yn&&typeof Yn.setStrictMode=="function")try{Yn.setStrictMode(Wr,u)}catch{}}var Vi=Math.clz32?Math.clz32:tY,JG=Math.log,eY=Math.LN2;function tY(u){return u>>>=0,u===0?32:31-(JG(u)/eY|0)|0}var F0=128,L0=4194304;function Zu(u){var c=u&42;if(c!==0)return c;switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return u&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return u}}function U0(u,c){var g=u.pendingLanes;if(g===0)return 0;var m=0,x=u.suspendedLanes,S=u.pingedLanes,C=u.warmLanes;u=u.finishedLanes!==0;var N=g&134217727;return N!==0?(g=N&~x,g!==0?m=Zu(g):(S&=N,S!==0?m=Zu(S):u||(C=N&~C,C!==0&&(m=Zu(C))))):(N=g&~x,N!==0?m=Zu(N):S!==0?m=Zu(S):u||(C=g&~C,C!==0&&(m=Zu(C)))),m===0?0:c!==0&&c!==m&&!(c&x)&&(x=m&-m,C=c&-c,x>=C||x===32&&(C&4194176)!==0)?c:m}function uh(u,c){return(u.pendingLanes&~(u.suspendedLanes&~u.pingedLanes)&c)===0}function nY(u,c){switch(u){case 1:case 2:case 4:case 8:return c+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function D3(){var u=F0;return F0<<=1,!(F0&4194176)&&(F0=128),u}function N3(){var u=L0;return L0<<=1,!(L0&62914560)&&(L0=4194304),u}function Gx(u){for(var c=[],g=0;31>g;g++)c.push(u);return c}function lh(u,c){u.pendingLanes|=c,c!==268435456&&(u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0)}function iY(u,c,g,m,x,S){var C=u.pendingLanes;u.pendingLanes=g,u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0,u.expiredLanes&=g,u.entangledLanes&=g,u.errorRecoveryDisabledLanes&=g,u.shellSuspendCounter=0;var N=u.entanglements,B=u.expirationTimes,Y=u.hiddenUpdates;for(g=C&~g;0<g;){var ae=31-Vi(g),ce=1<<ae;N[ae]=0,B[ae]=-1;var K=Y[ae];if(K!==null)for(Y[ae]=null,ae=0;ae<K.length;ae++){var ne=K[ae];ne!==null&&(ne.lane&=-536870913)}g&=~ce}m!==0&&z3(u,m,0),S!==0&&x===0&&u.tag!==0&&(u.suspendedLanes|=S&~(C&~c))}function z3(u,c,g){u.pendingLanes|=c,u.suspendedLanes&=~c;var m=31-Vi(c);u.entangledLanes|=c,u.entanglements[m]=u.entanglements[m]|1073741824|g&4194218}function F3(u,c){var g=u.entangledLanes|=c;for(u=u.entanglements;g;){var m=31-Vi(g),x=1<<m;x&c|u[m]&c&&(u[m]|=c),g&=~x}}function L3(u){return u&=-u,2<u?8<u?u&134217727?32:268435456:8:2}function U3(){var u=ue.p;return u!==0?u:(u=window.event,u===void 0?32:s5(u.type))}function rY(u,c){var g=ue.p;try{return ue.p=u,c()}finally{ue.p=g}}var $o=Math.random().toString(36).slice(2),Xn="__reactFiber$"+$o,ki="__reactProps$"+$o,Uc="__reactContainer$"+$o,Yx="__reactEvents$"+$o,aY="__reactListeners$"+$o,sY="__reactHandles$"+$o,B3="__reactResources$"+$o,ch="__reactMarker$"+$o;function Xx(u){delete u[Xn],delete u[ki],delete u[Yx],delete u[aY],delete u[sY]}function Ku(u){var c=u[Xn];if(c)return c;for(var g=u.parentNode;g;){if(c=g[Uc]||g[Xn]){if(g=c.alternate,c.child!==null||g!==null&&g.child!==null)for(u=GD(u);u!==null;){if(g=u[Xn])return g;u=GD(u)}return c}u=g,g=u.parentNode}return null}function Bc(u){if(u=u[Xn]||u[Uc]){var c=u.tag;if(c===5||c===6||c===13||c===26||c===27||c===3)return u}return null}function fh(u){var c=u.tag;if(c===5||c===26||c===27||c===6)return u.stateNode;throw Error(i(33))}function jc(u){var c=u[B3];return c||(c=u[B3]={hoistableStyles:new Map,hoistableScripts:new Map}),c}function vn(u){u[ch]=!0}var j3=new Set,P3={};function Ju(u,c){Pc(u,c),Pc(u+"Capture",c)}function Pc(u,c){for(P3[u]=c,u=0;u<c.length;u++)j3.add(c[u])}var Ss=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),oY=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),I3={},q3={};function uY(u){return Et.call(q3,u)?!0:Et.call(I3,u)?!1:oY.test(u)?q3[u]=!0:(I3[u]=!0,!1)}function B0(u,c,g){if(uY(c))if(g===null)u.removeAttribute(c);else{switch(typeof g){case"undefined":case"function":case"symbol":u.removeAttribute(c);return;case"boolean":var m=c.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){u.removeAttribute(c);return}}u.setAttribute(c,""+g)}}function j0(u,c,g){if(g===null)u.removeAttribute(c);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":u.removeAttribute(c);return}u.setAttribute(c,""+g)}}function _s(u,c,g,m){if(m===null)u.removeAttribute(g);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":u.removeAttribute(g);return}u.setAttributeNS(c,g,""+m)}}function yr(u){switch(typeof u){case"bigint":case"boolean":case"number":case"string":case"undefined":return u;case"object":return u;default:return""}}function H3(u){var c=u.type;return(u=u.nodeName)&&u.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function lY(u){var c=H3(u)?"checked":"value",g=Object.getOwnPropertyDescriptor(u.constructor.prototype,c),m=""+u[c];if(!u.hasOwnProperty(c)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var x=g.get,S=g.set;return Object.defineProperty(u,c,{configurable:!0,get:function(){return x.call(this)},set:function(C){m=""+C,S.call(this,C)}}),Object.defineProperty(u,c,{enumerable:g.enumerable}),{getValue:function(){return m},setValue:function(C){m=""+C},stopTracking:function(){u._valueTracker=null,delete u[c]}}}}function P0(u){u._valueTracker||(u._valueTracker=lY(u))}function G3(u){if(!u)return!1;var c=u._valueTracker;if(!c)return!0;var g=c.getValue(),m="";return u&&(m=H3(u)?u.checked?"true":"false":u.value),u=m,u!==g?(c.setValue(u),!0):!1}function I0(u){if(u=u||(typeof document<"u"?document:void 0),typeof u>"u")return null;try{return u.activeElement||u.body}catch{return u.body}}var cY=/[\n"\\]/g;function vr(u){return u.replace(cY,function(c){return"\\"+c.charCodeAt(0).toString(16)+" "})}function Vx(u,c,g,m,x,S,C,N){u.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?u.type=C:u.removeAttribute("type"),c!=null?C==="number"?(c===0&&u.value===""||u.value!=c)&&(u.value=""+yr(c)):u.value!==""+yr(c)&&(u.value=""+yr(c)):C!=="submit"&&C!=="reset"||u.removeAttribute("value"),c!=null?Wx(u,C,yr(c)):g!=null?Wx(u,C,yr(g)):m!=null&&u.removeAttribute("value"),x==null&&S!=null&&(u.defaultChecked=!!S),x!=null&&(u.checked=x&&typeof x!="function"&&typeof x!="symbol"),N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?u.name=""+yr(N):u.removeAttribute("name")}function Y3(u,c,g,m,x,S,C,N){if(S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(u.type=S),c!=null||g!=null){if(!(S!=="submit"&&S!=="reset"||c!=null))return;g=g!=null?""+yr(g):"",c=c!=null?""+yr(c):g,N||c===u.value||(u.value=c),u.defaultValue=c}m=m??x,m=typeof m!="function"&&typeof m!="symbol"&&!!m,u.checked=N?u.checked:!!m,u.defaultChecked=!!m,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(u.name=C)}function Wx(u,c,g){c==="number"&&I0(u.ownerDocument)===u||u.defaultValue===""+g||(u.defaultValue=""+g)}function Ic(u,c,g,m){if(u=u.options,c){c={};for(var x=0;x<g.length;x++)c["$"+g[x]]=!0;for(g=0;g<u.length;g++)x=c.hasOwnProperty("$"+u[g].value),u[g].selected!==x&&(u[g].selected=x),x&&m&&(u[g].defaultSelected=!0)}else{for(g=""+yr(g),c=null,x=0;x<u.length;x++){if(u[x].value===g){u[x].selected=!0,m&&(u[x].defaultSelected=!0);return}c!==null||u[x].disabled||(c=u[x])}c!==null&&(c.selected=!0)}}function X3(u,c,g){if(c!=null&&(c=""+yr(c),c!==u.value&&(u.value=c),g==null)){u.defaultValue!==c&&(u.defaultValue=c);return}u.defaultValue=g!=null?""+yr(g):""}function V3(u,c,g,m){if(c==null){if(m!=null){if(g!=null)throw Error(i(92));if(Z(m)){if(1<m.length)throw Error(i(93));m=m[0]}g=m}g==null&&(g=""),c=g}g=yr(c),u.defaultValue=g,m=u.textContent,m===g&&m!==""&&m!==null&&(u.value=m)}function qc(u,c){if(c){var g=u.firstChild;if(g&&g===u.lastChild&&g.nodeType===3){g.nodeValue=c;return}}u.textContent=c}var fY=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function W3(u,c,g){var m=c.indexOf("--")===0;g==null||typeof g=="boolean"||g===""?m?u.setProperty(c,""):c==="float"?u.cssFloat="":u[c]="":m?u.setProperty(c,g):typeof g!="number"||g===0||fY.has(c)?c==="float"?u.cssFloat=g:u[c]=(""+g).trim():u[c]=g+"px"}function Q3(u,c,g){if(c!=null&&typeof c!="object")throw Error(i(62));if(u=u.style,g!=null){for(var m in g)!g.hasOwnProperty(m)||c!=null&&c.hasOwnProperty(m)||(m.indexOf("--")===0?u.setProperty(m,""):m==="float"?u.cssFloat="":u[m]="");for(var x in c)m=c[x],c.hasOwnProperty(x)&&g[x]!==m&&W3(u,x,m)}else for(var S in c)c.hasOwnProperty(S)&&W3(u,S,c[S])}function Qx(u){if(u.indexOf("-")===-1)return!1;switch(u){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var dY=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),hY=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function q0(u){return hY.test(""+u)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":u}var Zx=null;function Kx(u){return u=u.target||u.srcElement||window,u.correspondingUseElement&&(u=u.correspondingUseElement),u.nodeType===3?u.parentNode:u}var Hc=null,Gc=null;function Z3(u){var c=Bc(u);if(c&&(u=c.stateNode)){var g=u[ki]||null;e:switch(u=c.stateNode,c.type){case"input":if(Vx(u,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name),c=g.name,g.type==="radio"&&c!=null){for(g=u;g.parentNode;)g=g.parentNode;for(g=g.querySelectorAll('input[name="'+vr(""+c)+'"][type="radio"]'),c=0;c<g.length;c++){var m=g[c];if(m!==u&&m.form===u.form){var x=m[ki]||null;if(!x)throw Error(i(90));Vx(m,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name)}}for(c=0;c<g.length;c++)m=g[c],m.form===u.form&&G3(m)}break e;case"textarea":X3(u,g.value,g.defaultValue);break e;case"select":c=g.value,c!=null&&Ic(u,!!g.multiple,c,!1)}}}var Jx=!1;function K3(u,c,g){if(Jx)return u(c,g);Jx=!0;try{var m=u(c);return m}finally{if(Jx=!1,(Hc!==null||Gc!==null)&&(Cm(),Hc&&(c=Hc,u=Gc,Gc=Hc=null,Z3(c),u)))for(c=0;c<u.length;c++)Z3(u[c])}}function dh(u,c){var g=u.stateNode;if(g===null)return null;var m=g[ki]||null;if(m===null)return null;g=m[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(u=u.type,m=!(u==="button"||u==="input"||u==="select"||u==="textarea")),u=!m;break e;default:u=!1}if(u)return null;if(g&&typeof g!="function")throw Error(i(231,c,typeof g));return g}var e2=!1;if(Ss)try{var hh={};Object.defineProperty(hh,"passive",{get:function(){e2=!0}}),window.addEventListener("test",hh,hh),window.removeEventListener("test",hh,hh)}catch{e2=!1}var To=null,t2=null,H0=null;function J3(){if(H0)return H0;var u,c=t2,g=c.length,m,x="value"in To?To.value:To.textContent,S=x.length;for(u=0;u<g&&c[u]===x[u];u++);var C=g-u;for(m=1;m<=C&&c[g-m]===x[S-m];m++);return H0=x.slice(u,1<m?1-m:void 0)}function G0(u){var c=u.keyCode;return"charCode"in u?(u=u.charCode,u===0&&c===13&&(u=13)):u=c,u===10&&(u=13),32<=u||u===13?u:0}function Y0(){return!0}function eO(){return!1}function Oi(u){function c(g,m,x,S,C){this._reactName=g,this._targetInst=x,this.type=m,this.nativeEvent=S,this.target=C,this.currentTarget=null;for(var N in u)u.hasOwnProperty(N)&&(g=u[N],this[N]=g?g(S):S[N]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?Y0:eO,this.isPropagationStopped=eO,this}return D(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():typeof g.returnValue!="unknown"&&(g.returnValue=!1),this.isDefaultPrevented=Y0)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():typeof g.cancelBubble!="unknown"&&(g.cancelBubble=!0),this.isPropagationStopped=Y0)},persist:function(){},isPersistent:Y0}),c}var el={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(u){return u.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},X0=Oi(el),gh=D({},el,{view:0,detail:0}),gY=Oi(gh),n2,i2,ph,V0=D({},gh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:a2,button:0,buttons:0,relatedTarget:function(u){return u.relatedTarget===void 0?u.fromElement===u.srcElement?u.toElement:u.fromElement:u.relatedTarget},movementX:function(u){return"movementX"in u?u.movementX:(u!==ph&&(ph&&u.type==="mousemove"?(n2=u.screenX-ph.screenX,i2=u.screenY-ph.screenY):i2=n2=0,ph=u),n2)},movementY:function(u){return"movementY"in u?u.movementY:i2}}),tO=Oi(V0),pY=D({},V0,{dataTransfer:0}),mY=Oi(pY),yY=D({},gh,{relatedTarget:0}),r2=Oi(yY),vY=D({},el,{animationName:0,elapsedTime:0,pseudoElement:0}),bY=Oi(vY),xY=D({},el,{clipboardData:function(u){return"clipboardData"in u?u.clipboardData:window.clipboardData}}),EY=Oi(xY),SY=D({},el,{data:0}),nO=Oi(SY),_Y={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wY={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},AY={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function CY(u){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(u):(u=AY[u])?!!c[u]:!1}function a2(){return CY}var $Y=D({},gh,{key:function(u){if(u.key){var c=_Y[u.key]||u.key;if(c!=="Unidentified")return c}return u.type==="keypress"?(u=G0(u),u===13?"Enter":String.fromCharCode(u)):u.type==="keydown"||u.type==="keyup"?wY[u.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:a2,charCode:function(u){return u.type==="keypress"?G0(u):0},keyCode:function(u){return u.type==="keydown"||u.type==="keyup"?u.keyCode:0},which:function(u){return u.type==="keypress"?G0(u):u.type==="keydown"||u.type==="keyup"?u.keyCode:0}}),TY=Oi($Y),MY=D({},V0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),iO=Oi(MY),kY=D({},gh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:a2}),OY=Oi(kY),RY=D({},el,{propertyName:0,elapsedTime:0,pseudoElement:0}),DY=Oi(RY),NY=D({},V0,{deltaX:function(u){return"deltaX"in u?u.deltaX:"wheelDeltaX"in u?-u.wheelDeltaX:0},deltaY:function(u){return"deltaY"in u?u.deltaY:"wheelDeltaY"in u?-u.wheelDeltaY:"wheelDelta"in u?-u.wheelDelta:0},deltaZ:0,deltaMode:0}),zY=Oi(NY),FY=D({},el,{newState:0,oldState:0}),LY=Oi(FY),UY=[9,13,27,32],s2=Ss&&"CompositionEvent"in window,mh=null;Ss&&"documentMode"in document&&(mh=document.documentMode);var BY=Ss&&"TextEvent"in window&&!mh,rO=Ss&&(!s2||mh&&8<mh&&11>=mh),aO=" ",sO=!1;function oO(u,c){switch(u){case"keyup":return UY.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function uO(u){return u=u.detail,typeof u=="object"&&"data"in u?u.data:null}var Yc=!1;function jY(u,c){switch(u){case"compositionend":return uO(c);case"keypress":return c.which!==32?null:(sO=!0,aO);case"textInput":return u=c.data,u===aO&&sO?null:u;default:return null}}function PY(u,c){if(Yc)return u==="compositionend"||!s2&&oO(u,c)?(u=J3(),H0=t2=To=null,Yc=!1,u):null;switch(u){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return rO&&c.locale!=="ko"?null:c.data;default:return null}}var IY={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function lO(u){var c=u&&u.nodeName&&u.nodeName.toLowerCase();return c==="input"?!!IY[u.type]:c==="textarea"}function cO(u,c,g,m){Hc?Gc?Gc.push(m):Gc=[m]:Hc=m,c=Om(c,"onChange"),0<c.length&&(g=new X0("onChange","change",null,g,m),u.push({event:g,listeners:c}))}var yh=null,vh=null;function qY(u){FD(u,0)}function W0(u){var c=fh(u);if(G3(c))return u}function fO(u,c){if(u==="change")return c}var dO=!1;if(Ss){var o2;if(Ss){var u2="oninput"in document;if(!u2){var hO=document.createElement("div");hO.setAttribute("oninput","return;"),u2=typeof hO.oninput=="function"}o2=u2}else o2=!1;dO=o2&&(!document.documentMode||9<document.documentMode)}function gO(){yh&&(yh.detachEvent("onpropertychange",pO),vh=yh=null)}function pO(u){if(u.propertyName==="value"&&W0(vh)){var c=[];cO(c,vh,u,Kx(u)),K3(qY,c)}}function HY(u,c,g){u==="focusin"?(gO(),yh=c,vh=g,yh.attachEvent("onpropertychange",pO)):u==="focusout"&&gO()}function GY(u){if(u==="selectionchange"||u==="keyup"||u==="keydown")return W0(vh)}function YY(u,c){if(u==="click")return W0(c)}function XY(u,c){if(u==="input"||u==="change")return W0(c)}function VY(u,c){return u===c&&(u!==0||1/u===1/c)||u!==u&&c!==c}var Wi=typeof Object.is=="function"?Object.is:VY;function bh(u,c){if(Wi(u,c))return!0;if(typeof u!="object"||u===null||typeof c!="object"||c===null)return!1;var g=Object.keys(u),m=Object.keys(c);if(g.length!==m.length)return!1;for(m=0;m<g.length;m++){var x=g[m];if(!Et.call(c,x)||!Wi(u[x],c[x]))return!1}return!0}function mO(u){for(;u&&u.firstChild;)u=u.firstChild;return u}function yO(u,c){var g=mO(u);u=0;for(var m;g;){if(g.nodeType===3){if(m=u+g.textContent.length,u<=c&&m>=c)return{node:g,offset:c-u};u=m}e:{for(;g;){if(g.nextSibling){g=g.nextSibling;break e}g=g.parentNode}g=void 0}g=mO(g)}}function vO(u,c){return u&&c?u===c?!0:u&&u.nodeType===3?!1:c&&c.nodeType===3?vO(u,c.parentNode):"contains"in u?u.contains(c):u.compareDocumentPosition?!!(u.compareDocumentPosition(c)&16):!1:!1}function bO(u){u=u!=null&&u.ownerDocument!=null&&u.ownerDocument.defaultView!=null?u.ownerDocument.defaultView:window;for(var c=I0(u.document);c instanceof u.HTMLIFrameElement;){try{var g=typeof c.contentWindow.location.href=="string"}catch{g=!1}if(g)u=c.contentWindow;else break;c=I0(u.document)}return c}function l2(u){var c=u&&u.nodeName&&u.nodeName.toLowerCase();return c&&(c==="input"&&(u.type==="text"||u.type==="search"||u.type==="tel"||u.type==="url"||u.type==="password")||c==="textarea"||u.contentEditable==="true")}function WY(u,c){var g=bO(c);c=u.focusedElem;var m=u.selectionRange;if(g!==c&&c&&c.ownerDocument&&vO(c.ownerDocument.documentElement,c)){if(m!==null&&l2(c)){if(u=m.start,g=m.end,g===void 0&&(g=u),"selectionStart"in c)c.selectionStart=u,c.selectionEnd=Math.min(g,c.value.length);else if(g=(u=c.ownerDocument||document)&&u.defaultView||window,g.getSelection){g=g.getSelection();var x=c.textContent.length,S=Math.min(m.start,x);m=m.end===void 0?S:Math.min(m.end,x),!g.extend&&S>m&&(x=m,m=S,S=x),x=yO(c,S);var C=yO(c,m);x&&C&&(g.rangeCount!==1||g.anchorNode!==x.node||g.anchorOffset!==x.offset||g.focusNode!==C.node||g.focusOffset!==C.offset)&&(u=u.createRange(),u.setStart(x.node,x.offset),g.removeAllRanges(),S>m?(g.addRange(u),g.extend(C.node,C.offset)):(u.setEnd(C.node,C.offset),g.addRange(u)))}}for(u=[],g=c;g=g.parentNode;)g.nodeType===1&&u.push({element:g,left:g.scrollLeft,top:g.scrollTop});for(typeof c.focus=="function"&&c.focus(),c=0;c<u.length;c++)g=u[c],g.element.scrollLeft=g.left,g.element.scrollTop=g.top}}var QY=Ss&&"documentMode"in document&&11>=document.documentMode,Xc=null,c2=null,xh=null,f2=!1;function xO(u,c,g){var m=g.window===g?g.document:g.nodeType===9?g:g.ownerDocument;f2||Xc==null||Xc!==I0(m)||(m=Xc,"selectionStart"in m&&l2(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),xh&&bh(xh,m)||(xh=m,m=Om(c2,"onSelect"),0<m.length&&(c=new X0("onSelect","select",null,c,g),u.push({event:c,listeners:m}),c.target=Xc)))}function tl(u,c){var g={};return g[u.toLowerCase()]=c.toLowerCase(),g["Webkit"+u]="webkit"+c,g["Moz"+u]="moz"+c,g}var Vc={animationend:tl("Animation","AnimationEnd"),animationiteration:tl("Animation","AnimationIteration"),animationstart:tl("Animation","AnimationStart"),transitionrun:tl("Transition","TransitionRun"),transitionstart:tl("Transition","TransitionStart"),transitioncancel:tl("Transition","TransitionCancel"),transitionend:tl("Transition","TransitionEnd")},d2={},EO={};Ss&&(EO=document.createElement("div").style,"AnimationEvent"in window||(delete Vc.animationend.animation,delete Vc.animationiteration.animation,delete Vc.animationstart.animation),"TransitionEvent"in window||delete Vc.transitionend.transition);function nl(u){if(d2[u])return d2[u];if(!Vc[u])return u;var c=Vc[u],g;for(g in c)if(c.hasOwnProperty(g)&&g in EO)return d2[u]=c[g];return u}var SO=nl("animationend"),_O=nl("animationiteration"),wO=nl("animationstart"),ZY=nl("transitionrun"),KY=nl("transitionstart"),JY=nl("transitioncancel"),AO=nl("transitionend"),CO=new Map,$O="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function Qr(u,c){CO.set(u,c),Ju(c,[u])}var br=[],Wc=0,h2=0;function Q0(){for(var u=Wc,c=h2=Wc=0;c<u;){var g=br[c];br[c++]=null;var m=br[c];br[c++]=null;var x=br[c];br[c++]=null;var S=br[c];if(br[c++]=null,m!==null&&x!==null){var C=m.pending;C===null?x.next=x:(x.next=C.next,C.next=x),m.pending=x}S!==0&&TO(g,x,S)}}function Z0(u,c,g,m){br[Wc++]=u,br[Wc++]=c,br[Wc++]=g,br[Wc++]=m,h2|=m,u.lanes|=m,u=u.alternate,u!==null&&(u.lanes|=m)}function g2(u,c,g,m){return Z0(u,c,g,m),K0(u)}function Mo(u,c){return Z0(u,null,null,c),K0(u)}function TO(u,c,g){u.lanes|=g;var m=u.alternate;m!==null&&(m.lanes|=g);for(var x=!1,S=u.return;S!==null;)S.childLanes|=g,m=S.alternate,m!==null&&(m.childLanes|=g),S.tag===22&&(u=S.stateNode,u===null||u._visibility&1||(x=!0)),u=S,S=S.return;x&&c!==null&&u.tag===3&&(S=u.stateNode,x=31-Vi(g),S=S.hiddenUpdates,u=S[x],u===null?S[x]=[c]:u.push(c),c.lane=g|536870912)}function K0(u){if(50<Gh)throw Gh=0,xE=null,Error(i(185));for(var c=u.return;c!==null;)u=c,c=u.return;return u.tag===3?u.stateNode:null}var Qc={},MO=new WeakMap;function xr(u,c){if(typeof u=="object"&&u!==null){var g=MO.get(u);return g!==void 0?g:(c={value:u,source:c,stack:I(c)},MO.set(u,c),c)}return{value:u,source:c,stack:I(c)}}var Zc=[],Kc=0,J0=null,em=0,Er=[],Sr=0,il=null,ws=1,As="";function rl(u,c){Zc[Kc++]=em,Zc[Kc++]=J0,J0=u,em=c}function kO(u,c,g){Er[Sr++]=ws,Er[Sr++]=As,Er[Sr++]=il,il=u;var m=ws;u=As;var x=32-Vi(m)-1;m&=~(1<<x),g+=1;var S=32-Vi(c)+x;if(30<S){var C=x-x%5;S=(m&(1<<C)-1).toString(32),m>>=C,x-=C,ws=1<<32-Vi(c)+x|g<<x|m,As=S+u}else ws=1<<S|g<<x|m,As=u}function p2(u){u.return!==null&&(rl(u,1),kO(u,1,0))}function m2(u){for(;u===J0;)J0=Zc[--Kc],Zc[Kc]=null,em=Zc[--Kc],Zc[Kc]=null;for(;u===il;)il=Er[--Sr],Er[Sr]=null,As=Er[--Sr],Er[Sr]=null,ws=Er[--Sr],Er[Sr]=null}var ci=null,Dn=null,lt=!1,Zr=null,Oa=!1,y2=Error(i(519));function al(u){var c=Error(i(418,""));throw _h(xr(c,u)),y2}function OO(u){var c=u.stateNode,g=u.type,m=u.memoizedProps;switch(c[Xn]=u,c[ki]=m,g){case"dialog":it("cancel",c),it("close",c);break;case"iframe":case"object":case"embed":it("load",c);break;case"video":case"audio":for(g=0;g<Xh.length;g++)it(Xh[g],c);break;case"source":it("error",c);break;case"img":case"image":case"link":it("error",c),it("load",c);break;case"details":it("toggle",c);break;case"input":it("invalid",c),Y3(c,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0),P0(c);break;case"select":it("invalid",c);break;case"textarea":it("invalid",c),V3(c,m.value,m.defaultValue,m.children),P0(c)}g=m.children,typeof g!="string"&&typeof g!="number"&&typeof g!="bigint"||c.textContent===""+g||m.suppressHydrationWarning===!0||jD(c.textContent,g)?(m.popover!=null&&(it("beforetoggle",c),it("toggle",c)),m.onScroll!=null&&it("scroll",c),m.onScrollEnd!=null&&it("scrollend",c),m.onClick!=null&&(c.onclick=Rm),c=!0):c=!1,c||al(u)}function RO(u){for(ci=u.return;ci;)switch(ci.tag){case 3:case 27:Oa=!0;return;case 5:case 13:Oa=!1;return;default:ci=ci.return}}function Eh(u){if(u!==ci)return!1;if(!lt)return RO(u),lt=!0,!1;var c=!1,g;if((g=u.tag!==3&&u.tag!==27)&&((g=u.tag===5)&&(g=u.type,g=!(g!=="form"&&g!=="button")||LE(u.type,u.memoizedProps)),g=!g),g&&(c=!0),c&&Dn&&al(u),RO(u),u.tag===13){if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(i(317));e:{for(u=u.nextSibling,c=0;u;){if(u.nodeType===8)if(g=u.data,g==="/$"){if(c===0){Dn=Jr(u.nextSibling);break e}c--}else g!=="$"&&g!=="$!"&&g!=="$?"||c++;u=u.nextSibling}Dn=null}}else Dn=ci?Jr(u.stateNode.nextSibling):null;return!0}function Sh(){Dn=ci=null,lt=!1}function _h(u){Zr===null?Zr=[u]:Zr.push(u)}var wh=Error(i(460)),DO=Error(i(474)),v2={then:function(){}};function NO(u){return u=u.status,u==="fulfilled"||u==="rejected"}function tm(){}function zO(u,c,g){switch(g=u[g],g===void 0?u.push(c):g!==c&&(c.then(tm,tm),c=g),c.status){case"fulfilled":return c.value;case"rejected":throw u=c.reason,u===wh?Error(i(483)):u;default:if(typeof c.status=="string")c.then(tm,tm);else{if(u=Ot,u!==null&&100<u.shellSuspendCounter)throw Error(i(482));u=c,u.status="pending",u.then(function(m){if(c.status==="pending"){var x=c;x.status="fulfilled",x.value=m}},function(m){if(c.status==="pending"){var x=c;x.status="rejected",x.reason=m}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw u=c.reason,u===wh?Error(i(483)):u}throw Ah=c,wh}}var Ah=null;function FO(){if(Ah===null)throw Error(i(459));var u=Ah;return Ah=null,u}var Jc=null,Ch=0;function nm(u){var c=Ch;return Ch+=1,Jc===null&&(Jc=[]),zO(Jc,u,c)}function $h(u,c){c=c.props.ref,u.ref=c!==void 0?c:null}function im(u,c){throw c.$$typeof===a?Error(i(525)):(u=Object.prototype.toString.call(c),Error(i(31,u==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":u)))}function LO(u){var c=u._init;return c(u._payload)}function UO(u){function c(W,H){if(u){var Q=W.deletions;Q===null?(W.deletions=[H],W.flags|=16):Q.push(H)}}function g(W,H){if(!u)return null;for(;H!==null;)c(W,H),H=H.sibling;return null}function m(W){for(var H=new Map;W!==null;)W.key!==null?H.set(W.key,W):H.set(W.index,W),W=W.sibling;return H}function x(W,H){return W=Po(W,H),W.index=0,W.sibling=null,W}function S(W,H,Q){return W.index=Q,u?(Q=W.alternate,Q!==null?(Q=Q.index,Q<H?(W.flags|=33554434,H):Q):(W.flags|=33554434,H)):(W.flags|=1048576,H)}function C(W){return u&&W.alternate===null&&(W.flags|=33554434),W}function N(W,H,Q,le){return H===null||H.tag!==6?(H=dE(Q,W.mode,le),H.return=W,H):(H=x(H,Q),H.return=W,H)}function B(W,H,Q,le){var $e=Q.type;return $e===l?ae(W,H,Q.props.children,le,Q.key):H!==null&&(H.elementType===$e||typeof $e=="object"&&$e!==null&&$e.$$typeof===w&&LO($e)===H.type)?(H=x(H,Q.props),$h(H,Q),H.return=W,H):(H=Em(Q.type,Q.key,Q.props,null,W.mode,le),$h(H,Q),H.return=W,H)}function Y(W,H,Q,le){return H===null||H.tag!==4||H.stateNode.containerInfo!==Q.containerInfo||H.stateNode.implementation!==Q.implementation?(H=hE(Q,W.mode,le),H.return=W,H):(H=x(H,Q.children||[]),H.return=W,H)}function ae(W,H,Q,le,$e){return H===null||H.tag!==7?(H=pl(Q,W.mode,le,$e),H.return=W,H):(H=x(H,Q),H.return=W,H)}function ce(W,H,Q){if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return H=dE(""+H,W.mode,Q),H.return=W,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case s:return Q=Em(H.type,H.key,H.props,null,W.mode,Q),$h(Q,H),Q.return=W,Q;case o:return H=hE(H,W.mode,Q),H.return=W,H;case w:var le=H._init;return H=le(H._payload),ce(W,H,Q)}if(Z(H)||R(H))return H=pl(H,W.mode,Q,null),H.return=W,H;if(typeof H.then=="function")return ce(W,nm(H),Q);if(H.$$typeof===y)return ce(W,vm(W,H),Q);im(W,H)}return null}function K(W,H,Q,le){var $e=H!==null?H.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return $e!==null?null:N(W,H,""+Q,le);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case s:return Q.key===$e?B(W,H,Q,le):null;case o:return Q.key===$e?Y(W,H,Q,le):null;case w:return $e=Q._init,Q=$e(Q._payload),K(W,H,Q,le)}if(Z(Q)||R(Q))return $e!==null?null:ae(W,H,Q,le,null);if(typeof Q.then=="function")return K(W,H,nm(Q),le);if(Q.$$typeof===y)return K(W,H,vm(W,Q),le);im(W,Q)}return null}function ne(W,H,Q,le,$e){if(typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint")return W=W.get(Q)||null,N(H,W,""+le,$e);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case s:return W=W.get(le.key===null?Q:le.key)||null,B(H,W,le,$e);case o:return W=W.get(le.key===null?Q:le.key)||null,Y(H,W,le,$e);case w:var Ze=le._init;return le=Ze(le._payload),ne(W,H,Q,le,$e)}if(Z(le)||R(le))return W=W.get(Q)||null,ae(H,W,le,$e,null);if(typeof le.then=="function")return ne(W,H,Q,nm(le),$e);if(le.$$typeof===y)return ne(W,H,Q,vm(H,le),$e);im(H,le)}return null}function Re(W,H,Q,le){for(var $e=null,Ze=null,De=H,je=H=0,En=null;De!==null&&je<Q.length;je++){De.index>je?(En=De,De=null):En=De.sibling;var ct=K(W,De,Q[je],le);if(ct===null){De===null&&(De=En);break}u&&De&&ct.alternate===null&&c(W,De),H=S(ct,H,je),Ze===null?$e=ct:Ze.sibling=ct,Ze=ct,De=En}if(je===Q.length)return g(W,De),lt&&rl(W,je),$e;if(De===null){for(;je<Q.length;je++)De=ce(W,Q[je],le),De!==null&&(H=S(De,H,je),Ze===null?$e=De:Ze.sibling=De,Ze=De);return lt&&rl(W,je),$e}for(De=m(De);je<Q.length;je++)En=ne(De,W,je,Q[je],le),En!==null&&(u&&En.alternate!==null&&De.delete(En.key===null?je:En.key),H=S(En,H,je),Ze===null?$e=En:Ze.sibling=En,Ze=En);return u&&De.forEach(function(Vo){return c(W,Vo)}),lt&&rl(W,je),$e}function He(W,H,Q,le){if(Q==null)throw Error(i(151));for(var $e=null,Ze=null,De=H,je=H=0,En=null,ct=Q.next();De!==null&&!ct.done;je++,ct=Q.next()){De.index>je?(En=De,De=null):En=De.sibling;var Vo=K(W,De,ct.value,le);if(Vo===null){De===null&&(De=En);break}u&&De&&Vo.alternate===null&&c(W,De),H=S(Vo,H,je),Ze===null?$e=Vo:Ze.sibling=Vo,Ze=Vo,De=En}if(ct.done)return g(W,De),lt&&rl(W,je),$e;if(De===null){for(;!ct.done;je++,ct=Q.next())ct=ce(W,ct.value,le),ct!==null&&(H=S(ct,H,je),Ze===null?$e=ct:Ze.sibling=ct,Ze=ct);return lt&&rl(W,je),$e}for(De=m(De);!ct.done;je++,ct=Q.next())ct=ne(De,W,je,ct.value,le),ct!==null&&(u&&ct.alternate!==null&&De.delete(ct.key===null?je:ct.key),H=S(ct,H,je),Ze===null?$e=ct:Ze.sibling=ct,Ze=ct);return u&&De.forEach(function(hV){return c(W,hV)}),lt&&rl(W,je),$e}function Xt(W,H,Q,le){if(typeof Q=="object"&&Q!==null&&Q.type===l&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case s:e:{for(var $e=Q.key;H!==null;){if(H.key===$e){if($e=Q.type,$e===l){if(H.tag===7){g(W,H.sibling),le=x(H,Q.props.children),le.return=W,W=le;break e}}else if(H.elementType===$e||typeof $e=="object"&&$e!==null&&$e.$$typeof===w&&LO($e)===H.type){g(W,H.sibling),le=x(H,Q.props),$h(le,Q),le.return=W,W=le;break e}g(W,H);break}else c(W,H);H=H.sibling}Q.type===l?(le=pl(Q.props.children,W.mode,le,Q.key),le.return=W,W=le):(le=Em(Q.type,Q.key,Q.props,null,W.mode,le),$h(le,Q),le.return=W,W=le)}return C(W);case o:e:{for($e=Q.key;H!==null;){if(H.key===$e)if(H.tag===4&&H.stateNode.containerInfo===Q.containerInfo&&H.stateNode.implementation===Q.implementation){g(W,H.sibling),le=x(H,Q.children||[]),le.return=W,W=le;break e}else{g(W,H);break}else c(W,H);H=H.sibling}le=hE(Q,W.mode,le),le.return=W,W=le}return C(W);case w:return $e=Q._init,Q=$e(Q._payload),Xt(W,H,Q,le)}if(Z(Q))return Re(W,H,Q,le);if(R(Q)){if($e=R(Q),typeof $e!="function")throw Error(i(150));return Q=$e.call(Q),He(W,H,Q,le)}if(typeof Q.then=="function")return Xt(W,H,nm(Q),le);if(Q.$$typeof===y)return Xt(W,H,vm(W,Q),le);im(W,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint"?(Q=""+Q,H!==null&&H.tag===6?(g(W,H.sibling),le=x(H,Q),le.return=W,W=le):(g(W,H),le=dE(Q,W.mode,le),le.return=W,W=le),C(W)):g(W,H)}return function(W,H,Q,le){try{Ch=0;var $e=Xt(W,H,Q,le);return Jc=null,$e}catch(De){if(De===wh)throw De;var Ze=Cr(29,De,null,W.mode);return Ze.lanes=le,Ze.return=W,Ze}finally{}}}var sl=UO(!0),BO=UO(!1),ef=we(null),rm=we(0);function jO(u,c){u=Fs,ye(rm,u),ye(ef,c),Fs=u|c.baseLanes}function b2(){ye(rm,Fs),ye(ef,ef.current)}function x2(){Fs=rm.current,se(ef),se(rm)}var _r=we(null),Ra=null;function ko(u){var c=u.alternate;ye(ln,ln.current&1),ye(_r,u),Ra===null&&(c===null||ef.current!==null||c.memoizedState!==null)&&(Ra=u)}function PO(u){if(u.tag===22){if(ye(ln,ln.current),ye(_r,u),Ra===null){var c=u.alternate;c!==null&&c.memoizedState!==null&&(Ra=u)}}else Oo()}function Oo(){ye(ln,ln.current),ye(_r,_r.current)}function Cs(u){se(_r),Ra===u&&(Ra=null),se(ln)}var ln=we(0);function am(u){for(var c=u;c!==null;){if(c.tag===13){var g=c.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||g.data==="$?"||g.data==="$!"))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if(c.flags&128)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===u)break;for(;c.sibling===null;){if(c.return===null||c.return===u)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var eX=typeof AbortController<"u"?AbortController:function(){var u=[],c=this.signal={aborted:!1,addEventListener:function(g,m){u.push(m)}};this.abort=function(){c.aborted=!0,u.forEach(function(g){return g()})}},tX=e.unstable_scheduleCallback,nX=e.unstable_NormalPriority,cn={$$typeof:y,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function E2(){return{controller:new eX,data:new Map,refCount:0}}function Th(u){u.refCount--,u.refCount===0&&tX(nX,function(){u.controller.abort()})}var Mh=null,S2=0,tf=0,nf=null;function iX(u,c){if(Mh===null){var g=Mh=[];S2=0,tf=TE(),nf={status:"pending",value:void 0,then:function(m){g.push(m)}}}return S2++,c.then(IO,IO),c}function IO(){if(--S2===0&&Mh!==null){nf!==null&&(nf.status="fulfilled");var u=Mh;Mh=null,tf=0,nf=null;for(var c=0;c<u.length;c++)(0,u[c])()}}function rX(u,c){var g=[],m={status:"pending",value:null,reason:null,then:function(x){g.push(x)}};return u.then(function(){m.status="fulfilled",m.value=c;for(var x=0;x<g.length;x++)(0,g[x])(c)},function(x){for(m.status="rejected",m.reason=x,x=0;x<g.length;x++)(0,g[x])(void 0)}),m}var qO=$.S;$.S=function(u,c){typeof c=="object"&&c!==null&&typeof c.then=="function"&&iX(u,c),qO!==null&&qO(u,c)};var ol=we(null);function _2(){var u=ol.current;return u!==null?u:Ot.pooledCache}function sm(u,c){c===null?ye(ol,ol.current):ye(ol,c.pool)}function HO(){var u=_2();return u===null?null:{parent:cn._currentValue,pool:u}}var Ro=0,We=null,St=null,an=null,om=!1,rf=!1,ul=!1,um=0,kh=0,af=null,aX=0;function Jt(){throw Error(i(321))}function w2(u,c){if(c===null)return!1;for(var g=0;g<c.length&&g<u.length;g++)if(!Wi(u[g],c[g]))return!1;return!0}function A2(u,c,g,m,x,S){return Ro=S,We=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,$.H=u===null||u.memoizedState===null?ll:Do,ul=!1,S=g(m,x),ul=!1,rf&&(S=YO(c,g,m,x)),GO(u),S}function GO(u){$.H=Da;var c=St!==null&&St.next!==null;if(Ro=0,an=St=We=null,om=!1,kh=0,af=null,c)throw Error(i(300));u===null||bn||(u=u.dependencies,u!==null&&ym(u)&&(bn=!0))}function YO(u,c,g,m){We=u;var x=0;do{if(rf&&(af=null),kh=0,rf=!1,25<=x)throw Error(i(301));if(x+=1,an=St=null,u.updateQueue!=null){var S=u.updateQueue;S.lastEffect=null,S.events=null,S.stores=null,S.memoCache!=null&&(S.memoCache.index=0)}$.H=cl,S=c(g,m)}while(rf);return S}function sX(){var u=$.H,c=u.useState()[0];return c=typeof c.then=="function"?Oh(c):c,u=u.useState()[0],(St!==null?St.memoizedState:null)!==u&&(We.flags|=1024),c}function C2(){var u=um!==0;return um=0,u}function $2(u,c,g){c.updateQueue=u.updateQueue,c.flags&=-2053,u.lanes&=~g}function T2(u){if(om){for(u=u.memoizedState;u!==null;){var c=u.queue;c!==null&&(c.pending=null),u=u.next}om=!1}Ro=0,an=St=We=null,rf=!1,kh=um=0,af=null}function Ri(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return an===null?We.memoizedState=an=u:an=an.next=u,an}function sn(){if(St===null){var u=We.alternate;u=u!==null?u.memoizedState:null}else u=St.next;var c=an===null?We.memoizedState:an.next;if(c!==null)an=c,St=u;else{if(u===null)throw We.alternate===null?Error(i(467)):Error(i(310));St=u,u={memoizedState:St.memoizedState,baseState:St.baseState,baseQueue:St.baseQueue,queue:St.queue,next:null},an===null?We.memoizedState=an=u:an=an.next=u}return an}var lm;lm=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function Oh(u){var c=kh;return kh+=1,af===null&&(af=[]),u=zO(af,u,c),c=We,(an===null?c.memoizedState:an.next)===null&&(c=c.alternate,$.H=c===null||c.memoizedState===null?ll:Do),u}function cm(u){if(u!==null&&typeof u=="object"){if(typeof u.then=="function")return Oh(u);if(u.$$typeof===y)return Vn(u)}throw Error(i(438,String(u)))}function M2(u){var c=null,g=We.updateQueue;if(g!==null&&(c=g.memoCache),c==null){var m=We.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(c={data:m.data.map(function(x){return x.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),g===null&&(g=lm(),We.updateQueue=g),g.memoCache=c,g=c.data[c.index],g===void 0)for(g=c.data[c.index]=Array(u),m=0;m<u;m++)g[m]=M;return c.index++,g}function $s(u,c){return typeof c=="function"?c(u):c}function fm(u){var c=sn();return k2(c,St,u)}function k2(u,c,g){var m=u.queue;if(m===null)throw Error(i(311));m.lastRenderedReducer=g;var x=u.baseQueue,S=m.pending;if(S!==null){if(x!==null){var C=x.next;x.next=S.next,S.next=C}c.baseQueue=x=S,m.pending=null}if(S=u.baseState,x===null)u.memoizedState=S;else{c=x.next;var N=C=null,B=null,Y=c,ae=!1;do{var ce=Y.lane&-536870913;if(ce!==Y.lane?(ot&ce)===ce:(Ro&ce)===ce){var K=Y.revertLane;if(K===0)B!==null&&(B=B.next={lane:0,revertLane:0,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),ce===tf&&(ae=!0);else if((Ro&K)===K){Y=Y.next,K===tf&&(ae=!0);continue}else ce={lane:0,revertLane:Y.revertLane,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},B===null?(N=B=ce,C=S):B=B.next=ce,We.lanes|=K,Io|=K;ce=Y.action,ul&&g(S,ce),S=Y.hasEagerState?Y.eagerState:g(S,ce)}else K={lane:ce,revertLane:Y.revertLane,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},B===null?(N=B=K,C=S):B=B.next=K,We.lanes|=ce,Io|=ce;Y=Y.next}while(Y!==null&&Y!==c);if(B===null?C=S:B.next=N,!Wi(S,u.memoizedState)&&(bn=!0,ae&&(g=nf,g!==null)))throw g;u.memoizedState=S,u.baseState=C,u.baseQueue=B,m.lastRenderedState=S}return x===null&&(m.lanes=0),[u.memoizedState,m.dispatch]}function O2(u){var c=sn(),g=c.queue;if(g===null)throw Error(i(311));g.lastRenderedReducer=u;var m=g.dispatch,x=g.pending,S=c.memoizedState;if(x!==null){g.pending=null;var C=x=x.next;do S=u(S,C.action),C=C.next;while(C!==x);Wi(S,c.memoizedState)||(bn=!0),c.memoizedState=S,c.baseQueue===null&&(c.baseState=S),g.lastRenderedState=S}return[S,m]}function XO(u,c,g){var m=We,x=sn(),S=lt;if(S){if(g===void 0)throw Error(i(407));g=g()}else g=c();var C=!Wi((St||x).memoizedState,g);if(C&&(x.memoizedState=g,bn=!0),x=x.queue,N2(QO.bind(null,m,x,u),[u]),x.getSnapshot!==c||C||an!==null&&an.memoizedState.tag&1){if(m.flags|=2048,sf(9,WO.bind(null,m,x,g,c),{destroy:void 0},null),Ot===null)throw Error(i(349));S||Ro&60||VO(m,c,g)}return g}function VO(u,c,g){u.flags|=16384,u={getSnapshot:c,value:g},c=We.updateQueue,c===null?(c=lm(),We.updateQueue=c,c.stores=[u]):(g=c.stores,g===null?c.stores=[u]:g.push(u))}function WO(u,c,g,m){c.value=g,c.getSnapshot=m,ZO(c)&&KO(u)}function QO(u,c,g){return g(function(){ZO(c)&&KO(u)})}function ZO(u){var c=u.getSnapshot;u=u.value;try{var g=c();return!Wi(u,g)}catch{return!0}}function KO(u){var c=Mo(u,2);c!==null&&fi(c,u,2)}function R2(u){var c=Ri();if(typeof u=="function"){var g=u;if(u=g(),ul){Co(!0);try{g()}finally{Co(!1)}}}return c.memoizedState=c.baseState=u,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$s,lastRenderedState:u},c}function JO(u,c,g,m){return u.baseState=g,k2(u,St,typeof m=="function"?m:$s)}function oX(u,c,g,m,x){if(gm(u))throw Error(i(485));if(u=c.action,u!==null){var S={payload:x,action:u,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){S.listeners.push(C)}};$.T!==null?g(!0):S.isTransition=!1,m(S),g=c.pending,g===null?(S.next=c.pending=S,eR(c,S)):(S.next=g.next,c.pending=g.next=S)}}function eR(u,c){var g=c.action,m=c.payload,x=u.state;if(c.isTransition){var S=$.T,C={};$.T=C;try{var N=g(x,m),B=$.S;B!==null&&B(C,N),tR(u,c,N)}catch(Y){D2(u,c,Y)}finally{$.T=S}}else try{S=g(x,m),tR(u,c,S)}catch(Y){D2(u,c,Y)}}function tR(u,c,g){g!==null&&typeof g=="object"&&typeof g.then=="function"?g.then(function(m){nR(u,c,m)},function(m){return D2(u,c,m)}):nR(u,c,g)}function nR(u,c,g){c.status="fulfilled",c.value=g,iR(c),u.state=g,c=u.pending,c!==null&&(g=c.next,g===c?u.pending=null:(g=g.next,c.next=g,eR(u,g)))}function D2(u,c,g){var m=u.pending;if(u.pending=null,m!==null){m=m.next;do c.status="rejected",c.reason=g,iR(c),c=c.next;while(c!==m)}u.action=null}function iR(u){u=u.listeners;for(var c=0;c<u.length;c++)(0,u[c])()}function rR(u,c){return c}function aR(u,c){if(lt){var g=Ot.formState;if(g!==null){e:{var m=We;if(lt){if(Dn){t:{for(var x=Dn,S=Oa;x.nodeType!==8;){if(!S){x=null;break t}if(x=Jr(x.nextSibling),x===null){x=null;break t}}S=x.data,x=S==="F!"||S==="F"?x:null}if(x){Dn=Jr(x.nextSibling),m=x.data==="F!";break e}}al(m)}m=!1}m&&(c=g[0])}}return g=Ri(),g.memoizedState=g.baseState=c,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:rR,lastRenderedState:c},g.queue=m,g=_R.bind(null,We,m),m.dispatch=g,m=R2(!1),S=B2.bind(null,We,!1,m.queue),m=Ri(),x={state:c,dispatch:null,action:u,pending:null},m.queue=x,g=oX.bind(null,We,x,S,g),x.dispatch=g,m.memoizedState=u,[c,g,!1]}function sR(u){var c=sn();return oR(c,St,u)}function oR(u,c,g){c=k2(u,c,rR)[0],u=fm($s)[0],c=typeof c=="object"&&c!==null&&typeof c.then=="function"?Oh(c):c;var m=sn(),x=m.queue,S=x.dispatch;return g!==m.memoizedState&&(We.flags|=2048,sf(9,uX.bind(null,x,g),{destroy:void 0},null)),[c,S,u]}function uX(u,c){u.action=c}function uR(u){var c=sn(),g=St;if(g!==null)return oR(c,g,u);sn(),c=c.memoizedState,g=sn();var m=g.queue.dispatch;return g.memoizedState=u,[c,m,!1]}function sf(u,c,g,m){return u={tag:u,create:c,inst:g,deps:m,next:null},c=We.updateQueue,c===null&&(c=lm(),We.updateQueue=c),g=c.lastEffect,g===null?c.lastEffect=u.next=u:(m=g.next,g.next=u,u.next=m,c.lastEffect=u),u}function lR(){return sn().memoizedState}function dm(u,c,g,m){var x=Ri();We.flags|=u,x.memoizedState=sf(1|c,g,{destroy:void 0},m===void 0?null:m)}function hm(u,c,g,m){var x=sn();m=m===void 0?null:m;var S=x.memoizedState.inst;St!==null&&m!==null&&w2(m,St.memoizedState.deps)?x.memoizedState=sf(c,g,S,m):(We.flags|=u,x.memoizedState=sf(1|c,g,S,m))}function cR(u,c){dm(8390656,8,u,c)}function N2(u,c){hm(2048,8,u,c)}function fR(u,c){return hm(4,2,u,c)}function dR(u,c){return hm(4,4,u,c)}function hR(u,c){if(typeof c=="function"){u=u();var g=c(u);return function(){typeof g=="function"?g():c(null)}}if(c!=null)return u=u(),c.current=u,function(){c.current=null}}function gR(u,c,g){g=g!=null?g.concat([u]):null,hm(4,4,hR.bind(null,c,u),g)}function z2(){}function pR(u,c){var g=sn();c=c===void 0?null:c;var m=g.memoizedState;return c!==null&&w2(c,m[1])?m[0]:(g.memoizedState=[u,c],u)}function mR(u,c){var g=sn();c=c===void 0?null:c;var m=g.memoizedState;if(c!==null&&w2(c,m[1]))return m[0];if(m=u(),ul){Co(!0);try{u()}finally{Co(!1)}}return g.memoizedState=[m,c],m}function F2(u,c,g){return g===void 0||Ro&1073741824?u.memoizedState=c:(u.memoizedState=g,u=vD(),We.lanes|=u,Io|=u,g)}function yR(u,c,g,m){return Wi(g,c)?g:ef.current!==null?(u=F2(u,g,m),Wi(u,c)||(bn=!0),u):Ro&42?(u=vD(),We.lanes|=u,Io|=u,c):(bn=!0,u.memoizedState=g)}function vR(u,c,g,m,x){var S=ue.p;ue.p=S!==0&&8>S?S:8;var C=$.T,N={};$.T=N,B2(u,!1,c,g);try{var B=x(),Y=$.S;if(Y!==null&&Y(N,B),B!==null&&typeof B=="object"&&typeof B.then=="function"){var ae=rX(B,m);Rh(u,c,ae,Ji(u))}else Rh(u,c,m,Ji(u))}catch(ce){Rh(u,c,{then:function(){},status:"rejected",reason:ce},Ji())}finally{ue.p=S,$.T=C}}function lX(){}function L2(u,c,g,m){if(u.tag!==5)throw Error(i(476));var x=bR(u).queue;vR(u,x,c,de,g===null?lX:function(){return xR(u),g(m)})}function bR(u){var c=u.memoizedState;if(c!==null)return c;c={memoizedState:de,baseState:de,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$s,lastRenderedState:de},next:null};var g={};return c.next={memoizedState:g,baseState:g,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$s,lastRenderedState:g},next:null},u.memoizedState=c,u=u.alternate,u!==null&&(u.memoizedState=c),c}function xR(u){var c=bR(u).next.queue;Rh(u,c,{},Ji())}function U2(){return Vn(Kh)}function ER(){return sn().memoizedState}function SR(){return sn().memoizedState}function cX(u){for(var c=u.return;c!==null;){switch(c.tag){case 24:case 3:var g=Ji();u=Fo(g);var m=Lo(c,u,g);m!==null&&(fi(m,c,g),zh(m,c,g)),c={cache:E2()},u.payload=c;return}c=c.return}}function fX(u,c,g){var m=Ji();g={lane:m,revertLane:0,action:g,hasEagerState:!1,eagerState:null,next:null},gm(u)?wR(c,g):(g=g2(u,c,g,m),g!==null&&(fi(g,u,m),AR(g,c,m)))}function _R(u,c,g){var m=Ji();Rh(u,c,g,m)}function Rh(u,c,g,m){var x={lane:m,revertLane:0,action:g,hasEagerState:!1,eagerState:null,next:null};if(gm(u))wR(c,x);else{var S=u.alternate;if(u.lanes===0&&(S===null||S.lanes===0)&&(S=c.lastRenderedReducer,S!==null))try{var C=c.lastRenderedState,N=S(C,g);if(x.hasEagerState=!0,x.eagerState=N,Wi(N,C))return Z0(u,c,x,0),Ot===null&&Q0(),!1}catch{}finally{}if(g=g2(u,c,x,m),g!==null)return fi(g,u,m),AR(g,c,m),!0}return!1}function B2(u,c,g,m){if(m={lane:2,revertLane:TE(),action:m,hasEagerState:!1,eagerState:null,next:null},gm(u)){if(c)throw Error(i(479))}else c=g2(u,g,m,2),c!==null&&fi(c,u,2)}function gm(u){var c=u.alternate;return u===We||c!==null&&c===We}function wR(u,c){rf=om=!0;var g=u.pending;g===null?c.next=c:(c.next=g.next,g.next=c),u.pending=c}function AR(u,c,g){if(g&4194176){var m=c.lanes;m&=u.pendingLanes,g|=m,c.lanes=g,F3(u,g)}}var Da={readContext:Vn,use:cm,useCallback:Jt,useContext:Jt,useEffect:Jt,useImperativeHandle:Jt,useLayoutEffect:Jt,useInsertionEffect:Jt,useMemo:Jt,useReducer:Jt,useRef:Jt,useState:Jt,useDebugValue:Jt,useDeferredValue:Jt,useTransition:Jt,useSyncExternalStore:Jt,useId:Jt};Da.useCacheRefresh=Jt,Da.useMemoCache=Jt,Da.useHostTransitionStatus=Jt,Da.useFormState=Jt,Da.useActionState=Jt,Da.useOptimistic=Jt;var ll={readContext:Vn,use:cm,useCallback:function(u,c){return Ri().memoizedState=[u,c===void 0?null:c],u},useContext:Vn,useEffect:cR,useImperativeHandle:function(u,c,g){g=g!=null?g.concat([u]):null,dm(4194308,4,hR.bind(null,c,u),g)},useLayoutEffect:function(u,c){return dm(4194308,4,u,c)},useInsertionEffect:function(u,c){dm(4,2,u,c)},useMemo:function(u,c){var g=Ri();c=c===void 0?null:c;var m=u();if(ul){Co(!0);try{u()}finally{Co(!1)}}return g.memoizedState=[m,c],m},useReducer:function(u,c,g){var m=Ri();if(g!==void 0){var x=g(c);if(ul){Co(!0);try{g(c)}finally{Co(!1)}}}else x=c;return m.memoizedState=m.baseState=x,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:x},m.queue=u,u=u.dispatch=fX.bind(null,We,u),[m.memoizedState,u]},useRef:function(u){var c=Ri();return u={current:u},c.memoizedState=u},useState:function(u){u=R2(u);var c=u.queue,g=_R.bind(null,We,c);return c.dispatch=g,[u.memoizedState,g]},useDebugValue:z2,useDeferredValue:function(u,c){var g=Ri();return F2(g,u,c)},useTransition:function(){var u=R2(!1);return u=vR.bind(null,We,u.queue,!0,!1),Ri().memoizedState=u,[!1,u]},useSyncExternalStore:function(u,c,g){var m=We,x=Ri();if(lt){if(g===void 0)throw Error(i(407));g=g()}else{if(g=c(),Ot===null)throw Error(i(349));ot&60||VO(m,c,g)}x.memoizedState=g;var S={value:g,getSnapshot:c};return x.queue=S,cR(QO.bind(null,m,S,u),[u]),m.flags|=2048,sf(9,WO.bind(null,m,S,g,c),{destroy:void 0},null),g},useId:function(){var u=Ri(),c=Ot.identifierPrefix;if(lt){var g=As,m=ws;g=(m&~(1<<32-Vi(m)-1)).toString(32)+g,c=":"+c+"R"+g,g=um++,0<g&&(c+="H"+g.toString(32)),c+=":"}else g=aX++,c=":"+c+"r"+g.toString(32)+":";return u.memoizedState=c},useCacheRefresh:function(){return Ri().memoizedState=cX.bind(null,We)}};ll.useMemoCache=M2,ll.useHostTransitionStatus=U2,ll.useFormState=aR,ll.useActionState=aR,ll.useOptimistic=function(u){var c=Ri();c.memoizedState=c.baseState=u;var g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=g,c=B2.bind(null,We,!0,g),g.dispatch=c,[u,c]};var Do={readContext:Vn,use:cm,useCallback:pR,useContext:Vn,useEffect:N2,useImperativeHandle:gR,useInsertionEffect:fR,useLayoutEffect:dR,useMemo:mR,useReducer:fm,useRef:lR,useState:function(){return fm($s)},useDebugValue:z2,useDeferredValue:function(u,c){var g=sn();return yR(g,St.memoizedState,u,c)},useTransition:function(){var u=fm($s)[0],c=sn().memoizedState;return[typeof u=="boolean"?u:Oh(u),c]},useSyncExternalStore:XO,useId:ER};Do.useCacheRefresh=SR,Do.useMemoCache=M2,Do.useHostTransitionStatus=U2,Do.useFormState=sR,Do.useActionState=sR,Do.useOptimistic=function(u,c){var g=sn();return JO(g,St,u,c)};var cl={readContext:Vn,use:cm,useCallback:pR,useContext:Vn,useEffect:N2,useImperativeHandle:gR,useInsertionEffect:fR,useLayoutEffect:dR,useMemo:mR,useReducer:O2,useRef:lR,useState:function(){return O2($s)},useDebugValue:z2,useDeferredValue:function(u,c){var g=sn();return St===null?F2(g,u,c):yR(g,St.memoizedState,u,c)},useTransition:function(){var u=O2($s)[0],c=sn().memoizedState;return[typeof u=="boolean"?u:Oh(u),c]},useSyncExternalStore:XO,useId:ER};cl.useCacheRefresh=SR,cl.useMemoCache=M2,cl.useHostTransitionStatus=U2,cl.useFormState=uR,cl.useActionState=uR,cl.useOptimistic=function(u,c){var g=sn();return St!==null?JO(g,St,u,c):(g.baseState=u,[u,g.queue.dispatch])};function j2(u,c,g,m){c=u.memoizedState,g=g(m,c),g=g==null?c:D({},c,g),u.memoizedState=g,u.lanes===0&&(u.updateQueue.baseState=g)}var P2={isMounted:function(u){return(u=u._reactInternals)?V(u)===u:!1},enqueueSetState:function(u,c,g){u=u._reactInternals;var m=Ji(),x=Fo(m);x.payload=c,g!=null&&(x.callback=g),c=Lo(u,x,m),c!==null&&(fi(c,u,m),zh(c,u,m))},enqueueReplaceState:function(u,c,g){u=u._reactInternals;var m=Ji(),x=Fo(m);x.tag=1,x.payload=c,g!=null&&(x.callback=g),c=Lo(u,x,m),c!==null&&(fi(c,u,m),zh(c,u,m))},enqueueForceUpdate:function(u,c){u=u._reactInternals;var g=Ji(),m=Fo(g);m.tag=2,c!=null&&(m.callback=c),c=Lo(u,m,g),c!==null&&(fi(c,u,g),zh(c,u,g))}};function CR(u,c,g,m,x,S,C){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(m,S,C):c.prototype&&c.prototype.isPureReactComponent?!bh(g,m)||!bh(x,S):!0}function $R(u,c,g,m){u=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(g,m),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(g,m),c.state!==u&&P2.enqueueReplaceState(c,c.state,null)}function fl(u,c){var g=c;if("ref"in c){g={};for(var m in c)m!=="ref"&&(g[m]=c[m])}if(u=u.defaultProps){g===c&&(g=D({},g));for(var x in u)g[x]===void 0&&(g[x]=u[x])}return g}var pm=typeof reportError=="function"?reportError:function(u){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof u=="object"&&u!==null&&typeof u.message=="string"?String(u.message):String(u),error:u});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",u);return}console.error(u)};function TR(u){pm(u)}function MR(u){console.error(u)}function kR(u){pm(u)}function mm(u,c){try{var g=u.onUncaughtError;g(c.value,{componentStack:c.stack})}catch(m){setTimeout(function(){throw m})}}function OR(u,c,g){try{var m=u.onCaughtError;m(g.value,{componentStack:g.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(x){setTimeout(function(){throw x})}}function I2(u,c,g){return g=Fo(g),g.tag=3,g.payload={element:null},g.callback=function(){mm(u,c)},g}function RR(u){return u=Fo(u),u.tag=3,u}function DR(u,c,g,m){var x=g.type.getDerivedStateFromError;if(typeof x=="function"){var S=m.value;u.payload=function(){return x(S)},u.callback=function(){OR(c,g,m)}}var C=g.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(u.callback=function(){OR(c,g,m),typeof x!="function"&&(qo===null?qo=new Set([this]):qo.add(this));var N=m.stack;this.componentDidCatch(m.value,{componentStack:N!==null?N:""})})}function dX(u,c,g,m,x){if(g.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(c=g.alternate,c!==null&&Nh(c,g,x,!0),g=_r.current,g!==null){switch(g.tag){case 13:return Ra===null?_E():g.alternate===null&&Yt===0&&(Yt=3),g.flags&=-257,g.flags|=65536,g.lanes=x,m===v2?g.flags|=16384:(c=g.updateQueue,c===null?g.updateQueue=new Set([m]):c.add(m),AE(u,m,x)),!1;case 22:return g.flags|=65536,m===v2?g.flags|=16384:(c=g.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([m])},g.updateQueue=c):(g=c.retryQueue,g===null?c.retryQueue=new Set([m]):g.add(m)),AE(u,m,x)),!1}throw Error(i(435,g.tag))}return AE(u,m,x),_E(),!1}if(lt)return c=_r.current,c!==null?(!(c.flags&65536)&&(c.flags|=256),c.flags|=65536,c.lanes=x,m!==y2&&(u=Error(i(422),{cause:m}),_h(xr(u,g)))):(m!==y2&&(c=Error(i(423),{cause:m}),_h(xr(c,g))),u=u.current.alternate,u.flags|=65536,x&=-x,u.lanes|=x,m=xr(m,g),x=I2(u.stateNode,m,x),iE(u,x),Yt!==4&&(Yt=2)),!1;var S=Error(i(520),{cause:m});if(S=xr(S,g),qh===null?qh=[S]:qh.push(S),Yt!==4&&(Yt=2),c===null)return!0;m=xr(m,g),g=c;do{switch(g.tag){case 3:return g.flags|=65536,u=x&-x,g.lanes|=u,u=I2(g.stateNode,m,u),iE(g,u),!1;case 1:if(c=g.type,S=g.stateNode,(g.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(qo===null||!qo.has(S))))return g.flags|=65536,x&=-x,g.lanes|=x,x=RR(x),DR(x,u,g,m),iE(g,x),!1}g=g.return}while(g!==null);return!1}var NR=Error(i(461)),bn=!1;function Nn(u,c,g,m){c.child=u===null?BO(c,null,g,m):sl(c,u.child,g,m)}function zR(u,c,g,m,x){g=g.render;var S=c.ref;if("ref"in m){var C={};for(var N in m)N!=="ref"&&(C[N]=m[N])}else C=m;return hl(c),m=A2(u,c,g,C,S,x),N=C2(),u!==null&&!bn?($2(u,c,x),Ts(u,c,x)):(lt&&N&&p2(c),c.flags|=1,Nn(u,c,m,x),c.child)}function FR(u,c,g,m,x){if(u===null){var S=g.type;return typeof S=="function"&&!fE(S)&&S.defaultProps===void 0&&g.compare===null?(c.tag=15,c.type=S,LR(u,c,S,m,x)):(u=Em(g.type,null,m,c,c.mode,x),u.ref=c.ref,u.return=c,c.child=u)}if(S=u.child,!Z2(u,x)){var C=S.memoizedProps;if(g=g.compare,g=g!==null?g:bh,g(C,m)&&u.ref===c.ref)return Ts(u,c,x)}return c.flags|=1,u=Po(S,m),u.ref=c.ref,u.return=c,c.child=u}function LR(u,c,g,m,x){if(u!==null){var S=u.memoizedProps;if(bh(S,m)&&u.ref===c.ref)if(bn=!1,c.pendingProps=m=S,Z2(u,x))u.flags&131072&&(bn=!0);else return c.lanes=u.lanes,Ts(u,c,x)}return q2(u,c,g,m,x)}function UR(u,c,g){var m=c.pendingProps,x=m.children,S=(c.stateNode._pendingVisibility&2)!==0,C=u!==null?u.memoizedState:null;if(Dh(u,c),m.mode==="hidden"||S){if(c.flags&128){if(m=C!==null?C.baseLanes|g:g,u!==null){for(x=c.child=u.child,S=0;x!==null;)S=S|x.lanes|x.childLanes,x=x.sibling;c.childLanes=S&~m}else c.childLanes=0,c.child=null;return BR(u,c,m,g)}if(g&536870912)c.memoizedState={baseLanes:0,cachePool:null},u!==null&&sm(c,C!==null?C.cachePool:null),C!==null?jO(c,C):b2(),PO(c);else return c.lanes=c.childLanes=536870912,BR(u,c,C!==null?C.baseLanes|g:g,g)}else C!==null?(sm(c,C.cachePool),jO(c,C),Oo(),c.memoizedState=null):(u!==null&&sm(c,null),b2(),Oo());return Nn(u,c,x,g),c.child}function BR(u,c,g,m){var x=_2();return x=x===null?null:{parent:cn._currentValue,pool:x},c.memoizedState={baseLanes:g,cachePool:x},u!==null&&sm(c,null),b2(),PO(c),u!==null&&Nh(u,c,m,!0),null}function Dh(u,c){var g=c.ref;if(g===null)u!==null&&u.ref!==null&&(c.flags|=2097664);else{if(typeof g!="function"&&typeof g!="object")throw Error(i(284));(u===null||u.ref!==g)&&(c.flags|=2097664)}}function q2(u,c,g,m,x){return hl(c),g=A2(u,c,g,m,void 0,x),m=C2(),u!==null&&!bn?($2(u,c,x),Ts(u,c,x)):(lt&&m&&p2(c),c.flags|=1,Nn(u,c,g,x),c.child)}function jR(u,c,g,m,x,S){return hl(c),c.updateQueue=null,g=YO(c,m,g,x),GO(u),m=C2(),u!==null&&!bn?($2(u,c,S),Ts(u,c,S)):(lt&&m&&p2(c),c.flags|=1,Nn(u,c,g,S),c.child)}function PR(u,c,g,m,x){if(hl(c),c.stateNode===null){var S=Qc,C=g.contextType;typeof C=="object"&&C!==null&&(S=Vn(C)),S=new g(m,S),c.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,S.updater=P2,c.stateNode=S,S._reactInternals=c,S=c.stateNode,S.props=m,S.state=c.memoizedState,S.refs={},tE(c),C=g.contextType,S.context=typeof C=="object"&&C!==null?Vn(C):Qc,S.state=c.memoizedState,C=g.getDerivedStateFromProps,typeof C=="function"&&(j2(c,g,C,m),S.state=c.memoizedState),typeof g.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(C=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),C!==S.state&&P2.enqueueReplaceState(S,S.state,null),Lh(c,m,S,x),Fh(),S.state=c.memoizedState),typeof S.componentDidMount=="function"&&(c.flags|=4194308),m=!0}else if(u===null){S=c.stateNode;var N=c.memoizedProps,B=fl(g,N);S.props=B;var Y=S.context,ae=g.contextType;C=Qc,typeof ae=="object"&&ae!==null&&(C=Vn(ae));var ce=g.getDerivedStateFromProps;ae=typeof ce=="function"||typeof S.getSnapshotBeforeUpdate=="function",N=c.pendingProps!==N,ae||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(N||Y!==C)&&$R(c,S,m,C),zo=!1;var K=c.memoizedState;S.state=K,Lh(c,m,S,x),Fh(),Y=c.memoizedState,N||K!==Y||zo?(typeof ce=="function"&&(j2(c,g,ce,m),Y=c.memoizedState),(B=zo||CR(c,g,B,m,K,Y,C))?(ae||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(c.flags|=4194308)):(typeof S.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=m,c.memoizedState=Y),S.props=m,S.state=Y,S.context=C,m=B):(typeof S.componentDidMount=="function"&&(c.flags|=4194308),m=!1)}else{S=c.stateNode,nE(u,c),C=c.memoizedProps,ae=fl(g,C),S.props=ae,ce=c.pendingProps,K=S.context,Y=g.contextType,B=Qc,typeof Y=="object"&&Y!==null&&(B=Vn(Y)),N=g.getDerivedStateFromProps,(Y=typeof N=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(C!==ce||K!==B)&&$R(c,S,m,B),zo=!1,K=c.memoizedState,S.state=K,Lh(c,m,S,x),Fh();var ne=c.memoizedState;C!==ce||K!==ne||zo||u!==null&&u.dependencies!==null&&ym(u.dependencies)?(typeof N=="function"&&(j2(c,g,N,m),ne=c.memoizedState),(ae=zo||CR(c,g,ae,m,K,ne,B)||u!==null&&u.dependencies!==null&&ym(u.dependencies))?(Y||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(m,ne,B),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(m,ne,B)),typeof S.componentDidUpdate=="function"&&(c.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof S.componentDidUpdate!="function"||C===u.memoizedProps&&K===u.memoizedState||(c.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||C===u.memoizedProps&&K===u.memoizedState||(c.flags|=1024),c.memoizedProps=m,c.memoizedState=ne),S.props=m,S.state=ne,S.context=B,m=ae):(typeof S.componentDidUpdate!="function"||C===u.memoizedProps&&K===u.memoizedState||(c.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||C===u.memoizedProps&&K===u.memoizedState||(c.flags|=1024),m=!1)}return S=m,Dh(u,c),m=(c.flags&128)!==0,S||m?(S=c.stateNode,g=m&&typeof g.getDerivedStateFromError!="function"?null:S.render(),c.flags|=1,u!==null&&m?(c.child=sl(c,u.child,null,x),c.child=sl(c,null,g,x)):Nn(u,c,g,x),c.memoizedState=S.state,u=c.child):u=Ts(u,c,x),u}function IR(u,c,g,m){return Sh(),c.flags|=256,Nn(u,c,g,m),c.child}var H2={dehydrated:null,treeContext:null,retryLane:0};function G2(u){return{baseLanes:u,cachePool:HO()}}function Y2(u,c,g){return u=u!==null?u.childLanes&~g:0,c&&(u|=$r),u}function qR(u,c,g){var m=c.pendingProps,x=!1,S=(c.flags&128)!==0,C;if((C=S)||(C=u!==null&&u.memoizedState===null?!1:(ln.current&2)!==0),C&&(x=!0,c.flags&=-129),C=(c.flags&32)!==0,c.flags&=-33,u===null){if(lt){if(x?ko(c):Oo(),lt){var N=Dn,B;if(B=N){e:{for(B=N,N=Oa;B.nodeType!==8;){if(!N){N=null;break e}if(B=Jr(B.nextSibling),B===null){N=null;break e}}N=B}N!==null?(c.memoizedState={dehydrated:N,treeContext:il!==null?{id:ws,overflow:As}:null,retryLane:536870912},B=Cr(18,null,null,0),B.stateNode=N,B.return=c,c.child=B,ci=c,Dn=null,B=!0):B=!1}B||al(c)}if(N=c.memoizedState,N!==null&&(N=N.dehydrated,N!==null))return N.data==="$!"?c.lanes=16:c.lanes=536870912,null;Cs(c)}return N=m.children,m=m.fallback,x?(Oo(),x=c.mode,N=V2({mode:"hidden",children:N},x),m=pl(m,x,g,null),N.return=c,m.return=c,N.sibling=m,c.child=N,x=c.child,x.memoizedState=G2(g),x.childLanes=Y2(u,C,g),c.memoizedState=H2,m):(ko(c),X2(c,N))}if(B=u.memoizedState,B!==null&&(N=B.dehydrated,N!==null)){if(S)c.flags&256?(ko(c),c.flags&=-257,c=W2(u,c,g)):c.memoizedState!==null?(Oo(),c.child=u.child,c.flags|=128,c=null):(Oo(),x=m.fallback,N=c.mode,m=V2({mode:"visible",children:m.children},N),x=pl(x,N,g,null),x.flags|=2,m.return=c,x.return=c,m.sibling=x,c.child=m,sl(c,u.child,null,g),m=c.child,m.memoizedState=G2(g),m.childLanes=Y2(u,C,g),c.memoizedState=H2,c=x);else if(ko(c),N.data==="$!"){if(C=N.nextSibling&&N.nextSibling.dataset,C)var Y=C.dgst;C=Y,m=Error(i(419)),m.stack="",m.digest=C,_h({value:m,source:null,stack:null}),c=W2(u,c,g)}else if(bn||Nh(u,c,g,!1),C=(g&u.childLanes)!==0,bn||C){if(C=Ot,C!==null){if(m=g&-g,m&42)m=1;else switch(m){case 2:m=1;break;case 8:m=4;break;case 32:m=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:m=64;break;case 268435456:m=134217728;break;default:m=0}if(m=m&(C.suspendedLanes|g)?0:m,m!==0&&m!==B.retryLane)throw B.retryLane=m,Mo(u,m),fi(C,u,m),NR}N.data==="$?"||_E(),c=W2(u,c,g)}else N.data==="$?"?(c.flags|=128,c.child=u.child,c=$X.bind(null,u),N._reactRetry=c,c=null):(u=B.treeContext,Dn=Jr(N.nextSibling),ci=c,lt=!0,Zr=null,Oa=!1,u!==null&&(Er[Sr++]=ws,Er[Sr++]=As,Er[Sr++]=il,ws=u.id,As=u.overflow,il=c),c=X2(c,m.children),c.flags|=4096);return c}return x?(Oo(),x=m.fallback,N=c.mode,B=u.child,Y=B.sibling,m=Po(B,{mode:"hidden",children:m.children}),m.subtreeFlags=B.subtreeFlags&31457280,Y!==null?x=Po(Y,x):(x=pl(x,N,g,null),x.flags|=2),x.return=c,m.return=c,m.sibling=x,c.child=m,m=x,x=c.child,N=u.child.memoizedState,N===null?N=G2(g):(B=N.cachePool,B!==null?(Y=cn._currentValue,B=B.parent!==Y?{parent:Y,pool:Y}:B):B=HO(),N={baseLanes:N.baseLanes|g,cachePool:B}),x.memoizedState=N,x.childLanes=Y2(u,C,g),c.memoizedState=H2,m):(ko(c),g=u.child,u=g.sibling,g=Po(g,{mode:"visible",children:m.children}),g.return=c,g.sibling=null,u!==null&&(C=c.deletions,C===null?(c.deletions=[u],c.flags|=16):C.push(u)),c.child=g,c.memoizedState=null,g)}function X2(u,c){return c=V2({mode:"visible",children:c},u.mode),c.return=u,u.child=c}function V2(u,c){return pD(u,c,0,null)}function W2(u,c,g){return sl(c,u.child,null,g),u=X2(c,c.pendingProps.children),u.flags|=2,c.memoizedState=null,u}function HR(u,c,g){u.lanes|=c;var m=u.alternate;m!==null&&(m.lanes|=c),J2(u.return,c,g)}function Q2(u,c,g,m,x){var S=u.memoizedState;S===null?u.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:m,tail:g,tailMode:x}:(S.isBackwards=c,S.rendering=null,S.renderingStartTime=0,S.last=m,S.tail=g,S.tailMode=x)}function GR(u,c,g){var m=c.pendingProps,x=m.revealOrder,S=m.tail;if(Nn(u,c,m.children,g),m=ln.current,m&2)m=m&1|2,c.flags|=128;else{if(u!==null&&u.flags&128)e:for(u=c.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&HR(u,g,c);else if(u.tag===19)HR(u,g,c);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===c)break e;for(;u.sibling===null;){if(u.return===null||u.return===c)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}m&=1}switch(ye(ln,m),x){case"forwards":for(g=c.child,x=null;g!==null;)u=g.alternate,u!==null&&am(u)===null&&(x=g),g=g.sibling;g=x,g===null?(x=c.child,c.child=null):(x=g.sibling,g.sibling=null),Q2(c,!1,x,g,S);break;case"backwards":for(g=null,x=c.child,c.child=null;x!==null;){if(u=x.alternate,u!==null&&am(u)===null){c.child=x;break}u=x.sibling,x.sibling=g,g=x,x=u}Q2(c,!0,g,null,S);break;case"together":Q2(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function Ts(u,c,g){if(u!==null&&(c.dependencies=u.dependencies),Io|=c.lanes,!(g&c.childLanes))if(u!==null){if(Nh(u,c,g,!1),(g&c.childLanes)===0)return null}else return null;if(u!==null&&c.child!==u.child)throw Error(i(153));if(c.child!==null){for(u=c.child,g=Po(u,u.pendingProps),c.child=g,g.return=c;u.sibling!==null;)u=u.sibling,g=g.sibling=Po(u,u.pendingProps),g.return=c;g.sibling=null}return c.child}function Z2(u,c){return u.lanes&c?!0:(u=u.dependencies,!!(u!==null&&ym(u)))}function hX(u,c,g){switch(c.tag){case 3:Be(c,c.stateNode.containerInfo),No(c,cn,u.memoizedState.cache),Sh();break;case 27:case 5:pt(c);break;case 4:Be(c,c.stateNode.containerInfo);break;case 10:No(c,c.type,c.memoizedProps.value);break;case 13:var m=c.memoizedState;if(m!==null)return m.dehydrated!==null?(ko(c),c.flags|=128,null):g&c.child.childLanes?qR(u,c,g):(ko(c),u=Ts(u,c,g),u!==null?u.sibling:null);ko(c);break;case 19:var x=(u.flags&128)!==0;if(m=(g&c.childLanes)!==0,m||(Nh(u,c,g,!1),m=(g&c.childLanes)!==0),x){if(m)return GR(u,c,g);c.flags|=128}if(x=c.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),ye(ln,ln.current),m)break;return null;case 22:case 23:return c.lanes=0,UR(u,c,g);case 24:No(c,cn,u.memoizedState.cache)}return Ts(u,c,g)}function YR(u,c,g){if(u!==null)if(u.memoizedProps!==c.pendingProps)bn=!0;else{if(!Z2(u,g)&&!(c.flags&128))return bn=!1,hX(u,c,g);bn=!!(u.flags&131072)}else bn=!1,lt&&c.flags&1048576&&kO(c,em,c.index);switch(c.lanes=0,c.tag){case 16:e:{u=c.pendingProps;var m=c.elementType,x=m._init;if(m=x(m._payload),c.type=m,typeof m=="function")fE(m)?(u=fl(m,u),c.tag=1,c=PR(null,c,m,u,g)):(c.tag=0,c=q2(null,c,m,u,g));else{if(m!=null){if(x=m.$$typeof,x===v){c.tag=11,c=zR(null,c,m,u,g);break e}else if(x===_){c.tag=14,c=FR(null,c,m,u,g);break e}}throw c=k(m)||m,Error(i(306,c,""))}}return c;case 0:return q2(u,c,c.type,c.pendingProps,g);case 1:return m=c.type,x=fl(m,c.pendingProps),PR(u,c,m,x,g);case 3:e:{if(Be(c,c.stateNode.containerInfo),u===null)throw Error(i(387));var S=c.pendingProps;x=c.memoizedState,m=x.element,nE(u,c),Lh(c,S,null,g);var C=c.memoizedState;if(S=C.cache,No(c,cn,S),S!==x.cache&&eE(c,[cn],g,!0),Fh(),S=C.element,x.isDehydrated)if(x={element:S,isDehydrated:!1,cache:C.cache},c.updateQueue.baseState=x,c.memoizedState=x,c.flags&256){c=IR(u,c,S,g);break e}else if(S!==m){m=xr(Error(i(424)),c),_h(m),c=IR(u,c,S,g);break e}else for(Dn=Jr(c.stateNode.containerInfo.firstChild),ci=c,lt=!0,Zr=null,Oa=!0,g=BO(c,null,S,g),c.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling;else{if(Sh(),S===m){c=Ts(u,c,g);break e}Nn(u,c,S,g)}c=c.child}return c;case 26:return Dh(u,c),u===null?(g=WD(c.type,null,c.pendingProps,null))?c.memoizedState=g:lt||(g=c.type,u=c.pendingProps,m=Dm(Ie.current).createElement(g),m[Xn]=c,m[ki]=u,zn(m,g,u),vn(m),c.stateNode=m):c.memoizedState=WD(c.type,u.memoizedProps,c.pendingProps,u.memoizedState),null;case 27:return pt(c),u===null&&lt&&(m=c.stateNode=YD(c.type,c.pendingProps,Ie.current),ci=c,Oa=!0,Dn=Jr(m.firstChild)),m=c.pendingProps.children,u!==null||lt?Nn(u,c,m,g):c.child=sl(c,null,m,g),Dh(u,c),c.child;case 5:return u===null&&lt&&((x=m=Dn)&&(m=qX(m,c.type,c.pendingProps,Oa),m!==null?(c.stateNode=m,ci=c,Dn=Jr(m.firstChild),Oa=!1,x=!0):x=!1),x||al(c)),pt(c),x=c.type,S=c.pendingProps,C=u!==null?u.memoizedProps:null,m=S.children,LE(x,S)?m=null:C!==null&&LE(x,C)&&(c.flags|=32),c.memoizedState!==null&&(x=A2(u,c,sX,null,null,g),Kh._currentValue=x),Dh(u,c),Nn(u,c,m,g),c.child;case 6:return u===null&&lt&&((u=g=Dn)&&(g=HX(g,c.pendingProps,Oa),g!==null?(c.stateNode=g,ci=c,Dn=null,u=!0):u=!1),u||al(c)),null;case 13:return qR(u,c,g);case 4:return Be(c,c.stateNode.containerInfo),m=c.pendingProps,u===null?c.child=sl(c,null,m,g):Nn(u,c,m,g),c.child;case 11:return zR(u,c,c.type,c.pendingProps,g);case 7:return Nn(u,c,c.pendingProps,g),c.child;case 8:return Nn(u,c,c.pendingProps.children,g),c.child;case 12:return Nn(u,c,c.pendingProps.children,g),c.child;case 10:return m=c.pendingProps,No(c,c.type,m.value),Nn(u,c,m.children,g),c.child;case 9:return x=c.type._context,m=c.pendingProps.children,hl(c),x=Vn(x),m=m(x),c.flags|=1,Nn(u,c,m,g),c.child;case 14:return FR(u,c,c.type,c.pendingProps,g);case 15:return LR(u,c,c.type,c.pendingProps,g);case 19:return GR(u,c,g);case 22:return UR(u,c,g);case 24:return hl(c),m=Vn(cn),u===null?(x=_2(),x===null&&(x=Ot,S=E2(),x.pooledCache=S,S.refCount++,S!==null&&(x.pooledCacheLanes|=g),x=S),c.memoizedState={parent:m,cache:x},tE(c),No(c,cn,x)):(u.lanes&g&&(nE(u,c),Lh(c,null,null,g),Fh()),x=u.memoizedState,S=c.memoizedState,x.parent!==m?(x={parent:m,cache:m},c.memoizedState=x,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=x),No(c,cn,m)):(m=S.cache,No(c,cn,m),m!==x.cache&&eE(c,[cn],g,!0))),Nn(u,c,c.pendingProps.children,g),c.child;case 29:throw c.pendingProps}throw Error(i(156,c.tag))}var K2=we(null),dl=null,Ms=null;function No(u,c,g){ye(K2,c._currentValue),c._currentValue=g}function ks(u){u._currentValue=K2.current,se(K2)}function J2(u,c,g){for(;u!==null;){var m=u.alternate;if((u.childLanes&c)!==c?(u.childLanes|=c,m!==null&&(m.childLanes|=c)):m!==null&&(m.childLanes&c)!==c&&(m.childLanes|=c),u===g)break;u=u.return}}function eE(u,c,g,m){var x=u.child;for(x!==null&&(x.return=u);x!==null;){var S=x.dependencies;if(S!==null){var C=x.child;S=S.firstContext;e:for(;S!==null;){var N=S;S=x;for(var B=0;B<c.length;B++)if(N.context===c[B]){S.lanes|=g,N=S.alternate,N!==null&&(N.lanes|=g),J2(S.return,g,u),m||(C=null);break e}S=N.next}}else if(x.tag===18){if(C=x.return,C===null)throw Error(i(341));C.lanes|=g,S=C.alternate,S!==null&&(S.lanes|=g),J2(C,g,u),C=null}else C=x.child;if(C!==null)C.return=x;else for(C=x;C!==null;){if(C===u){C=null;break}if(x=C.sibling,x!==null){x.return=C.return,C=x;break}C=C.return}x=C}}function Nh(u,c,g,m){u=null;for(var x=c,S=!1;x!==null;){if(!S){if(x.flags&524288)S=!0;else if(x.flags&262144)break}if(x.tag===10){var C=x.alternate;if(C===null)throw Error(i(387));if(C=C.memoizedProps,C!==null){var N=x.type;Wi(x.pendingProps.value,C.value)||(u!==null?u.push(N):u=[N])}}else if(x===Oe.current){if(C=x.alternate,C===null)throw Error(i(387));C.memoizedState.memoizedState!==x.memoizedState.memoizedState&&(u!==null?u.push(Kh):u=[Kh])}x=x.return}u!==null&&eE(c,u,g,m),c.flags|=262144}function ym(u){for(u=u.firstContext;u!==null;){if(!Wi(u.context._currentValue,u.memoizedValue))return!0;u=u.next}return!1}function hl(u){dl=u,Ms=null,u=u.dependencies,u!==null&&(u.firstContext=null)}function Vn(u){return XR(dl,u)}function vm(u,c){return dl===null&&hl(u),XR(u,c)}function XR(u,c){var g=c._currentValue;if(c={context:c,memoizedValue:g,next:null},Ms===null){if(u===null)throw Error(i(308));Ms=c,u.dependencies={lanes:0,firstContext:c},u.flags|=524288}else Ms=Ms.next=c;return g}var zo=!1;function tE(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function nE(u,c){u=u.updateQueue,c.updateQueue===u&&(c.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,callbacks:null})}function Fo(u){return{lane:u,tag:0,payload:null,callback:null,next:null}}function Lo(u,c,g){var m=u.updateQueue;if(m===null)return null;if(m=m.shared,Pt&2){var x=m.pending;return x===null?c.next=c:(c.next=x.next,x.next=c),m.pending=c,c=K0(u),TO(u,null,g),c}return Z0(u,m,c,g),K0(u)}function zh(u,c,g){if(c=c.updateQueue,c!==null&&(c=c.shared,(g&4194176)!==0)){var m=c.lanes;m&=u.pendingLanes,g|=m,c.lanes=g,F3(u,g)}}function iE(u,c){var g=u.updateQueue,m=u.alternate;if(m!==null&&(m=m.updateQueue,g===m)){var x=null,S=null;if(g=g.firstBaseUpdate,g!==null){do{var C={lane:g.lane,tag:g.tag,payload:g.payload,callback:null,next:null};S===null?x=S=C:S=S.next=C,g=g.next}while(g!==null);S===null?x=S=c:S=S.next=c}else x=S=c;g={baseState:m.baseState,firstBaseUpdate:x,lastBaseUpdate:S,shared:m.shared,callbacks:m.callbacks},u.updateQueue=g;return}u=g.lastBaseUpdate,u===null?g.firstBaseUpdate=c:u.next=c,g.lastBaseUpdate=c}var rE=!1;function Fh(){if(rE){var u=nf;if(u!==null)throw u}}function Lh(u,c,g,m){rE=!1;var x=u.updateQueue;zo=!1;var S=x.firstBaseUpdate,C=x.lastBaseUpdate,N=x.shared.pending;if(N!==null){x.shared.pending=null;var B=N,Y=B.next;B.next=null,C===null?S=Y:C.next=Y,C=B;var ae=u.alternate;ae!==null&&(ae=ae.updateQueue,N=ae.lastBaseUpdate,N!==C&&(N===null?ae.firstBaseUpdate=Y:N.next=Y,ae.lastBaseUpdate=B))}if(S!==null){var ce=x.baseState;C=0,ae=Y=B=null,N=S;do{var K=N.lane&-536870913,ne=K!==N.lane;if(ne?(ot&K)===K:(m&K)===K){K!==0&&K===tf&&(rE=!0),ae!==null&&(ae=ae.next={lane:0,tag:N.tag,payload:N.payload,callback:null,next:null});e:{var Re=u,He=N;K=c;var Xt=g;switch(He.tag){case 1:if(Re=He.payload,typeof Re=="function"){ce=Re.call(Xt,ce,K);break e}ce=Re;break e;case 3:Re.flags=Re.flags&-65537|128;case 0:if(Re=He.payload,K=typeof Re=="function"?Re.call(Xt,ce,K):Re,K==null)break e;ce=D({},ce,K);break e;case 2:zo=!0}}K=N.callback,K!==null&&(u.flags|=64,ne&&(u.flags|=8192),ne=x.callbacks,ne===null?x.callbacks=[K]:ne.push(K))}else ne={lane:K,tag:N.tag,payload:N.payload,callback:N.callback,next:null},ae===null?(Y=ae=ne,B=ce):ae=ae.next=ne,C|=K;if(N=N.next,N===null){if(N=x.shared.pending,N===null)break;ne=N,N=ne.next,ne.next=null,x.lastBaseUpdate=ne,x.shared.pending=null}}while(!0);ae===null&&(B=ce),x.baseState=B,x.firstBaseUpdate=Y,x.lastBaseUpdate=ae,S===null&&(x.shared.lanes=0),Io|=C,u.lanes=C,u.memoizedState=ce}}function VR(u,c){if(typeof u!="function")throw Error(i(191,u));u.call(c)}function WR(u,c){var g=u.callbacks;if(g!==null)for(u.callbacks=null,u=0;u<g.length;u++)VR(g[u],c)}function Uh(u,c){try{var g=c.updateQueue,m=g!==null?g.lastEffect:null;if(m!==null){var x=m.next;g=x;do{if((g.tag&u)===u){m=void 0;var S=g.create,C=g.inst;m=S(),C.destroy=m}g=g.next}while(g!==x)}}catch(N){Mt(c,c.return,N)}}function Uo(u,c,g){try{var m=c.updateQueue,x=m!==null?m.lastEffect:null;if(x!==null){var S=x.next;m=S;do{if((m.tag&u)===u){var C=m.inst,N=C.destroy;if(N!==void 0){C.destroy=void 0,x=c;var B=g;try{N()}catch(Y){Mt(x,B,Y)}}}m=m.next}while(m!==S)}}catch(Y){Mt(c,c.return,Y)}}function QR(u){var c=u.updateQueue;if(c!==null){var g=u.stateNode;try{WR(c,g)}catch(m){Mt(u,u.return,m)}}}function ZR(u,c,g){g.props=fl(u.type,u.memoizedProps),g.state=u.memoizedState;try{g.componentWillUnmount()}catch(m){Mt(u,c,m)}}function gl(u,c){try{var g=u.ref;if(g!==null){var m=u.stateNode;switch(u.tag){case 26:case 27:case 5:var x=m;break;default:x=m}typeof g=="function"?u.refCleanup=g(x):g.current=x}}catch(S){Mt(u,c,S)}}function Qi(u,c){var g=u.ref,m=u.refCleanup;if(g!==null)if(typeof m=="function")try{m()}catch(x){Mt(u,c,x)}finally{u.refCleanup=null,u=u.alternate,u!=null&&(u.refCleanup=null)}else if(typeof g=="function")try{g(null)}catch(x){Mt(u,c,x)}else g.current=null}function KR(u){var c=u.type,g=u.memoizedProps,m=u.stateNode;try{e:switch(c){case"button":case"input":case"select":case"textarea":g.autoFocus&&m.focus();break e;case"img":g.src?m.src=g.src:g.srcSet&&(m.srcset=g.srcSet)}}catch(x){Mt(u,u.return,x)}}function JR(u,c,g){try{var m=u.stateNode;UX(m,u.type,g,c),m[ki]=c}catch(x){Mt(u,u.return,x)}}function eD(u){return u.tag===5||u.tag===3||u.tag===26||u.tag===27||u.tag===4}function aE(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||eD(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==27&&u.tag!==18;){if(u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function sE(u,c,g){var m=u.tag;if(m===5||m===6)u=u.stateNode,c?g.nodeType===8?g.parentNode.insertBefore(u,c):g.insertBefore(u,c):(g.nodeType===8?(c=g.parentNode,c.insertBefore(u,g)):(c=g,c.appendChild(u)),g=g._reactRootContainer,g!=null||c.onclick!==null||(c.onclick=Rm));else if(m!==4&&m!==27&&(u=u.child,u!==null))for(sE(u,c,g),u=u.sibling;u!==null;)sE(u,c,g),u=u.sibling}function bm(u,c,g){var m=u.tag;if(m===5||m===6)u=u.stateNode,c?g.insertBefore(u,c):g.appendChild(u);else if(m!==4&&m!==27&&(u=u.child,u!==null))for(bm(u,c,g),u=u.sibling;u!==null;)bm(u,c,g),u=u.sibling}var Os=!1,Gt=!1,oE=!1,tD=typeof WeakSet=="function"?WeakSet:Set,xn=null,nD=!1;function gX(u,c){if(u=u.containerInfo,zE=Bm,u=bO(u),l2(u)){if("selectionStart"in u)var g={start:u.selectionStart,end:u.selectionEnd};else e:{g=(g=u.ownerDocument)&&g.defaultView||window;var m=g.getSelection&&g.getSelection();if(m&&m.rangeCount!==0){g=m.anchorNode;var x=m.anchorOffset,S=m.focusNode;m=m.focusOffset;try{g.nodeType,S.nodeType}catch{g=null;break e}var C=0,N=-1,B=-1,Y=0,ae=0,ce=u,K=null;t:for(;;){for(var ne;ce!==g||x!==0&&ce.nodeType!==3||(N=C+x),ce!==S||m!==0&&ce.nodeType!==3||(B=C+m),ce.nodeType===3&&(C+=ce.nodeValue.length),(ne=ce.firstChild)!==null;)K=ce,ce=ne;for(;;){if(ce===u)break t;if(K===g&&++Y===x&&(N=C),K===S&&++ae===m&&(B=C),(ne=ce.nextSibling)!==null)break;ce=K,K=ce.parentNode}ce=ne}g=N===-1||B===-1?null:{start:N,end:B}}else g=null}g=g||{start:0,end:0}}else g=null;for(FE={focusedElem:u,selectionRange:g},Bm=!1,xn=c;xn!==null;)if(c=xn,u=c.child,(c.subtreeFlags&1028)!==0&&u!==null)u.return=c,xn=u;else for(;xn!==null;){switch(c=xn,S=c.alternate,u=c.flags,c.tag){case 0:break;case 11:case 15:break;case 1:if(u&1024&&S!==null){u=void 0,g=c,x=S.memoizedProps,S=S.memoizedState,m=g.stateNode;try{var Re=fl(g.type,x,g.elementType===g.type);u=m.getSnapshotBeforeUpdate(Re,S),m.__reactInternalSnapshotBeforeUpdate=u}catch(He){Mt(g,g.return,He)}}break;case 3:if(u&1024){if(u=c.stateNode.containerInfo,g=u.nodeType,g===9)jE(u);else if(g===1)switch(u.nodeName){case"HEAD":case"HTML":case"BODY":jE(u);break;default:u.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(u&1024)throw Error(i(163))}if(u=c.sibling,u!==null){u.return=c.return,xn=u;break}xn=c.return}return Re=nD,nD=!1,Re}function iD(u,c,g){var m=g.flags;switch(g.tag){case 0:case 11:case 15:Ds(u,g),m&4&&Uh(5,g);break;case 1:if(Ds(u,g),m&4)if(u=g.stateNode,c===null)try{u.componentDidMount()}catch(N){Mt(g,g.return,N)}else{var x=fl(g.type,c.memoizedProps);c=c.memoizedState;try{u.componentDidUpdate(x,c,u.__reactInternalSnapshotBeforeUpdate)}catch(N){Mt(g,g.return,N)}}m&64&&QR(g),m&512&&gl(g,g.return);break;case 3:if(Ds(u,g),m&64&&(m=g.updateQueue,m!==null)){if(u=null,g.child!==null)switch(g.child.tag){case 27:case 5:u=g.child.stateNode;break;case 1:u=g.child.stateNode}try{WR(m,u)}catch(N){Mt(g,g.return,N)}}break;case 26:Ds(u,g),m&512&&gl(g,g.return);break;case 27:case 5:Ds(u,g),c===null&&m&4&&KR(g),m&512&&gl(g,g.return);break;case 12:Ds(u,g);break;case 13:Ds(u,g),m&4&&sD(u,g);break;case 22:if(x=g.memoizedState!==null||Os,!x){c=c!==null&&c.memoizedState!==null||Gt;var S=Os,C=Gt;Os=x,(Gt=c)&&!C?Bo(u,g,(g.subtreeFlags&8772)!==0):Ds(u,g),Os=S,Gt=C}m&512&&(g.memoizedProps.mode==="manual"?gl(g,g.return):Qi(g,g.return));break;default:Ds(u,g)}}function rD(u){var c=u.alternate;c!==null&&(u.alternate=null,rD(c)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(c=u.stateNode,c!==null&&Xx(c)),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}var on=null,Zi=!1;function Rs(u,c,g){for(g=g.child;g!==null;)aD(u,c,g),g=g.sibling}function aD(u,c,g){if(Yn&&typeof Yn.onCommitFiberUnmount=="function")try{Yn.onCommitFiberUnmount(Wr,g)}catch{}switch(g.tag){case 26:Gt||Qi(g,c),Rs(u,c,g),g.memoizedState?g.memoizedState.count--:g.stateNode&&(g=g.stateNode,g.parentNode.removeChild(g));break;case 27:Gt||Qi(g,c);var m=on,x=Zi;for(on=g.stateNode,Rs(u,c,g),g=g.stateNode,c=g.attributes;c.length;)g.removeAttributeNode(c[0]);Xx(g),on=m,Zi=x;break;case 5:Gt||Qi(g,c);case 6:x=on;var S=Zi;if(on=null,Rs(u,c,g),on=x,Zi=S,on!==null)if(Zi)try{u=on,m=g.stateNode,u.nodeType===8?u.parentNode.removeChild(m):u.removeChild(m)}catch(C){Mt(g,c,C)}else try{on.removeChild(g.stateNode)}catch(C){Mt(g,c,C)}break;case 18:on!==null&&(Zi?(c=on,g=g.stateNode,c.nodeType===8?BE(c.parentNode,g):c.nodeType===1&&BE(c,g),ng(c)):BE(on,g.stateNode));break;case 4:m=on,x=Zi,on=g.stateNode.containerInfo,Zi=!0,Rs(u,c,g),on=m,Zi=x;break;case 0:case 11:case 14:case 15:Gt||Uo(2,g,c),Gt||Uo(4,g,c),Rs(u,c,g);break;case 1:Gt||(Qi(g,c),m=g.stateNode,typeof m.componentWillUnmount=="function"&&ZR(g,c,m)),Rs(u,c,g);break;case 21:Rs(u,c,g);break;case 22:Gt||Qi(g,c),Gt=(m=Gt)||g.memoizedState!==null,Rs(u,c,g),Gt=m;break;default:Rs(u,c,g)}}function sD(u,c){if(c.memoizedState===null&&(u=c.alternate,u!==null&&(u=u.memoizedState,u!==null&&(u=u.dehydrated,u!==null))))try{ng(u)}catch(g){Mt(c,c.return,g)}}function pX(u){switch(u.tag){case 13:case 19:var c=u.stateNode;return c===null&&(c=u.stateNode=new tD),c;case 22:return u=u.stateNode,c=u._retryCache,c===null&&(c=u._retryCache=new tD),c;default:throw Error(i(435,u.tag))}}function uE(u,c){var g=pX(u);c.forEach(function(m){var x=TX.bind(null,u,m);g.has(m)||(g.add(m),m.then(x,x))})}function wr(u,c){var g=c.deletions;if(g!==null)for(var m=0;m<g.length;m++){var x=g[m],S=u,C=c,N=C;e:for(;N!==null;){switch(N.tag){case 27:case 5:on=N.stateNode,Zi=!1;break e;case 3:on=N.stateNode.containerInfo,Zi=!0;break e;case 4:on=N.stateNode.containerInfo,Zi=!0;break e}N=N.return}if(on===null)throw Error(i(160));aD(S,C,x),on=null,Zi=!1,S=x.alternate,S!==null&&(S.return=null),x.return=null}if(c.subtreeFlags&13878)for(c=c.child;c!==null;)oD(c,u),c=c.sibling}var Kr=null;function oD(u,c){var g=u.alternate,m=u.flags;switch(u.tag){case 0:case 11:case 14:case 15:wr(c,u),Ar(u),m&4&&(Uo(3,u,u.return),Uh(3,u),Uo(5,u,u.return));break;case 1:wr(c,u),Ar(u),m&512&&(Gt||g===null||Qi(g,g.return)),m&64&&Os&&(u=u.updateQueue,u!==null&&(m=u.callbacks,m!==null&&(g=u.shared.hiddenCallbacks,u.shared.hiddenCallbacks=g===null?m:g.concat(m))));break;case 26:var x=Kr;if(wr(c,u),Ar(u),m&512&&(Gt||g===null||Qi(g,g.return)),m&4){var S=g!==null?g.memoizedState:null;if(m=u.memoizedState,g===null)if(m===null)if(u.stateNode===null){e:{m=u.type,g=u.memoizedProps,x=x.ownerDocument||x;t:switch(m){case"title":S=x.getElementsByTagName("title")[0],(!S||S[ch]||S[Xn]||S.namespaceURI==="http://www.w3.org/2000/svg"||S.hasAttribute("itemprop"))&&(S=x.createElement(m),x.head.insertBefore(S,x.querySelector("head > title"))),zn(S,m,g),S[Xn]=u,vn(S),m=S;break e;case"link":var C=KD("link","href",x).get(m+(g.href||""));if(C){for(var N=0;N<C.length;N++)if(S=C[N],S.getAttribute("href")===(g.href==null?null:g.href)&&S.getAttribute("rel")===(g.rel==null?null:g.rel)&&S.getAttribute("title")===(g.title==null?null:g.title)&&S.getAttribute("crossorigin")===(g.crossOrigin==null?null:g.crossOrigin)){C.splice(N,1);break t}}S=x.createElement(m),zn(S,m,g),x.head.appendChild(S);break;case"meta":if(C=KD("meta","content",x).get(m+(g.content||""))){for(N=0;N<C.length;N++)if(S=C[N],S.getAttribute("content")===(g.content==null?null:""+g.content)&&S.getAttribute("name")===(g.name==null?null:g.name)&&S.getAttribute("property")===(g.property==null?null:g.property)&&S.getAttribute("http-equiv")===(g.httpEquiv==null?null:g.httpEquiv)&&S.getAttribute("charset")===(g.charSet==null?null:g.charSet)){C.splice(N,1);break t}}S=x.createElement(m),zn(S,m,g),x.head.appendChild(S);break;default:throw Error(i(468,m))}S[Xn]=u,vn(S),m=S}u.stateNode=m}else JD(x,u.type,u.stateNode);else u.stateNode=ZD(x,m,u.memoizedProps);else S!==m?(S===null?g.stateNode!==null&&(g=g.stateNode,g.parentNode.removeChild(g)):S.count--,m===null?JD(x,u.type,u.stateNode):ZD(x,m,u.memoizedProps)):m===null&&u.stateNode!==null&&JR(u,u.memoizedProps,g.memoizedProps)}break;case 27:if(m&4&&u.alternate===null){x=u.stateNode,S=u.memoizedProps;try{for(var B=x.firstChild;B;){var Y=B.nextSibling,ae=B.nodeName;B[ch]||ae==="HEAD"||ae==="BODY"||ae==="SCRIPT"||ae==="STYLE"||ae==="LINK"&&B.rel.toLowerCase()==="stylesheet"||x.removeChild(B),B=Y}for(var ce=u.type,K=x.attributes;K.length;)x.removeAttributeNode(K[0]);zn(x,ce,S),x[Xn]=u,x[ki]=S}catch(Re){Mt(u,u.return,Re)}}case 5:if(wr(c,u),Ar(u),m&512&&(Gt||g===null||Qi(g,g.return)),u.flags&32){x=u.stateNode;try{qc(x,"")}catch(Re){Mt(u,u.return,Re)}}m&4&&u.stateNode!=null&&(x=u.memoizedProps,JR(u,x,g!==null?g.memoizedProps:x)),m&1024&&(oE=!0);break;case 6:if(wr(c,u),Ar(u),m&4){if(u.stateNode===null)throw Error(i(162));m=u.memoizedProps,g=u.stateNode;try{g.nodeValue=m}catch(Re){Mt(u,u.return,Re)}}break;case 3:if(Fm=null,x=Kr,Kr=Nm(c.containerInfo),wr(c,u),Kr=x,Ar(u),m&4&&g!==null&&g.memoizedState.isDehydrated)try{ng(c.containerInfo)}catch(Re){Mt(u,u.return,Re)}oE&&(oE=!1,uD(u));break;case 4:m=Kr,Kr=Nm(u.stateNode.containerInfo),wr(c,u),Ar(u),Kr=m;break;case 12:wr(c,u),Ar(u);break;case 13:wr(c,u),Ar(u),u.child.flags&8192&&u.memoizedState!==null!=(g!==null&&g.memoizedState!==null)&&(yE=Tt()),m&4&&(m=u.updateQueue,m!==null&&(u.updateQueue=null,uE(u,m)));break;case 22:if(m&512&&(Gt||g===null||Qi(g,g.return)),B=u.memoizedState!==null,Y=g!==null&&g.memoizedState!==null,ae=Os,ce=Gt,Os=ae||B,Gt=ce||Y,wr(c,u),Gt=ce,Os=ae,Ar(u),c=u.stateNode,c._current=u,c._visibility&=-3,c._visibility|=c._pendingVisibility&2,m&8192&&(c._visibility=B?c._visibility&-2:c._visibility|1,B&&(c=Os||Gt,g===null||Y||c||of(u)),u.memoizedProps===null||u.memoizedProps.mode!=="manual"))e:for(g=null,c=u;;){if(c.tag===5||c.tag===26||c.tag===27){if(g===null){Y=g=c;try{if(x=Y.stateNode,B)S=x.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{C=Y.stateNode,N=Y.memoizedProps.style;var ne=N!=null&&N.hasOwnProperty("display")?N.display:null;C.style.display=ne==null||typeof ne=="boolean"?"":(""+ne).trim()}}catch(Re){Mt(Y,Y.return,Re)}}}else if(c.tag===6){if(g===null){Y=c;try{Y.stateNode.nodeValue=B?"":Y.memoizedProps}catch(Re){Mt(Y,Y.return,Re)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===u)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===u)break e;for(;c.sibling===null;){if(c.return===null||c.return===u)break e;g===c&&(g=null),c=c.return}g===c&&(g=null),c.sibling.return=c.return,c=c.sibling}m&4&&(m=u.updateQueue,m!==null&&(g=m.retryQueue,g!==null&&(m.retryQueue=null,uE(u,g))));break;case 19:wr(c,u),Ar(u),m&4&&(m=u.updateQueue,m!==null&&(u.updateQueue=null,uE(u,m)));break;case 21:break;default:wr(c,u),Ar(u)}}function Ar(u){var c=u.flags;if(c&2){try{if(u.tag!==27){e:{for(var g=u.return;g!==null;){if(eD(g)){var m=g;break e}g=g.return}throw Error(i(160))}switch(m.tag){case 27:var x=m.stateNode,S=aE(u);bm(u,S,x);break;case 5:var C=m.stateNode;m.flags&32&&(qc(C,""),m.flags&=-33);var N=aE(u);bm(u,N,C);break;case 3:case 4:var B=m.stateNode.containerInfo,Y=aE(u);sE(u,Y,B);break;default:throw Error(i(161))}}}catch(ae){Mt(u,u.return,ae)}u.flags&=-3}c&4096&&(u.flags&=-4097)}function uD(u){if(u.subtreeFlags&1024)for(u=u.child;u!==null;){var c=u;uD(c),c.tag===5&&c.flags&1024&&c.stateNode.reset(),u=u.sibling}}function Ds(u,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)iD(u,c.alternate,c),c=c.sibling}function of(u){for(u=u.child;u!==null;){var c=u;switch(c.tag){case 0:case 11:case 14:case 15:Uo(4,c,c.return),of(c);break;case 1:Qi(c,c.return);var g=c.stateNode;typeof g.componentWillUnmount=="function"&&ZR(c,c.return,g),of(c);break;case 26:case 27:case 5:Qi(c,c.return),of(c);break;case 22:Qi(c,c.return),c.memoizedState===null&&of(c);break;default:of(c)}u=u.sibling}}function Bo(u,c,g){for(g=g&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var m=c.alternate,x=u,S=c,C=S.flags;switch(S.tag){case 0:case 11:case 15:Bo(x,S,g),Uh(4,S);break;case 1:if(Bo(x,S,g),m=S,x=m.stateNode,typeof x.componentDidMount=="function")try{x.componentDidMount()}catch(Y){Mt(m,m.return,Y)}if(m=S,x=m.updateQueue,x!==null){var N=m.stateNode;try{var B=x.shared.hiddenCallbacks;if(B!==null)for(x.shared.hiddenCallbacks=null,x=0;x<B.length;x++)VR(B[x],N)}catch(Y){Mt(m,m.return,Y)}}g&&C&64&&QR(S),gl(S,S.return);break;case 26:case 27:case 5:Bo(x,S,g),g&&m===null&&C&4&&KR(S),gl(S,S.return);break;case 12:Bo(x,S,g);break;case 13:Bo(x,S,g),g&&C&4&&sD(x,S);break;case 22:S.memoizedState===null&&Bo(x,S,g),gl(S,S.return);break;default:Bo(x,S,g)}c=c.sibling}}function lE(u,c){var g=null;u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(g=u.memoizedState.cachePool.pool),u=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(u=c.memoizedState.cachePool.pool),u!==g&&(u!=null&&u.refCount++,g!=null&&Th(g))}function cE(u,c){u=null,c.alternate!==null&&(u=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==u&&(c.refCount++,u!=null&&Th(u))}function jo(u,c,g,m){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)lD(u,c,g,m),c=c.sibling}function lD(u,c,g,m){var x=c.flags;switch(c.tag){case 0:case 11:case 15:jo(u,c,g,m),x&2048&&Uh(9,c);break;case 3:jo(u,c,g,m),x&2048&&(u=null,c.alternate!==null&&(u=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==u&&(c.refCount++,u!=null&&Th(u)));break;case 12:if(x&2048){jo(u,c,g,m),u=c.stateNode;try{var S=c.memoizedProps,C=S.id,N=S.onPostCommit;typeof N=="function"&&N(C,c.alternate===null?"mount":"update",u.passiveEffectDuration,-0)}catch(B){Mt(c,c.return,B)}}else jo(u,c,g,m);break;case 23:break;case 22:S=c.stateNode,c.memoizedState!==null?S._visibility&4?jo(u,c,g,m):Bh(u,c):S._visibility&4?jo(u,c,g,m):(S._visibility|=4,uf(u,c,g,m,(c.subtreeFlags&10256)!==0)),x&2048&&lE(c.alternate,c);break;case 24:jo(u,c,g,m),x&2048&&cE(c.alternate,c);break;default:jo(u,c,g,m)}}function uf(u,c,g,m,x){for(x=x&&(c.subtreeFlags&10256)!==0,c=c.child;c!==null;){var S=u,C=c,N=g,B=m,Y=C.flags;switch(C.tag){case 0:case 11:case 15:uf(S,C,N,B,x),Uh(8,C);break;case 23:break;case 22:var ae=C.stateNode;C.memoizedState!==null?ae._visibility&4?uf(S,C,N,B,x):Bh(S,C):(ae._visibility|=4,uf(S,C,N,B,x)),x&&Y&2048&&lE(C.alternate,C);break;case 24:uf(S,C,N,B,x),x&&Y&2048&&cE(C.alternate,C);break;default:uf(S,C,N,B,x)}c=c.sibling}}function Bh(u,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var g=u,m=c,x=m.flags;switch(m.tag){case 22:Bh(g,m),x&2048&&lE(m.alternate,m);break;case 24:Bh(g,m),x&2048&&cE(m.alternate,m);break;default:Bh(g,m)}c=c.sibling}}var jh=8192;function lf(u){if(u.subtreeFlags&jh)for(u=u.child;u!==null;)cD(u),u=u.sibling}function cD(u){switch(u.tag){case 26:lf(u),u.flags&jh&&u.memoizedState!==null&&iV(Kr,u.memoizedState,u.memoizedProps);break;case 5:lf(u);break;case 3:case 4:var c=Kr;Kr=Nm(u.stateNode.containerInfo),lf(u),Kr=c;break;case 22:u.memoizedState===null&&(c=u.alternate,c!==null&&c.memoizedState!==null?(c=jh,jh=16777216,lf(u),jh=c):lf(u));break;default:lf(u)}}function fD(u){var c=u.alternate;if(c!==null&&(u=c.child,u!==null)){c.child=null;do c=u.sibling,u.sibling=null,u=c;while(u!==null)}}function Ph(u){var c=u.deletions;if(u.flags&16){if(c!==null)for(var g=0;g<c.length;g++){var m=c[g];xn=m,hD(m,u)}fD(u)}if(u.subtreeFlags&10256)for(u=u.child;u!==null;)dD(u),u=u.sibling}function dD(u){switch(u.tag){case 0:case 11:case 15:Ph(u),u.flags&2048&&Uo(9,u,u.return);break;case 3:Ph(u);break;case 12:Ph(u);break;case 22:var c=u.stateNode;u.memoizedState!==null&&c._visibility&4&&(u.return===null||u.return.tag!==13)?(c._visibility&=-5,xm(u)):Ph(u);break;default:Ph(u)}}function xm(u){var c=u.deletions;if(u.flags&16){if(c!==null)for(var g=0;g<c.length;g++){var m=c[g];xn=m,hD(m,u)}fD(u)}for(u=u.child;u!==null;){switch(c=u,c.tag){case 0:case 11:case 15:Uo(8,c,c.return),xm(c);break;case 22:g=c.stateNode,g._visibility&4&&(g._visibility&=-5,xm(c));break;default:xm(c)}u=u.sibling}}function hD(u,c){for(;xn!==null;){var g=xn;switch(g.tag){case 0:case 11:case 15:Uo(8,g,c);break;case 23:case 22:if(g.memoizedState!==null&&g.memoizedState.cachePool!==null){var m=g.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:Th(g.memoizedState.cache)}if(m=g.child,m!==null)m.return=g,xn=m;else e:for(g=u;xn!==null;){m=xn;var x=m.sibling,S=m.return;if(rD(m),m===g){xn=null;break e}if(x!==null){x.return=S,xn=x;break e}xn=S}}}function mX(u,c,g,m){this.tag=u,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cr(u,c,g,m){return new mX(u,c,g,m)}function fE(u){return u=u.prototype,!(!u||!u.isReactComponent)}function Po(u,c){var g=u.alternate;return g===null?(g=Cr(u.tag,c,u.key,u.mode),g.elementType=u.elementType,g.type=u.type,g.stateNode=u.stateNode,g.alternate=u,u.alternate=g):(g.pendingProps=c,g.type=u.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=u.flags&31457280,g.childLanes=u.childLanes,g.lanes=u.lanes,g.child=u.child,g.memoizedProps=u.memoizedProps,g.memoizedState=u.memoizedState,g.updateQueue=u.updateQueue,c=u.dependencies,g.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},g.sibling=u.sibling,g.index=u.index,g.ref=u.ref,g.refCleanup=u.refCleanup,g}function gD(u,c){u.flags&=31457282;var g=u.alternate;return g===null?(u.childLanes=0,u.lanes=c,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=g.childLanes,u.lanes=g.lanes,u.child=g.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=g.memoizedProps,u.memoizedState=g.memoizedState,u.updateQueue=g.updateQueue,u.type=g.type,c=g.dependencies,u.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),u}function Em(u,c,g,m,x,S){var C=0;if(m=u,typeof u=="function")fE(u)&&(C=1);else if(typeof u=="string")C=tV(u,g,ve.current)?26:u==="html"||u==="head"||u==="body"?27:5;else e:switch(u){case l:return pl(g.children,x,S,c);case f:C=8,x|=24;break;case d:return u=Cr(12,g,c,x|2),u.elementType=d,u.lanes=S,u;case b:return u=Cr(13,g,c,x),u.elementType=b,u.lanes=S,u;case E:return u=Cr(19,g,c,x),u.elementType=E,u.lanes=S,u;case A:return pD(g,x,S,c);default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case h:case y:C=10;break e;case p:C=9;break e;case v:C=11;break e;case _:C=14;break e;case w:C=16,m=null;break e}C=29,g=Error(i(130,u===null?"null":typeof u,"")),m=null}return c=Cr(C,g,c,x),c.elementType=u,c.type=m,c.lanes=S,c}function pl(u,c,g,m){return u=Cr(7,u,m,c),u.lanes=g,u}function pD(u,c,g,m){u=Cr(22,u,m,c),u.elementType=A,u.lanes=g;var x={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var S=x._current;if(S===null)throw Error(i(456));if(!(x._pendingVisibility&2)){var C=Mo(S,2);C!==null&&(x._pendingVisibility|=2,fi(C,S,2))}},attach:function(){var S=x._current;if(S===null)throw Error(i(456));if(x._pendingVisibility&2){var C=Mo(S,2);C!==null&&(x._pendingVisibility&=-3,fi(C,S,2))}}};return u.stateNode=x,u}function dE(u,c,g){return u=Cr(6,u,null,c),u.lanes=g,u}function hE(u,c,g){return c=Cr(4,u.children!==null?u.children:[],u.key,c),c.lanes=g,c.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},c}function Ns(u){u.flags|=4}function mD(u,c){if(c.type!=="stylesheet"||c.state.loading&4)u.flags&=-16777217;else if(u.flags|=16777216,!e5(c)){if(c=_r.current,c!==null&&((ot&4194176)===ot?Ra!==null:(ot&62914560)!==ot&&!(ot&536870912)||c!==Ra))throw Ah=v2,DO;u.flags|=8192}}function Sm(u,c){c!==null&&(u.flags|=4),u.flags&16384&&(c=u.tag!==22?N3():536870912,u.lanes|=c,ff|=c)}function Ih(u,c){if(!lt)switch(u.tailMode){case"hidden":c=u.tail;for(var g=null;c!==null;)c.alternate!==null&&(g=c),c=c.sibling;g===null?u.tail=null:g.sibling=null;break;case"collapsed":g=u.tail;for(var m=null;g!==null;)g.alternate!==null&&(m=g),g=g.sibling;m===null?c||u.tail===null?u.tail=null:u.tail.sibling=null:m.sibling=null}}function jt(u){var c=u.alternate!==null&&u.alternate.child===u.child,g=0,m=0;if(c)for(var x=u.child;x!==null;)g|=x.lanes|x.childLanes,m|=x.subtreeFlags&31457280,m|=x.flags&31457280,x.return=u,x=x.sibling;else for(x=u.child;x!==null;)g|=x.lanes|x.childLanes,m|=x.subtreeFlags,m|=x.flags,x.return=u,x=x.sibling;return u.subtreeFlags|=m,u.childLanes=g,c}function yX(u,c,g){var m=c.pendingProps;switch(m2(c),c.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jt(c),null;case 1:return jt(c),null;case 3:return g=c.stateNode,m=null,u!==null&&(m=u.memoizedState.cache),c.memoizedState.cache!==m&&(c.flags|=2048),ks(cn),Te(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(u===null||u.child===null)&&(Eh(c)?Ns(c):u===null||u.memoizedState.isDehydrated&&!(c.flags&256)||(c.flags|=1024,Zr!==null&&(EE(Zr),Zr=null))),jt(c),null;case 26:return g=c.memoizedState,u===null?(Ns(c),g!==null?(jt(c),mD(c,g)):(jt(c),c.flags&=-16777217)):g?g!==u.memoizedState?(Ns(c),jt(c),mD(c,g)):(jt(c),c.flags&=-16777217):(u.memoizedProps!==m&&Ns(c),jt(c),c.flags&=-16777217),null;case 27:Ve(c),g=Ie.current;var x=c.type;if(u!==null&&c.stateNode!=null)u.memoizedProps!==m&&Ns(c);else{if(!m){if(c.stateNode===null)throw Error(i(166));return jt(c),null}u=ve.current,Eh(c)?OO(c):(u=YD(x,m,g),c.stateNode=u,Ns(c))}return jt(c),null;case 5:if(Ve(c),g=c.type,u!==null&&c.stateNode!=null)u.memoizedProps!==m&&Ns(c);else{if(!m){if(c.stateNode===null)throw Error(i(166));return jt(c),null}if(u=ve.current,Eh(c))OO(c);else{switch(x=Dm(Ie.current),u){case 1:u=x.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:u=x.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":u=x.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":u=x.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":u=x.createElement("div"),u.innerHTML="<script><\/script>",u=u.removeChild(u.firstChild);break;case"select":u=typeof m.is=="string"?x.createElement("select",{is:m.is}):x.createElement("select"),m.multiple?u.multiple=!0:m.size&&(u.size=m.size);break;default:u=typeof m.is=="string"?x.createElement(g,{is:m.is}):x.createElement(g)}}u[Xn]=c,u[ki]=m;e:for(x=c.child;x!==null;){if(x.tag===5||x.tag===6)u.appendChild(x.stateNode);else if(x.tag!==4&&x.tag!==27&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===c)break e;for(;x.sibling===null;){if(x.return===null||x.return===c)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}c.stateNode=u;e:switch(zn(u,g,m),g){case"button":case"input":case"select":case"textarea":u=!!m.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&Ns(c)}}return jt(c),c.flags&=-16777217,null;case 6:if(u&&c.stateNode!=null)u.memoizedProps!==m&&Ns(c);else{if(typeof m!="string"&&c.stateNode===null)throw Error(i(166));if(u=Ie.current,Eh(c)){if(u=c.stateNode,g=c.memoizedProps,m=null,x=ci,x!==null)switch(x.tag){case 27:case 5:m=x.memoizedProps}u[Xn]=c,u=!!(u.nodeValue===g||m!==null&&m.suppressHydrationWarning===!0||jD(u.nodeValue,g)),u||al(c)}else u=Dm(u).createTextNode(m),u[Xn]=c,c.stateNode=u}return jt(c),null;case 13:if(m=c.memoizedState,u===null||u.memoizedState!==null&&u.memoizedState.dehydrated!==null){if(x=Eh(c),m!==null&&m.dehydrated!==null){if(u===null){if(!x)throw Error(i(318));if(x=c.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(i(317));x[Xn]=c}else Sh(),!(c.flags&128)&&(c.memoizedState=null),c.flags|=4;jt(c),x=!1}else Zr!==null&&(EE(Zr),Zr=null),x=!0;if(!x)return c.flags&256?(Cs(c),c):(Cs(c),null)}if(Cs(c),c.flags&128)return c.lanes=g,c;if(g=m!==null,u=u!==null&&u.memoizedState!==null,g){m=c.child,x=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(x=m.alternate.memoizedState.cachePool.pool);var S=null;m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(S=m.memoizedState.cachePool.pool),S!==x&&(m.flags|=2048)}return g!==u&&g&&(c.child.flags|=8192),Sm(c,c.updateQueue),jt(c),null;case 4:return Te(),u===null&&RE(c.stateNode.containerInfo),jt(c),null;case 10:return ks(c.type),jt(c),null;case 19:if(se(ln),x=c.memoizedState,x===null)return jt(c),null;if(m=(c.flags&128)!==0,S=x.rendering,S===null)if(m)Ih(x,!1);else{if(Yt!==0||u!==null&&u.flags&128)for(u=c.child;u!==null;){if(S=am(u),S!==null){for(c.flags|=128,Ih(x,!1),u=S.updateQueue,c.updateQueue=u,Sm(c,u),c.subtreeFlags=0,u=g,g=c.child;g!==null;)gD(g,u),g=g.sibling;return ye(ln,ln.current&1|2),c.child}u=u.sibling}x.tail!==null&&Tt()>_m&&(c.flags|=128,m=!0,Ih(x,!1),c.lanes=4194304)}else{if(!m)if(u=am(S),u!==null){if(c.flags|=128,m=!0,u=u.updateQueue,c.updateQueue=u,Sm(c,u),Ih(x,!0),x.tail===null&&x.tailMode==="hidden"&&!S.alternate&&!lt)return jt(c),null}else 2*Tt()-x.renderingStartTime>_m&&g!==536870912&&(c.flags|=128,m=!0,Ih(x,!1),c.lanes=4194304);x.isBackwards?(S.sibling=c.child,c.child=S):(u=x.last,u!==null?u.sibling=S:c.child=S,x.last=S)}return x.tail!==null?(c=x.tail,x.rendering=c,x.tail=c.sibling,x.renderingStartTime=Tt(),c.sibling=null,u=ln.current,ye(ln,m?u&1|2:u&1),c):(jt(c),null);case 22:case 23:return Cs(c),x2(),m=c.memoizedState!==null,u!==null?u.memoizedState!==null!==m&&(c.flags|=8192):m&&(c.flags|=8192),m?g&536870912&&!(c.flags&128)&&(jt(c),c.subtreeFlags&6&&(c.flags|=8192)):jt(c),g=c.updateQueue,g!==null&&Sm(c,g.retryQueue),g=null,u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(g=u.memoizedState.cachePool.pool),m=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),m!==g&&(c.flags|=2048),u!==null&&se(ol),null;case 24:return g=null,u!==null&&(g=u.memoizedState.cache),c.memoizedState.cache!==g&&(c.flags|=2048),ks(cn),jt(c),null;case 25:return null}throw Error(i(156,c.tag))}function vX(u,c){switch(m2(c),c.tag){case 1:return u=c.flags,u&65536?(c.flags=u&-65537|128,c):null;case 3:return ks(cn),Te(),u=c.flags,u&65536&&!(u&128)?(c.flags=u&-65537|128,c):null;case 26:case 27:case 5:return Ve(c),null;case 13:if(Cs(c),u=c.memoizedState,u!==null&&u.dehydrated!==null){if(c.alternate===null)throw Error(i(340));Sh()}return u=c.flags,u&65536?(c.flags=u&-65537|128,c):null;case 19:return se(ln),null;case 4:return Te(),null;case 10:return ks(c.type),null;case 22:case 23:return Cs(c),x2(),u!==null&&se(ol),u=c.flags,u&65536?(c.flags=u&-65537|128,c):null;case 24:return ks(cn),null;case 25:return null;default:return null}}function yD(u,c){switch(m2(c),c.tag){case 3:ks(cn),Te();break;case 26:case 27:case 5:Ve(c);break;case 4:Te();break;case 13:Cs(c);break;case 19:se(ln);break;case 10:ks(c.type);break;case 22:case 23:Cs(c),x2(),u!==null&&se(ol);break;case 24:ks(cn)}}var bX={getCacheForType:function(u){var c=Vn(cn),g=c.data.get(u);return g===void 0&&(g=u(),c.data.set(u,g)),g}},xX=typeof WeakMap=="function"?WeakMap:Map,Pt=0,Ot=null,et=null,ot=0,Rt=0,Ki=null,zs=!1,cf=!1,gE=!1,Fs=0,Yt=0,Io=0,ml=0,pE=0,$r=0,ff=0,qh=null,Na=null,mE=!1,yE=0,_m=1/0,wm=null,qo=null,Am=!1,yl=null,Hh=0,vE=0,bE=null,Gh=0,xE=null;function Ji(){if(Pt&2&&ot!==0)return ot&-ot;if($.T!==null){var u=tf;return u!==0?u:TE()}return U3()}function vD(){$r===0&&($r=!(ot&536870912)||lt?D3():536870912);var u=_r.current;return u!==null&&(u.flags|=32),$r}function fi(u,c,g){(u===Ot&&Rt===2||u.cancelPendingCommit!==null)&&(df(u,0),Ls(u,ot,$r,!1)),lh(u,g),(!(Pt&2)||u!==Ot)&&(u===Ot&&(!(Pt&2)&&(ml|=g),Yt===4&&Ls(u,ot,$r,!1)),za(u))}function bD(u,c,g){if(Pt&6)throw Error(i(327));var m=!g&&(c&60)===0&&(c&u.expiredLanes)===0||uh(u,c),x=m?_X(u,c):wE(u,c,!0),S=m;do{if(x===0){cf&&!m&&Ls(u,c,0,!1);break}else if(x===6)Ls(u,c,0,!zs);else{if(g=u.current.alternate,S&&!EX(g)){x=wE(u,c,!1),S=!1;continue}if(x===2){if(S=c,u.errorRecoveryDisabledLanes&S)var C=0;else C=u.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){c=C;e:{var N=u;x=qh;var B=N.current.memoizedState.isDehydrated;if(B&&(df(N,C).flags|=256),C=wE(N,C,!1),C!==2){if(gE&&!B){N.errorRecoveryDisabledLanes|=S,ml|=S,x=4;break e}S=Na,Na=x,S!==null&&EE(S)}x=C}if(S=!1,x!==2)continue}}if(x===1){df(u,0),Ls(u,c,0,!0);break}e:{switch(m=u,x){case 0:case 1:throw Error(i(345));case 4:if((c&4194176)===c){Ls(m,c,$r,!zs);break e}break;case 2:Na=null;break;case 3:case 5:break;default:throw Error(i(329))}if(m.finishedWork=g,m.finishedLanes=c,(c&62914560)===c&&(S=yE+300-Tt(),10<S)){if(Ls(m,c,$r,!zs),U0(m,0)!==0)break e;m.timeoutHandle=qD(xD.bind(null,m,g,Na,wm,mE,c,$r,ml,ff,zs,2,-0,0),S);break e}xD(m,g,Na,wm,mE,c,$r,ml,ff,zs,0,-0,0)}}break}while(!0);za(u)}function EE(u){Na===null?Na=u:Na.push.apply(Na,u)}function xD(u,c,g,m,x,S,C,N,B,Y,ae,ce,K){var ne=c.subtreeFlags;if((ne&8192||(ne&16785408)===16785408)&&(Zh={stylesheets:null,count:0,unsuspend:nV},cD(c),c=rV(),c!==null)){u.cancelPendingCommit=c($D.bind(null,u,g,m,x,C,N,B,1,ce,K)),Ls(u,S,C,!Y);return}$D(u,g,m,x,C,N,B,ae,ce,K)}function EX(u){for(var c=u;;){var g=c.tag;if((g===0||g===11||g===15)&&c.flags&16384&&(g=c.updateQueue,g!==null&&(g=g.stores,g!==null)))for(var m=0;m<g.length;m++){var x=g[m],S=x.getSnapshot;x=x.value;try{if(!Wi(S(),x))return!1}catch{return!1}}if(g=c.child,c.subtreeFlags&16384&&g!==null)g.return=c,c=g;else{if(c===u)break;for(;c.sibling===null;){if(c.return===null||c.return===u)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function Ls(u,c,g,m){c&=~pE,c&=~ml,u.suspendedLanes|=c,u.pingedLanes&=~c,m&&(u.warmLanes|=c),m=u.expirationTimes;for(var x=c;0<x;){var S=31-Vi(x),C=1<<S;m[S]=-1,x&=~C}g!==0&&z3(u,g,c)}function Cm(){return Pt&6?!0:(Yh(0),!1)}function SE(){if(et!==null){if(Rt===0)var u=et.return;else u=et,Ms=dl=null,T2(u),Jc=null,Ch=0,u=et;for(;u!==null;)yD(u.alternate,u),u=u.return;et=null}}function df(u,c){u.finishedWork=null,u.finishedLanes=0;var g=u.timeoutHandle;g!==-1&&(u.timeoutHandle=-1,jX(g)),g=u.cancelPendingCommit,g!==null&&(u.cancelPendingCommit=null,g()),SE(),Ot=u,et=g=Po(u.current,null),ot=c,Rt=0,Ki=null,zs=!1,cf=uh(u,c),gE=!1,ff=$r=pE=ml=Io=Yt=0,Na=qh=null,mE=!1,c&8&&(c|=c&32);var m=u.entangledLanes;if(m!==0)for(u=u.entanglements,m&=c;0<m;){var x=31-Vi(m),S=1<<x;c|=u[x],m&=~S}return Fs=c,Q0(),g}function ED(u,c){We=null,$.H=Da,c===wh?(c=FO(),Rt=3):c===DO?(c=FO(),Rt=4):Rt=c===NR?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,Ki=c,et===null&&(Yt=1,mm(u,xr(c,u.current)))}function SD(){var u=$.H;return $.H=Da,u===null?Da:u}function _D(){var u=$.A;return $.A=bX,u}function _E(){Yt=4,zs||(ot&4194176)!==ot&&_r.current!==null||(cf=!0),!(Io&134217727)&&!(ml&134217727)||Ot===null||Ls(Ot,ot,$r,!1)}function wE(u,c,g){var m=Pt;Pt|=2;var x=SD(),S=_D();(Ot!==u||ot!==c)&&(wm=null,df(u,c)),c=!1;var C=Yt;e:do try{if(Rt!==0&&et!==null){var N=et,B=Ki;switch(Rt){case 8:SE(),C=6;break e;case 3:case 2:case 6:_r.current===null&&(c=!0);var Y=Rt;if(Rt=0,Ki=null,hf(u,N,B,Y),g&&cf){C=0;break e}break;default:Y=Rt,Rt=0,Ki=null,hf(u,N,B,Y)}}SX(),C=Yt;break}catch(ae){ED(u,ae)}while(!0);return c&&u.shellSuspendCounter++,Ms=dl=null,Pt=m,$.H=x,$.A=S,et===null&&(Ot=null,ot=0,Q0()),C}function SX(){for(;et!==null;)wD(et)}function _X(u,c){var g=Pt;Pt|=2;var m=SD(),x=_D();Ot!==u||ot!==c?(wm=null,_m=Tt()+500,df(u,c)):cf=uh(u,c);e:do try{if(Rt!==0&&et!==null){c=et;var S=Ki;t:switch(Rt){case 1:Rt=0,Ki=null,hf(u,c,S,1);break;case 2:if(NO(S)){Rt=0,Ki=null,AD(c);break}c=function(){Rt===2&&Ot===u&&(Rt=7),za(u)},S.then(c,c);break e;case 3:Rt=7;break e;case 4:Rt=5;break e;case 7:NO(S)?(Rt=0,Ki=null,AD(c)):(Rt=0,Ki=null,hf(u,c,S,7));break;case 5:var C=null;switch(et.tag){case 26:C=et.memoizedState;case 5:case 27:var N=et;if(!C||e5(C)){Rt=0,Ki=null;var B=N.sibling;if(B!==null)et=B;else{var Y=N.return;Y!==null?(et=Y,$m(Y)):et=null}break t}}Rt=0,Ki=null,hf(u,c,S,5);break;case 6:Rt=0,Ki=null,hf(u,c,S,6);break;case 8:SE(),Yt=6;break e;default:throw Error(i(462))}}wX();break}catch(ae){ED(u,ae)}while(!0);return Ms=dl=null,$.H=m,$.A=x,Pt=g,et!==null?0:(Ot=null,ot=0,Q0(),Yt)}function wX(){for(;et!==null&&!gr();)wD(et)}function wD(u){var c=YR(u.alternate,u,Fs);u.memoizedProps=u.pendingProps,c===null?$m(u):et=c}function AD(u){var c=u,g=c.alternate;switch(c.tag){case 15:case 0:c=jR(g,c,c.pendingProps,c.type,void 0,ot);break;case 11:c=jR(g,c,c.pendingProps,c.type.render,c.ref,ot);break;case 5:T2(c);default:yD(g,c),c=et=gD(c,Fs),c=YR(g,c,Fs)}u.memoizedProps=u.pendingProps,c===null?$m(u):et=c}function hf(u,c,g,m){Ms=dl=null,T2(c),Jc=null,Ch=0;var x=c.return;try{if(dX(u,x,c,g,ot)){Yt=1,mm(u,xr(g,u.current)),et=null;return}}catch(S){if(x!==null)throw et=x,S;Yt=1,mm(u,xr(g,u.current)),et=null;return}c.flags&32768?(lt||m===1?u=!0:cf||ot&536870912?u=!1:(zs=u=!0,(m===2||m===3||m===6)&&(m=_r.current,m!==null&&m.tag===13&&(m.flags|=16384))),CD(c,u)):$m(c)}function $m(u){var c=u;do{if(c.flags&32768){CD(c,zs);return}u=c.return;var g=yX(c.alternate,c,Fs);if(g!==null){et=g;return}if(c=c.sibling,c!==null){et=c;return}et=c=u}while(c!==null);Yt===0&&(Yt=5)}function CD(u,c){do{var g=vX(u.alternate,u);if(g!==null){g.flags&=32767,et=g;return}if(g=u.return,g!==null&&(g.flags|=32768,g.subtreeFlags=0,g.deletions=null),!c&&(u=u.sibling,u!==null)){et=u;return}et=u=g}while(u!==null);Yt=6,et=null}function $D(u,c,g,m,x,S,C,N,B,Y){var ae=$.T,ce=ue.p;try{ue.p=2,$.T=null,AX(u,c,g,m,ce,x,S,C,N,B,Y)}finally{$.T=ae,ue.p=ce}}function AX(u,c,g,m,x,S,C,N){do gf();while(yl!==null);if(Pt&6)throw Error(i(327));var B=u.finishedWork;if(m=u.finishedLanes,B===null)return null;if(u.finishedWork=null,u.finishedLanes=0,B===u.current)throw Error(i(177));u.callbackNode=null,u.callbackPriority=0,u.cancelPendingCommit=null;var Y=B.lanes|B.childLanes;if(Y|=h2,iY(u,m,Y,S,C,N),u===Ot&&(et=Ot=null,ot=0),!(B.subtreeFlags&10256)&&!(B.flags&10256)||Am||(Am=!0,vE=Y,bE=g,MX(Mi,function(){return gf(),null})),g=(B.flags&15990)!==0,B.subtreeFlags&15990||g?(g=$.T,$.T=null,S=ue.p,ue.p=2,C=Pt,Pt|=4,gX(u,B),oD(B,u),WY(FE,u.containerInfo),Bm=!!zE,FE=zE=null,u.current=B,iD(u,B.alternate,B),Qu(),Pt=C,ue.p=S,$.T=g):u.current=B,Am?(Am=!1,yl=u,Hh=m):TD(u,Y),Y=u.pendingLanes,Y===0&&(qo=null),KG(B.stateNode),za(u),c!==null)for(x=u.onRecoverableError,B=0;B<c.length;B++)Y=c[B],x(Y.value,{componentStack:Y.stack});return Hh&3&&gf(),Y=u.pendingLanes,m&4194218&&Y&42?u===xE?Gh++:(Gh=0,xE=u):Gh=0,Yh(0),null}function TD(u,c){(u.pooledCacheLanes&=c)===0&&(c=u.pooledCache,c!=null&&(u.pooledCache=null,Th(c)))}function gf(){if(yl!==null){var u=yl,c=vE;vE=0;var g=L3(Hh),m=$.T,x=ue.p;try{if(ue.p=32>g?32:g,$.T=null,yl===null)var S=!1;else{g=bE,bE=null;var C=yl,N=Hh;if(yl=null,Hh=0,Pt&6)throw Error(i(331));var B=Pt;if(Pt|=4,dD(C.current),lD(C,C.current,N,g),Pt=B,Yh(0,!1),Yn&&typeof Yn.onPostCommitFiberRoot=="function")try{Yn.onPostCommitFiberRoot(Wr,C)}catch{}S=!0}return S}finally{ue.p=x,$.T=m,TD(u,c)}}return!1}function MD(u,c,g){c=xr(g,c),c=I2(u.stateNode,c,2),u=Lo(u,c,2),u!==null&&(lh(u,2),za(u))}function Mt(u,c,g){if(u.tag===3)MD(u,u,g);else for(;c!==null;){if(c.tag===3){MD(c,u,g);break}else if(c.tag===1){var m=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(qo===null||!qo.has(m))){u=xr(g,u),g=RR(2),m=Lo(c,g,2),m!==null&&(DR(g,m,c,u),lh(m,2),za(m));break}}c=c.return}}function AE(u,c,g){var m=u.pingCache;if(m===null){m=u.pingCache=new xX;var x=new Set;m.set(c,x)}else x=m.get(c),x===void 0&&(x=new Set,m.set(c,x));x.has(g)||(gE=!0,x.add(g),u=CX.bind(null,u,c,g),c.then(u,u))}function CX(u,c,g){var m=u.pingCache;m!==null&&m.delete(c),u.pingedLanes|=u.suspendedLanes&g,u.warmLanes&=~g,Ot===u&&(ot&g)===g&&(Yt===4||Yt===3&&(ot&62914560)===ot&&300>Tt()-yE?!(Pt&2)&&df(u,0):pE|=g,ff===ot&&(ff=0)),za(u)}function kD(u,c){c===0&&(c=N3()),u=Mo(u,c),u!==null&&(lh(u,c),za(u))}function $X(u){var c=u.memoizedState,g=0;c!==null&&(g=c.retryLane),kD(u,g)}function TX(u,c){var g=0;switch(u.tag){case 13:var m=u.stateNode,x=u.memoizedState;x!==null&&(g=x.retryLane);break;case 19:m=u.stateNode;break;case 22:m=u.stateNode._retryCache;break;default:throw Error(i(314))}m!==null&&m.delete(c),kD(u,g)}function MX(u,c){return Bt(u,c)}var Tm=null,pf=null,CE=!1,Mm=!1,$E=!1,vl=0;function za(u){u!==pf&&u.next===null&&(pf===null?Tm=pf=u:pf=pf.next=u),Mm=!0,CE||(CE=!0,OX(kX))}function Yh(u,c){if(!$E&&Mm){$E=!0;do for(var g=!1,m=Tm;m!==null;){if(u!==0){var x=m.pendingLanes;if(x===0)var S=0;else{var C=m.suspendedLanes,N=m.pingedLanes;S=(1<<31-Vi(42|u)+1)-1,S&=x&~(C&~N),S=S&201326677?S&201326677|1:S?S|2:0}S!==0&&(g=!0,DD(m,S))}else S=ot,S=U0(m,m===Ot?S:0),!(S&3)||uh(m,S)||(g=!0,DD(m,S));m=m.next}while(g);$E=!1}}function kX(){Mm=CE=!1;var u=0;vl!==0&&(BX()&&(u=vl),vl=0);for(var c=Tt(),g=null,m=Tm;m!==null;){var x=m.next,S=OD(m,c);S===0?(m.next=null,g===null?Tm=x:g.next=x,x===null&&(pf=g)):(g=m,(u!==0||S&3)&&(Mm=!0)),m=x}Yh(u)}function OD(u,c){for(var g=u.suspendedLanes,m=u.pingedLanes,x=u.expirationTimes,S=u.pendingLanes&-62914561;0<S;){var C=31-Vi(S),N=1<<C,B=x[C];B===-1?(!(N&g)||N&m)&&(x[C]=nY(N,c)):B<=c&&(u.expiredLanes|=N),S&=~N}if(c=Ot,g=ot,g=U0(u,u===c?g:0),m=u.callbackNode,g===0||u===c&&Rt===2||u.cancelPendingCommit!==null)return m!==null&&m!==null&&ka(m),u.callbackNode=null,u.callbackPriority=0;if(!(g&3)||uh(u,g)){if(c=g&-g,c===u.callbackPriority)return c;switch(m!==null&&ka(m),L3(g)){case 2:case 8:g=Rn;break;case 32:g=Mi;break;case 268435456:g=oh;break;default:g=Mi}return m=RD.bind(null,u),g=Bt(g,m),u.callbackPriority=c,u.callbackNode=g,c}return m!==null&&m!==null&&ka(m),u.callbackPriority=2,u.callbackNode=null,2}function RD(u,c){var g=u.callbackNode;if(gf()&&u.callbackNode!==g)return null;var m=ot;return m=U0(u,u===Ot?m:0),m===0?null:(bD(u,m,c),OD(u,Tt()),u.callbackNode!=null&&u.callbackNode===g?RD.bind(null,u):null)}function DD(u,c){if(gf())return null;bD(u,c,!0)}function OX(u){PX(function(){Pt&6?Bt(Kt,u):u()})}function TE(){return vl===0&&(vl=D3()),vl}function ND(u){return u==null||typeof u=="symbol"||typeof u=="boolean"?null:typeof u=="function"?u:q0(""+u)}function zD(u,c){var g=c.ownerDocument.createElement("input");return g.name=c.name,g.value=c.value,u.id&&g.setAttribute("form",u.id),c.parentNode.insertBefore(g,c),u=new FormData(u),g.parentNode.removeChild(g),u}function RX(u,c,g,m,x){if(c==="submit"&&g&&g.stateNode===x){var S=ND((x[ki]||null).action),C=m.submitter;C&&(c=(c=C[ki]||null)?ND(c.formAction):C.getAttribute("formAction"),c!==null&&(S=c,C=null));var N=new X0("action","action",null,m,x);u.push({event:N,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(vl!==0){var B=C?zD(x,C):new FormData(x);L2(g,{pending:!0,data:B,method:x.method,action:S},null,B)}}else typeof S=="function"&&(N.preventDefault(),B=C?zD(x,C):new FormData(x),L2(g,{pending:!0,data:B,method:x.method,action:S},S,B))},currentTarget:x}]})}}for(var ME=0;ME<$O.length;ME++){var kE=$O[ME],DX=kE.toLowerCase(),NX=kE[0].toUpperCase()+kE.slice(1);Qr(DX,"on"+NX)}Qr(SO,"onAnimationEnd"),Qr(_O,"onAnimationIteration"),Qr(wO,"onAnimationStart"),Qr("dblclick","onDoubleClick"),Qr("focusin","onFocus"),Qr("focusout","onBlur"),Qr(ZY,"onTransitionRun"),Qr(KY,"onTransitionStart"),Qr(JY,"onTransitionCancel"),Qr(AO,"onTransitionEnd"),Pc("onMouseEnter",["mouseout","mouseover"]),Pc("onMouseLeave",["mouseout","mouseover"]),Pc("onPointerEnter",["pointerout","pointerover"]),Pc("onPointerLeave",["pointerout","pointerover"]),Ju("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ju("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ju("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ju("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ju("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ju("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zX=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Xh));function FD(u,c){c=(c&4)!==0;for(var g=0;g<u.length;g++){var m=u[g],x=m.event;m=m.listeners;e:{var S=void 0;if(c)for(var C=m.length-1;0<=C;C--){var N=m[C],B=N.instance,Y=N.currentTarget;if(N=N.listener,B!==S&&x.isPropagationStopped())break e;S=N,x.currentTarget=Y;try{S(x)}catch(ae){pm(ae)}x.currentTarget=null,S=B}else for(C=0;C<m.length;C++){if(N=m[C],B=N.instance,Y=N.currentTarget,N=N.listener,B!==S&&x.isPropagationStopped())break e;S=N,x.currentTarget=Y;try{S(x)}catch(ae){pm(ae)}x.currentTarget=null,S=B}}}}function it(u,c){var g=c[Yx];g===void 0&&(g=c[Yx]=new Set);var m=u+"__bubble";g.has(m)||(LD(c,u,2,!1),g.add(m))}function OE(u,c,g){var m=0;c&&(m|=4),LD(g,u,m,c)}var km="_reactListening"+Math.random().toString(36).slice(2);function RE(u){if(!u[km]){u[km]=!0,j3.forEach(function(g){g!=="selectionchange"&&(zX.has(g)||OE(g,!1,u),OE(g,!0,u))});var c=u.nodeType===9?u:u.ownerDocument;c===null||c[km]||(c[km]=!0,OE("selectionchange",!1,c))}}function LD(u,c,g,m){switch(s5(c)){case 2:var x=oV;break;case 8:x=uV;break;default:x=GE}g=x.bind(null,c,g,u),x=void 0,!e2||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(x=!0),m?x!==void 0?u.addEventListener(c,g,{capture:!0,passive:x}):u.addEventListener(c,g,!0):x!==void 0?u.addEventListener(c,g,{passive:x}):u.addEventListener(c,g,!1)}function DE(u,c,g,m,x){var S=m;if(!(c&1)&&!(c&2)&&m!==null)e:for(;;){if(m===null)return;var C=m.tag;if(C===3||C===4){var N=m.stateNode.containerInfo;if(N===x||N.nodeType===8&&N.parentNode===x)break;if(C===4)for(C=m.return;C!==null;){var B=C.tag;if((B===3||B===4)&&(B=C.stateNode.containerInfo,B===x||B.nodeType===8&&B.parentNode===x))return;C=C.return}for(;N!==null;){if(C=Ku(N),C===null)return;if(B=C.tag,B===5||B===6||B===26||B===27){m=S=C;continue e}N=N.parentNode}}m=m.return}K3(function(){var Y=S,ae=Kx(g),ce=[];e:{var K=CO.get(u);if(K!==void 0){var ne=X0,Re=u;switch(u){case"keypress":if(G0(g)===0)break e;case"keydown":case"keyup":ne=TY;break;case"focusin":Re="focus",ne=r2;break;case"focusout":Re="blur",ne=r2;break;case"beforeblur":case"afterblur":ne=r2;break;case"click":if(g.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ne=tO;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ne=mY;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ne=OY;break;case SO:case _O:case wO:ne=bY;break;case AO:ne=DY;break;case"scroll":case"scrollend":ne=gY;break;case"wheel":ne=zY;break;case"copy":case"cut":case"paste":ne=EY;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ne=iO;break;case"toggle":case"beforetoggle":ne=LY}var He=(c&4)!==0,Xt=!He&&(u==="scroll"||u==="scrollend"),W=He?K!==null?K+"Capture":null:K;He=[];for(var H=Y,Q;H!==null;){var le=H;if(Q=le.stateNode,le=le.tag,le!==5&&le!==26&&le!==27||Q===null||W===null||(le=dh(H,W),le!=null&&He.push(Vh(H,le,Q))),Xt)break;H=H.return}0<He.length&&(K=new ne(K,Re,null,g,ae),ce.push({event:K,listeners:He}))}}if(!(c&7)){e:{if(K=u==="mouseover"||u==="pointerover",ne=u==="mouseout"||u==="pointerout",K&&g!==Zx&&(Re=g.relatedTarget||g.fromElement)&&(Ku(Re)||Re[Uc]))break e;if((ne||K)&&(K=ae.window===ae?ae:(K=ae.ownerDocument)?K.defaultView||K.parentWindow:window,ne?(Re=g.relatedTarget||g.toElement,ne=Y,Re=Re?Ku(Re):null,Re!==null&&(Xt=V(Re),He=Re.tag,Re!==Xt||He!==5&&He!==27&&He!==6)&&(Re=null)):(ne=null,Re=Y),ne!==Re)){if(He=tO,le="onMouseLeave",W="onMouseEnter",H="mouse",(u==="pointerout"||u==="pointerover")&&(He=iO,le="onPointerLeave",W="onPointerEnter",H="pointer"),Xt=ne==null?K:fh(ne),Q=Re==null?K:fh(Re),K=new He(le,H+"leave",ne,g,ae),K.target=Xt,K.relatedTarget=Q,le=null,Ku(ae)===Y&&(He=new He(W,H+"enter",Re,g,ae),He.target=Q,He.relatedTarget=Xt,le=He),Xt=le,ne&&Re)t:{for(He=ne,W=Re,H=0,Q=He;Q;Q=mf(Q))H++;for(Q=0,le=W;le;le=mf(le))Q++;for(;0<H-Q;)He=mf(He),H--;for(;0<Q-H;)W=mf(W),Q--;for(;H--;){if(He===W||W!==null&&He===W.alternate)break t;He=mf(He),W=mf(W)}He=null}else He=null;ne!==null&&UD(ce,K,ne,He,!1),Re!==null&&Xt!==null&&UD(ce,Xt,Re,He,!0)}}e:{if(K=Y?fh(Y):window,ne=K.nodeName&&K.nodeName.toLowerCase(),ne==="select"||ne==="input"&&K.type==="file")var $e=fO;else if(lO(K))if(dO)$e=XY;else{$e=GY;var Ze=HY}else ne=K.nodeName,!ne||ne.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?Y&&Qx(Y.elementType)&&($e=fO):$e=YY;if($e&&($e=$e(u,Y))){cO(ce,$e,g,ae);break e}Ze&&Ze(u,K,Y),u==="focusout"&&Y&&K.type==="number"&&Y.memoizedProps.value!=null&&Wx(K,"number",K.value)}switch(Ze=Y?fh(Y):window,u){case"focusin":(lO(Ze)||Ze.contentEditable==="true")&&(Xc=Ze,c2=Y,xh=null);break;case"focusout":xh=c2=Xc=null;break;case"mousedown":f2=!0;break;case"contextmenu":case"mouseup":case"dragend":f2=!1,xO(ce,g,ae);break;case"selectionchange":if(QY)break;case"keydown":case"keyup":xO(ce,g,ae)}var De;if(s2)e:{switch(u){case"compositionstart":var je="onCompositionStart";break e;case"compositionend":je="onCompositionEnd";break e;case"compositionupdate":je="onCompositionUpdate";break e}je=void 0}else Yc?oO(u,g)&&(je="onCompositionEnd"):u==="keydown"&&g.keyCode===229&&(je="onCompositionStart");je&&(rO&&g.locale!=="ko"&&(Yc||je!=="onCompositionStart"?je==="onCompositionEnd"&&Yc&&(De=J3()):(To=ae,t2="value"in To?To.value:To.textContent,Yc=!0)),Ze=Om(Y,je),0<Ze.length&&(je=new nO(je,u,null,g,ae),ce.push({event:je,listeners:Ze}),De?je.data=De:(De=uO(g),De!==null&&(je.data=De)))),(De=BY?jY(u,g):PY(u,g))&&(je=Om(Y,"onBeforeInput"),0<je.length&&(Ze=new nO("onBeforeInput","beforeinput",null,g,ae),ce.push({event:Ze,listeners:je}),Ze.data=De)),RX(ce,u,Y,g,ae)}FD(ce,c)})}function Vh(u,c,g){return{instance:u,listener:c,currentTarget:g}}function Om(u,c){for(var g=c+"Capture",m=[];u!==null;){var x=u,S=x.stateNode;x=x.tag,x!==5&&x!==26&&x!==27||S===null||(x=dh(u,g),x!=null&&m.unshift(Vh(u,x,S)),x=dh(u,c),x!=null&&m.push(Vh(u,x,S))),u=u.return}return m}function mf(u){if(u===null)return null;do u=u.return;while(u&&u.tag!==5&&u.tag!==27);return u||null}function UD(u,c,g,m,x){for(var S=c._reactName,C=[];g!==null&&g!==m;){var N=g,B=N.alternate,Y=N.stateNode;if(N=N.tag,B!==null&&B===m)break;N!==5&&N!==26&&N!==27||Y===null||(B=Y,x?(Y=dh(g,S),Y!=null&&C.unshift(Vh(g,Y,B))):x||(Y=dh(g,S),Y!=null&&C.push(Vh(g,Y,B)))),g=g.return}C.length!==0&&u.push({event:c,listeners:C})}var FX=/\r\n?/g,LX=/\u0000|\uFFFD/g;function BD(u){return(typeof u=="string"?u:""+u).replace(FX,`
`).replace(LX,"")}function jD(u,c){return c=BD(c),BD(u)===c}function Rm(){}function _t(u,c,g,m,x,S){switch(g){case"children":typeof m=="string"?c==="body"||c==="textarea"&&m===""||qc(u,m):(typeof m=="number"||typeof m=="bigint")&&c!=="body"&&qc(u,""+m);break;case"className":j0(u,"class",m);break;case"tabIndex":j0(u,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":j0(u,g,m);break;case"style":Q3(u,m,S);break;case"data":if(c!=="object"){j0(u,"data",m);break}case"src":case"href":if(m===""&&(c!=="a"||g!=="href")){u.removeAttribute(g);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){u.removeAttribute(g);break}m=q0(""+m),u.setAttribute(g,m);break;case"action":case"formAction":if(typeof m=="function"){u.setAttribute(g,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof S=="function"&&(g==="formAction"?(c!=="input"&&_t(u,c,"name",x.name,x,null),_t(u,c,"formEncType",x.formEncType,x,null),_t(u,c,"formMethod",x.formMethod,x,null),_t(u,c,"formTarget",x.formTarget,x,null)):(_t(u,c,"encType",x.encType,x,null),_t(u,c,"method",x.method,x,null),_t(u,c,"target",x.target,x,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){u.removeAttribute(g);break}m=q0(""+m),u.setAttribute(g,m);break;case"onClick":m!=null&&(u.onclick=Rm);break;case"onScroll":m!=null&&it("scroll",u);break;case"onScrollEnd":m!=null&&it("scrollend",u);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(i(61));if(g=m.__html,g!=null){if(x.children!=null)throw Error(i(60));u.innerHTML=g}}break;case"multiple":u.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":u.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){u.removeAttribute("xlink:href");break}g=q0(""+m),u.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",g);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?u.setAttribute(g,""+m):u.removeAttribute(g);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?u.setAttribute(g,""):u.removeAttribute(g);break;case"capture":case"download":m===!0?u.setAttribute(g,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?u.setAttribute(g,m):u.removeAttribute(g);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?u.setAttribute(g,m):u.removeAttribute(g);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?u.removeAttribute(g):u.setAttribute(g,m);break;case"popover":it("beforetoggle",u),it("toggle",u),B0(u,"popover",m);break;case"xlinkActuate":_s(u,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":_s(u,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":_s(u,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":_s(u,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":_s(u,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":_s(u,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":_s(u,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":_s(u,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":_s(u,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":B0(u,"is",m);break;case"innerText":case"textContent":break;default:(!(2<g.length)||g[0]!=="o"&&g[0]!=="O"||g[1]!=="n"&&g[1]!=="N")&&(g=dY.get(g)||g,B0(u,g,m))}}function NE(u,c,g,m,x,S){switch(g){case"style":Q3(u,m,S);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(i(61));if(g=m.__html,g!=null){if(x.children!=null)throw Error(i(60));u.innerHTML=g}}break;case"children":typeof m=="string"?qc(u,m):(typeof m=="number"||typeof m=="bigint")&&qc(u,""+m);break;case"onScroll":m!=null&&it("scroll",u);break;case"onScrollEnd":m!=null&&it("scrollend",u);break;case"onClick":m!=null&&(u.onclick=Rm);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!P3.hasOwnProperty(g))e:{if(g[0]==="o"&&g[1]==="n"&&(x=g.endsWith("Capture"),c=g.slice(2,x?g.length-7:void 0),S=u[ki]||null,S=S!=null?S[g]:null,typeof S=="function"&&u.removeEventListener(c,S,x),typeof m=="function")){typeof S!="function"&&S!==null&&(g in u?u[g]=null:u.hasAttribute(g)&&u.removeAttribute(g)),u.addEventListener(c,m,x);break e}g in u?u[g]=m:m===!0?u.setAttribute(g,""):B0(u,g,m)}}}function zn(u,c,g){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":it("error",u),it("load",u);var m=!1,x=!1,S;for(S in g)if(g.hasOwnProperty(S)){var C=g[S];if(C!=null)switch(S){case"src":m=!0;break;case"srcSet":x=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,c));default:_t(u,c,S,C,g,null)}}x&&_t(u,c,"srcSet",g.srcSet,g,null),m&&_t(u,c,"src",g.src,g,null);return;case"input":it("invalid",u);var N=S=C=x=null,B=null,Y=null;for(m in g)if(g.hasOwnProperty(m)){var ae=g[m];if(ae!=null)switch(m){case"name":x=ae;break;case"type":C=ae;break;case"checked":B=ae;break;case"defaultChecked":Y=ae;break;case"value":S=ae;break;case"defaultValue":N=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(i(137,c));break;default:_t(u,c,m,ae,g,null)}}Y3(u,S,N,B,Y,C,x,!1),P0(u);return;case"select":it("invalid",u),m=C=S=null;for(x in g)if(g.hasOwnProperty(x)&&(N=g[x],N!=null))switch(x){case"value":S=N;break;case"defaultValue":C=N;break;case"multiple":m=N;default:_t(u,c,x,N,g,null)}c=S,g=C,u.multiple=!!m,c!=null?Ic(u,!!m,c,!1):g!=null&&Ic(u,!!m,g,!0);return;case"textarea":it("invalid",u),S=x=m=null;for(C in g)if(g.hasOwnProperty(C)&&(N=g[C],N!=null))switch(C){case"value":m=N;break;case"defaultValue":x=N;break;case"children":S=N;break;case"dangerouslySetInnerHTML":if(N!=null)throw Error(i(91));break;default:_t(u,c,C,N,g,null)}V3(u,m,x,S),P0(u);return;case"option":for(B in g)if(g.hasOwnProperty(B)&&(m=g[B],m!=null))switch(B){case"selected":u.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:_t(u,c,B,m,g,null)}return;case"dialog":it("cancel",u),it("close",u);break;case"iframe":case"object":it("load",u);break;case"video":case"audio":for(m=0;m<Xh.length;m++)it(Xh[m],u);break;case"image":it("error",u),it("load",u);break;case"details":it("toggle",u);break;case"embed":case"source":case"link":it("error",u),it("load",u);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Y in g)if(g.hasOwnProperty(Y)&&(m=g[Y],m!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,c));default:_t(u,c,Y,m,g,null)}return;default:if(Qx(c)){for(ae in g)g.hasOwnProperty(ae)&&(m=g[ae],m!==void 0&&NE(u,c,ae,m,g,void 0));return}}for(N in g)g.hasOwnProperty(N)&&(m=g[N],m!=null&&_t(u,c,N,m,g,null))}function UX(u,c,g,m){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var x=null,S=null,C=null,N=null,B=null,Y=null,ae=null;for(ne in g){var ce=g[ne];if(g.hasOwnProperty(ne)&&ce!=null)switch(ne){case"checked":break;case"value":break;case"defaultValue":B=ce;default:m.hasOwnProperty(ne)||_t(u,c,ne,null,m,ce)}}for(var K in m){var ne=m[K];if(ce=g[K],m.hasOwnProperty(K)&&(ne!=null||ce!=null))switch(K){case"type":S=ne;break;case"name":x=ne;break;case"checked":Y=ne;break;case"defaultChecked":ae=ne;break;case"value":C=ne;break;case"defaultValue":N=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(i(137,c));break;default:ne!==ce&&_t(u,c,K,ne,m,ce)}}Vx(u,C,N,B,Y,ae,S,x);return;case"select":ne=C=N=K=null;for(S in g)if(B=g[S],g.hasOwnProperty(S)&&B!=null)switch(S){case"value":break;case"multiple":ne=B;default:m.hasOwnProperty(S)||_t(u,c,S,null,m,B)}for(x in m)if(S=m[x],B=g[x],m.hasOwnProperty(x)&&(S!=null||B!=null))switch(x){case"value":K=S;break;case"defaultValue":N=S;break;case"multiple":C=S;default:S!==B&&_t(u,c,x,S,m,B)}c=N,g=C,m=ne,K!=null?Ic(u,!!g,K,!1):!!m!=!!g&&(c!=null?Ic(u,!!g,c,!0):Ic(u,!!g,g?[]:"",!1));return;case"textarea":ne=K=null;for(N in g)if(x=g[N],g.hasOwnProperty(N)&&x!=null&&!m.hasOwnProperty(N))switch(N){case"value":break;case"children":break;default:_t(u,c,N,null,m,x)}for(C in m)if(x=m[C],S=g[C],m.hasOwnProperty(C)&&(x!=null||S!=null))switch(C){case"value":K=x;break;case"defaultValue":ne=x;break;case"children":break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(i(91));break;default:x!==S&&_t(u,c,C,x,m,S)}X3(u,K,ne);return;case"option":for(var Re in g)if(K=g[Re],g.hasOwnProperty(Re)&&K!=null&&!m.hasOwnProperty(Re))switch(Re){case"selected":u.selected=!1;break;default:_t(u,c,Re,null,m,K)}for(B in m)if(K=m[B],ne=g[B],m.hasOwnProperty(B)&&K!==ne&&(K!=null||ne!=null))switch(B){case"selected":u.selected=K&&typeof K!="function"&&typeof K!="symbol";break;default:_t(u,c,B,K,m,ne)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var He in g)K=g[He],g.hasOwnProperty(He)&&K!=null&&!m.hasOwnProperty(He)&&_t(u,c,He,null,m,K);for(Y in m)if(K=m[Y],ne=g[Y],m.hasOwnProperty(Y)&&K!==ne&&(K!=null||ne!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(i(137,c));break;default:_t(u,c,Y,K,m,ne)}return;default:if(Qx(c)){for(var Xt in g)K=g[Xt],g.hasOwnProperty(Xt)&&K!==void 0&&!m.hasOwnProperty(Xt)&&NE(u,c,Xt,void 0,m,K);for(ae in m)K=m[ae],ne=g[ae],!m.hasOwnProperty(ae)||K===ne||K===void 0&&ne===void 0||NE(u,c,ae,K,m,ne);return}}for(var W in g)K=g[W],g.hasOwnProperty(W)&&K!=null&&!m.hasOwnProperty(W)&&_t(u,c,W,null,m,K);for(ce in m)K=m[ce],ne=g[ce],!m.hasOwnProperty(ce)||K===ne||K==null&&ne==null||_t(u,c,ce,K,m,ne)}var zE=null,FE=null;function Dm(u){return u.nodeType===9?u:u.ownerDocument}function PD(u){switch(u){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ID(u,c){if(u===0)switch(c){case"svg":return 1;case"math":return 2;default:return 0}return u===1&&c==="foreignObject"?0:u}function LE(u,c){return u==="textarea"||u==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.children=="bigint"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var UE=null;function BX(){var u=window.event;return u&&u.type==="popstate"?u===UE?!1:(UE=u,!0):(UE=null,!1)}var qD=typeof setTimeout=="function"?setTimeout:void 0,jX=typeof clearTimeout=="function"?clearTimeout:void 0,HD=typeof Promise=="function"?Promise:void 0,PX=typeof queueMicrotask=="function"?queueMicrotask:typeof HD<"u"?function(u){return HD.resolve(null).then(u).catch(IX)}:qD;function IX(u){setTimeout(function(){throw u})}function BE(u,c){var g=c,m=0;do{var x=g.nextSibling;if(u.removeChild(g),x&&x.nodeType===8)if(g=x.data,g==="/$"){if(m===0){u.removeChild(x),ng(c);return}m--}else g!=="$"&&g!=="$?"&&g!=="$!"||m++;g=x}while(g);ng(c)}function jE(u){var c=u.firstChild;for(c&&c.nodeType===10&&(c=c.nextSibling);c;){var g=c;switch(c=c.nextSibling,g.nodeName){case"HTML":case"HEAD":case"BODY":jE(g),Xx(g);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(g.rel.toLowerCase()==="stylesheet")continue}u.removeChild(g)}}function qX(u,c,g,m){for(;u.nodeType===1;){var x=g;if(u.nodeName.toLowerCase()!==c.toLowerCase()){if(!m&&(u.nodeName!=="INPUT"||u.type!=="hidden"))break}else if(m){if(!u[ch])switch(c){case"meta":if(!u.hasAttribute("itemprop"))break;return u;case"link":if(S=u.getAttribute("rel"),S==="stylesheet"&&u.hasAttribute("data-precedence"))break;if(S!==x.rel||u.getAttribute("href")!==(x.href==null?null:x.href)||u.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin)||u.getAttribute("title")!==(x.title==null?null:x.title))break;return u;case"style":if(u.hasAttribute("data-precedence"))break;return u;case"script":if(S=u.getAttribute("src"),(S!==(x.src==null?null:x.src)||u.getAttribute("type")!==(x.type==null?null:x.type)||u.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin))&&S&&u.hasAttribute("async")&&!u.hasAttribute("itemprop"))break;return u;default:return u}}else if(c==="input"&&u.type==="hidden"){var S=x.name==null?null:""+x.name;if(x.type==="hidden"&&u.getAttribute("name")===S)return u}else return u;if(u=Jr(u.nextSibling),u===null)break}return null}function HX(u,c,g){if(c==="")return null;for(;u.nodeType!==3;)if((u.nodeType!==1||u.nodeName!=="INPUT"||u.type!=="hidden")&&!g||(u=Jr(u.nextSibling),u===null))return null;return u}function Jr(u){for(;u!=null;u=u.nextSibling){var c=u.nodeType;if(c===1||c===3)break;if(c===8){if(c=u.data,c==="$"||c==="$!"||c==="$?"||c==="F!"||c==="F")break;if(c==="/$")return null}}return u}function GD(u){u=u.previousSibling;for(var c=0;u;){if(u.nodeType===8){var g=u.data;if(g==="$"||g==="$!"||g==="$?"){if(c===0)return u;c--}else g==="/$"&&c++}u=u.previousSibling}return null}function YD(u,c,g){switch(c=Dm(g),u){case"html":if(u=c.documentElement,!u)throw Error(i(452));return u;case"head":if(u=c.head,!u)throw Error(i(453));return u;case"body":if(u=c.body,!u)throw Error(i(454));return u;default:throw Error(i(451))}}var Tr=new Map,XD=new Set;function Nm(u){return typeof u.getRootNode=="function"?u.getRootNode():u.ownerDocument}var Us=ue.d;ue.d={f:GX,r:YX,D:XX,C:VX,L:WX,m:QX,X:KX,S:ZX,M:JX};function GX(){var u=Us.f(),c=Cm();return u||c}function YX(u){var c=Bc(u);c!==null&&c.tag===5&&c.type==="form"?xR(c):Us.r(u)}var yf=typeof document>"u"?null:document;function VD(u,c,g){var m=yf;if(m&&typeof c=="string"&&c){var x=vr(c);x='link[rel="'+u+'"][href="'+x+'"]',typeof g=="string"&&(x+='[crossorigin="'+g+'"]'),XD.has(x)||(XD.add(x),u={rel:u,crossOrigin:g,href:c},m.querySelector(x)===null&&(c=m.createElement("link"),zn(c,"link",u),vn(c),m.head.appendChild(c)))}}function XX(u){Us.D(u),VD("dns-prefetch",u,null)}function VX(u,c){Us.C(u,c),VD("preconnect",u,c)}function WX(u,c,g){Us.L(u,c,g);var m=yf;if(m&&u&&c){var x='link[rel="preload"][as="'+vr(c)+'"]';c==="image"&&g&&g.imageSrcSet?(x+='[imagesrcset="'+vr(g.imageSrcSet)+'"]',typeof g.imageSizes=="string"&&(x+='[imagesizes="'+vr(g.imageSizes)+'"]')):x+='[href="'+vr(u)+'"]';var S=x;switch(c){case"style":S=vf(u);break;case"script":S=bf(u)}Tr.has(S)||(u=D({rel:"preload",href:c==="image"&&g&&g.imageSrcSet?void 0:u,as:c},g),Tr.set(S,u),m.querySelector(x)!==null||c==="style"&&m.querySelector(Wh(S))||c==="script"&&m.querySelector(Qh(S))||(c=m.createElement("link"),zn(c,"link",u),vn(c),m.head.appendChild(c)))}}function QX(u,c){Us.m(u,c);var g=yf;if(g&&u){var m=c&&typeof c.as=="string"?c.as:"script",x='link[rel="modulepreload"][as="'+vr(m)+'"][href="'+vr(u)+'"]',S=x;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":S=bf(u)}if(!Tr.has(S)&&(u=D({rel:"modulepreload",href:u},c),Tr.set(S,u),g.querySelector(x)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(g.querySelector(Qh(S)))return}m=g.createElement("link"),zn(m,"link",u),vn(m),g.head.appendChild(m)}}}function ZX(u,c,g){Us.S(u,c,g);var m=yf;if(m&&u){var x=jc(m).hoistableStyles,S=vf(u);c=c||"default";var C=x.get(S);if(!C){var N={loading:0,preload:null};if(C=m.querySelector(Wh(S)))N.loading=5;else{u=D({rel:"stylesheet",href:u,"data-precedence":c},g),(g=Tr.get(S))&&PE(u,g);var B=C=m.createElement("link");vn(B),zn(B,"link",u),B._p=new Promise(function(Y,ae){B.onload=Y,B.onerror=ae}),B.addEventListener("load",function(){N.loading|=1}),B.addEventListener("error",function(){N.loading|=2}),N.loading|=4,zm(C,c,m)}C={type:"stylesheet",instance:C,count:1,state:N},x.set(S,C)}}}function KX(u,c){Us.X(u,c);var g=yf;if(g&&u){var m=jc(g).hoistableScripts,x=bf(u),S=m.get(x);S||(S=g.querySelector(Qh(x)),S||(u=D({src:u,async:!0},c),(c=Tr.get(x))&&IE(u,c),S=g.createElement("script"),vn(S),zn(S,"link",u),g.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},m.set(x,S))}}function JX(u,c){Us.M(u,c);var g=yf;if(g&&u){var m=jc(g).hoistableScripts,x=bf(u),S=m.get(x);S||(S=g.querySelector(Qh(x)),S||(u=D({src:u,async:!0,type:"module"},c),(c=Tr.get(x))&&IE(u,c),S=g.createElement("script"),vn(S),zn(S,"link",u),g.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},m.set(x,S))}}function WD(u,c,g,m){var x=(x=Ie.current)?Nm(x):null;if(!x)throw Error(i(446));switch(u){case"meta":case"title":return null;case"style":return typeof g.precedence=="string"&&typeof g.href=="string"?(c=vf(g.href),g=jc(x).hoistableStyles,m=g.get(c),m||(m={type:"style",instance:null,count:0,state:null},g.set(c,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(g.rel==="stylesheet"&&typeof g.href=="string"&&typeof g.precedence=="string"){u=vf(g.href);var S=jc(x).hoistableStyles,C=S.get(u);if(C||(x=x.ownerDocument||x,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},S.set(u,C),(S=x.querySelector(Wh(u)))&&!S._p&&(C.instance=S,C.state.loading=5),Tr.has(u)||(g={rel:"preload",as:"style",href:g.href,crossOrigin:g.crossOrigin,integrity:g.integrity,media:g.media,hrefLang:g.hrefLang,referrerPolicy:g.referrerPolicy},Tr.set(u,g),S||eV(x,u,g,C.state))),c&&m===null)throw Error(i(528,""));return C}if(c&&m!==null)throw Error(i(529,""));return null;case"script":return c=g.async,g=g.src,typeof g=="string"&&c&&typeof c!="function"&&typeof c!="symbol"?(c=bf(g),g=jc(x).hoistableScripts,m=g.get(c),m||(m={type:"script",instance:null,count:0,state:null},g.set(c,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,u))}}function vf(u){return'href="'+vr(u)+'"'}function Wh(u){return'link[rel="stylesheet"]['+u+"]"}function QD(u){return D({},u,{"data-precedence":u.precedence,precedence:null})}function eV(u,c,g,m){u.querySelector('link[rel="preload"][as="style"]['+c+"]")?m.loading=1:(c=u.createElement("link"),m.preload=c,c.addEventListener("load",function(){return m.loading|=1}),c.addEventListener("error",function(){return m.loading|=2}),zn(c,"link",g),vn(c),u.head.appendChild(c))}function bf(u){return'[src="'+vr(u)+'"]'}function Qh(u){return"script[async]"+u}function ZD(u,c,g){if(c.count++,c.instance===null)switch(c.type){case"style":var m=u.querySelector('style[data-href~="'+vr(g.href)+'"]');if(m)return c.instance=m,vn(m),m;var x=D({},g,{"data-href":g.href,"data-precedence":g.precedence,href:null,precedence:null});return m=(u.ownerDocument||u).createElement("style"),vn(m),zn(m,"style",x),zm(m,g.precedence,u),c.instance=m;case"stylesheet":x=vf(g.href);var S=u.querySelector(Wh(x));if(S)return c.state.loading|=4,c.instance=S,vn(S),S;m=QD(g),(x=Tr.get(x))&&PE(m,x),S=(u.ownerDocument||u).createElement("link"),vn(S);var C=S;return C._p=new Promise(function(N,B){C.onload=N,C.onerror=B}),zn(S,"link",m),c.state.loading|=4,zm(S,g.precedence,u),c.instance=S;case"script":return S=bf(g.src),(x=u.querySelector(Qh(S)))?(c.instance=x,vn(x),x):(m=g,(x=Tr.get(S))&&(m=D({},g),IE(m,x)),u=u.ownerDocument||u,x=u.createElement("script"),vn(x),zn(x,"link",m),u.head.appendChild(x),c.instance=x);case"void":return null;default:throw Error(i(443,c.type))}else c.type==="stylesheet"&&!(c.state.loading&4)&&(m=c.instance,c.state.loading|=4,zm(m,g.precedence,u));return c.instance}function zm(u,c,g){for(var m=g.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),x=m.length?m[m.length-1]:null,S=x,C=0;C<m.length;C++){var N=m[C];if(N.dataset.precedence===c)S=N;else if(S!==x)break}S?S.parentNode.insertBefore(u,S.nextSibling):(c=g.nodeType===9?g.head:g,c.insertBefore(u,c.firstChild))}function PE(u,c){u.crossOrigin==null&&(u.crossOrigin=c.crossOrigin),u.referrerPolicy==null&&(u.referrerPolicy=c.referrerPolicy),u.title==null&&(u.title=c.title)}function IE(u,c){u.crossOrigin==null&&(u.crossOrigin=c.crossOrigin),u.referrerPolicy==null&&(u.referrerPolicy=c.referrerPolicy),u.integrity==null&&(u.integrity=c.integrity)}var Fm=null;function KD(u,c,g){if(Fm===null){var m=new Map,x=Fm=new Map;x.set(g,m)}else x=Fm,m=x.get(g),m||(m=new Map,x.set(g,m));if(m.has(u))return m;for(m.set(u,null),g=g.getElementsByTagName(u),x=0;x<g.length;x++){var S=g[x];if(!(S[ch]||S[Xn]||u==="link"&&S.getAttribute("rel")==="stylesheet")&&S.namespaceURI!=="http://www.w3.org/2000/svg"){var C=S.getAttribute(c)||"";C=u+C;var N=m.get(C);N?N.push(S):m.set(C,[S])}}return m}function JD(u,c,g){u=u.ownerDocument||u,u.head.insertBefore(g,c==="title"?u.querySelector("head > title"):null)}function tV(u,c,g){if(g===1||c.itemProp!=null)return!1;switch(u){case"meta":case"title":return!0;case"style":if(typeof c.precedence!="string"||typeof c.href!="string"||c.href==="")break;return!0;case"link":if(typeof c.rel!="string"||typeof c.href!="string"||c.href===""||c.onLoad||c.onError)break;switch(c.rel){case"stylesheet":return u=c.disabled,typeof c.precedence=="string"&&u==null;default:return!0}case"script":if(c.async&&typeof c.async!="function"&&typeof c.async!="symbol"&&!c.onLoad&&!c.onError&&c.src&&typeof c.src=="string")return!0}return!1}function e5(u){return!(u.type==="stylesheet"&&!(u.state.loading&3))}var Zh=null;function nV(){}function iV(u,c,g){if(Zh===null)throw Error(i(475));var m=Zh;if(c.type==="stylesheet"&&(typeof g.media!="string"||matchMedia(g.media).matches!==!1)&&!(c.state.loading&4)){if(c.instance===null){var x=vf(g.href),S=u.querySelector(Wh(x));if(S){u=S._p,u!==null&&typeof u=="object"&&typeof u.then=="function"&&(m.count++,m=Lm.bind(m),u.then(m,m)),c.state.loading|=4,c.instance=S,vn(S);return}S=u.ownerDocument||u,g=QD(g),(x=Tr.get(x))&&PE(g,x),S=S.createElement("link"),vn(S);var C=S;C._p=new Promise(function(N,B){C.onload=N,C.onerror=B}),zn(S,"link",g),c.instance=S}m.stylesheets===null&&(m.stylesheets=new Map),m.stylesheets.set(c,u),(u=c.state.preload)&&!(c.state.loading&3)&&(m.count++,c=Lm.bind(m),u.addEventListener("load",c),u.addEventListener("error",c))}}function rV(){if(Zh===null)throw Error(i(475));var u=Zh;return u.stylesheets&&u.count===0&&qE(u,u.stylesheets),0<u.count?function(c){var g=setTimeout(function(){if(u.stylesheets&&qE(u,u.stylesheets),u.unsuspend){var m=u.unsuspend;u.unsuspend=null,m()}},6e4);return u.unsuspend=c,function(){u.unsuspend=null,clearTimeout(g)}}:null}function Lm(){if(this.count--,this.count===0){if(this.stylesheets)qE(this,this.stylesheets);else if(this.unsuspend){var u=this.unsuspend;this.unsuspend=null,u()}}}var Um=null;function qE(u,c){u.stylesheets=null,u.unsuspend!==null&&(u.count++,Um=new Map,c.forEach(aV,u),Um=null,Lm.call(u))}function aV(u,c){if(!(c.state.loading&4)){var g=Um.get(u);if(g)var m=g.get(null);else{g=new Map,Um.set(u,g);for(var x=u.querySelectorAll("link[data-precedence],style[data-precedence]"),S=0;S<x.length;S++){var C=x[S];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(g.set(C.dataset.precedence,C),m=C)}m&&g.set(null,m)}x=c.instance,C=x.getAttribute("data-precedence"),S=g.get(C)||m,S===m&&g.set(null,x),g.set(C,x),this.count++,m=Lm.bind(this),x.addEventListener("load",m),x.addEventListener("error",m),S?S.parentNode.insertBefore(x,S.nextSibling):(u=u.nodeType===9?u.head:u,u.insertBefore(x,u.firstChild)),c.state.loading|=4}}var Kh={$$typeof:y,Provider:null,Consumer:null,_currentValue:de,_currentValue2:de,_threadCount:0};function sV(u,c,g,m,x,S,C,N){this.tag=1,this.containerInfo=u,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Gx(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gx(0),this.hiddenUpdates=Gx(null),this.identifierPrefix=m,this.onUncaughtError=x,this.onCaughtError=S,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=N,this.incompleteTransitions=new Map}function t5(u,c,g,m,x,S,C,N,B,Y,ae,ce){return u=new sV(u,c,g,C,N,B,Y,ce),c=1,S===!0&&(c|=24),S=Cr(3,null,null,c),u.current=S,S.stateNode=u,c=E2(),c.refCount++,u.pooledCache=c,c.refCount++,S.memoizedState={element:m,isDehydrated:g,cache:c},tE(S),u}function n5(u){return u?(u=Qc,u):Qc}function i5(u,c,g,m,x,S){x=n5(x),m.context===null?m.context=x:m.pendingContext=x,m=Fo(c),m.payload={element:g},S=S===void 0?null:S,S!==null&&(m.callback=S),g=Lo(u,m,c),g!==null&&(fi(g,u,c),zh(g,u,c))}function r5(u,c){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var g=u.retryLane;u.retryLane=g!==0&&g<c?g:c}}function HE(u,c){r5(u,c),(u=u.alternate)&&r5(u,c)}function a5(u){if(u.tag===13){var c=Mo(u,67108864);c!==null&&fi(c,u,67108864),HE(u,67108864)}}var Bm=!0;function oV(u,c,g,m){var x=$.T;$.T=null;var S=ue.p;try{ue.p=2,GE(u,c,g,m)}finally{ue.p=S,$.T=x}}function uV(u,c,g,m){var x=$.T;$.T=null;var S=ue.p;try{ue.p=8,GE(u,c,g,m)}finally{ue.p=S,$.T=x}}function GE(u,c,g,m){if(Bm){var x=YE(m);if(x===null)DE(u,c,m,jm,g),o5(u,m);else if(cV(x,u,c,g,m))m.stopPropagation();else if(o5(u,m),c&4&&-1<lV.indexOf(u)){for(;x!==null;){var S=Bc(x);if(S!==null)switch(S.tag){case 3:if(S=S.stateNode,S.current.memoizedState.isDehydrated){var C=Zu(S.pendingLanes);if(C!==0){var N=S;for(N.pendingLanes|=2,N.entangledLanes|=2;C;){var B=1<<31-Vi(C);N.entanglements[1]|=B,C&=~B}za(S),!(Pt&6)&&(_m=Tt()+500,Yh(0))}}break;case 13:N=Mo(S,2),N!==null&&fi(N,S,2),Cm(),HE(S,2)}if(S=YE(m),S===null&&DE(u,c,m,jm,g),S===x)break;x=S}x!==null&&m.stopPropagation()}else DE(u,c,m,null,g)}}function YE(u){return u=Kx(u),XE(u)}var jm=null;function XE(u){if(jm=null,u=Ku(u),u!==null){var c=V(u);if(c===null)u=null;else{var g=c.tag;if(g===13){if(u=G(c),u!==null)return u;u=null}else if(g===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;u=null}else c!==u&&(u=null)}}return jm=u,null}function s5(u){switch(u){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(pr()){case Kt:return 2;case Rn:return 8;case Mi:case sh:return 32;case oh:return 268435456;default:return 32}default:return 32}}var VE=!1,Ho=null,Go=null,Yo=null,Jh=new Map,eg=new Map,Xo=[],lV="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function o5(u,c){switch(u){case"focusin":case"focusout":Ho=null;break;case"dragenter":case"dragleave":Go=null;break;case"mouseover":case"mouseout":Yo=null;break;case"pointerover":case"pointerout":Jh.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":eg.delete(c.pointerId)}}function tg(u,c,g,m,x,S){return u===null||u.nativeEvent!==S?(u={blockedOn:c,domEventName:g,eventSystemFlags:m,nativeEvent:S,targetContainers:[x]},c!==null&&(c=Bc(c),c!==null&&a5(c)),u):(u.eventSystemFlags|=m,c=u.targetContainers,x!==null&&c.indexOf(x)===-1&&c.push(x),u)}function cV(u,c,g,m,x){switch(c){case"focusin":return Ho=tg(Ho,u,c,g,m,x),!0;case"dragenter":return Go=tg(Go,u,c,g,m,x),!0;case"mouseover":return Yo=tg(Yo,u,c,g,m,x),!0;case"pointerover":var S=x.pointerId;return Jh.set(S,tg(Jh.get(S)||null,u,c,g,m,x)),!0;case"gotpointercapture":return S=x.pointerId,eg.set(S,tg(eg.get(S)||null,u,c,g,m,x)),!0}return!1}function u5(u){var c=Ku(u.target);if(c!==null){var g=V(c);if(g!==null){if(c=g.tag,c===13){if(c=G(g),c!==null){u.blockedOn=c,rY(u.priority,function(){if(g.tag===13){var m=Ji(),x=Mo(g,m);x!==null&&fi(x,g,m),HE(g,m)}});return}}else if(c===3&&g.stateNode.current.memoizedState.isDehydrated){u.blockedOn=g.tag===3?g.stateNode.containerInfo:null;return}}}u.blockedOn=null}function Pm(u){if(u.blockedOn!==null)return!1;for(var c=u.targetContainers;0<c.length;){var g=YE(u.nativeEvent);if(g===null){g=u.nativeEvent;var m=new g.constructor(g.type,g);Zx=m,g.target.dispatchEvent(m),Zx=null}else return c=Bc(g),c!==null&&a5(c),u.blockedOn=g,!1;c.shift()}return!0}function l5(u,c,g){Pm(u)&&g.delete(c)}function fV(){VE=!1,Ho!==null&&Pm(Ho)&&(Ho=null),Go!==null&&Pm(Go)&&(Go=null),Yo!==null&&Pm(Yo)&&(Yo=null),Jh.forEach(l5),eg.forEach(l5)}function Im(u,c){u.blockedOn===c&&(u.blockedOn=null,VE||(VE=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,fV)))}var qm=null;function c5(u){qm!==u&&(qm=u,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){qm===u&&(qm=null);for(var c=0;c<u.length;c+=3){var g=u[c],m=u[c+1],x=u[c+2];if(typeof m!="function"){if(XE(m||g)===null)continue;break}var S=Bc(g);S!==null&&(u.splice(c,3),c-=3,L2(S,{pending:!0,data:x,method:g.method,action:m},m,x))}}))}function ng(u){function c(B){return Im(B,u)}Ho!==null&&Im(Ho,u),Go!==null&&Im(Go,u),Yo!==null&&Im(Yo,u),Jh.forEach(c),eg.forEach(c);for(var g=0;g<Xo.length;g++){var m=Xo[g];m.blockedOn===u&&(m.blockedOn=null)}for(;0<Xo.length&&(g=Xo[0],g.blockedOn===null);)u5(g),g.blockedOn===null&&Xo.shift();if(g=(u.ownerDocument||u).$$reactFormReplay,g!=null)for(m=0;m<g.length;m+=3){var x=g[m],S=g[m+1],C=x[ki]||null;if(typeof S=="function")C||c5(g);else if(C){var N=null;if(S&&S.hasAttribute("formAction")){if(x=S,C=S[ki]||null)N=C.formAction;else if(XE(x)!==null)continue}else N=C.action;typeof N=="function"?g[m+1]=N:(g.splice(m,3),m-=3),c5(g)}}}function WE(u){this._internalRoot=u}Hm.prototype.render=WE.prototype.render=function(u){var c=this._internalRoot;if(c===null)throw Error(i(409));var g=c.current,m=Ji();i5(g,m,u,c,null,null)},Hm.prototype.unmount=WE.prototype.unmount=function(){var u=this._internalRoot;if(u!==null){this._internalRoot=null;var c=u.containerInfo;u.tag===0&&gf(),i5(u.current,2,null,u,null,null),Cm(),c[Uc]=null}};function Hm(u){this._internalRoot=u}Hm.prototype.unstable_scheduleHydration=function(u){if(u){var c=U3();u={blockedOn:null,target:u,priority:c};for(var g=0;g<Xo.length&&c!==0&&c<Xo[g].priority;g++);Xo.splice(g,0,u),g===0&&u5(u)}};var f5=t.version;if(f5!=="19.0.0")throw Error(i(527,f5,"19.0.0"));ue.findDOMNode=function(u){var c=u._reactInternals;if(c===void 0)throw typeof u.render=="function"?Error(i(188)):(u=Object.keys(u).join(","),Error(i(268,u)));return u=X(c),u=u!==null?J(u):null,u=u===null?null:u.stateNode,u};var dV={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:$,findFiberByHostInstance:Ku,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gm.isDisabled&&Gm.supportsFiber)try{Wr=Gm.inject(dV),Yn=Gm}catch{}}return rg.createRoot=function(u,c){if(!r(u))throw Error(i(299));var g=!1,m="",x=TR,S=MR,C=kR,N=null;return c!=null&&(c.unstable_strictMode===!0&&(g=!0),c.identifierPrefix!==void 0&&(m=c.identifierPrefix),c.onUncaughtError!==void 0&&(x=c.onUncaughtError),c.onCaughtError!==void 0&&(S=c.onCaughtError),c.onRecoverableError!==void 0&&(C=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(N=c.unstable_transitionCallbacks)),c=t5(u,1,!1,null,null,g,m,x,S,C,N,null),u[Uc]=c.current,RE(u.nodeType===8?u.parentNode:u),new WE(c)},rg.hydrateRoot=function(u,c,g){if(!r(u))throw Error(i(299));var m=!1,x="",S=TR,C=MR,N=kR,B=null,Y=null;return g!=null&&(g.unstable_strictMode===!0&&(m=!0),g.identifierPrefix!==void 0&&(x=g.identifierPrefix),g.onUncaughtError!==void 0&&(S=g.onUncaughtError),g.onCaughtError!==void 0&&(C=g.onCaughtError),g.onRecoverableError!==void 0&&(N=g.onRecoverableError),g.unstable_transitionCallbacks!==void 0&&(B=g.unstable_transitionCallbacks),g.formState!==void 0&&(Y=g.formState)),c=t5(u,1,!0,c,g??null,m,x,S,C,N,B,Y),c.context=n5(null),g=c.current,m=Ji(),x=Fo(m),x.callback=null,Lo(g,x,m),c.current.lanes=m,lh(c,m),za(c),u[Uc]=c.current,RE(u),new Hm(c)},rg.version="19.0.0",rg}var E5;function SV(){if(E5)return KE.exports;E5=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),KE.exports=EV(),KE.exports}var _V=SV();const wV=lC(_V);var N1={exports:{}};/* @license
Papa Parse
v5.5.2
https://github.com/mholt/PapaParse
License: MIT
*/var AV=N1.exports,S5;function CV(){return S5||(S5=1,function(e,t){((n,i)=>{e.exports=i()})(AV,function n(){var i=typeof self<"u"?self:typeof window<"u"?window:i!==void 0?i:{},r,a=!i.document&&!!i.postMessage,s=i.IS_PAPA_WORKER||!1,o={},l=0,f={};function d(k){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function($){var D=T($);D.chunkSize=parseInt(D.chunkSize),$.step||$.chunk||(D.chunkSize=null),this._handle=new b(D),(this._handle.streamer=this)._config=D}).call(this,k),this.parseChunk=function($,D){var z=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<z){let q=this._config.newline;q||(P=this._config.quoteChar||'"',q=this._handle.guessLineEndings($,P)),$=[...$.split(q).slice(z)].join(q)}this.isFirstChunk&&O(this._config.beforeFirstChunk)&&(P=this._config.beforeFirstChunk($))!==void 0&&($=P),this.isFirstChunk=!1,this._halted=!1;var z=this._partialLine+$,P=(this._partialLine="",this._handle.parse(z,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if($=P.meta.cursor,z=(this._finished||(this._partialLine=z.substring($-this._baseIndex),this._baseIndex=$),P&&P.data&&(this._rowCount+=P.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),s)i.postMessage({results:P,workerId:f.WORKER_ID,finished:z});else if(O(this._config.chunk)&&!D){if(this._config.chunk(P,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=P=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(P.data),this._completeResults.errors=this._completeResults.errors.concat(P.errors),this._completeResults.meta=P.meta),this._completed||!z||!O(this._config.complete)||P&&P.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),z||P&&P.meta.paused||this._nextChunk(),P}this._halted=!0},this._sendError=function($){O(this._config.error)?this._config.error($):s&&this._config.error&&i.postMessage({workerId:f.WORKER_ID,error:$,finished:!1})}}function h(k){var $;(k=k||{}).chunkSize||(k.chunkSize=f.RemoteChunkSize),d.call(this,k),this._nextChunk=a?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(D){this._input=D,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if($=new XMLHttpRequest,this._config.withCredentials&&($.withCredentials=this._config.withCredentials),a||($.onload=R(this._chunkLoaded,this),$.onerror=R(this._chunkError,this)),$.open(this._config.downloadRequestBody?"POST":"GET",this._input,!a),this._config.downloadRequestHeaders){var D,z=this._config.downloadRequestHeaders;for(D in z)$.setRequestHeader(D,z[D])}var P;this._config.chunkSize&&(P=this._start+this._config.chunkSize-1,$.setRequestHeader("Range","bytes="+this._start+"-"+P));try{$.send(this._config.downloadRequestBody)}catch(q){this._chunkError(q.message)}a&&$.status===0&&this._chunkError()}},this._chunkLoaded=function(){$.readyState===4&&($.status<200||400<=$.status?this._chunkError():(this._start+=this._config.chunkSize||$.responseText.length,this._finished=!this._config.chunkSize||this._start>=(D=>(D=D.getResponseHeader("Content-Range"))!==null?parseInt(D.substring(D.lastIndexOf("/")+1)):-1)($),this.parseChunk($.responseText)))},this._chunkError=function(D){D=$.statusText||D,this._sendError(new Error(D))}}function p(k){(k=k||{}).chunkSize||(k.chunkSize=f.LocalChunkSize),d.call(this,k);var $,D,z=typeof FileReader<"u";this.stream=function(P){this._input=P,D=P.slice||P.webkitSlice||P.mozSlice,z?(($=new FileReader).onload=R(this._chunkLoaded,this),$.onerror=R(this._chunkError,this)):$=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var P=this._input,q=(this._config.chunkSize&&(q=Math.min(this._start+this._config.chunkSize,this._input.size),P=D.call(P,this._start,q)),$.readAsText(P,this._config.encoding));z||this._chunkLoaded({target:{result:q}})},this._chunkLoaded=function(P){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(P.target.result)},this._chunkError=function(){this._sendError($.error)}}function y(k){var $;d.call(this,k=k||{}),this.stream=function(D){return $=D,this._nextChunk()},this._nextChunk=function(){var D,z;if(!this._finished)return D=this._config.chunkSize,$=D?(z=$.substring(0,D),$.substring(D)):(z=$,""),this._finished=!$,this.parseChunk(z)}}function v(k){d.call(this,k=k||{});var $=[],D=!0,z=!1;this.pause=function(){d.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){d.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(P){this._input=P,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){z&&$.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),$.length?this.parseChunk($.shift()):D=!0},this._streamData=R(function(P){try{$.push(typeof P=="string"?P:P.toString(this._config.encoding)),D&&(D=!1,this._checkIsFinished(),this.parseChunk($.shift()))}catch(q){this._streamError(q)}},this),this._streamError=R(function(P){this._streamCleanUp(),this._sendError(P)},this),this._streamEnd=R(function(){this._streamCleanUp(),z=!0,this._streamData("")},this),this._streamCleanUp=R(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function b(k){var $,D,z,P,q=Math.pow(2,53),j=-q,L=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,U=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,I=this,V=0,G=0,F=!1,X=!1,J=[],Z={data:[],errors:[],meta:{}};function ue(we){return k.skipEmptyLines==="greedy"?we.join("").trim()==="":we.length===1&&we[0].length===0}function de(){if(Z&&z&&(tt("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+f.DefaultDelimiter+"'"),z=!1),k.skipEmptyLines&&(Z.data=Z.data.filter(function(re){return!ue(re)})),Ae()){let re=function(Ie,Oe){O(k.transformHeader)&&(Ie=k.transformHeader(Ie,Oe)),J.push(Ie)};var ve=re;if(Z)if(Array.isArray(Z.data[0])){for(var we=0;Ae()&&we<Z.data.length;we++)Z.data[we].forEach(re);Z.data.splice(0,1)}else Z.data.forEach(re)}function se(re,Ie){for(var Oe=k.header?{}:[],Be=0;Be<re.length;Be++){var Te=Be,pt=re[Be],pt=((Ve,Et)=>(Bt=>(k.dynamicTypingFunction&&k.dynamicTyping[Bt]===void 0&&(k.dynamicTyping[Bt]=k.dynamicTypingFunction(Bt)),(k.dynamicTyping[Bt]||k.dynamicTyping)===!0))(Ve)?Et==="true"||Et==="TRUE"||Et!=="false"&&Et!=="FALSE"&&((Bt=>{if(L.test(Bt)&&(Bt=parseFloat(Bt),j<Bt&&Bt<q))return 1})(Et)?parseFloat(Et):U.test(Et)?new Date(Et):Et===""?null:Et):Et)(Te=k.header?Be>=J.length?"__parsed_extra":J[Be]:Te,pt=k.transform?k.transform(pt,Te):pt);Te==="__parsed_extra"?(Oe[Te]=Oe[Te]||[],Oe[Te].push(pt)):Oe[Te]=pt}return k.header&&(Be>J.length?tt("FieldMismatch","TooManyFields","Too many fields: expected "+J.length+" fields but parsed "+Be,G+Ie):Be<J.length&&tt("FieldMismatch","TooFewFields","Too few fields: expected "+J.length+" fields but parsed "+Be,G+Ie)),Oe}var ye;Z&&(k.header||k.dynamicTyping||k.transform)&&(ye=1,!Z.data.length||Array.isArray(Z.data[0])?(Z.data=Z.data.map(se),ye=Z.data.length):Z.data=se(Z.data,0),k.header&&Z.meta&&(Z.meta.fields=J),G+=ye)}function Ae(){return k.header&&J.length===0}function tt(we,se,ye,ve){we={type:we,code:se,message:ye},ve!==void 0&&(we.row=ve),Z.errors.push(we)}O(k.step)&&(P=k.step,k.step=function(we){Z=we,Ae()?de():(de(),Z.data.length!==0&&(V+=we.data.length,k.preview&&V>k.preview?D.abort():(Z.data=Z.data[0],P(Z,I))))}),this.parse=function(we,se,ye){var ve=k.quoteChar||'"',ve=(k.newline||(k.newline=this.guessLineEndings(we,ve)),z=!1,k.delimiter?O(k.delimiter)&&(k.delimiter=k.delimiter(we),Z.meta.delimiter=k.delimiter):((ve=((re,Ie,Oe,Be,Te)=>{var pt,Ve,Et,Bt;Te=Te||[",","	","|",";",f.RECORD_SEP,f.UNIT_SEP];for(var ka=0;ka<Te.length;ka++){for(var gr,Qu=Te[ka],Tt=0,pr=0,Kt=0,Rn=(Et=void 0,new _({comments:Be,delimiter:Qu,newline:Ie,preview:10}).parse(re)),Mi=0;Mi<Rn.data.length;Mi++)Oe&&ue(Rn.data[Mi])?Kt++:(gr=Rn.data[Mi].length,pr+=gr,Et===void 0?Et=gr:0<gr&&(Tt+=Math.abs(gr-Et),Et=gr));0<Rn.data.length&&(pr/=Rn.data.length-Kt),(Ve===void 0||Tt<=Ve)&&(Bt===void 0||Bt<pr)&&1.99<pr&&(Ve=Tt,pt=Qu,Bt=pr)}return{successful:!!(k.delimiter=pt),bestDelimiter:pt}})(we,k.newline,k.skipEmptyLines,k.comments,k.delimitersToGuess)).successful?k.delimiter=ve.bestDelimiter:(z=!0,k.delimiter=f.DefaultDelimiter),Z.meta.delimiter=k.delimiter),T(k));return k.preview&&k.header&&ve.preview++,$=we,D=new _(ve),Z=D.parse($,se,ye),de(),F?{meta:{paused:!0}}:Z||{meta:{paused:!1}}},this.paused=function(){return F},this.pause=function(){F=!0,D.abort(),$=O(k.chunk)?"":$.substring(D.getCharIndex())},this.resume=function(){I.streamer._halted?(F=!1,I.streamer.parseChunk($,!0)):setTimeout(I.resume,3)},this.aborted=function(){return X},this.abort=function(){X=!0,D.abort(),Z.meta.aborted=!0,O(k.complete)&&k.complete(Z),$=""},this.guessLineEndings=function(re,ve){re=re.substring(0,1048576);var ve=new RegExp(E(ve)+"([^]*?)"+E(ve),"gm"),ye=(re=re.replace(ve,"")).split("\r"),ve=re.split(`
`),re=1<ve.length&&ve[0].length<ye[0].length;if(ye.length===1||re)return`
`;for(var Ie=0,Oe=0;Oe<ye.length;Oe++)ye[Oe][0]===`
`&&Ie++;return Ie>=ye.length/2?`\r
`:"\r"}}function E(k){return k.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function _(k){var $=(k=k||{}).delimiter,D=k.newline,z=k.comments,P=k.step,q=k.preview,j=k.fastMode,L=null,U=!1,I=k.quoteChar==null?'"':k.quoteChar,V=I;if(k.escapeChar!==void 0&&(V=k.escapeChar),(typeof $!="string"||-1<f.BAD_DELIMITERS.indexOf($))&&($=","),z===$)throw new Error("Comment character same as delimiter");z===!0?z="#":(typeof z!="string"||-1<f.BAD_DELIMITERS.indexOf(z))&&(z=!1),D!==`
`&&D!=="\r"&&D!==`\r
`&&(D=`
`);var G=0,F=!1;this.parse=function(X,J,Z){if(typeof X!="string")throw new Error("Input must be a string");var ue=X.length,de=$.length,Ae=D.length,tt=z.length,we=O(P),se=[],ye=[],ve=[],re=G=0;if(!X)return Tt();if(j||j!==!1&&X.indexOf(I)===-1){for(var Ie=X.split(D),Oe=0;Oe<Ie.length;Oe++){if(ve=Ie[Oe],G+=ve.length,Oe!==Ie.length-1)G+=D.length;else if(Z)return Tt();if(!z||ve.substring(0,tt)!==z){if(we){if(se=[],Bt(ve.split($)),pr(),F)return Tt()}else Bt(ve.split($));if(q&&q<=Oe)return se=se.slice(0,q),Tt(!0)}}return Tt()}for(var Be=X.indexOf($,G),Te=X.indexOf(D,G),pt=new RegExp(E(V)+E(I),"g"),Ve=X.indexOf(I,G);;)if(X[G]===I)for(Ve=G,G++;;){if((Ve=X.indexOf(I,Ve+1))===-1)return Z||ye.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:se.length,index:G}),gr();if(Ve===ue-1)return gr(X.substring(G,Ve).replace(pt,I));if(I===V&&X[Ve+1]===V)Ve++;else if(I===V||Ve===0||X[Ve-1]!==V){Be!==-1&&Be<Ve+1&&(Be=X.indexOf($,Ve+1));var Et=ka((Te=Te!==-1&&Te<Ve+1?X.indexOf(D,Ve+1):Te)===-1?Be:Math.min(Be,Te));if(X.substr(Ve+1+Et,de)===$){ve.push(X.substring(G,Ve).replace(pt,I)),X[G=Ve+1+Et+de]!==I&&(Ve=X.indexOf(I,G)),Be=X.indexOf($,G),Te=X.indexOf(D,G);break}if(Et=ka(Te),X.substring(Ve+1+Et,Ve+1+Et+Ae)===D){if(ve.push(X.substring(G,Ve).replace(pt,I)),Qu(Ve+1+Et+Ae),Be=X.indexOf($,G),Ve=X.indexOf(I,G),we&&(pr(),F))return Tt();if(q&&se.length>=q)return Tt(!0);break}ye.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:se.length,index:G}),Ve++}}else if(z&&ve.length===0&&X.substring(G,G+tt)===z){if(Te===-1)return Tt();G=Te+Ae,Te=X.indexOf(D,G),Be=X.indexOf($,G)}else if(Be!==-1&&(Be<Te||Te===-1))ve.push(X.substring(G,Be)),G=Be+de,Be=X.indexOf($,G);else{if(Te===-1)break;if(ve.push(X.substring(G,Te)),Qu(Te+Ae),we&&(pr(),F))return Tt();if(q&&se.length>=q)return Tt(!0)}return gr();function Bt(Kt){se.push(Kt),re=G}function ka(Kt){var Rn=0;return Rn=Kt!==-1&&(Kt=X.substring(Ve+1,Kt))&&Kt.trim()===""?Kt.length:Rn}function gr(Kt){return Z||(Kt===void 0&&(Kt=X.substring(G)),ve.push(Kt),G=ue,Bt(ve),we&&pr()),Tt()}function Qu(Kt){G=Kt,Bt(ve),ve=[],Te=X.indexOf(D,G)}function Tt(Kt){if(k.header&&!J&&se.length&&!U){var Rn=se[0],Mi={},sh=new Set(Rn);let oh=!1;for(let Ao=0;Ao<Rn.length;Ao++){let mr=Rn[Ao];if(Mi[mr=O(k.transformHeader)?k.transformHeader(mr,Ao):mr]){let Wr,Yn=Mi[mr];for(;Wr=mr+"_"+Yn,Yn++,sh.has(Wr););sh.add(Wr),Rn[Ao]=Wr,Mi[mr]++,oh=!0,(L=L===null?{}:L)[Wr]=mr}else Mi[mr]=1,Rn[Ao]=mr;sh.add(mr)}oh&&console.warn("Duplicate headers found and renamed."),U=!0}return{data:se,errors:ye,meta:{delimiter:$,linebreak:D,aborted:F,truncated:!!Kt,cursor:re+(J||0),renamedHeaders:L}}}function pr(){P(Tt()),se=[],ye=[]}},this.abort=function(){F=!0},this.getCharIndex=function(){return G}}function w(k){var $=k.data,D=o[$.workerId],z=!1;if($.error)D.userError($.error,$.file);else if($.results&&$.results.data){var P={abort:function(){z=!0,A($.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:M,resume:M};if(O(D.userStep)){for(var q=0;q<$.results.data.length&&(D.userStep({data:$.results.data[q],errors:$.results.errors,meta:$.results.meta},P),!z);q++);delete $.results}else O(D.userChunk)&&(D.userChunk($.results,P,$.file),delete $.results)}$.finished&&!z&&A($.workerId,$.results)}function A(k,$){var D=o[k];O(D.userComplete)&&D.userComplete($),D.terminate(),delete o[k]}function M(){throw new Error("Not implemented.")}function T(k){if(typeof k!="object"||k===null)return k;var $,D=Array.isArray(k)?[]:{};for($ in k)D[$]=T(k[$]);return D}function R(k,$){return function(){k.apply($,arguments)}}function O(k){return typeof k=="function"}return f.parse=function(k,$){var D=($=$||{}).dynamicTyping||!1;if(O(D)&&($.dynamicTypingFunction=D,D={}),$.dynamicTyping=D,$.transform=!!O($.transform)&&$.transform,!$.worker||!f.WORKERS_SUPPORTED)return D=null,f.NODE_STREAM_INPUT,typeof k=="string"?(k=(z=>z.charCodeAt(0)!==65279?z:z.slice(1))(k),D=new($.download?h:y)($)):k.readable===!0&&O(k.read)&&O(k.on)?D=new v($):(i.File&&k instanceof File||k instanceof Object)&&(D=new p($)),D.stream(k);(D=(()=>{var z;return!!f.WORKERS_SUPPORTED&&(z=(()=>{var P=i.URL||i.webkitURL||null,q=n.toString();return f.BLOB_URL||(f.BLOB_URL=P.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",q,")();"],{type:"text/javascript"})))})(),(z=new i.Worker(z)).onmessage=w,z.id=l++,o[z.id]=z)})()).userStep=$.step,D.userChunk=$.chunk,D.userComplete=$.complete,D.userError=$.error,$.step=O($.step),$.chunk=O($.chunk),$.complete=O($.complete),$.error=O($.error),delete $.worker,D.postMessage({input:k,config:$,workerId:D.id})},f.unparse=function(k,$){var D=!1,z=!0,P=",",q=`\r
`,j='"',L=j+j,U=!1,I=null,V=!1,G=((()=>{if(typeof $=="object"){if(typeof $.delimiter!="string"||f.BAD_DELIMITERS.filter(function(J){return $.delimiter.indexOf(J)!==-1}).length||(P=$.delimiter),typeof $.quotes!="boolean"&&typeof $.quotes!="function"&&!Array.isArray($.quotes)||(D=$.quotes),typeof $.skipEmptyLines!="boolean"&&typeof $.skipEmptyLines!="string"||(U=$.skipEmptyLines),typeof $.newline=="string"&&(q=$.newline),typeof $.quoteChar=="string"&&(j=$.quoteChar),typeof $.header=="boolean"&&(z=$.header),Array.isArray($.columns)){if($.columns.length===0)throw new Error("Option columns is empty");I=$.columns}$.escapeChar!==void 0&&(L=$.escapeChar+j),$.escapeFormulae instanceof RegExp?V=$.escapeFormulae:typeof $.escapeFormulae=="boolean"&&$.escapeFormulae&&(V=/^[=+\-@\t\r].*$/)}})(),new RegExp(E(j),"g"));if(typeof k=="string"&&(k=JSON.parse(k)),Array.isArray(k)){if(!k.length||Array.isArray(k[0]))return F(null,k,U);if(typeof k[0]=="object")return F(I||Object.keys(k[0]),k,U)}else if(typeof k=="object")return typeof k.data=="string"&&(k.data=JSON.parse(k.data)),Array.isArray(k.data)&&(k.fields||(k.fields=k.meta&&k.meta.fields||I),k.fields||(k.fields=Array.isArray(k.data[0])?k.fields:typeof k.data[0]=="object"?Object.keys(k.data[0]):[]),Array.isArray(k.data[0])||typeof k.data[0]=="object"||(k.data=[k.data])),F(k.fields||[],k.data||[],U);throw new Error("Unable to serialize unrecognized input");function F(J,Z,ue){var de="",Ae=(typeof J=="string"&&(J=JSON.parse(J)),typeof Z=="string"&&(Z=JSON.parse(Z)),Array.isArray(J)&&0<J.length),tt=!Array.isArray(Z[0]);if(Ae&&z){for(var we=0;we<J.length;we++)0<we&&(de+=P),de+=X(J[we],we);0<Z.length&&(de+=q)}for(var se=0;se<Z.length;se++){var ye=(Ae?J:Z[se]).length,ve=!1,re=Ae?Object.keys(Z[se]).length===0:Z[se].length===0;if(ue&&!Ae&&(ve=ue==="greedy"?Z[se].join("").trim()==="":Z[se].length===1&&Z[se][0].length===0),ue==="greedy"&&Ae){for(var Ie=[],Oe=0;Oe<ye;Oe++){var Be=tt?J[Oe]:Oe;Ie.push(Z[se][Be])}ve=Ie.join("").trim()===""}if(!ve){for(var Te=0;Te<ye;Te++){0<Te&&!re&&(de+=P);var pt=Ae&&tt?J[Te]:Te;de+=X(Z[se][pt],Te)}se<Z.length-1&&(!ue||0<ye&&!re)&&(de+=q)}}return de}function X(J,Z){var ue,de;return J==null?"":J.constructor===Date?JSON.stringify(J).slice(1,25):(de=!1,V&&typeof J=="string"&&V.test(J)&&(J="'"+J,de=!0),ue=J.toString().replace(G,L),(de=de||D===!0||typeof D=="function"&&D(J,Z)||Array.isArray(D)&&D[Z]||((Ae,tt)=>{for(var we=0;we<tt.length;we++)if(-1<Ae.indexOf(tt[we]))return!0;return!1})(ue,f.BAD_DELIMITERS)||-1<ue.indexOf(P)||ue.charAt(0)===" "||ue.charAt(ue.length-1)===" ")?j+ue+j:ue)}},f.RECORD_SEP="",f.UNIT_SEP="",f.BYTE_ORDER_MARK="\uFEFF",f.BAD_DELIMITERS=["\r",`
`,'"',f.BYTE_ORDER_MARK],f.WORKERS_SUPPORTED=!a&&!!i.Worker,f.NODE_STREAM_INPUT=1,f.LocalChunkSize=10485760,f.RemoteChunkSize=5242880,f.DefaultDelimiter=",",f.Parser=_,f.ParserHandle=b,f.NetworkStreamer=h,f.FileStreamer=p,f.StringStreamer=y,f.ReadableStreamStreamer=v,i.jQuery&&((r=i.jQuery).fn.parse=function(k){var $=k.config||{},D=[];return this.each(function(q){if(!(r(this).prop("tagName").toUpperCase()==="INPUT"&&r(this).attr("type").toLowerCase()==="file"&&i.FileReader)||!this.files||this.files.length===0)return!0;for(var j=0;j<this.files.length;j++)D.push({file:this.files[j],inputElem:this,instanceConfig:r.extend({},$)})}),z(),this;function z(){if(D.length===0)O(k.complete)&&k.complete();else{var q,j,L,U,I=D[0];if(O(k.before)){var V=k.before(I.file,I.inputElem);if(typeof V=="object"){if(V.action==="abort")return q="AbortError",j=I.file,L=I.inputElem,U=V.reason,void(O(k.error)&&k.error({name:q},j,L,U));if(V.action==="skip")return void P();typeof V.config=="object"&&(I.instanceConfig=r.extend(I.instanceConfig,V.config))}else if(V==="skip")return void P()}var G=I.instanceConfig.complete;I.instanceConfig.complete=function(F){O(G)&&G(F,I.file,I.inputElem),P()},f.parse(I.file,I.instanceConfig)}}function P(){D.splice(0,1),z()}}),s&&(i.onmessage=function(k){k=k.data,f.WORKER_ID===void 0&&k&&(f.WORKER_ID=k.workerId),typeof k.input=="string"?i.postMessage({workerId:f.WORKER_ID,results:f.parse(k.input,k.config),finished:!0}):(i.File&&k.input instanceof File||k.input instanceof Object)&&(k=f.parse(k.input,k.config))&&i.postMessage({workerId:f.WORKER_ID,results:k,finished:!0})}),(h.prototype=Object.create(d.prototype)).constructor=h,(p.prototype=Object.create(d.prototype)).constructor=p,(y.prototype=Object.create(y.prototype)).constructor=y,(v.prototype=Object.create(d.prototype)).constructor=v,f})}(N1)),N1.exports}var $V=CV();const TV=lC($V),MV=/("(?:[^\\"]|\\.)*")|[:,]/g;function nS(e,t={}){const n=JSON.stringify([1],void 0,t.indent===void 0?2:t.indent).slice(2,-3),i=n===""?1/0:t.maxLength===void 0?80:t.maxLength;let{replacer:r}=t;return function a(s,o,l){s&&typeof s.toJSON=="function"&&(s=s.toJSON());const f=JSON.stringify(s,r);if(f===void 0)return f;const d=i-o.length-l;if(f.length<=d){const h=f.replace(MV,(p,y)=>y||`${p} `);if(h.length<=d)return h}if(r!=null&&(s=JSON.parse(f),r=void 0),typeof s=="object"&&s!==null){const h=o+n,p=[];let y=0,v,b;if(Array.isArray(s)){v="[",b="]";const{length:E}=s;for(;y<E;y++)p.push(a(s[y],h,y===E-1?0:1)||"null")}else{v="{",b="}";const E=Object.keys(s),{length:_}=E;for(;y<_;y++){const w=E[y],A=`${JSON.stringify(w)}: `,M=a(s[w],h,A.length+(y===_-1?0:1));M!==void 0&&p.push(A+M)}}if(p.length>0)return[v,n+p.join(`,
${h}`),b].join(`
${o}`)}return f}(e,"",0)}function Yi(e,t,n){return e.fields=t||[],e.fname=n,e}function Zt(e){return e==null?null:e.fname}function ri(e){return e==null?null:e.fields}function a8(e){return e.length===1?kV(e[0]):OV(e)}const kV=e=>function(t){return t[e]},OV=e=>{const t=e.length;return function(n){for(let i=0;i<t;++i)n=n[e[i]];return n}};function ie(e){throw Error(e)}function ls(e){const t=[],n=e.length;let i=null,r=0,a="",s,o,l;e=e+"";function f(){t.push(a+e.substring(s,o)),a="",s=o+1}for(s=o=0;o<n;++o)if(l=e[o],l==="\\")a+=e.substring(s,o++),s=o;else if(l===i)f(),i=null,r=-1;else{if(i)continue;s===r&&l==='"'||s===r&&l==="'"?(s=o+1,i=l):l==="."&&!r?o>s?f():s=o+1:l==="["?(o>s&&f(),r=s=o+1):l==="]"&&(r||ie("Access path missing open bracket: "+e),r>0&&f(),r=0,s=o+1)}return r&&ie("Access path missing closing bracket: "+e),i&&ie("Access path missing closing quote: "+e),o>s&&(o++,f()),t}function Br(e,t,n){const i=ls(e);return e=i.length===1?i[0]:e,Yi((n&&n.get||a8)(i),[e],t||e)}const Hp=Br("id"),ui=Yi(e=>e,[],"identity"),ru=Yi(()=>0,[],"zero"),Dd=Yi(()=>1,[],"one"),jr=Yi(()=>!0,[],"true"),Qo=Yi(()=>!1,[],"false");function RV(e,t,n){const i=[t].concat([].slice.call(n));console[e].apply(console,i)}const s8=0,fC=1,dC=2,o8=3,u8=4;function hC(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:RV,i=e||s8;return{level(r){return arguments.length?(i=+r,this):i},error(){return i>=fC&&n(t||"error","ERROR",arguments),this},warn(){return i>=dC&&n(t||"warn","WARN",arguments),this},info(){return i>=o8&&n(t||"log","INFO",arguments),this},debug(){return i>=u8&&n(t||"log","DEBUG",arguments),this}}}var oe=Array.isArray;function Ee(e){return e===Object(e)}const _5=e=>e!=="__proto__";function Nd(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((i,r)=>{for(const a in r)if(a==="signals")i.signals=DV(i.signals,r.signals);else{const s=a==="legend"?{layout:1}:a==="style"?!0:null;zd(i,a,r[a],s)}return i},{})}function zd(e,t,n,i){if(!_5(t))return;let r,a;if(Ee(n)&&!oe(n)){a=Ee(e[t])?e[t]:e[t]={};for(r in n)i&&(i===!0||i[r])?zd(a,r,n[r]):_5(r)&&(a[r]=n[r])}else e[t]=n}function DV(e,t){if(e==null)return t;const n={},i=[];function r(a){n[a.name]||(n[a.name]=1,i.push(a))}return t.forEach(r),e.forEach(r),i}function st(e){return e[e.length-1]}function ni(e){return e==null||e===""?null:+e}const l8=e=>t=>e*Math.exp(t),c8=e=>t=>Math.log(e*t),f8=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),d8=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,oy=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function Bv(e,t,n,i){const r=n(e[0]),a=n(st(e)),s=(a-r)*t;return[i(r-s),i(a-s)]}function h8(e,t){return Bv(e,t,ni,ui)}function g8(e,t){var n=Math.sign(e[0]);return Bv(e,t,c8(n),l8(n))}function p8(e,t,n){return Bv(e,t,oy(n),oy(1/n))}function m8(e,t,n){return Bv(e,t,f8(n),d8(n))}function jv(e,t,n,i,r){const a=i(e[0]),s=i(st(e)),o=t!=null?i(t):(a+s)/2;return[r(o+(a-o)*n),r(o+(s-o)*n)]}function gC(e,t,n){return jv(e,t,n,ni,ui)}function pC(e,t,n){const i=Math.sign(e[0]);return jv(e,t,n,c8(i),l8(i))}function uy(e,t,n,i){return jv(e,t,n,oy(i),oy(1/i))}function mC(e,t,n,i){return jv(e,t,n,f8(i),d8(i))}function y8(e){return 1+~~(new Date(e).getMonth()/3)}function v8(e){return 1+~~(new Date(e).getUTCMonth()/3)}function Se(e){return e!=null?oe(e)?e:[e]:[]}function b8(e,t,n){let i=e[0],r=e[1],a;return r<i&&(a=r,r=i,i=a),a=r-i,a>=n-t?[t,n]:[i=Math.min(Math.max(i,t),n-a),i+a]}function Xe(e){return typeof e=="function"}const NV="descending";function yC(e,t,n){n=n||{},t=Se(t)||[];const i=[],r=[],a={},s=n.comparator||zV;return Se(e).forEach((o,l)=>{o!=null&&(i.push(t[l]===NV?-1:1),r.push(o=Xe(o)?o:Br(o,null,n)),(ri(o)||[]).forEach(f=>a[f]=1))}),r.length===0?null:Yi(s(r,i),Object.keys(a))}const Fd=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),zV=(e,t)=>e.length===1?FV(e[0],t[0]):LV(e,t,e.length),FV=(e,t)=>function(n,i){return Fd(e(n),e(i))*t},LV=(e,t,n)=>(t.push(0),function(i,r){let a,s=0,o=-1;for(;s===0&&++o<n;)a=e[o],s=Fd(a(i),a(r));return s*t[o]});function li(e){return Xe(e)?e:()=>e}function vC(e,t){let n;return i=>{n&&clearTimeout(n),n=setTimeout(()=>(t(i),n=null),e)}}function Ge(e){for(let t,n,i=1,r=arguments.length;i<r;++i){t=arguments[i];for(n in t)e[n]=t[n]}return e}function es(e,t){let n=0,i,r,a,s;if(e&&(i=e.length))if(t==null){for(r=e[n];n<i&&(r==null||r!==r);r=e[++n]);for(a=s=r;n<i;++n)r=e[n],r!=null&&(r<a&&(a=r),r>s&&(s=r))}else{for(r=t(e[n]);n<i&&(r==null||r!==r);r=t(e[++n]));for(a=s=r;n<i;++n)r=t(e[n]),r!=null&&(r<a&&(a=r),r>s&&(s=r))}return[a,s]}function x8(e,t){const n=e.length;let i=-1,r,a,s,o,l;if(t==null){for(;++i<n;)if(a=e[i],a!=null&&a>=a){r=s=a;break}if(i===n)return[-1,-1];for(o=l=i;++i<n;)a=e[i],a!=null&&(r>a&&(r=a,o=i),s<a&&(s=a,l=i))}else{for(;++i<n;)if(a=t(e[i],i,e),a!=null&&a>=a){r=s=a;break}if(i===n)return[-1,-1];for(o=l=i;++i<n;)a=t(e[i],i,e),a!=null&&(r>a&&(r=a,o=i),s<a&&(s=a,l=i))}return[o,l]}function Ce(e,t){return Object.hasOwn(e,t)}const Ym={};function Ld(e){let t={},n;function i(a){return Ce(t,a)&&t[a]!==Ym}const r={size:0,empty:0,object:t,has:i,get(a){return i(a)?t[a]:void 0},set(a,s){return i(a)||(++r.size,t[a]===Ym&&--r.empty),t[a]=s,this},delete(a){return i(a)&&(--r.size,++r.empty,t[a]=Ym),this},clear(){r.size=r.empty=0,r.object=t={}},test(a){return arguments.length?(n=a,r):n},clean(){const a={};let s=0;for(const o in t){const l=t[o];l!==Ym&&(!n||!n(l))&&(a[o]=l,++s)}r.size=s,r.empty=0,r.object=t=a}};return e&&Object.keys(e).forEach(a=>{r.set(a,e[a])}),r}function E8(e,t,n,i,r,a){if(!n&&n!==0)return a;const s=+n;let o=e[0],l=st(e),f;l<o&&(f=o,o=l,l=f),f=Math.abs(t-o);const d=Math.abs(l-t);return f<d&&f<=s?i:d<=s?r:a}function be(e,t,n){const i=e.prototype=Object.create(t.prototype);return Object.defineProperty(i,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),Ge(i,n)}function zf(e,t,n,i){let r=t[0],a=t[t.length-1],s;return r>a&&(s=r,r=a,a=s),n=n===void 0||n,i=i===void 0||i,(n?r<=e:r<e)&&(i?e<=a:e<a)}function zu(e){return typeof e=="boolean"}function gu(e){return Object.prototype.toString.call(e)==="[object Date]"}function S8(e){return e&&Xe(e[Symbol.iterator])}function dt(e){return typeof e=="number"}function _8(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function _e(e){return typeof e=="string"}function bC(e,t,n){e&&(e=t?Se(e).map(o=>o.replace(/\\(.)/g,"$1")):Se(e));const i=e&&e.length,r=n&&n.get||a8,a=o=>r(t?[o]:ls(o));let s;if(!i)s=function(){return""};else if(i===1){const o=a(e[0]);s=function(l){return""+o(l)}}else{const o=e.map(a);s=function(l){let f=""+o[0](l),d=0;for(;++d<i;)f+="|"+o[d](l);return f}}return Yi(s,e,"key")}function w8(e,t){const n=e[0],i=st(e),r=+t;return r?r===1?i:n+r*(i-n):n}const UV=1e4;function A8(e){e=+e||UV;let t,n,i;const r=()=>{t={},n={},i=0},a=(s,o)=>(++i>e&&(n=t,t={},i=1),t[s]=o);return r(),{clear:r,has:s=>Ce(t,s)||Ce(n,s),get:s=>Ce(t,s)?t[s]:Ce(n,s)?a(s,n[s]):void 0,set:(s,o)=>Ce(t,s)?t[s]=o:a(s,o)}}function C8(e,t,n,i){const r=t.length,a=n.length;if(!a)return t;if(!r)return n;const s=i||new t.constructor(r+a);let o=0,l=0,f=0;for(;o<r&&l<a;++f)s[f]=e(t[o],n[l])>0?n[l++]:t[o++];for(;o<r;++o,++f)s[f]=t[o];for(;l<a;++l,++f)s[f]=n[l];return s}function kg(e,t){let n="";for(;--t>=0;)n+=e;return n}function $8(e,t,n,i){const r=n||" ",a=e+"",s=t-a.length;return s<=0?a:i==="left"?kg(r,s)+a:i==="center"?kg(r,~~(s/2))+a+kg(r,Math.ceil(s/2)):a+kg(r,s)}function Gp(e){return e&&st(e)-e[0]||0}function me(e){return oe(e)?"["+e.map(me)+"]":Ee(e)||_e(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function xC(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const BV=e=>dt(e)||gu(e)?e:Date.parse(e);function EC(e,t){return t=t||BV,e==null||e===""?null:t(e)}function SC(e){return e==null||e===""?null:e+""}function pa(e){const t={},n=e.length;for(let i=0;i<n;++i)t[e[i]]=!0;return t}function T8(e,t,n,i){const r=i??"",a=e+"",s=a.length,o=Math.max(0,t-r.length);return s<=t?a:n==="left"?r+a.slice(s-o):n==="center"?a.slice(0,Math.ceil(o/2))+r+a.slice(s-~~(o/2)):a.slice(0,o)+r}function Jo(e,t,n){if(e)if(t){const i=e.length;for(let r=0;r<i;++r){const a=t(e[r]);a&&n(a,r,e)}}else e.forEach(n)}var w5={},iS={},rS=34,ag=10,aS=13;function M8(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function jV(e,t){var n=M8(e);return function(i,r){return t(n(i),r,e)}}function A5(e){var t=Object.create(null),n=[];return e.forEach(function(i){for(var r in i)r in t||n.push(t[r]=r)}),n}function Di(e,t){var n=e+"",i=n.length;return i<t?new Array(t-i+1).join(0)+n:n}function PV(e){return e<0?"-"+Di(-e,6):e>9999?"+"+Di(e,6):Di(e,4)}function IV(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),i=e.getUTCSeconds(),r=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":PV(e.getUTCFullYear())+"-"+Di(e.getUTCMonth()+1,2)+"-"+Di(e.getUTCDate(),2)+(r?"T"+Di(t,2)+":"+Di(n,2)+":"+Di(i,2)+"."+Di(r,3)+"Z":i?"T"+Di(t,2)+":"+Di(n,2)+":"+Di(i,2)+"Z":n||t?"T"+Di(t,2)+":"+Di(n,2)+"Z":"")}function qV(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function i(h,p){var y,v,b=r(h,function(E,_){if(y)return y(E,_-1);v=E,y=p?jV(E,p):M8(E)});return b.columns=v||[],b}function r(h,p){var y=[],v=h.length,b=0,E=0,_,w=v<=0,A=!1;h.charCodeAt(v-1)===ag&&--v,h.charCodeAt(v-1)===aS&&--v;function M(){if(w)return iS;if(A)return A=!1,w5;var R,O=b,k;if(h.charCodeAt(O)===rS){for(;b++<v&&h.charCodeAt(b)!==rS||h.charCodeAt(++b)===rS;);return(R=b)>=v?w=!0:(k=h.charCodeAt(b++))===ag?A=!0:k===aS&&(A=!0,h.charCodeAt(b)===ag&&++b),h.slice(O+1,R-1).replace(/""/g,'"')}for(;b<v;){if((k=h.charCodeAt(R=b++))===ag)A=!0;else if(k===aS)A=!0,h.charCodeAt(b)===ag&&++b;else if(k!==n)continue;return h.slice(O,R)}return w=!0,h.slice(O,v)}for(;(_=M())!==iS;){for(var T=[];_!==w5&&_!==iS;)T.push(_),_=M();p&&(T=p(T,E++))==null||y.push(T)}return y}function a(h,p){return h.map(function(y){return p.map(function(v){return d(y[v])}).join(e)})}function s(h,p){return p==null&&(p=A5(h)),[p.map(d).join(e)].concat(a(h,p)).join(`
`)}function o(h,p){return p==null&&(p=A5(h)),a(h,p).join(`
`)}function l(h){return h.map(f).join(`
`)}function f(h){return h.map(d).join(e)}function d(h){return h==null?"":h instanceof Date?IV(h):t.test(h+="")?'"'+h.replace(/"/g,'""')+'"':h}return{parse:i,parseRows:r,format:s,formatBody:o,formatRows:l,formatRow:f,formatValue:d}}function HV(e){return e}function GV(e){if(e==null)return HV;var t,n,i=e.scale[0],r=e.scale[1],a=e.translate[0],s=e.translate[1];return function(o,l){l||(t=n=0);var f=2,d=o.length,h=new Array(d);for(h[0]=(t+=o[0])*i+a,h[1]=(n+=o[1])*r+s;f<d;)h[f]=o[f],++f;return h}}function YV(e,t){for(var n,i=e.length,r=i-t;r<--i;)n=e[r],e[r++]=e[i],e[i]=n}function XV(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return C5(e,n)})}:C5(e,t)}function C5(e,t){var n=t.id,i=t.bbox,r=t.properties==null?{}:t.properties,a=k8(e,t);return n==null&&i==null?{type:"Feature",properties:r,geometry:a}:i==null?{type:"Feature",id:n,properties:r,geometry:a}:{type:"Feature",id:n,bbox:i,properties:r,geometry:a}}function k8(e,t){var n=GV(e.transform),i=e.arcs;function r(d,h){h.length&&h.pop();for(var p=i[d<0?~d:d],y=0,v=p.length;y<v;++y)h.push(n(p[y],y));d<0&&YV(h,v)}function a(d){return n(d)}function s(d){for(var h=[],p=0,y=d.length;p<y;++p)r(d[p],h);return h.length<2&&h.push(h[0]),h}function o(d){for(var h=s(d);h.length<4;)h.push(h[0]);return h}function l(d){return d.map(o)}function f(d){var h=d.type,p;switch(h){case"GeometryCollection":return{type:h,geometries:d.geometries.map(f)};case"Point":p=a(d.coordinates);break;case"MultiPoint":p=d.coordinates.map(a);break;case"LineString":p=s(d.arcs);break;case"MultiLineString":p=d.arcs.map(s);break;case"Polygon":p=l(d.arcs);break;case"MultiPolygon":p=d.arcs.map(l);break;default:return null}return{type:h,coordinates:p}}return f(t)}function VV(e,t){var n={},i={},r={},a=[],s=-1;t.forEach(function(f,d){var h=e.arcs[f<0?~f:f],p;h.length<3&&!h[1][0]&&!h[1][1]&&(p=t[++s],t[s]=f,t[d]=p)}),t.forEach(function(f){var d=o(f),h=d[0],p=d[1],y,v;if(y=r[h])if(delete r[y.end],y.push(f),y.end=p,v=i[p]){delete i[v.start];var b=v===y?y:y.concat(v);i[b.start=y.start]=r[b.end=v.end]=b}else i[y.start]=r[y.end]=y;else if(y=i[p])if(delete i[y.start],y.unshift(f),y.start=h,v=r[h]){delete r[v.end];var E=v===y?y:v.concat(y);i[E.start=v.start]=r[E.end=y.end]=E}else i[y.start]=r[y.end]=y;else y=[f],i[y.start=h]=r[y.end=p]=y});function o(f){var d=e.arcs[f<0?~f:f],h=d[0],p;return e.transform?(p=[0,0],d.forEach(function(y){p[0]+=y[0],p[1]+=y[1]})):p=d[d.length-1],f<0?[p,h]:[h,p]}function l(f,d){for(var h in f){var p=f[h];delete d[p.start],delete p.start,delete p.end,p.forEach(function(y){n[y<0?~y:y]=1}),a.push(p)}}return l(r,i),l(i,r),t.forEach(function(f){n[f<0?~f:f]||a.push([f])}),a}function WV(e){return k8(e,QV.apply(this,arguments))}function QV(e,t,n){var i,r,a;if(arguments.length>1)i=ZV(e,t,n);else for(r=0,i=new Array(a=e.arcs.length);r<a;++r)i[r]=r;return{type:"MultiLineString",arcs:VV(e,i)}}function ZV(e,t,n){var i=[],r=[],a;function s(h){var p=h<0?~h:h;(r[p]||(r[p]=[])).push({i:h,g:a})}function o(h){h.forEach(s)}function l(h){h.forEach(o)}function f(h){h.forEach(l)}function d(h){switch(a=h,h.type){case"GeometryCollection":h.geometries.forEach(d);break;case"LineString":o(h.arcs);break;case"MultiLineString":case"Polygon":l(h.arcs);break;case"MultiPolygon":f(h.arcs);break}}return d(t),r.forEach(n==null?function(h){i.push(h[0].i)}:function(h){n(h[0].g,h[h.length-1].g)&&i.push(h[0].i)}),i}function to(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function KV(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Ud(e){let t,n,i;e.length!==2?(t=to,n=(o,l)=>to(e(o),l),i=(o,l)=>e(o)-l):(t=e===to||e===KV?e:JV,n=e,i=e);function r(o,l,f=0,d=o.length){if(f<d){if(t(l,l)!==0)return d;do{const h=f+d>>>1;n(o[h],l)<0?f=h+1:d=h}while(f<d)}return f}function a(o,l,f=0,d=o.length){if(f<d){if(t(l,l)!==0)return d;do{const h=f+d>>>1;n(o[h],l)<=0?f=h+1:d=h}while(f<d)}return f}function s(o,l,f=0,d=o.length){const h=r(o,l,f,d-1);return h>f&&i(o[h-1],l)>-i(o[h],l)?h-1:h}return{left:r,center:s,right:a}}function JV(){return 0}function O8(e){return e===null?NaN:+e}function*eW(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let i of e)(i=t(i,++n,e))!=null&&(i=+i)>=i&&(yield i)}}const R8=Ud(to),xu=R8.right,tW=R8.left;Ud(O8).center;function nW(e,t){let n=0,i,r=0,a=0;if(t===void 0)for(let s of e)s!=null&&(s=+s)>=s&&(i=s-r,r+=i/++n,a+=i*(s-r));else{let s=-1;for(let o of e)(o=t(o,++s,e))!=null&&(o=+o)>=o&&(i=o-r,r+=i/++n,a+=i*(o-r))}if(n>1)return a/(n-1)}function iW(e,t){const n=nW(e,t);return n&&Math.sqrt(n)}class Si{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let i=0;for(let r=0;r<this._n&&r<32;r++){const a=n[r],s=t+a,o=Math.abs(t)<Math.abs(a)?t-(s-a):a-(s-t);o&&(n[i++]=o),t=s}return n[i]=t,this._n=i+1,this}valueOf(){const t=this._partials;let n=this._n,i,r,a,s=0;if(n>0){for(s=t[--n];n>0&&(i=s,r=t[--n],s=i+r,a=r-(s-i),!a););n>0&&(a<0&&t[n-1]<0||a>0&&t[n-1]>0)&&(r=a*2,i=s+r,r==i-s&&(s=i))}return s}}class $5 extends Map{constructor(t,n=z8){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[i,r]of t)this.set(i,r)}get(t){return super.get(X_(this,t))}has(t){return super.has(X_(this,t))}set(t,n){return super.set(D8(this,t),n)}delete(t){return super.delete(N8(this,t))}}class ly extends Set{constructor(t,n=z8){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const i of t)this.add(i)}has(t){return super.has(X_(this,t))}add(t){return super.add(D8(this,t))}delete(t){return super.delete(N8(this,t))}}function X_({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):n}function D8({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):(e.set(i,n),n)}function N8({_intern:e,_key:t},n){const i=t(n);return e.has(i)&&(n=e.get(i),e.delete(i)),n}function z8(e){return e!==null&&typeof e=="object"?e.valueOf():e}function rW(e,t){return Array.from(t,n=>e[n])}function aW(e=to){if(e===to)return F8;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const i=e(t,n);return i||i===0?i:(e(n,n)===0)-(e(t,t)===0)}}function F8(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const sW=Math.sqrt(50),oW=Math.sqrt(10),uW=Math.sqrt(2);function cy(e,t,n){const i=(t-e)/Math.max(0,n),r=Math.floor(Math.log10(i)),a=i/Math.pow(10,r),s=a>=sW?10:a>=oW?5:a>=uW?2:1;let o,l,f;return r<0?(f=Math.pow(10,-r)/s,o=Math.round(e*f),l=Math.round(t*f),o/f<e&&++o,l/f>t&&--l,f=-f):(f=Math.pow(10,r)*s,o=Math.round(e/f),l=Math.round(t/f),o*f<e&&++o,l*f>t&&--l),l<o&&.5<=n&&n<2?cy(e,t,n*2):[o,l,f]}function V_(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const i=t<e,[r,a,s]=i?cy(t,e,n):cy(e,t,n);if(!(a>=r))return[];const o=a-r+1,l=new Array(o);if(i)if(s<0)for(let f=0;f<o;++f)l[f]=(a-f)/-s;else for(let f=0;f<o;++f)l[f]=(a-f)*s;else if(s<0)for(let f=0;f<o;++f)l[f]=(r+f)/-s;else for(let f=0;f<o;++f)l[f]=(r+f)*s;return l}function W_(e,t,n){return t=+t,e=+e,n=+n,cy(e,t,n)[2]}function Eu(e,t,n){t=+t,e=+e,n=+n;const i=t<e,r=i?W_(t,e,n):W_(e,t,n);return(i?-1:1)*(r<0?1/-r:r)}function Il(e,t){let n;if(t===void 0)for(const i of e)i!=null&&(n<i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of e)(r=t(r,++i,e))!=null&&(n<r||n===void 0&&r>=r)&&(n=r)}return n}function Q_(e,t){let n;if(t===void 0)for(const i of e)i!=null&&(n>i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of e)(r=t(r,++i,e))!=null&&(n>r||n===void 0&&r>=r)&&(n=r)}return n}function L8(e,t,n=0,i=1/0,r){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),i=Math.floor(Math.min(e.length-1,i)),!(n<=t&&t<=i))return e;for(r=r===void 0?F8:aW(r);i>n;){if(i-n>600){const l=i-n+1,f=t-n+1,d=Math.log(l),h=.5*Math.exp(2*d/3),p=.5*Math.sqrt(d*h*(l-h)/l)*(f-l/2<0?-1:1),y=Math.max(n,Math.floor(t-f*h/l+p)),v=Math.min(i,Math.floor(t+(l-f)*h/l+p));L8(e,t,y,v,r)}const a=e[t];let s=n,o=i;for(sg(e,n,t),r(e[i],a)>0&&sg(e,n,i);s<o;){for(sg(e,s,o),++s,--o;r(e[s],a)<0;)++s;for(;r(e[o],a)>0;)--o}r(e[n],a)===0?sg(e,n,o):(++o,sg(e,o,i)),o<=t&&(n=o+1),t<=o&&(i=o-1)}return e}function sg(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function Z_(e,t,n){if(e=Float64Array.from(eW(e,n)),!(!(i=e.length)||isNaN(t=+t))){if(t<=0||i<2)return Q_(e);if(t>=1)return Il(e);var i,r=(i-1)*t,a=Math.floor(r),s=Il(L8(e,a).subarray(0,a+1)),o=Q_(e.subarray(a+1));return s+(o-s)*(r-a)}}function U8(e,t,n=O8){if(!(!(i=e.length)||isNaN(t=+t))){if(t<=0||i<2)return+n(e[0],0,e);if(t>=1)return+n(e[i-1],i-1,e);var i,r=(i-1)*t,a=Math.floor(r),s=+n(e[a],a,e),o=+n(e[a+1],a+1,e);return s+(o-s)*(r-a)}}function lW(e,t){let n=0,i=0;if(t===void 0)for(let r of e)r!=null&&(r=+r)>=r&&(++n,i+=r);else{let r=-1;for(let a of e)(a=t(a,++r,e))!=null&&(a=+a)>=a&&(++n,i+=a)}if(n)return i/n}function B8(e,t){return Z_(e,.5,t)}function*cW(e){for(const t of e)yield*t}function j8(e){return Array.from(cW(e))}function rr(e,t,n){e=+e,t=+t,n=(r=arguments.length)<2?(t=e,e=0,1):r<3?1:+n;for(var i=-1,r=Math.max(0,Math.ceil((t-e)/n))|0,a=new Array(r);++i<r;)a[i]=e+i*n;return a}function P8(e,t){let n=0;for(let i of e)(i=+i)&&(n+=i);return n}function fW(e,...t){e=new ly(e),t=t.map(dW);e:for(const n of e)for(const i of t)if(!i.has(n)){e.delete(n);continue e}return e}function dW(e){return e instanceof ly?e:new ly(e)}function hW(...e){const t=new ly;for(const n of e)for(const i of n)t.add(i);return t}function gW(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function fy(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,i=e.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+e.slice(n+1)]}function Kf(e){return e=fy(Math.abs(e)),e?e[1]:NaN}function pW(e,t){return function(n,i){for(var r=n.length,a=[],s=0,o=e[0],l=0;r>0&&o>0&&(l+o+1>i&&(o=Math.max(1,i-l)),a.push(n.substring(r-=o,r+o)),!((l+=o+1)>i));)o=e[s=(s+1)%e.length];return a.reverse().join(t)}}function mW(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var yW=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Kl(e){if(!(t=yW.exec(e)))throw new Error("invalid format: "+e);var t;return new _C({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Kl.prototype=_C.prototype;function _C(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}_C.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function vW(e){e:for(var t=e.length,n=1,i=-1,r;n<t;++n)switch(e[n]){case".":i=r=n;break;case"0":i===0&&(i=n),r=n;break;default:if(!+e[n])break e;i>0&&(i=0);break}return i>0?e.slice(0,i)+e.slice(r+1):e}var I8;function bW(e,t){var n=fy(e,t);if(!n)return e+"";var i=n[0],r=n[1],a=r-(I8=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,s=i.length;return a===s?i:a>s?i+new Array(a-s+1).join("0"):a>0?i.slice(0,a)+"."+i.slice(a):"0."+new Array(1-a).join("0")+fy(e,Math.max(0,t+a-1))[0]}function T5(e,t){var n=fy(e,t);if(!n)return e+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}const M5={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:gW,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>T5(e*100,t),r:T5,s:bW,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function k5(e){return e}var O5=Array.prototype.map,R5=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function q8(e){var t=e.grouping===void 0||e.thousands===void 0?k5:pW(O5.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",i=e.currency===void 0?"":e.currency[1]+"",r=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?k5:mW(O5.call(e.numerals,String)),s=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function f(h){h=Kl(h);var p=h.fill,y=h.align,v=h.sign,b=h.symbol,E=h.zero,_=h.width,w=h.comma,A=h.precision,M=h.trim,T=h.type;T==="n"?(w=!0,T="g"):M5[T]||(A===void 0&&(A=12),M=!0,T="g"),(E||p==="0"&&y==="=")&&(E=!0,p="0",y="=");var R=b==="$"?n:b==="#"&&/[boxX]/.test(T)?"0"+T.toLowerCase():"",O=b==="$"?i:/[%p]/.test(T)?s:"",k=M5[T],$=/[defgprs%]/.test(T);A=A===void 0?6:/[gprs]/.test(T)?Math.max(1,Math.min(21,A)):Math.max(0,Math.min(20,A));function D(z){var P=R,q=O,j,L,U;if(T==="c")q=k(z)+q,z="";else{z=+z;var I=z<0||1/z<0;if(z=isNaN(z)?l:k(Math.abs(z),A),M&&(z=vW(z)),I&&+z==0&&v!=="+"&&(I=!1),P=(I?v==="("?v:o:v==="-"||v==="("?"":v)+P,q=(T==="s"?R5[8+I8/3]:"")+q+(I&&v==="("?")":""),$){for(j=-1,L=z.length;++j<L;)if(U=z.charCodeAt(j),48>U||U>57){q=(U===46?r+z.slice(j+1):z.slice(j))+q,z=z.slice(0,j);break}}}w&&!E&&(z=t(z,1/0));var V=P.length+z.length+q.length,G=V<_?new Array(_-V+1).join(p):"";switch(w&&E&&(z=t(G+z,G.length?_-q.length:1/0),G=""),y){case"<":z=P+z+q+G;break;case"=":z=P+G+z+q;break;case"^":z=G.slice(0,V=G.length>>1)+P+z+q+G.slice(V);break;default:z=G+P+z+q;break}return a(z)}return D.toString=function(){return h+""},D}function d(h,p){var y=f((h=Kl(h),h.type="f",h)),v=Math.max(-8,Math.min(8,Math.floor(Kf(p)/3)))*3,b=Math.pow(10,-v),E=R5[8+v/3];return function(_){return y(b*_)+E}}return{format:f,formatPrefix:d}}var Xm,Pv,wC;xW({thousands:",",grouping:[3],currency:["$",""]});function xW(e){return Xm=q8(e),Pv=Xm.format,wC=Xm.formatPrefix,Xm}function H8(e){return Math.max(0,-Kf(Math.abs(e)))}function G8(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Kf(t)/3)))*3-Kf(Math.abs(e)))}function Y8(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Kf(t)-Kf(e))+1}const sS=new Date,oS=new Date;function mn(e,t,n,i){function r(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return r.floor=a=>(e(a=new Date(+a)),a),r.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),r.round=a=>{const s=r(a),o=r.ceil(a);return a-s<o-a?s:o},r.offset=(a,s)=>(t(a=new Date(+a),s==null?1:Math.floor(s)),a),r.range=(a,s,o)=>{const l=[];if(a=r.ceil(a),o=o==null?1:Math.floor(o),!(a<s)||!(o>0))return l;let f;do l.push(f=new Date(+a)),t(a,o),e(a);while(f<a&&a<s);return l},r.filter=a=>mn(s=>{if(s>=s)for(;e(s),!a(s);)s.setTime(s-1)},(s,o)=>{if(s>=s)if(o<0)for(;++o<=0;)for(;t(s,-1),!a(s););else for(;--o>=0;)for(;t(s,1),!a(s););}),n&&(r.count=(a,s)=>(sS.setTime(+a),oS.setTime(+s),e(sS),e(oS),Math.floor(n(sS,oS))),r.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?r.filter(i?s=>i(s)%a===0:s=>r.count(0,s)%a===0):r)),r}const Jf=mn(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Jf.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?mn(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Jf);Jf.range;const Ws=1e3,Dr=Ws*60,Qs=Dr*60,lo=Qs*24,AC=lo*7,D5=lo*30,uS=lo*365,Zs=mn(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Ws)},(e,t)=>(t-e)/Ws,e=>e.getUTCSeconds());Zs.range;const Iv=mn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ws)},(e,t)=>{e.setTime(+e+t*Dr)},(e,t)=>(t-e)/Dr,e=>e.getMinutes());Iv.range;const qv=mn(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Dr)},(e,t)=>(t-e)/Dr,e=>e.getUTCMinutes());qv.range;const Hv=mn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ws-e.getMinutes()*Dr)},(e,t)=>{e.setTime(+e+t*Qs)},(e,t)=>(t-e)/Qs,e=>e.getHours());Hv.range;const Gv=mn(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Qs)},(e,t)=>(t-e)/Qs,e=>e.getUTCHours());Gv.range;const no=mn(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Dr)/lo,e=>e.getDate()-1);no.range;const pu=mn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/lo,e=>e.getUTCDate()-1);pu.range;const X8=mn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/lo,e=>Math.floor(e/lo));X8.range;function xc(e){return mn(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Dr)/AC)}const Bd=xc(0),dy=xc(1),EW=xc(2),SW=xc(3),ed=xc(4),_W=xc(5),wW=xc(6);Bd.range;dy.range;EW.range;SW.range;ed.range;_W.range;wW.range;function Ec(e){return mn(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/AC)}const jd=Ec(0),hy=Ec(1),AW=Ec(2),CW=Ec(3),td=Ec(4),$W=Ec(5),TW=Ec(6);jd.range;hy.range;AW.range;CW.range;td.range;$W.range;TW.range;const hp=mn(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());hp.range;const gp=mn(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());gp.range;const ts=mn(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());ts.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:mn(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});ts.range;const ns=mn(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());ns.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:mn(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});ns.range;function V8(e,t,n,i,r,a){const s=[[Zs,1,Ws],[Zs,5,5*Ws],[Zs,15,15*Ws],[Zs,30,30*Ws],[a,1,Dr],[a,5,5*Dr],[a,15,15*Dr],[a,30,30*Dr],[r,1,Qs],[r,3,3*Qs],[r,6,6*Qs],[r,12,12*Qs],[i,1,lo],[i,2,2*lo],[n,1,AC],[t,1,D5],[t,3,3*D5],[e,1,uS]];function o(f,d,h){const p=d<f;p&&([f,d]=[d,f]);const y=h&&typeof h.range=="function"?h:l(f,d,h),v=y?y.range(f,+d+1):[];return p?v.reverse():v}function l(f,d,h){const p=Math.abs(d-f)/h,y=Ud(([,,E])=>E).right(s,p);if(y===s.length)return e.every(Eu(f/uS,d/uS,h));if(y===0)return Jf.every(Math.max(Eu(f,d,h),1));const[v,b]=s[p/s[y-1][2]<s[y][2]/p?y-1:y];return v.every(b)}return[o,l]}const[MW,kW]=V8(ns,gp,jd,X8,Gv,qv),[OW,RW]=V8(ts,hp,Bd,no,Hv,Iv),In="year",ji="quarter",ai="month",hn="week",Pi="date",ti="day",is="dayofyear",cr="hours",fr="minutes",Pr="seconds",ma="milliseconds",CC=[In,ji,ai,hn,Pi,ti,is,cr,fr,Pr,ma],lS=CC.reduce((e,t,n)=>(e[t]=1+n,e),{});function $C(e){const t=Se(e).slice(),n={};return t.length||ie("Missing time unit."),t.forEach(r=>{Ce(lS,r)?n[r]=1:ie(`Invalid time unit: ${r}.`)}),(n[hn]||n[ti]?1:0)+(n[ji]||n[ai]||n[Pi]?1:0)+(n[is]?1:0)>1&&ie(`Incompatible time units: ${e}`),t.sort((r,a)=>lS[r]-lS[a]),t}const DW={[In]:"%Y ",[ji]:"Q%q ",[ai]:"%b ",[Pi]:"%d ",[hn]:"W%U ",[ti]:"%a ",[is]:"%j ",[cr]:"%H:00",[fr]:"00:%M",[Pr]:":%S",[ma]:".%L",[`${In}-${ai}`]:"%Y-%m ",[`${In}-${ai}-${Pi}`]:"%Y-%m-%d ",[`${cr}-${fr}`]:"%H:%M"};function W8(e,t){const n=Ge({},DW,t),i=$C(e),r=i.length;let a="",s=0,o,l;for(s=0;s<r;)for(o=i.length;o>s;--o)if(l=i.slice(s,o).join("-"),n[l]!=null){a+=n[l],s=o;break}return a.trim()}const Dl=new Date;function TC(e){return Dl.setFullYear(e),Dl.setMonth(0),Dl.setDate(1),Dl.setHours(0,0,0,0),Dl}function Q8(e){return K8(new Date(e))}function Z8(e){return K_(new Date(e))}function K8(e){return no.count(TC(e.getFullYear())-1,e)}function K_(e){return Bd.count(TC(e.getFullYear())-1,e)}function J_(e){return TC(e).getDay()}function NW(e,t,n,i,r,a,s){if(0<=e&&e<100){const o=new Date(-1,t,n,i,r,a,s);return o.setFullYear(e),o}return new Date(e,t,n,i,r,a,s)}function J8(e){return t7(new Date(e))}function e7(e){return ew(new Date(e))}function t7(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return pu.count(t-1,e)}function ew(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return jd.count(t-1,e)}function tw(e){return Dl.setTime(Date.UTC(e,0,1)),Dl.getUTCDay()}function zW(e,t,n,i,r,a,s){if(0<=e&&e<100){const o=new Date(Date.UTC(-1,t,n,i,r,a,s));return o.setUTCFullYear(n.y),o}return new Date(Date.UTC(e,t,n,i,r,a,s))}function n7(e,t,n,i,r){const a=t||1,s=st(e),o=(_,w,A)=>(A=A||_,FW(n[A],i[A],_===s&&a,w)),l=new Date,f=pa(e),d=f[In]?o(In):li(2012),h=f[ai]?o(ai):f[ji]?o(ji):ru,p=f[hn]&&f[ti]?o(ti,1,hn+ti):f[hn]?o(hn,1):f[ti]?o(ti,1):f[Pi]?o(Pi,1):f[is]?o(is,1):Dd,y=f[cr]?o(cr):ru,v=f[fr]?o(fr):ru,b=f[Pr]?o(Pr):ru,E=f[ma]?o(ma):ru;return function(_){l.setTime(+_);const w=d(l);return r(w,h(l),p(l,w),y(l),v(l),b(l),E(l))}}function FW(e,t,n,i){const r=n<=1?e:i?(a,s)=>i+n*Math.floor((e(a,s)-i)/n):(a,s)=>n*Math.floor(e(a,s)/n);return t?(a,s)=>t(r(a,s),s):r}function nd(e,t,n){return t+e*7-(n+6)%7}const LW={[In]:e=>e.getFullYear(),[ji]:e=>Math.floor(e.getMonth()/3),[ai]:e=>e.getMonth(),[Pi]:e=>e.getDate(),[cr]:e=>e.getHours(),[fr]:e=>e.getMinutes(),[Pr]:e=>e.getSeconds(),[ma]:e=>e.getMilliseconds(),[is]:e=>K8(e),[hn]:e=>K_(e),[hn+ti]:(e,t)=>nd(K_(e),e.getDay(),J_(t)),[ti]:(e,t)=>nd(1,e.getDay(),J_(t))},UW={[ji]:e=>3*e,[hn]:(e,t)=>nd(e,0,J_(t))};function i7(e,t){return n7(e,t||1,LW,UW,NW)}const BW={[In]:e=>e.getUTCFullYear(),[ji]:e=>Math.floor(e.getUTCMonth()/3),[ai]:e=>e.getUTCMonth(),[Pi]:e=>e.getUTCDate(),[cr]:e=>e.getUTCHours(),[fr]:e=>e.getUTCMinutes(),[Pr]:e=>e.getUTCSeconds(),[ma]:e=>e.getUTCMilliseconds(),[is]:e=>t7(e),[hn]:e=>ew(e),[ti]:(e,t)=>nd(1,e.getUTCDay(),tw(t)),[hn+ti]:(e,t)=>nd(ew(e),e.getUTCDay(),tw(t))},jW={[ji]:e=>3*e,[hn]:(e,t)=>nd(e,0,tw(t))};function r7(e,t){return n7(e,t||1,BW,jW,zW)}const PW={[In]:ts,[ji]:hp.every(3),[ai]:hp,[hn]:Bd,[Pi]:no,[ti]:no,[is]:no,[cr]:Hv,[fr]:Iv,[Pr]:Zs,[ma]:Jf},IW={[In]:ns,[ji]:gp.every(3),[ai]:gp,[hn]:jd,[Pi]:pu,[ti]:pu,[is]:pu,[cr]:Gv,[fr]:qv,[Pr]:Zs,[ma]:Jf};function Pd(e){return PW[e]}function Id(e){return IW[e]}function a7(e,t,n){return e?e.offset(t,n):void 0}function s7(e,t,n){return a7(Pd(e),t,n)}function o7(e,t,n){return a7(Id(e),t,n)}function u7(e,t,n,i){return e?e.range(t,n,i):void 0}function l7(e,t,n,i){return u7(Pd(e),t,n,i)}function c7(e,t,n,i){return u7(Id(e),t,n,i)}const Og=1e3,Rg=Og*60,Dg=Rg*60,Yv=Dg*24,qW=Yv*7,N5=Yv*30,nw=Yv*365,f7=[In,ai,Pi,cr,fr,Pr,ma],Ng=f7.slice(0,-1),zg=Ng.slice(0,-1),Fg=zg.slice(0,-1),HW=Fg.slice(0,-1),GW=[In,hn],z5=[In,ai],d7=[In],og=[[Ng,1,Og],[Ng,5,5*Og],[Ng,15,15*Og],[Ng,30,30*Og],[zg,1,Rg],[zg,5,5*Rg],[zg,15,15*Rg],[zg,30,30*Rg],[Fg,1,Dg],[Fg,3,3*Dg],[Fg,6,6*Dg],[Fg,12,12*Dg],[HW,1,Yv],[GW,1,qW],[z5,1,N5],[z5,3,3*N5],[d7,1,nw]];function h7(e){const t=e.extent,n=e.maxbins||40,i=Math.abs(Gp(t))/n;let r=Ud(o=>o[2]).right(og,i),a,s;return r===og.length?(a=d7,s=Eu(t[0]/nw,t[1]/nw,n)):r?(r=og[i/og[r-1][2]<og[r][2]/i?r-1:r],a=r[0],s=r[1]):(a=f7,s=Math.max(Eu(t[0],t[1],n),1)),{units:a,step:s}}function cS(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function fS(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function ug(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function g7(e){var t=e.dateTime,n=e.date,i=e.time,r=e.periods,a=e.days,s=e.shortDays,o=e.months,l=e.shortMonths,f=lg(r),d=cg(r),h=lg(a),p=cg(a),y=lg(s),v=cg(s),b=lg(o),E=cg(o),_=lg(l),w=cg(l),A={a:I,A:V,b:G,B:F,c:null,d:P5,e:P5,f:gQ,g:wQ,G:CQ,H:fQ,I:dQ,j:hQ,L:p7,m:pQ,M:mQ,p:X,q:J,Q:H5,s:G5,S:yQ,u:vQ,U:bQ,V:xQ,w:EQ,W:SQ,x:null,X:null,y:_Q,Y:AQ,Z:$Q,"%":q5},M={a:Z,A:ue,b:de,B:Ae,c:null,d:I5,e:I5,f:OQ,g:PQ,G:qQ,H:TQ,I:MQ,j:kQ,L:y7,m:RQ,M:DQ,p:tt,q:we,Q:H5,s:G5,S:NQ,u:zQ,U:FQ,V:LQ,w:UQ,W:BQ,x:null,X:null,y:jQ,Y:IQ,Z:HQ,"%":q5},T={a:D,A:z,b:P,B:q,c:j,d:B5,e:B5,f:oQ,g:U5,G:L5,H:j5,I:j5,j:iQ,L:sQ,m:nQ,M:rQ,p:$,q:tQ,Q:lQ,s:cQ,S:aQ,u:QW,U:ZW,V:KW,w:WW,W:JW,x:L,X:U,y:U5,Y:L5,Z:eQ,"%":uQ};A.x=R(n,A),A.X=R(i,A),A.c=R(t,A),M.x=R(n,M),M.X=R(i,M),M.c=R(t,M);function R(se,ye){return function(ve){var re=[],Ie=-1,Oe=0,Be=se.length,Te,pt,Ve;for(ve instanceof Date||(ve=new Date(+ve));++Ie<Be;)se.charCodeAt(Ie)===37&&(re.push(se.slice(Oe,Ie)),(pt=F5[Te=se.charAt(++Ie)])!=null?Te=se.charAt(++Ie):pt=Te==="e"?" ":"0",(Ve=ye[Te])&&(Te=Ve(ve,pt)),re.push(Te),Oe=Ie+1);return re.push(se.slice(Oe,Ie)),re.join("")}}function O(se,ye){return function(ve){var re=ug(1900,void 0,1),Ie=k(re,se,ve+="",0),Oe,Be;if(Ie!=ve.length)return null;if("Q"in re)return new Date(re.Q);if("s"in re)return new Date(re.s*1e3+("L"in re?re.L:0));if(ye&&!("Z"in re)&&(re.Z=0),"p"in re&&(re.H=re.H%12+re.p*12),re.m===void 0&&(re.m="q"in re?re.q:0),"V"in re){if(re.V<1||re.V>53)return null;"w"in re||(re.w=1),"Z"in re?(Oe=fS(ug(re.y,0,1)),Be=Oe.getUTCDay(),Oe=Be>4||Be===0?hy.ceil(Oe):hy(Oe),Oe=pu.offset(Oe,(re.V-1)*7),re.y=Oe.getUTCFullYear(),re.m=Oe.getUTCMonth(),re.d=Oe.getUTCDate()+(re.w+6)%7):(Oe=cS(ug(re.y,0,1)),Be=Oe.getDay(),Oe=Be>4||Be===0?dy.ceil(Oe):dy(Oe),Oe=no.offset(Oe,(re.V-1)*7),re.y=Oe.getFullYear(),re.m=Oe.getMonth(),re.d=Oe.getDate()+(re.w+6)%7)}else("W"in re||"U"in re)&&("w"in re||(re.w="u"in re?re.u%7:"W"in re?1:0),Be="Z"in re?fS(ug(re.y,0,1)).getUTCDay():cS(ug(re.y,0,1)).getDay(),re.m=0,re.d="W"in re?(re.w+6)%7+re.W*7-(Be+5)%7:re.w+re.U*7-(Be+6)%7);return"Z"in re?(re.H+=re.Z/100|0,re.M+=re.Z%100,fS(re)):cS(re)}}function k(se,ye,ve,re){for(var Ie=0,Oe=ye.length,Be=ve.length,Te,pt;Ie<Oe;){if(re>=Be)return-1;if(Te=ye.charCodeAt(Ie++),Te===37){if(Te=ye.charAt(Ie++),pt=T[Te in F5?ye.charAt(Ie++):Te],!pt||(re=pt(se,ve,re))<0)return-1}else if(Te!=ve.charCodeAt(re++))return-1}return re}function $(se,ye,ve){var re=f.exec(ye.slice(ve));return re?(se.p=d.get(re[0].toLowerCase()),ve+re[0].length):-1}function D(se,ye,ve){var re=y.exec(ye.slice(ve));return re?(se.w=v.get(re[0].toLowerCase()),ve+re[0].length):-1}function z(se,ye,ve){var re=h.exec(ye.slice(ve));return re?(se.w=p.get(re[0].toLowerCase()),ve+re[0].length):-1}function P(se,ye,ve){var re=_.exec(ye.slice(ve));return re?(se.m=w.get(re[0].toLowerCase()),ve+re[0].length):-1}function q(se,ye,ve){var re=b.exec(ye.slice(ve));return re?(se.m=E.get(re[0].toLowerCase()),ve+re[0].length):-1}function j(se,ye,ve){return k(se,t,ye,ve)}function L(se,ye,ve){return k(se,n,ye,ve)}function U(se,ye,ve){return k(se,i,ye,ve)}function I(se){return s[se.getDay()]}function V(se){return a[se.getDay()]}function G(se){return l[se.getMonth()]}function F(se){return o[se.getMonth()]}function X(se){return r[+(se.getHours()>=12)]}function J(se){return 1+~~(se.getMonth()/3)}function Z(se){return s[se.getUTCDay()]}function ue(se){return a[se.getUTCDay()]}function de(se){return l[se.getUTCMonth()]}function Ae(se){return o[se.getUTCMonth()]}function tt(se){return r[+(se.getUTCHours()>=12)]}function we(se){return 1+~~(se.getUTCMonth()/3)}return{format:function(se){var ye=R(se+="",A);return ye.toString=function(){return se},ye},parse:function(se){var ye=O(se+="",!1);return ye.toString=function(){return se},ye},utcFormat:function(se){var ye=R(se+="",M);return ye.toString=function(){return se},ye},utcParse:function(se){var ye=O(se+="",!0);return ye.toString=function(){return se},ye}}}var F5={"-":"",_:" ",0:"0"},kn=/^\s*\d+/,YW=/^%/,XW=/[\\^$*+?|[\]().{}]/g;function ht(e,t,n){var i=e<0?"-":"",r=(i?-e:e)+"",a=r.length;return i+(a<n?new Array(n-a+1).join(t)+r:r)}function VW(e){return e.replace(XW,"\\$&")}function lg(e){return new RegExp("^(?:"+e.map(VW).join("|")+")","i")}function cg(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function WW(e,t,n){var i=kn.exec(t.slice(n,n+1));return i?(e.w=+i[0],n+i[0].length):-1}function QW(e,t,n){var i=kn.exec(t.slice(n,n+1));return i?(e.u=+i[0],n+i[0].length):-1}function ZW(e,t,n){var i=kn.exec(t.slice(n,n+2));return i?(e.U=+i[0],n+i[0].length):-1}function KW(e,t,n){var i=kn.exec(t.slice(n,n+2));return i?(e.V=+i[0],n+i[0].length):-1}function JW(e,t,n){var i=kn.exec(t.slice(n,n+2));return i?(e.W=+i[0],n+i[0].length):-1}function L5(e,t,n){var i=kn.exec(t.slice(n,n+4));return i?(e.y=+i[0],n+i[0].length):-1}function U5(e,t,n){var i=kn.exec(t.slice(n,n+2));return i?(e.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function eQ(e,t,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return i?(e.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function tQ(e,t,n){var i=kn.exec(t.slice(n,n+1));return i?(e.q=i[0]*3-3,n+i[0].length):-1}function nQ(e,t,n){var i=kn.exec(t.slice(n,n+2));return i?(e.m=i[0]-1,n+i[0].length):-1}function B5(e,t,n){var i=kn.exec(t.slice(n,n+2));return i?(e.d=+i[0],n+i[0].length):-1}function iQ(e,t,n){var i=kn.exec(t.slice(n,n+3));return i?(e.m=0,e.d=+i[0],n+i[0].length):-1}function j5(e,t,n){var i=kn.exec(t.slice(n,n+2));return i?(e.H=+i[0],n+i[0].length):-1}function rQ(e,t,n){var i=kn.exec(t.slice(n,n+2));return i?(e.M=+i[0],n+i[0].length):-1}function aQ(e,t,n){var i=kn.exec(t.slice(n,n+2));return i?(e.S=+i[0],n+i[0].length):-1}function sQ(e,t,n){var i=kn.exec(t.slice(n,n+3));return i?(e.L=+i[0],n+i[0].length):-1}function oQ(e,t,n){var i=kn.exec(t.slice(n,n+6));return i?(e.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function uQ(e,t,n){var i=YW.exec(t.slice(n,n+1));return i?n+i[0].length:-1}function lQ(e,t,n){var i=kn.exec(t.slice(n));return i?(e.Q=+i[0],n+i[0].length):-1}function cQ(e,t,n){var i=kn.exec(t.slice(n));return i?(e.s=+i[0],n+i[0].length):-1}function P5(e,t){return ht(e.getDate(),t,2)}function fQ(e,t){return ht(e.getHours(),t,2)}function dQ(e,t){return ht(e.getHours()%12||12,t,2)}function hQ(e,t){return ht(1+no.count(ts(e),e),t,3)}function p7(e,t){return ht(e.getMilliseconds(),t,3)}function gQ(e,t){return p7(e,t)+"000"}function pQ(e,t){return ht(e.getMonth()+1,t,2)}function mQ(e,t){return ht(e.getMinutes(),t,2)}function yQ(e,t){return ht(e.getSeconds(),t,2)}function vQ(e){var t=e.getDay();return t===0?7:t}function bQ(e,t){return ht(Bd.count(ts(e)-1,e),t,2)}function m7(e){var t=e.getDay();return t>=4||t===0?ed(e):ed.ceil(e)}function xQ(e,t){return e=m7(e),ht(ed.count(ts(e),e)+(ts(e).getDay()===4),t,2)}function EQ(e){return e.getDay()}function SQ(e,t){return ht(dy.count(ts(e)-1,e),t,2)}function _Q(e,t){return ht(e.getFullYear()%100,t,2)}function wQ(e,t){return e=m7(e),ht(e.getFullYear()%100,t,2)}function AQ(e,t){return ht(e.getFullYear()%1e4,t,4)}function CQ(e,t){var n=e.getDay();return e=n>=4||n===0?ed(e):ed.ceil(e),ht(e.getFullYear()%1e4,t,4)}function $Q(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+ht(t/60|0,"0",2)+ht(t%60,"0",2)}function I5(e,t){return ht(e.getUTCDate(),t,2)}function TQ(e,t){return ht(e.getUTCHours(),t,2)}function MQ(e,t){return ht(e.getUTCHours()%12||12,t,2)}function kQ(e,t){return ht(1+pu.count(ns(e),e),t,3)}function y7(e,t){return ht(e.getUTCMilliseconds(),t,3)}function OQ(e,t){return y7(e,t)+"000"}function RQ(e,t){return ht(e.getUTCMonth()+1,t,2)}function DQ(e,t){return ht(e.getUTCMinutes(),t,2)}function NQ(e,t){return ht(e.getUTCSeconds(),t,2)}function zQ(e){var t=e.getUTCDay();return t===0?7:t}function FQ(e,t){return ht(jd.count(ns(e)-1,e),t,2)}function v7(e){var t=e.getUTCDay();return t>=4||t===0?td(e):td.ceil(e)}function LQ(e,t){return e=v7(e),ht(td.count(ns(e),e)+(ns(e).getUTCDay()===4),t,2)}function UQ(e){return e.getUTCDay()}function BQ(e,t){return ht(hy.count(ns(e)-1,e),t,2)}function jQ(e,t){return ht(e.getUTCFullYear()%100,t,2)}function PQ(e,t){return e=v7(e),ht(e.getUTCFullYear()%100,t,2)}function IQ(e,t){return ht(e.getUTCFullYear()%1e4,t,4)}function qQ(e,t){var n=e.getUTCDay();return e=n>=4||n===0?td(e):td.ceil(e),ht(e.getUTCFullYear()%1e4,t,4)}function HQ(){return"+0000"}function q5(){return"%"}function H5(e){return+e}function G5(e){return Math.floor(+e/1e3)}var xf,MC,b7,kC,x7;GQ({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function GQ(e){return xf=g7(e),MC=xf.format,b7=xf.parse,kC=xf.utcFormat,x7=xf.utcParse,xf}function Lg(e){const t={};return n=>t[n]||(t[n]=e(n))}function YQ(e,t){return n=>{const i=e(n),r=i.indexOf(t);if(r<0)return i;let a=XQ(i,r);const s=a<i.length?i.slice(a):"";for(;--a>r;)if(i[a]!=="0"){++a;break}return i.slice(0,a)+s}}function XQ(e,t){let n=e.lastIndexOf("e"),i;if(n>0)return n;for(n=e.length;--n>t;)if(i=e.charCodeAt(n),i>=48&&i<=57)return n+1}function E7(e){const t=Lg(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(i){const r=Kl(i||",");if(r.precision==null){switch(r.precision=12,r.type){case"%":r.precision-=2;break;case"e":r.precision-=1;break}return YQ(t(r),t(".1f")(1)[1])}else return t(r)},formatSpan(i,r,a,s){s=Kl(s??",f");const o=Eu(i,r,a),l=Math.max(Math.abs(i),Math.abs(r));let f;if(s.precision==null)switch(s.type){case"s":return isNaN(f=G8(o,l))||(s.precision=f),n(s,l);case"":case"e":case"g":case"p":case"r":{isNaN(f=Y8(o,l))||(s.precision=f-(s.type==="e"));break}case"f":case"%":{isNaN(f=H8(o))||(s.precision=f-(s.type==="%")*2);break}}return t(s)}}}let iw;S7();function S7(){return iw=E7({format:Pv,formatPrefix:wC})}function _7(e){return E7(q8(e))}function gy(e){return arguments.length?iw=_7(e):iw}function Y5(e,t,n){n=n||{},Ee(n)||ie(`Invalid time multi-format specifier: ${n}`);const i=t(Pr),r=t(fr),a=t(cr),s=t(Pi),o=t(hn),l=t(ai),f=t(ji),d=t(In),h=e(n[ma]||".%L"),p=e(n[Pr]||":%S"),y=e(n[fr]||"%I:%M"),v=e(n[cr]||"%I %p"),b=e(n[Pi]||n[ti]||"%a %d"),E=e(n[hn]||"%b %d"),_=e(n[ai]||"%B"),w=e(n[ji]||"%B"),A=e(n[In]||"%Y");return M=>(i(M)<M?h:r(M)<M?p:a(M)<M?y:s(M)<M?v:l(M)<M?o(M)<M?b:E:d(M)<M?f(M)<M?_:w:A)(M)}function w7(e){const t=Lg(e.format),n=Lg(e.utcFormat);return{timeFormat:i=>_e(i)?t(i):Y5(t,Pd,i),utcFormat:i=>_e(i)?n(i):Y5(n,Id,i),timeParse:Lg(e.parse),utcParse:Lg(e.utcParse)}}let rw;A7();function A7(){return rw=w7({format:MC,parse:b7,utcFormat:kC,utcParse:x7})}function C7(e){return w7(g7(e))}function pp(e){return arguments.length?rw=C7(e):rw}const aw=(e,t)=>Ge({},e,t);function $7(e,t){const n=e?_7(e):gy(),i=t?C7(t):pp();return aw(n,i)}function OC(e,t){const n=arguments.length;return n&&n!==2&&ie("defaultLocale expects either zero or two arguments."),n?aw(gy(e),pp(t)):aw(gy(),pp())}function VQ(){return S7(),A7(),OC()}const WQ=/^(data:|([A-Za-z]+:)?\/\/)/,QQ=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,ZQ=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,X5="file://";function KQ(e,t){return n=>({options:n||{},sanitize:eZ,load:JQ,fileAccess:!1,file:tZ(t),http:iZ(e)})}async function JQ(e,t){const n=await this.sanitize(e,t),i=n.href;return n.localFile?this.file(i):this.http(i,t)}async function eZ(e,t){t=Ge({},this.options,t);const n=this.fileAccess,i={href:null};let r,a,s;const o=QQ.test(e.replace(ZQ,""));(e==null||typeof e!="string"||!o)&&ie("Sanitize failure, invalid URI: "+me(e));const l=WQ.test(e);return(s=t.baseURL)&&!l&&(!e.startsWith("/")&&!s.endsWith("/")&&(e="/"+e),e=s+e),a=(r=e.startsWith(X5))||t.mode==="file"||t.mode!=="http"&&!l&&n,r?e=e.slice(X5.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),a=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(i,"localFile",{value:!!a}),i.href=e,t.target&&(i.target=t.target+""),t.rel&&(i.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(i.crossOrigin=t.crossOrigin+""),i}function tZ(e){return e?t=>new Promise((n,i)=>{e.readFile(t,(r,a)=>{r?i(r):n(a)})}):nZ}async function nZ(){ie("No file system access.")}function iZ(e){return e?async function(t,n){const i=Ge({},this.options.http,n),r=n&&n.response,a=await e(t,i);return a.ok?Xe(a[r])?a[r]():a.text():ie(a.status+""+a.statusText)}:rZ}async function rZ(){ie("No HTTP fetch method available.")}const aZ=e=>e!=null&&e===e,sZ=e=>e==="true"||e==="false"||e===!0||e===!1,oZ=e=>!Number.isNaN(Date.parse(e)),T7=e=>!Number.isNaN(+e)&&!(e instanceof Date),uZ=e=>T7(e)&&Number.isInteger(+e),sw={boolean:xC,integer:ni,number:ni,date:EC,string:SC,unknown:ui},Vm=[sZ,uZ,T7,oZ],lZ=["boolean","integer","number","date"];function M7(e,t){if(!e||!e.length)return"unknown";const n=e.length,i=Vm.length,r=Vm.map((a,s)=>s+1);for(let a=0,s=0,o,l;a<n;++a)for(l=t?e[a][t]:e[a],o=0;o<i;++o)if(r[o]&&aZ(l)&&!Vm[o](l)&&(r[o]=0,++s,s===Vm.length))return"string";return lZ[r.reduce((a,s)=>a===0?s:a,0)-1]}function k7(e,t){return t.reduce((n,i)=>(n[i]=M7(e,i),n),{})}function V5(e){const t=function(n,i){const r={delimiter:e};return RC(n,i?Ge(i,r):r)};return t.responseType="text",t}function RC(e,t){return t.header&&(e=t.header.map(me).join(t.delimiter)+`
`+e),qV(t.delimiter).parse(e+"")}RC.responseType="text";function cZ(e){return typeof Buffer=="function"&&Xe(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function DC(e,t){const n=t&&t.property?Br(t.property):ui;return Ee(e)&&!cZ(e)?fZ(n(e),t):n(JSON.parse(e))}DC.responseType="json";function fZ(e,t){return!oe(e)&&S8(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const dZ={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function O7(e,t){let n,i,r,a;return e=DC(e,t),t&&t.feature?(n=XV,r=t.feature):t&&t.mesh?(n=WV,r=t.mesh,a=dZ[t.filter]):ie("Missing TopoJSON feature or mesh parameter."),i=(i=e.objects[r])?n(e,i,a):ie("Invalid TopoJSON object: "+r),i&&i.features||[i]}O7.responseType="json";const z1={dsv:RC,csv:V5(","),tsv:V5("	"),json:DC,topojson:O7};function NC(e,t){return arguments.length>1?(z1[e]=t,this):Ce(z1,e)?z1[e]:null}function R7(e){const t=NC(e);return t&&t.responseType||"text"}function D7(e,t,n,i){t=t||{};const r=NC(t.type||"json");return r||ie("Unknown data format type: "+t.type),e=r(e,t),t.parse&&hZ(e,t.parse,n,i),Ce(e,"columns")&&delete e.columns,e}function hZ(e,t,n,i){if(!e.length)return;const r=pp();n=n||r.timeParse,i=i||r.utcParse;let a=e.columns||Object.keys(e[0]),s,o,l,f,d,h;t==="auto"&&(t=k7(e,a)),a=Object.keys(t);const p=a.map(y=>{const v=t[y];let b,E;if(v&&(v.startsWith("date:")||v.startsWith("utc:")))return b=v.split(/:(.+)?/,2),E=b[1],(E[0]==="'"&&E[E.length-1]==="'"||E[0]==='"'&&E[E.length-1]==='"')&&(E=E.slice(1,-1)),(b[0]==="utc"?i:n)(E);if(!sw[v])throw Error("Illegal format pattern: "+y+":"+v);return sw[v]});for(l=0,d=e.length,h=a.length;l<d;++l)for(s=e[l],f=0;f<h;++f)o=a[f],s[o]=p[f](s[o])}const Xv=KQ(typeof fetch<"u"&&fetch,null);function Vv(e){const t=e||ui,n=[],i={};return n.add=r=>{const a=t(r);return i[a]||(i[a]=1,n.push(r)),n},n.remove=r=>{const a=t(r);if(i[a]){i[a]=0;const s=n.indexOf(r);s>=0&&n.splice(s,1)}return n},n}async function F1(e,t){try{await t(e)}catch(n){e.error(n)}}const N7=Symbol("vega_id");let gZ=1;function Wv(e){return!!(e&&ze(e))}function ze(e){return e[N7]}function z7(e,t){return e[N7]=t,e}function mt(e){const t=e===Object(e)?e:{data:e};return ze(t)?t:z7(t,gZ++)}function zC(e){return Qv(e,mt({}))}function Qv(e,t){for(const n in e)t[n]=e[n];return t}function F7(e,t){return z7(t,ze(e))}function Sc(e,t){return e?t?(n,i)=>e(n,i)||ze(t(n))-ze(t(i)):(n,i)=>e(n,i)||ze(n)-ze(i):null}function L7(e){return e&&e.constructor===_c}function _c(){const e=[],t=[],n=[],i=[],r=[];let a=null,s=!1;return{constructor:_c,insert(o){const l=Se(o),f=l.length;for(let d=0;d<f;++d)e.push(l[d]);return this},remove(o){const l=Xe(o)?i:t,f=Se(o),d=f.length;for(let h=0;h<d;++h)l.push(f[h]);return this},modify(o,l,f){const d={field:l,value:li(f)};return Xe(o)?(d.filter=o,r.push(d)):(d.tuple=o,n.push(d)),this},encode(o,l){return Xe(o)?r.push({filter:o,field:l}):n.push({tuple:o,field:l}),this},clean(o){return a=o,this},reflow(){return s=!0,this},pulse(o,l){const f={},d={};let h,p,y,v,b,E;for(h=0,p=l.length;h<p;++h)f[ze(l[h])]=1;for(h=0,p=t.length;h<p;++h)b=t[h],f[ze(b)]=-1;for(h=0,p=i.length;h<p;++h)v=i[h],l.forEach(w=>{v(w)&&(f[ze(w)]=-1)});for(h=0,p=e.length;h<p;++h)b=e[h],E=ze(b),f[E]?f[E]=1:o.add.push(mt(e[h]));for(h=0,p=l.length;h<p;++h)b=l[h],f[ze(b)]<0&&o.rem.push(b);function _(w,A,M){M?w[A]=M(w):o.encode=A,s||(d[ze(w)]=w)}for(h=0,p=n.length;h<p;++h)y=n[h],b=y.tuple,v=y.field,E=f[ze(b)],E>0&&(_(b,v,y.value),o.modifies(v));for(h=0,p=r.length;h<p;++h)y=r[h],v=y.filter,l.forEach(w=>{v(w)&&f[ze(w)]>0&&_(w,y.field,y.value)}),o.modifies(y.field);if(s)o.mod=t.length||i.length?l.filter(w=>f[ze(w)]>0):l.slice();else for(E in d)o.mod.push(d[E]);return(a||a==null&&(t.length||i.length))&&o.clean(!0),o}}}const L1="_:mod:_";function Zv(){Object.defineProperty(this,L1,{writable:!0,value:{}})}Zv.prototype={set(e,t,n,i){const r=this,a=r[e],s=r[L1];return t!=null&&t>=0?(a[t]!==n||i)&&(a[t]=n,s[t+":"+e]=-1,s[e]=-1):(a!==n||i)&&(r[e]=n,s[e]=oe(n)?1+n.length:-1),r},modified(e,t){const n=this[L1];if(arguments.length){if(oe(e)){for(let i=0;i<e.length;++i)if(n[e[i]])return!0;return!1}}else{for(const i in n)if(n[i])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[L1]={},this}};let pZ=0;const mZ="pulse",yZ=new Zv,vZ=1,bZ=2;function kt(e,t,n,i){this.id=++pZ,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,i)}function W5(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}kt.prototype={targets(){return this._targets||(this._targets=Vv(Hp))},set(e){return this.value!==e?(this.value=e,1):0},skip:W5(vZ),modified:W5(bZ),parameters(e,t,n){t=t!==!1;const i=this._argval=this._argval||new Zv,r=this._argops=this._argops||[],a=[];let s,o,l,f;const d=(h,p,y)=>{y instanceof kt?(y!==this&&(t&&y.targets().add(this),a.push(y)),r.push({op:y,name:h,index:p})):i.set(h,p,y)};for(s in e)if(o=e[s],s===mZ)Se(o).forEach(h=>{h instanceof kt?h!==this&&(h.targets().add(this),a.push(h)):ie("Pulse parameters must be operator instances.")}),this.source=o;else if(oe(o))for(i.set(s,-1,Array(l=o.length)),f=0;f<l;++f)d(s,f,o[f]);else d(s,-1,o);return this.marshall().clear(),n&&(r.initonly=!0),a},marshall(e){const t=this._argval||yZ,n=this._argops;let i,r,a,s;if(n){const o=n.length;for(r=0;r<o;++r)i=n[r],a=i.op,s=a.modified()&&a.stamp===e,t.set(i.name,i.index,a.value,s);if(n.initonly){for(r=0;r<o;++r)i=n[r],i.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,i,r;if(e)for(t=0,n=e.length;t<n;++t)i=e[t],r=i.op,r._targets&&r._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),i=t.call(this,n,e);if(n.clear(),i!==this.value)this.value=i;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function xZ(e,t,n,i){let r=1,a;return e instanceof kt?a=e:e&&e.prototype instanceof kt?a=new e:Xe(e)?a=new kt(null,e):(r=0,a=new kt(e,t)),this.rank(a),r&&(i=n,n=t),n&&this.connect(a,a.parameters(n,i)),this.touch(a),a}function EZ(e,t){const n=e.rank,i=t.length;for(let r=0;r<i;++r)if(n<t[r].rank){this.rerank(e);return}}let SZ=0;function Kv(e,t,n){this.id=++SZ,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function Zo(e,t,n){return new Kv(e,t,n)}Kv.prototype={_filter:jr,_apply:ui,targets(){return this._targets||(this._targets=Vv(Hp))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,i=n?n.length:0;for(let r=0;r<i;++r)n[r].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=Zo(e);return this.targets().add(t),t},apply(e){const t=Zo(null,e);return this.targets().add(t),t},merge(){const e=Zo();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=Zo();return this.targets().add(Zo(null,null,vC(e,n=>{const i=n.dataflow;t.receive(n),i&&i.run&&i.run()}))),t},between(e,t){let n=!1;return e.targets().add(Zo(null,null,()=>n=!0)),t.targets().add(Zo(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=jr,this._targets=null}};function _Z(e,t,n,i){const r=this,a=Zo(n,i),s=function(f){f.dataflow=r;try{a.receive(f)}catch(d){r.error(d)}finally{r.run()}};let o;typeof e=="string"&&typeof document<"u"?o=document.querySelectorAll(e):o=Se(e);const l=o.length;for(let f=0;f<l;++f)o[f].addEventListener(t,s);return a}function wZ(e,t){const n=this.locale();return D7(e,t,n.timeParse,n.utcParse)}function AZ(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function CZ(e,t){const n=this;let i=0,r;try{r=await n.loader().load(e,{context:"dataflow",response:R7(t&&t.type)});try{r=n.parse(r,t)}catch(a){i=-2,n.warn("Data ingestion failed",e,a)}}catch(a){i=-1,n.warn("Loading failed",e,a)}return{data:r,status:i}}async function $Z(e,t,n){const i=this,r=i._pending||TZ(i);r.requests+=1;const a=await i.request(t,n);return i.pulse(e,i.changeset().remove(jr).insert(a.data||[])),r.done(),a}function TZ(e){let t;const n=new Promise(i=>t=i);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const MZ={skip:!0};function kZ(e,t,n,i,r){return(e instanceof kt?RZ:OZ)(this,e,t,n,i,r),this}function OZ(e,t,n,i,r,a){const s=Ge({},a,MZ);let o,l;Xe(n)||(n=li(n)),i===void 0?o=f=>e.touch(n(f)):Xe(i)?(l=new kt(null,i,r,!1),o=f=>{l.evaluate(f);const d=n(f),h=l.value;L7(h)?e.pulse(d,h,a):e.update(d,h,s)}):o=f=>e.update(n(f),i,s),t.apply(o)}function RZ(e,t,n,i,r,a){if(i===void 0)t.targets().add(n);else{const s=a||{},o=new kt(null,DZ(n,i),r,!1);o.modified(s.force),o.rank=t.rank,t.targets().add(o),n&&(o.skip(!0),o.value=n.value,o.targets().add(n),e.connect(n,[o]))}}function DZ(e,t){return t=Xe(t)?t:li(t),e?function(n,i){const r=t(n,i);return e.skip()||(e.skip(r!==this.value).value=r),r}:t}function NZ(e){e.rank=++this._rank}function zZ(e){const t=[e];let n,i,r;for(;t.length;)if(this.rank(n=t.pop()),i=n._targets)for(r=i.length;--r>=0;)t.push(n=i[r]),n===e&&ie("Cycle detected in dataflow graph.")}const py={},ja=1,eu=2,qs=4,FZ=ja|eu,Q5=ja|qs,Ef=ja|eu|qs,Z5=8,fg=16,K5=32,J5=64;function mu(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function dS(e,t){const n=[];return Jo(e,t,i=>n.push(i)),n}function eN(e,t){const n={};return e.visit(t,i=>{n[ze(i)]=1}),i=>n[ze(i)]?null:i}function Wm(e,t){return e?(n,i)=>e(n,i)&&t(n,i):t}mu.prototype={StopPropagation:py,ADD:ja,REM:eu,MOD:qs,ADD_REM:FZ,ADD_MOD:Q5,ALL:Ef,REFLOW:Z5,SOURCE:fg,NO_SOURCE:K5,NO_FIELDS:J5,fork(e){return new mu(this.dataflow).init(this,e)},clone(){const e=this.fork(Ef);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(Ef|fg)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new mu(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&J5)&&(n.fields=e.fields),t&ja?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&eu?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&qs?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&K5?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||Ef;return t&ja&&this.add.length||t&eu&&this.rem.length||t&qs&&this.mod.length},reflow(e){if(e)return this.fork(Ef).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(qs,eN(this,ja))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return oe(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?oe(e)?e.some(i=>n[i]):n[e]:!!n:!1},filter(e,t){const n=this;return e&ja&&(n.addF=Wm(n.addF,t)),e&eu&&(n.remF=Wm(n.remF,t)),e&qs&&(n.modF=Wm(n.modF,t)),e&fg&&(n.srcF=Wm(n.srcF,t)),n},materialize(e){e=e||Ef;const t=this;return e&ja&&t.addF&&(t.add=dS(t.add,t.addF),t.addF=null),e&eu&&t.remF&&(t.rem=dS(t.rem,t.remF),t.remF=null),e&qs&&t.modF&&(t.mod=dS(t.mod,t.modF),t.modF=null),e&fg&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,i=t;if(e&fg)return Jo(n.source,n.srcF,i),n;e&ja&&Jo(n.add,n.addF,i),e&eu&&Jo(n.rem,n.remF,i),e&qs&&Jo(n.mod,n.modF,i);const r=n.source;if(e&Z5&&r){const a=n.add.length+n.mod.length;a===r.length||(a?Jo(r,eN(n,Q5),i):Jo(r,n.srcF,i))}return n}};function FC(e,t,n,i){const r=this;let a=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=i||null,this.pulses=n;for(const s of n)if(s.stamp===t){if(s.fields){const o=r.fields||(r.fields={});for(const l in s.fields)o[l]=1}s.changed(r.ADD)&&(a|=r.ADD),s.changed(r.REM)&&(a|=r.REM),s.changed(r.MOD)&&(a|=r.MOD)}this.changes=a}be(FC,mu,{fork(e){const t=new mu(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?oe(e)?e.some(i=>n[i]):n[e]:0},filter(){ie("MultiPulse does not support filtering.")},materialize(){ie("MultiPulse does not support materialization.")},visit(e,t){const n=this,i=n.pulses,r=i.length;let a=0;if(e&n.SOURCE)for(;a<r;++a)i[a].visit(e,t);else for(;a<r;++a)i[a].stamp===n.stamp&&i[a].visit(e,t);return n}});async function LZ(e,t,n){const i=this,r=[];if(i._pulse)return U7(i);if(i._pending&&await i._pending,t&&await F1(i,t),!i._touched.length)return i.debug("Dataflow invoked, but nothing to do."),i;const a=++i._clock;i._pulse=new mu(i,a,e),i._touched.forEach(d=>i._enqueue(d,!0)),i._touched=Vv(Hp);let s=0,o,l,f;try{for(;i._heap.size()>0;){if(o=i._heap.pop(),o.rank!==o.qrank){i._enqueue(o,!0);continue}l=o.run(i._getPulse(o,e)),l.then?l=await l:l.async&&(r.push(l.async),l=py),l!==py&&o._targets&&o._targets.forEach(d=>i._enqueue(d)),++s}}catch(d){i._heap.clear(),f=d}if(i._input={},i._pulse=null,i.debug(`Pulse ${a}: ${s} operators`),f&&(i._postrun=[],i.error(f)),i._postrun.length){const d=i._postrun.sort((h,p)=>p.priority-h.priority);i._postrun=[];for(let h=0;h<d.length;++h)await F1(i,d[h].callback)}return n&&await F1(i,n),r.length&&Promise.all(r).then(d=>i.runAsync(null,()=>{d.forEach(h=>{try{h(i)}catch(p){i.error(p)}})})),i}async function UZ(e,t,n){for(;this._running;)await this._running;const i=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(i,i),this._running}function BZ(e,t,n){return this._pulse?U7(this):(this.evaluate(e,t,n),this)}function jZ(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(i){this.error(i)}}function U7(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function PZ(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function IZ(e,t){const n=e.source,i=this._clock;return n&&oe(n)?new FC(this,i,n.map(r=>r.pulse),t):this._input[e.id]||qZ(this._pulse,n&&n.pulse)}function qZ(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==py&&(e.source=t.source),e)}const LC={skip:!1,force:!1};function HZ(e,t){const n=t||LC;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function GZ(e,t,n){const i=n||LC;return(e.set(t)||i.force)&&this.touch(e,i),this}function YZ(e,t,n){this.touch(e,n||LC);const i=new mu(this,this._clock+(this._pulse?0:1)),r=e.pulse&&e.pulse.source||[];return i.target=e,this._input[e.id]=t.pulse(i,r),this}function XZ(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),B7(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let i;return t.length?(i=t[0],t[0]=n,VZ(t,0,e)):i=n,i}}}function B7(e,t,n,i){let r,a;const s=e[n];for(;n>t;){if(a=n-1>>1,r=e[a],i(s,r)<0){e[n]=r,n=a;continue}break}return e[n]=s}function VZ(e,t,n){const i=t,r=e.length,a=e[t];let s=(t<<1)+1,o;for(;s<r;)o=s+1,o<r&&n(e[s],e[o])>=0&&(s=o),e[t]=e[s],t=s,s=(t<<1)+1;return e[t]=a,B7(e,i,t,n)}function If(){this.logger(hC()),this.logLevel(fC),this._clock=0,this._rank=0,this._locale=OC();try{this._loader=Xv()}catch{}this._touched=Vv(Hp),this._input={},this._pulse=null,this._heap=XZ((e,t)=>e.qrank-t.qrank),this._postrun=[]}function dg(e){return function(){return this._log[e].apply(this,arguments)}}If.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:dg("error"),warn:dg("warn"),info:dg("info"),debug:dg("debug"),logLevel:dg("level"),cleanThreshold:1e4,add:xZ,connect:EZ,rank:NZ,rerank:zZ,pulse:YZ,touch:HZ,update:GZ,changeset:_c,ingest:AZ,parse:wZ,preload:$Z,request:CZ,events:_Z,on:kZ,evaluate:LZ,run:BZ,runAsync:UZ,runAfter:jZ,_enqueue:PZ,_getPulse:IZ};function ee(e,t){kt.call(this,e,null,t)}be(ee,kt,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const id={};function j7(e){const t=P7(e);return t&&t.Definition||null}function P7(e){return e=e&&e.toLowerCase(),Ce(id,e)?id[e]:null}function*I7(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let i of e)i=t(i,++n,e),i!=null&&i!==""&&(i=+i)>=i&&(yield i)}}function UC(e,t,n){const i=Float64Array.from(I7(e,n));return i.sort(to),t.map(r=>U8(i,r))}function BC(e,t){return UC(e,[.25,.5,.75],t)}function jC(e,t){const n=e.length,i=iW(e,t),r=BC(e,t),a=(r[2]-r[0])/1.34;return 1.06*(Math.min(i,a)||i||Math.abs(r[0])||1)*Math.pow(n,-.2)}function q7(e){const t=e.maxbins||20,n=e.base||10,i=Math.log(n),r=e.divide||[5,2];let a=e.extent[0],s=e.extent[1],o,l,f,d,h,p;const y=e.span||s-a||Math.abs(a)||1;if(e.step)o=e.step;else if(e.steps){for(d=y/t,h=0,p=e.steps.length;h<p&&e.steps[h]<d;++h);o=e.steps[Math.max(0,h-1)]}else{for(l=Math.ceil(Math.log(t)/i),f=e.minstep||0,o=Math.max(f,Math.pow(n,Math.round(Math.log(y)/i)-l));Math.ceil(y/o)>t;)o*=n;for(h=0,p=r.length;h<p;++h)d=o/r[h],d>=f&&y/d<=t&&(o=d)}d=Math.log(o);const v=d>=0?0:~~(-d/i)+1,b=Math.pow(n,-v-1);return(e.nice||e.nice===void 0)&&(d=Math.floor(a/o+b)*o,a=a<d?d-o:d,s=Math.ceil(s/o)*o),{start:a,stop:s===a?a+o:s,step:o}}var Ir=Math.random;function WZ(e){Ir=e}function H7(e,t,n,i){if(!e.length)return[void 0,void 0];const r=Float64Array.from(I7(e,i)),a=r.length,s=t;let o,l,f,d;for(f=0,d=Array(s);f<s;++f){for(o=0,l=0;l<a;++l)o+=r[~~(Ir()*a)];d[f]=o/a}return d.sort(to),[Z_(d,n/2),Z_(d,1-n/2)]}function G7(e,t,n,i){i=i||(p=>p);const r=e.length,a=new Float64Array(r);let s=0,o=1,l=i(e[0]),f=l,d=l+t,h;for(;o<r;++o){if(h=i(e[o]),h>=d){for(f=(l+f)/2;s<o;++s)a[s]=f;d=h+t,l=h}f=h}for(f=(l+f)/2;s<o;++s)a[s]=f;return n?QZ(a,t+t/4):a}function QZ(e,t){const n=e.length;let i=0,r=1,a,s;for(;e[i]===e[r];)++r;for(;r<n;){for(a=r+1;e[r]===e[a];)++a;if(e[r]-e[r-1]<t){for(s=r+(i+a-r-r>>1);s<r;)e[s++]=e[r];for(;s>r;)e[s--]=e[i]}i=r,r=a}return e}function ZZ(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function KZ(e,t){t==null&&(t=e,e=0);let n,i,r;const a={min(s){return arguments.length?(n=s||0,r=i-n,a):n},max(s){return arguments.length?(i=s||0,r=i-n,a):i},sample(){return n+Math.floor(r*Ir())},pdf(s){return s===Math.floor(s)&&s>=n&&s<i?1/r:0},cdf(s){const o=Math.floor(s);return o<n?0:o>=i?1:(o-n+1)/r},icdf(s){return s>=0&&s<=1?n-1+Math.floor(s*r):NaN}};return a.min(e).max(t)}const Y7=Math.sqrt(2*Math.PI),JZ=Math.SQRT2;let hg=NaN;function Jv(e,t){e=e||0,t=t??1;let n=0,i=0,r,a;if(hg===hg)n=hg,hg=NaN;else{do n=Ir()*2-1,i=Ir()*2-1,r=n*n+i*i;while(r===0||r>1);a=Math.sqrt(-2*Math.log(r)/r),n*=a,hg=i*a}return e+n*t}function PC(e,t,n){n=n??1;const i=(e-(t||0))/n;return Math.exp(-.5*i*i)/(n*Y7)}function eb(e,t,n){t=t||0,n=n??1;const i=(e-t)/n,r=Math.abs(i);let a;if(r>37)a=0;else{const s=Math.exp(-r*r/2);let o;r<7.07106781186547?(o=.0352624965998911*r+.700383064443688,o=o*r+6.37396220353165,o=o*r+33.912866078383,o=o*r+112.079291497871,o=o*r+221.213596169931,o=o*r+220.206867912376,a=s*o,o=.0883883476483184*r+1.75566716318264,o=o*r+16.064177579207,o=o*r+86.7807322029461,o=o*r+296.564248779674,o=o*r+637.333633378831,o=o*r+793.826512519948,o=o*r+440.413735824752,a=a/o):(o=r+.65,o=r+4/o,o=r+3/o,o=r+2/o,o=r+1/o,a=s/o/2.506628274631)}return i>0?1-a:a}function tb(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*JZ*eK(2*e-1)}function eK(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function IC(e,t){let n,i;const r={mean(a){return arguments.length?(n=a||0,r):n},stdev(a){return arguments.length?(i=a??1,r):i},sample:()=>Jv(n,i),pdf:a=>PC(a,n,i),cdf:a=>eb(a,n,i),icdf:a=>tb(a,n,i)};return r.mean(e).stdev(t)}function qC(e,t){const n=IC();let i=0;const r={data(a){return arguments.length?(e=a,i=a?a.length:0,r.bandwidth(t)):e},bandwidth(a){return arguments.length?(t=a,!t&&e&&(t=jC(e)),r):t},sample(){return e[~~(Ir()*i)]+t*n.sample()},pdf(a){let s=0,o=0;for(;o<i;++o)s+=n.pdf((a-e[o])/t);return s/t/i},cdf(a){let s=0,o=0;for(;o<i;++o)s+=n.cdf((a-e[o])/t);return s/i},icdf(){throw Error("KDE icdf not supported.")}};return r.data(e)}function HC(e,t){return e=e||0,t=t??1,Math.exp(e+Jv()*t)}function GC(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const i=(Math.log(e)-t)/n;return Math.exp(-.5*i*i)/(n*Y7*e)}function YC(e,t,n){return eb(Math.log(e),t,n)}function XC(e,t,n){return Math.exp(tb(e,t,n))}function X7(e,t){let n,i;const r={mean(a){return arguments.length?(n=a||0,r):n},stdev(a){return arguments.length?(i=a??1,r):i},sample:()=>HC(n,i),pdf:a=>GC(a,n,i),cdf:a=>YC(a,n,i),icdf:a=>XC(a,n,i)};return r.mean(e).stdev(t)}function V7(e,t){let n=0,i;function r(s){const o=[];let l=0,f;for(f=0;f<n;++f)l+=o[f]=s[f]==null?1:+s[f];for(f=0;f<n;++f)o[f]/=l;return o}const a={weights(s){return arguments.length?(i=r(t=s||[]),a):t},distributions(s){return arguments.length?(s?(n=s.length,e=s):(n=0,e=[]),a.weights(t)):e},sample(){const s=Ir();let o=e[n-1],l=i[0],f=0;for(;f<n-1;l+=i[++f])if(s<l){o=e[f];break}return o.sample()},pdf(s){let o=0,l=0;for(;l<n;++l)o+=i[l]*e[l].pdf(s);return o},cdf(s){let o=0,l=0;for(;l<n;++l)o+=i[l]*e[l].cdf(s);return o},icdf(){throw Error("Mixture icdf not supported.")}};return a.distributions(e).weights(t)}function VC(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*Ir()}function WC(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function QC(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function ZC(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function W7(e,t){let n,i;const r={min(a){return arguments.length?(n=a||0,r):n},max(a){return arguments.length?(i=a??1,r):i},sample:()=>VC(n,i),pdf:a=>WC(a,n,i),cdf:a=>QC(a,n,i),icdf:a=>ZC(a,n,i)};return t==null&&(t=e??1,e=0),r.min(e).max(t)}function KC(e,t,n){let i=0,r=0;for(const a of e){const s=n(a);t(a)==null||s==null||isNaN(s)||(i+=(s-i)/++r)}return{coef:[i],predict:()=>i,rSquared:0}}function Yp(e,t,n,i){const r=i-e*e,a=Math.abs(r)<1e-24?0:(n-e*t)/r;return[t-a*e,a]}function nb(e,t,n,i){e=e.filter(y=>{let v=t(y),b=n(y);return v!=null&&(v=+v)>=v&&b!=null&&(b=+b)>=b}),i&&e.sort((y,v)=>t(y)-t(v));const r=e.length,a=new Float64Array(r),s=new Float64Array(r);let o=0,l=0,f=0,d,h,p;for(p of e)a[o]=d=+t(p),s[o]=h=+n(p),++o,l+=(d-l)/o,f+=(h-f)/o;for(o=0;o<r;++o)a[o]-=l,s[o]-=f;return[a,s,l,f]}function Xp(e,t,n,i){let r=-1,a,s;for(const o of e)a=t(o),s=n(o),a!=null&&(a=+a)>=a&&s!=null&&(s=+s)>=s&&i(a,s,++r)}function qd(e,t,n,i,r){let a=0,s=0;return Xp(e,t,n,(o,l)=>{const f=l-r(o),d=l-i;a+=f*f,s+=d*d}),1-a/s}function JC(e,t,n){let i=0,r=0,a=0,s=0,o=0;Xp(e,t,n,(d,h)=>{++o,i+=(d-i)/o,r+=(h-r)/o,a+=(d*h-a)/o,s+=(d*d-s)/o});const l=Yp(i,r,a,s),f=d=>l[0]+l[1]*d;return{coef:l,predict:f,rSquared:qd(e,t,n,r,f)}}function Q7(e,t,n){let i=0,r=0,a=0,s=0,o=0;Xp(e,t,n,(d,h)=>{++o,d=Math.log(d),i+=(d-i)/o,r+=(h-r)/o,a+=(d*h-a)/o,s+=(d*d-s)/o});const l=Yp(i,r,a,s),f=d=>l[0]+l[1]*Math.log(d);return{coef:l,predict:f,rSquared:qd(e,t,n,r,f)}}function Z7(e,t,n){const[i,r,a,s]=nb(e,t,n);let o=0,l=0,f=0,d=0,h=0,p,y,v;Xp(e,t,n,(w,A)=>{p=i[h++],y=Math.log(A),v=p*A,o+=(A*y-o)/h,l+=(v-l)/h,f+=(v*y-f)/h,d+=(p*v-d)/h});const[b,E]=Yp(l/s,o/s,f/s,d/s),_=w=>Math.exp(b+E*(w-a));return{coef:[Math.exp(b-E*a),E],predict:_,rSquared:qd(e,t,n,s,_)}}function K7(e,t,n){let i=0,r=0,a=0,s=0,o=0,l=0;Xp(e,t,n,(h,p)=>{const y=Math.log(h),v=Math.log(p);++l,i+=(y-i)/l,r+=(v-r)/l,a+=(y*v-a)/l,s+=(y*y-s)/l,o+=(p-o)/l});const f=Yp(i,r,a,s),d=h=>f[0]*Math.pow(h,f[1]);return f[0]=Math.exp(f[0]),{coef:f,predict:d,rSquared:qd(e,t,n,o,d)}}function e$(e,t,n){const[i,r,a,s]=nb(e,t,n),o=i.length;let l=0,f=0,d=0,h=0,p=0,y,v,b,E;for(y=0;y<o;)v=i[y],b=r[y++],E=v*v,l+=(E-l)/y,f+=(E*v-f)/y,d+=(E*E-d)/y,h+=(v*b-h)/y,p+=(E*b-p)/y;const _=d-l*l,w=l*_-f*f,A=(p*l-h*f)/w,M=(h*_-p*f)/w,T=-A*l,R=O=>(O=O-a,A*O*O+M*O+T+s);return{coef:[T-M*a+A*a*a+s,M-2*A*a,A],predict:R,rSquared:qd(e,t,n,s,R)}}function J7(e,t,n,i){if(i===0)return KC(e,t,n);if(i===1)return JC(e,t,n);if(i===2)return e$(e,t,n);const[r,a,s,o]=nb(e,t,n),l=r.length,f=[],d=[],h=i+1;let p,y,v,b,E;for(p=0;p<h;++p){for(v=0,b=0;v<l;++v)b+=Math.pow(r[v],p)*a[v];for(f.push(b),E=new Float64Array(h),y=0;y<h;++y){for(v=0,b=0;v<l;++v)b+=Math.pow(r[v],p+y);E[y]=b}d.push(E)}d.push(f);const _=nK(d),w=A=>{A-=s;let M=o+_[0]+_[1]*A+_[2]*A*A;for(p=3;p<h;++p)M+=_[p]*Math.pow(A,p);return M};return{coef:tK(h,_,-s,o),predict:w,rSquared:qd(e,t,n,o,w)}}function tK(e,t,n,i){const r=Array(e);let a,s,o,l;for(a=0;a<e;++a)r[a]=0;for(a=e-1;a>=0;--a)for(o=t[a],l=1,r[a]+=o,s=1;s<=a;++s)l*=(a+1-s)/s,r[a-s]+=o*Math.pow(n,s)*l;return r[0]+=i,r}function nK(e){const t=e.length-1,n=[];let i,r,a,s,o;for(i=0;i<t;++i){for(s=i,r=i+1;r<t;++r)Math.abs(e[i][r])>Math.abs(e[i][s])&&(s=r);for(a=i;a<t+1;++a)o=e[a][i],e[a][i]=e[a][s],e[a][s]=o;for(r=i+1;r<t;++r)for(a=t;a>=i;a--)e[a][r]-=e[a][i]*e[i][r]/e[i][i]}for(r=t-1;r>=0;--r){for(o=0,a=r+1;a<t;++a)o+=e[a][r]*n[a];n[r]=(e[t][r]-o)/e[r][r]}return n}const tN=2,nN=1e-12;function e9(e,t,n,i){const[r,a,s,o]=nb(e,t,n,!0),l=r.length,f=Math.max(2,~~(i*l)),d=new Float64Array(l),h=new Float64Array(l),p=new Float64Array(l).fill(1);for(let y=-1;++y<=tN;){const v=[0,f-1];for(let E=0;E<l;++E){const _=r[E],w=v[0],A=v[1],M=_-r[w]>r[A]-_?w:A;let T=0,R=0,O=0,k=0,$=0;const D=1/Math.abs(r[M]-_||1);for(let q=w;q<=A;++q){const j=r[q],L=a[q],U=iK(Math.abs(_-j)*D)*p[q],I=j*U;T+=U,R+=I,O+=L*U,k+=L*I,$+=j*I}const[z,P]=Yp(R/T,O/T,k/T,$/T);d[E]=z+P*_,h[E]=Math.abs(a[E]-d[E]),rK(r,E+1,v)}if(y===tN)break;const b=B8(h);if(Math.abs(b)<nN)break;for(let E=0,_,w;E<l;++E)_=h[E]/(6*b),p[E]=_>=1?nN:(w=1-_*_)*w}return aK(r,d,s,o)}function iK(e){return(e=1-e*e*e)*e*e}function rK(e,t,n){const i=e[t];let r=n[0],a=n[1]+1;if(!(a>=e.length))for(;t>r&&e[a]-i<=i-e[r];)n[0]=++r,n[1]=a,++a}function aK(e,t,n,i){const r=e.length,a=[];let s=0,o=0,l=[],f;for(;s<r;++s)f=e[s]+n,l[0]===f?l[1]+=(t[s]-l[1])/++o:(o=0,l[1]+=i,l=[f,t[s]],a.push(l));return l[1]+=i,a}const sK=.5*Math.PI/180;function ib(e,t,n,i){n=n||25,i=Math.max(n,i||200);const r=b=>[b,e(b)],a=t[0],s=t[1],o=s-a,l=o/i,f=[r(a)],d=[];if(n===i){for(let b=1;b<i;++b)f.push(r(a+b/n*o));return f.push(r(s)),f}else{d.push(r(s));for(let b=n;--b>0;)d.push(r(a+b/n*o))}let h=f[0],p=d[d.length-1];const y=1/o,v=oK(h[1],d);for(;p;){const b=r((h[0]+p[0])/2);b[0]-h[0]>=l&&uK(h,b,p,y,v)>sK?d.push(b):(h=p,f.push(p),d.pop()),p=d[d.length-1]}return f}function oK(e,t){let n=e,i=e;const r=t.length;for(let a=0;a<r;++a){const s=t[a][1];s<n&&(n=s),s>i&&(i=s)}return 1/(i-n)}function uK(e,t,n,i,r){const a=Math.atan2(r*(n[1]-e[1]),i*(n[0]-e[0])),s=Math.atan2(r*(t[1]-e[1]),i*(t[0]-e[0]));return Math.abs(a-s)}function lK(e){return t=>{const n=e.length;let i=1,r=String(e[0](t));for(;i<n;++i)r+="|"+e[i](t);return r}}function ow(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:lK(e)}function t9(e,t,n){return n||e+(t?"_"+t:"")}const hS=()=>{},cK={init:hS,add:hS,rem:hS,idx:0},mp={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},Vp=Object.keys(mp).filter(e=>e!=="__count__");function fK(e,t){return(n,i)=>Ge({name:e,aggregate_param:i,out:n||e},cK,t)}[...Vp,"__count__"].forEach(e=>{mp[e]=fK(e,mp[e])});function n9(e,t,n){return mp[e](n,t)}function i9(e,t){return e.idx-t.idx}function dK(e){const t={};e.forEach(i=>t[i.name]=i);const n=i=>{i.req&&i.req.forEach(r=>{t[r]||n(t[r]=mp[r]())})};return e.forEach(n),Object.values(t).sort(i9)}function hK(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function gK(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function pK(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function mK(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function r9(e,t){const n=t||ui,i=dK(e),r=e.slice().sort(i9);function a(s){this._ops=i,this._out=r,this.cell=s,this.init()}return a.prototype.init=hK,a.prototype.add=gK,a.prototype.rem=pK,a.prototype.set=mK,a.prototype.get=n,a.fields=e.map(s=>s.out),a}function t$(e){this._key=e?Br(e):ze,this.reset()}const Gn=t$.prototype;Gn.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};Gn.add=function(e){this._add.push(e)};Gn.rem=function(e){this._rem.push(e)};Gn.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,i=e.length,r=t.length,a=Array(i-r),s={};let o,l,f;for(o=0;o<r;++o)s[n(t[o])]=1;for(o=0,l=0;o<i;++o)s[n(f=e[o])]?s[n(f)]=0:a[l++]=f;return this._rem=[],this._add=a};Gn.distinct=function(e){const t=this.values(),n={};let i=t.length,r=0,a;for(;--i>=0;)a=e(t[i])+"",Ce(n,a)||(n[a]=1,++r);return r};Gn.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=x8(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};Gn.argmin=function(e){return this.extent(e)[0]||{}};Gn.argmax=function(e){return this.extent(e)[1]||{}};Gn.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};Gn.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};Gn.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=BC(this.values(),e),this._get=e),this._q};Gn.q1=function(e){return this.quartile(e)[0]};Gn.q2=function(e){return this.quartile(e)[1]};Gn.q3=function(e){return this.quartile(e)[2]};Gn.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=H7(this.values(),1e3,.05,e),this._get=e),this._ci};Gn.ci0=function(e){return this.ci(e)[0]};Gn.ci1=function(e){return this.ci(e)[1]};function Su(e){ee.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}Su.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Vp},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};be(Su,ee,{transform(e,t){const n=this,i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.modified();return n.stamp=i.stamp,n.value&&(r||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=r?n.init(e):Object.create(null),t.visit(t.SOURCE,a=>n.add(a))):(n.value=n.value||n.init(e),t.visit(t.REM,a=>n.rem(a)),t.visit(t.ADD,a=>n.add(a))),i.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&i.clean(!0).runAfter(()=>this.clean()),n.changes(i)},cross(){const e=this,t=e.value,n=e._dnames,i=n.map(()=>({})),r=n.length;function a(o){let l,f,d,h;for(l in o)for(d=o[l].tuple,f=0;f<r;++f)i[f][h=d[n[f]]]=h}a(e._prev),a(t);function s(o,l,f){const d=n[f],h=i[f++];for(const p in h){const y=o?o+"|"+p:p;l[d]=h[p],f<r?s(y,l,f):t[y]||e.cell(y,l)}}s("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],i={};function r(w){const A=Se(ri(w)),M=A.length;let T=0,R;for(;T<M;++T)i[R=A[T]]||(i[R]=1,t.push(R))}this._dims=Se(e.groupby),this._dnames=this._dims.map(w=>{const A=Zt(w);return r(w),n.push(A),A}),this.cellkey=e.key?e.key:ow(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const a=e.fields||[null],s=e.ops||["count"],o=e.aggregate_params||[null],l=e.as||[],f=a.length,d={};let h,p,y,v,b,E,_;for(f!==s.length&&ie("Unmatched number of fields and aggregate ops."),_=0;_<f;++_){if(h=a[_],p=s[_],y=o[_]||null,h==null&&p!=="count"&&ie("Null aggregate field specified."),b=Zt(h),E=t9(p,b,l[_]),n.push(E),p==="count"){this._counts.push(E);continue}v=d[b],v||(r(h),v=d[b]=[],v.field=h,this._measures.push(v)),p!=="count"&&(this._countOnly=!1),v.push(n9(p,y,E))}return this._measures=this._measures.map(w=>r9(w,w.field)),Object.create(null)},cellkey:ow(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const i=this._measures,r=i.length;n.agg=Array(r);for(let a=0;a<r;++a)n.agg[a]=new i[a](n)}return n.store&&(n.data=new t$),n},newtuple(e,t){const n=this._dnames,i=this._dims,r=i.length,a={};for(let s=0;s<r;++s)a[n[s]]=i[s](e);return t?F7(t.tuple,a):mt(a)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const i=n.agg;for(let r=0,a=i.length;r<a;++r)i[r].add(i[r].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const i=n.agg;for(let r=0,a=i.length;r<a;++r)i[r].rem(i[r].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let i=0,r=n.length;i<r;++i)t[n[i]]=e.num;if(!this._countOnly){const i=e.agg;for(let r=0,a=i.length;r<a;++r)i[r].set(t)}return t},changes(e){const t=this._adds,n=this._mods,i=this._prev,r=this._drop,a=e.add,s=e.rem,o=e.mod;let l,f,d,h;if(i)for(f in i)l=i[f],(!r||l.num)&&s.push(l.tuple);for(d=0,h=this._alen;d<h;++d)a.push(this.celltuple(t[d])),t[d]=null;for(d=0,h=this._mlen;d<h;++d)l=n[d],(l.num===0&&r?s:o).push(this.celltuple(l)),n[d]=null;return this._alen=this._mlen=0,this._prev=null,e}});const yK=1e-14;function n$(e){ee.call(this,null,e)}n$.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};be(n$,ee,{transform(e,t){const n=e.interval!==!1,i=this._bins(e),r=i.start,a=i.step,s=e.as||["bin0","bin1"],o=s[0],l=s[1];let f;return e.modified()?(t=t.reflow(!0),f=t.SOURCE):f=t.modified(ri(e.field))?t.ADD_MOD:t.ADD,t.visit(f,n?d=>{const h=i(d);d[o]=h,d[l]=h==null?null:r+a*(1+(h-r)/a)}:d=>d[o]=i(d)),t.modifies(n?s:o)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=q7(e),i=n.step;let r=n.start,a=r+Math.ceil((n.stop-r)/i)*i,s,o;(s=e.anchor)!=null&&(o=s-(r+i*Math.floor((s-r)/i)),r+=o,a+=o);const l=function(f){let d=ni(t(f));return d==null?null:d<r?-1/0:d>a?1/0:(d=Math.max(r,Math.min(d,a-i)),r+i*Math.floor(yK+(d-r)/i))};return l.start=r,l.stop=n.stop,l.step=i,this.value=Yi(l,ri(t),e.name||"bin_"+Zt(t))}});function a9(e,t,n){const i=e;let r=t||[],a=n||[],s={},o=0;return{add:l=>a.push(l),remove:l=>s[i(l)]=++o,size:()=>r.length,data:(l,f)=>(o&&(r=r.filter(d=>!s[i(d)]),s={},o=0),f&&l&&r.sort(l),a.length&&(r=l?C8(l,r,a.sort(l)):r.concat(a),a=[]),r)}}function i$(e){ee.call(this,[],e)}i$.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};be(i$,ee,{transform(e,t){const n=t.fork(t.ALL),i=a9(ze,this.value,n.materialize(n.ADD).add),r=e.sort,a=t.changed()||r&&(e.modified("sort")||t.modified(r.fields));return n.visit(n.REM,i.remove),this.modified(a),this.value=n.source=i.data(Sc(r),a),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function s9(e){kt.call(this,null,vK,e)}be(s9,kt);function vK(e){return this.value&&!e.modified()?this.value:yC(e.fields,e.orders)}function r$(e){ee.call(this,null,e)}r$.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function bK(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}be(r$,ee,{transform(e,t){const n=h=>p=>{for(var y=bK(o(p),e.case,a)||[],v,b=0,E=y.length;b<E;++b)s.test(v=y[b])||h(v)},i=this._parameterCheck(e,t),r=this._counts,a=this._match,s=this._stop,o=e.field,l=e.as||["text","count"],f=n(h=>r[h]=1+(r[h]||0)),d=n(h=>r[h]-=1);return i?t.visit(t.SOURCE,f):(t.visit(t.ADD,f),t.visit(t.REM,d)),this._finish(t,l)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,i=this._tuples||(this._tuples={}),r=t[0],a=t[1],s=e.fork(e.NO_SOURCE|e.NO_FIELDS);let o,l,f;for(o in n)l=i[o],f=n[o]||0,!l&&f?(i[o]=l=mt({}),l[r]=o,l[a]=f,s.add.push(l)):f===0?(l&&s.rem.push(l),n[o]=null,i[o]=null):l[a]!==f&&(l[a]=f,s.mod.push(l));return s.modifies(t)}});function a$(e){ee.call(this,null,e)}a$.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};be(a$,ee,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.as||["a","b"],r=i[0],a=i[1],s=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let o=this.value;return s?(o&&(n.rem=o),o=t.materialize(t.SOURCE).source,n.add=this.value=xK(o,r,a,e.filter||jr)):n.mod=o,n.source=this.value,n.modifies(i)}});function xK(e,t,n,i){for(var r=[],a={},s=e.length,o=0,l,f;o<s;++o)for(a[t]=f=e[o],l=0;l<s;++l)a[n]=e[l],i(a)&&(r.push(mt(a)),a={},a[t]=f);return r}const iN={kde:qC,mixture:V7,normal:IC,lognormal:X7,uniform:W7},EK="distributions",rN="function",SK="field";function o9(e,t){const n=e[rN];Ce(iN,n)||ie("Unknown distribution function: "+n);const i=iN[n]();for(const r in e)r===SK?i.data((e.from||t()).map(e[r])):r===EK?i[r](e[r].map(a=>o9(a,t))):typeof i[r]===rN&&i[r](e[r]);return i}function s$(e){ee.call(this,null,e)}const u9=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],_K={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:u9},{name:"weights",type:"number",array:!0}]};s$.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:u9.concat(_K)},{name:"as",type:"string",array:!0,default:["value","density"]}]};be(s$,ee,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=o9(e.distribution,wK(t)),r=e.steps||e.minsteps||25,a=e.steps||e.maxsteps||200;let s=e.method||"pdf";s!=="pdf"&&s!=="cdf"&&ie("Invalid density method: "+s),!e.extent&&!i.data&&ie("Missing density extent parameter."),s=i[s];const o=e.as||["value","density"],l=e.extent||es(i.data()),f=ib(s,l,r,a).map(d=>{const h={};return h[o[0]]=d[0],h[o[1]]=d[1],mt(h)});this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});function wK(e){return()=>e.materialize(e.SOURCE).source}function l9(e,t){return e?e.map((n,i)=>t[i]||Zt(n)):null}function o$(e,t,n){const i=[],r=h=>h(l);let a,s,o,l,f,d;if(t==null)i.push(e.map(n));else for(a={},s=0,o=e.length;s<o;++s)l=e[s],f=t.map(r),d=a[f],d||(a[f]=d=[],d.dims=f,i.push(d)),d.push(n(l));return i}const c9="bin";function u$(e){ee.call(this,null,e)}u$.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:c9}]};const AK=(e,t)=>Gp(es(e,t))/30;be(u$,ee,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,i=o$(t.source,e.groupby,ui),r=e.smooth||!1,a=e.field,s=e.step||AK(n,a),o=Sc((v,b)=>a(v)-a(b)),l=e.as||c9,f=i.length;let d=1/0,h=-1/0,p=0,y;for(;p<f;++p){const v=i[p].sort(o);y=-1;for(const b of G7(v,s,r,a))b<d&&(d=b),b>h&&(h=b),v[++y][l]=b}return this.value={start:d,stop:h,step:s},t.reflow(!0).modifies(l)}});function f9(e){kt.call(this,null,CK,e),this.modified(!0)}be(f9,kt);function CK(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:Yi(n=>t(n,e),ri(t),Zt(t))}function l$(e){ee.call(this,[void 0,void 0],e)}l$.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};be(l$,ee,{transform(e,t){const n=this.value,i=e.field,r=t.changed()||t.modified(i.fields)||e.modified("field");let a=n[0],s=n[1];if((r||a==null)&&(a=1/0,s=-1/0),t.visit(r?t.SOURCE:t.ADD,o=>{const l=ni(i(o));l!=null&&(l<a&&(a=l),l>s&&(s=l))}),!Number.isFinite(a)||!Number.isFinite(s)){let o=Zt(i);o&&(o=` for field "${o}"`),t.dataflow.warn(`Infinite extent${o}: [${a}, ${s}]`),a=s=void 0}this.value=[a,s]}});function c$(e,t){kt.call(this,e),this.parent=t,this.count=0}be(c$,kt,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function rb(e){ee.call(this,{},e),this._keys=Ld();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let i=0,r=t.active;i<r;++i)n(t[i],i,t)}}be(rb,ee,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,i){const r=this.value;let a=Ce(r,e)&&r[e],s,o;return a?a.value.stamp<n.stamp&&(a.init(n),this.activate(a)):(o=i||(o=this._group[e])&&o.tuple,s=n.dataflow,a=new c$(n.fork(n.NO_SOURCE),this),s.add(a).connect(t(s,e,o)),r[e]=a,this.activate(a)),a},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const i=e[n].detachSubflow;i&&i(),delete e[n],++t}if(t){const n=this._targets.filter(i=>i&&i.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,i=e?e.length:0;let r=0;for(;r<i;++r)t[r]=e[r];for(;r<n&&t[r]!=null;++r)t[r]=null;t.active=i},transform(e,t){const n=t.dataflow,i=e.key,r=e.subflow,a=this._keys,s=e.modified("key"),o=l=>this.subflow(l,r,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,l=>{const f=ze(l),d=a.get(f);d!==void 0&&(a.delete(f),o(d).rem(l))}),t.visit(t.ADD,l=>{const f=i(l);a.set(ze(l),f),o(f).add(l)}),s||t.modified(i.fields)?t.visit(t.MOD,l=>{const f=ze(l),d=a.get(f),h=i(l);d===h?o(h).mod(l):(a.set(f,h),o(d).rem(l),o(h).add(l))}):t.changed(t.MOD)&&t.visit(t.MOD,l=>{o(a.get(ze(l))).mod(l)}),s&&t.visit(t.REFLOW,l=>{const f=ze(l),d=a.get(f),h=i(l);d!==h&&(a.set(f,h),o(d).rem(l),o(h).add(l))}),t.clean()?n.runAfter(()=>{this.clean(),a.clean()}):a.empty>n.cleanThreshold&&n.runAfter(a.clean),t}});function d9(e){kt.call(this,null,$K,e)}be(d9,kt);function $K(e){return this.value&&!e.modified()?this.value:oe(e.name)?Se(e.name).map(t=>Br(t)):Br(e.name,e.as)}function f$(e){ee.call(this,Ld(),e)}f$.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};be(f$,ee,{transform(e,t){const n=t.dataflow,i=this.value,r=t.fork(),a=r.add,s=r.rem,o=r.mod,l=e.expr;let f=!0;t.visit(t.REM,h=>{const p=ze(h);i.has(p)?i.delete(p):s.push(h)}),t.visit(t.ADD,h=>{l(h,e)?a.push(h):i.set(ze(h),1)});function d(h){const p=ze(h),y=l(h,e),v=i.get(p);y&&v?(i.delete(p),a.push(h)):!y&&!v?(i.set(p,1),s.push(h)):f&&y&&!v&&o.push(h)}return t.visit(t.MOD,d),e.modified()&&(f=!1,t.visit(t.REFLOW,d)),i.empty>n.cleanThreshold&&n.runAfter(i.clean),r}});function d$(e){ee.call(this,[],e)}d$.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};be(d$,ee,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.fields,r=l9(i,e.as||[]),a=e.index||null,s=r.length;return n.rem=this.value,t.visit(t.SOURCE,o=>{const l=i.map(v=>v(o)),f=l.reduce((v,b)=>Math.max(v,b.length),0);let d=0,h,p,y;for(;d<f;++d){for(p=zC(o),h=0;h<s;++h)p[r[h]]=(y=l[h][d])==null?null:y;a&&(p[a]=d),n.add.push(p)}}),this.value=n.source=n.add,a&&n.modifies(a),n.modifies(r)}});function h$(e){ee.call(this,[],e)}h$.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};be(h$,ee,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.fields,r=i.map(Zt),a=e.as||["key","value"],s=a[0],o=a[1],l=i.length;return n.rem=this.value,t.visit(t.SOURCE,f=>{for(let d=0,h;d<l;++d)h=zC(f),h[s]=r[d],h[o]=i[d](f),n.add.push(h)}),this.value=n.source=n.add,n.modifies(a)}});function g$(e){ee.call(this,null,e)}g$.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};be(g$,ee,{transform(e,t){const n=e.expr,i=e.as,r=e.modified(),a=e.initonly?t.ADD:r?t.SOURCE:t.modified(n.fields)||t.modified(i)?t.ADD_MOD:t.ADD;return r&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(i),t.visit(a,s=>s[i]=n(s,e))}});function h9(e){ee.call(this,[],e)}be(h9,ee,{transform(e,t){const n=t.fork(t.ALL),i=e.generator;let r=this.value,a=e.size-r.length,s,o,l;if(a>0){for(s=[];--a>=0;)s.push(l=mt(i(e))),r.push(l);n.add=n.add.length?n.materialize(n.ADD).add.concat(s):s}else o=r.slice(0,-a),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(o):o,r=r.slice(-a);return n.source=this.value=r,n}});const Qm={value:"value",median:B8,mean:lW,min:Q_,max:Il},TK=[];function p$(e){ee.call(this,[],e)}p$.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function MK(e){var t=e.method||Qm.value,n;if(Qm[t]==null)ie("Unrecognized imputation method: "+t);else return t===Qm.value?(n=e.value!==void 0?e.value:0,()=>n):Qm[t]}function kK(e){const t=e.field;return n=>n?t(n):NaN}be(p$,ee,{transform(e,t){var n=t.fork(t.ALL),i=MK(e),r=kK(e),a=Zt(e.field),s=Zt(e.key),o=(e.groupby||[]).map(Zt),l=OK(t.source,e.groupby,e.key,e.keyvals),f=[],d=this.value,h=l.domain.length,p,y,v,b,E,_,w,A,M,T;for(E=0,A=l.length;E<A;++E)for(p=l[E],v=p.values,y=NaN,w=0;w<h;++w)if(p[w]==null){for(b=l.domain[w],T={_impute:!0},_=0,M=v.length;_<M;++_)T[o[_]]=v[_];T[s]=b,T[a]=Number.isNaN(y)?y=i(p,r):y,f.push(mt(T))}return f.length&&(n.add=n.materialize(n.ADD).add.concat(f)),d.length&&(n.rem=n.materialize(n.REM).rem.concat(d)),this.value=f,n}});function OK(e,t,n,i){var r=_=>_(E),a=[],s=i?i.slice():[],o={},l={},f,d,h,p,y,v,b,E;for(s.forEach((_,w)=>o[_]=w+1),p=0,b=e.length;p<b;++p)E=e[p],v=n(E),y=o[v]||(o[v]=s.push(v)),d=(f=t?t.map(r):TK)+"",(h=l[d])||(h=l[d]=[],a.push(h),h.values=f),h[y-1]=E;return a.domain=s,a}function m$(e){Su.call(this,e)}m$.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:Vp},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};be(m$,Su,{transform(e,t){const n=this,i=e.modified();let r;return n.value&&(i||t.modified(n._inputs,!0))?(r=n.value=i?n.init(e):{},t.visit(t.SOURCE,a=>n.add(a))):(r=n.value=n.value||this.init(e),t.visit(t.REM,a=>n.rem(a)),t.visit(t.ADD,a=>n.add(a))),n.changes(),t.visit(t.SOURCE,a=>{Ge(a,r[n.cellkey(a)].tuple)}),t.reflow(i).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,i;for(n=0,i=this._alen;n<i;++n)this.celltuple(e[n]),e[n]=null;for(n=0,i=this._mlen;n<i;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function y$(e){ee.call(this,null,e)}y$.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};be(y$,ee,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=t.materialize(t.SOURCE).source,r=o$(i,e.groupby,e.field),a=(e.groupby||[]).map(Zt),s=e.bandwidth,o=e.cumulative?"cdf":"pdf",l=e.as||["value","density"],f=[];let d=e.extent,h=e.steps||e.minsteps||25,p=e.steps||e.maxsteps||200;o!=="pdf"&&o!=="cdf"&&ie("Invalid density method: "+o),e.resolve==="shared"&&(d||(d=es(i,e.field)),h=p=e.steps||p),r.forEach(y=>{const v=qC(y,s)[o],b=e.counts?y.length:1,E=d||es(y);ib(v,E,h,p).forEach(_=>{const w={};for(let A=0;A<a.length;++A)w[a[A]]=y.dims[A];w[l[0]]=_[0],w[l[1]]=_[1]*b,f.push(mt(w))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});function g9(e){kt.call(this,null,RK,e)}be(g9,kt);function RK(e){return this.value&&!e.modified()?this.value:bC(e.fields,e.flat)}function p9(e){ee.call(this,[],e),this._pending=null}be(p9,ee,{transform(e,t){const n=t.dataflow;return this._pending?gS(this,t,this._pending):DK(e)?t.StopPropagation:e.values?gS(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(r=>(this._pending=Se(r.data),a=>a.touch(this)))}:n.request(e.url,e.format).then(i=>gS(this,t,Se(i.data)))}});function DK(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function gS(e,t,n){n.forEach(mt);const i=t.fork(t.NO_FIELDS&t.NO_SOURCE);return i.rem=e.value,e.value=i.source=i.add=n,e._pending=null,i.rem.length&&i.clean(!0),i}function v$(e){ee.call(this,{},e)}v$.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};be(v$,ee,{transform(e,t){const n=e.fields,i=e.index,r=e.values,a=e.default==null?null:e.default,s=e.modified(),o=n.length;let l=s?t.SOURCE:t.ADD,f=t,d=e.as,h,p,y;return r?(p=r.length,o>1&&!d&&ie('Multi-field lookup requires explicit "as" parameter.'),d&&d.length!==o*p&&ie('The "as" parameter has too few output field names.'),d=d||r.map(Zt),h=function(v){for(var b=0,E=0,_,w;b<o;++b)if(w=i.get(n[b](v)),w==null)for(_=0;_<p;++_,++E)v[d[E]]=a;else for(_=0;_<p;++_,++E)v[d[E]]=r[_](w)}):(d||ie("Missing output field names."),h=function(v){for(var b=0,E;b<o;++b)E=i.get(n[b](v)),v[d[b]]=E??a}),s?f=t.reflow(!0):(y=n.some(v=>t.modified(v.fields)),l|=y?t.MOD:0),t.visit(l,h),f.modifies(d)}});function m9(e){kt.call(this,null,NK,e)}be(m9,kt);function NK(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let i=1/0,r=-1/0,a,s;for(a=0;a<n;++a)s=t[a],s[0]<i&&(i=s[0]),s[1]>r&&(r=s[1]);return[i,r]}function y9(e){kt.call(this,null,zK,e)}be(y9,kt);function zK(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function v9(e){ee.call(this,null,e)}be(v9,ee,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function b$(e){Su.call(this,e)}b$.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:Vp,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};be(b$,Su,{_transform:Su.prototype.transform,transform(e,t){return this._transform(FK(e,t),t)}});function FK(e,t){const n=e.field,i=e.value,r=(e.op==="count"?"__count__":e.op)||"sum",a=ri(n).concat(ri(i)),s=UK(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:s.map(()=>r),fields:s.map(o=>LK(o,n,i,a)),as:s.map(o=>o+""),modified:e.modified.bind(e)}}function LK(e,t,n,i){return Yi(r=>t(r)===e?n(r):NaN,i,e+"")}function UK(e,t,n){const i={},r=[];return n.visit(n.SOURCE,a=>{const s=e(a);i[s]||(i[s]=1,r.push(s))}),r.sort(Fd),t?r.slice(0,t):r}function b9(e){rb.call(this,e)}be(b9,rb,{transform(e,t){const n=e.subflow,i=e.field,r=a=>this.subflow(ze(a),n,t,a);return(e.modified("field")||i&&t.modified(ri(i)))&&ie("PreFacet does not support field modification."),this.initTargets(),i?(t.visit(t.MOD,a=>{const s=r(a);i(a).forEach(o=>s.mod(o))}),t.visit(t.ADD,a=>{const s=r(a);i(a).forEach(o=>s.add(mt(o)))}),t.visit(t.REM,a=>{const s=r(a);i(a).forEach(o=>s.rem(o))})):(t.visit(t.MOD,a=>r(a).mod(a)),t.visit(t.ADD,a=>r(a).add(a)),t.visit(t.REM,a=>r(a).rem(a))),t.clean()&&t.runAfter(()=>this.clean()),t}});function x$(e){ee.call(this,null,e)}x$.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};be(x$,ee,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.fields,r=l9(e.fields,e.as||[]),a=i?(o,l)=>BK(o,l,i,r):Qv;let s;return this.value?s=this.value:(t=t.addAll(),s=this.value={}),t.visit(t.REM,o=>{const l=ze(o);n.rem.push(s[l]),s[l]=null}),t.visit(t.ADD,o=>{const l=a(o,mt({}));s[ze(o)]=l,n.add.push(l)}),t.visit(t.MOD,o=>{n.mod.push(a(o,s[ze(o)]))}),n}});function BK(e,t,n,i){for(let r=0,a=n.length;r<a;++r)t[i[r]]=n[r](e);return t}function x9(e){ee.call(this,null,e)}be(x9,ee,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function E$(e){ee.call(this,null,e)}E$.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const jK=1e-14;be(E$,ee,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const r=t.materialize(t.SOURCE).source,a=o$(r,e.groupby,e.field),s=(e.groupby||[]).map(Zt),o=[],l=e.step||.01,f=e.probs||rr(l/2,1-jK,l),d=f.length;return a.forEach(h=>{const p=UC(h,f);for(let y=0;y<d;++y){const v={};for(let b=0;b<s.length;++b)v[s[b]]=h.dims[b];v[i[0]]=f[y],v[i[1]]=p[y],o.push(mt(v))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=o,n}});function E9(e){ee.call(this,null,e)}be(E9,ee,{transform(e,t){let n,i;return this.value?i=this.value:(n=t=t.addAll(),i=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,r=>{const a=ze(r);n.rem.push(i[a]),i[a]=null}),t.visit(t.ADD,r=>{const a=zC(r);i[ze(r)]=a,n.add.push(a)}),t.visit(t.MOD,r=>{const a=i[ze(r)];for(const s in r)a[s]=r[s],n.modifies(s);n.mod.push(a)})),n}});function S$(e){ee.call(this,[],e),this.count=0}S$.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};be(S$,ee,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.modified("size"),r=e.size,a=this.value.reduce((d,h)=>(d[ze(h)]=1,d),{});let s=this.value,o=this.count,l=0;function f(d){let h,p;s.length<r?s.push(d):(p=~~((o+1)*Ir()),p<s.length&&p>=l&&(h=s[p],a[ze(h)]&&n.rem.push(h),s[p]=d)),++o}if(t.rem.length&&(t.visit(t.REM,d=>{const h=ze(d);a[h]&&(a[h]=-1,n.rem.push(d)),--o}),s=s.filter(d=>a[ze(d)]!==-1)),(t.rem.length||i)&&s.length<r&&t.source&&(l=o=s.length,t.visit(t.SOURCE,d=>{a[ze(d)]||f(d)}),l=-1),i&&s.length>r){const d=s.length-r;for(let h=0;h<d;++h)a[ze(s[h])]=-1,n.rem.push(s[h]);s=s.slice(d)}return t.mod.length&&t.visit(t.MOD,d=>{a[ze(d)]&&n.mod.push(d)}),t.add.length&&t.visit(t.ADD,f),(t.add.length||l<0)&&(n.add=s.filter(d=>!a[ze(d)])),this.count=o,this.value=n.source=s,n}});function _$(e){ee.call(this,null,e)}_$.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};be(_$,ee,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),i=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=rr(e.start,e.stop,e.step||1).map(r=>{const a={};return a[i]=r,mt(a)}),n.add=t.add.concat(this.value),n}});function S9(e){ee.call(this,null,e),this.modified(!0)}be(S9,ee,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function w$(e){ee.call(this,null,e)}const _9=["unit0","unit1"];w$.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:CC,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:_9}]};be(w$,ee,{transform(e,t){const n=e.field,i=e.interval!==!1,r=e.timezone==="utc",a=this._floor(e,t),s=(r?Id:Pd)(a.unit).offset,o=e.as||_9,l=o[0],f=o[1],d=a.step;let h=a.start||1/0,p=a.stop||-1/0,y=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(ri(n)))&&(t=t.reflow(!0),y=t.SOURCE,h=1/0,p=-1/0),t.visit(y,v=>{const b=n(v);let E,_;b==null?(v[l]=null,i&&(v[f]=null)):(v[l]=E=_=a(b),i&&(v[f]=_=s(E,d)),E<h&&(h=E),_>p&&(p=_))}),a.start=h,a.stop=p,t.modifies(i?o:l)},_floor(e,t){const n=e.timezone==="utc",{units:i,step:r}=e.units?{units:e.units,step:e.step||1}:h7({extent:e.extent||es(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),a=$C(i),s=this.value||{},o=(n?r7:i7)(a,r);return o.unit=st(a),o.units=a,o.step=r,o.start=s.start,o.stop=s.stop,this.value=o}});function w9(e){ee.call(this,Ld(),e)}be(w9,ee,{transform(e,t){const n=t.dataflow,i=e.field,r=this.value,a=o=>r.set(i(o),o);let s=!0;return e.modified("field")||t.modified(i.fields)?(r.clear(),t.visit(t.SOURCE,a)):t.changed()?(t.visit(t.REM,o=>r.delete(i(o))),t.visit(t.ADD,a)):s=!1,this.modified(s),r.empty>n.cleanThreshold&&n.runAfter(r.clean),t.fork()}});function A9(e){ee.call(this,null,e)}be(A9,ee,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(Sc(e.sort)):t.source).map(e.field))}});function PK(e,t,n,i){const r=yp[e](t,n);return{init:r.init||ru,update:function(a,s){s[i]=r.next(a)}}}const yp={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,i=t.data;return n&&t.compare(i[n-1],i[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,i=t.data;return n&&t.compare(i[n-1],i[n])?++e:e}}},percent_rank:function(){const e=yp.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,i=t.compare;let r=t.index;if(e<r){for(;r+1<n.length&&!i(n[r],n[r+1]);)++r;e=r}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||ie("ntile num must be greater than zero.");const n=yp.cume_dist(),i=n.next;return{init:n.init,next:r=>Math.ceil(t*i(r))}},lag:function(e,t){return t=+t||1,{next:n=>{const i=n.index-t;return i>=0?e(n.data[i]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const i=n.index+t,r=n.data;return i<r.length?e(r[i]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||ie("nth_value nth must be greater than zero."),{next:n=>{const i=n.i0+(t-1);return i<n.i1?e(n.data[i]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const i=e(n.data[n.index]);return i!=null?t=i:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:i=>{const r=i.data;return i.index<=n?t:(n=IK(e,r,i.index))<0?(n=r.length,t=null):t=e(r[n])}}}};function IK(e,t,n){for(let i=t.length;n<i;++n)if(e(t[n])!=null)return n;return-1}const qK=Object.keys(yp);function C9(e){const t=Se(e.ops),n=Se(e.fields),i=Se(e.params),r=Se(e.aggregate_params),a=Se(e.as),s=this.outputs=[],o=this.windows=[],l={},f={},d=[],h=[];let p=!0;function y(v){Se(ri(v)).forEach(b=>l[b]=1)}y(e.sort),t.forEach((v,b)=>{const E=n[b],_=i[b],w=r[b]||null,A=Zt(E),M=t9(v,A,a[b]);if(y(E),s.push(M),Ce(yp,v))o.push(PK(v,E,_,M));else{if(E==null&&v!=="count"&&ie("Null aggregate field specified."),v==="count"){d.push(M);return}p=!1;let T=f[A];T||(T=f[A]=[],T.field=E,h.push(T)),T.push(n9(v,w,M))}}),(d.length||h.length)&&(this.cell=HK(h,d,p)),this.inputs=Object.keys(l)}const $9=C9.prototype;$9.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};$9.update=function(e,t){const n=this.cell,i=this.windows,r=e.data,a=i&&i.length;let s;if(n){for(s=e.p0;s<e.i0;++s)n.rem(r[s]);for(s=e.p1;s<e.i1;++s)n.add(r[s]);n.set(t)}for(s=0;s<a;++s)i[s].update(e,t)};function HK(e,t,n){e=e.map(l=>r9(l,l.field));const i={num:0,agg:null,store:!1,count:t};if(!n)for(var r=e.length,a=i.agg=Array(r),s=0;s<r;++s)a[s]=new e[s](i);if(i.store)var o=i.data=new t$;return i.add=function(l){if(i.num+=1,!n){o&&o.add(l);for(let f=0;f<r;++f)a[f].add(a[f].get(l),l)}},i.rem=function(l){if(i.num-=1,!n){o&&o.rem(l);for(let f=0;f<r;++f)a[f].rem(a[f].get(l),l)}},i.set=function(l){let f,d;for(o&&o.values(),f=0,d=t.length;f<d;++f)l[t[f]]=i.num;if(!n)for(f=0,d=a.length;f<d;++f)a[f].set(l)},i.init=function(){i.num=0,o&&o.reset();for(let l=0;l<r;++l)a[l].init()},i}function A$(e){ee.call(this,{},e),this._mlen=0,this._mods=[]}A$.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:qK.concat(Vp)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};be(A$,ee,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),i=Sc(e.sort),r=ow(e.groupby),a=o=>this.group(r(o));let s=this.state;(!s||n)&&(s=this.state=new C9(e)),n||t.modified(s.inputs)?(this.value={},t.visit(t.SOURCE,o=>a(o).add(o))):(t.visit(t.REM,o=>a(o).remove(o)),t.visit(t.ADD,o=>a(o).add(o)));for(let o=0,l=this._mlen;o<l;++o)GK(this._mods[o],s,i,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(s.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=a9(ze),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function GK(e,t,n,i){const r=i.sort,a=r&&!i.ignorePeers,s=i.frame||[null,0],o=e.data(n),l=o.length,f=a?Ud(r):null,d={i0:0,i1:0,p0:0,p1:0,index:0,data:o,compare:r||li(-1)};t.init();for(let h=0;h<l;++h)YK(d,s,h,l),a&&XK(d,f),t.update(d,o[h])}function YK(e,t,n,i){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?i:Math.min(i,n+Math.abs(t[1])+1),e.index=n}function XK(e,t){const n=e.i0,i=e.i1-1,r=e.compare,a=e.data,s=a.length-1;n>0&&!r(a[n],a[n-1])&&(e.i0=t.left(a,a[n])),i<s&&!r(a[i],a[i+1])&&(e.i1=t.right(a,a[i]))}const VK=Object.freeze(Object.defineProperty({__proto__:null,aggregate:Su,bin:n$,collect:i$,compare:s9,countpattern:r$,cross:a$,density:s$,dotbin:u$,expression:f9,extent:l$,facet:rb,field:d9,filter:f$,flatten:d$,fold:h$,formula:g$,generate:h9,impute:p$,joinaggregate:m$,kde:y$,key:g9,load:p9,lookup:v$,multiextent:m9,multivalues:y9,params:v9,pivot:b$,prefacet:b9,project:x$,proxy:x9,quantile:E$,relay:E9,sample:S$,sequence:_$,sieve:S9,subflow:c$,timeunit:w$,tupleindex:w9,values:A9,window:A$},Symbol.toStringTag,{value:"Module"}));function yt(e){return function(){return e}}const aN=Math.abs,Qn=Math.atan2,bl=Math.cos,WK=Math.max,pS=Math.min,Fa=Math.sin,Ul=Math.sqrt,Kn=1e-12,rd=Math.PI,my=rd/2,T9=2*rd;function QK(e){return e>1?0:e<-1?rd:Math.acos(e)}function sN(e){return e>=1?my:e<=-1?-my:Math.asin(e)}const uw=Math.PI,lw=2*uw,kl=1e-6,ZK=lw-kl;function M9(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function KK(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return M9;const n=10**t;return function(i){this._+=i[0];for(let r=1,a=i.length;r<a;++r)this._+=Math.round(arguments[r]*n)/n+i[r]}}let C$=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?M9:KK(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,i,r){this._append`Q${+t},${+n},${this._x1=+i},${this._y1=+r}`}bezierCurveTo(t,n,i,r,a,s){this._append`C${+t},${+n},${+i},${+r},${this._x1=+a},${this._y1=+s}`}arcTo(t,n,i,r,a){if(t=+t,n=+n,i=+i,r=+r,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,o=this._y1,l=i-t,f=r-n,d=s-t,h=o-n,p=d*d+h*h;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(p>kl)if(!(Math.abs(h*l-f*d)>kl)||!a)this._append`L${this._x1=t},${this._y1=n}`;else{let y=i-s,v=r-o,b=l*l+f*f,E=y*y+v*v,_=Math.sqrt(b),w=Math.sqrt(p),A=a*Math.tan((uw-Math.acos((b+p-E)/(2*_*w)))/2),M=A/w,T=A/_;Math.abs(M-1)>kl&&this._append`L${t+M*d},${n+M*h}`,this._append`A${a},${a},0,0,${+(h*y>d*v)},${this._x1=t+T*l},${this._y1=n+T*f}`}}arc(t,n,i,r,a,s){if(t=+t,n=+n,i=+i,s=!!s,i<0)throw new Error(`negative radius: ${i}`);let o=i*Math.cos(r),l=i*Math.sin(r),f=t+o,d=n+l,h=1^s,p=s?r-a:a-r;this._x1===null?this._append`M${f},${d}`:(Math.abs(this._x1-f)>kl||Math.abs(this._y1-d)>kl)&&this._append`L${f},${d}`,i&&(p<0&&(p=p%lw+lw),p>ZK?this._append`A${i},${i},0,1,${h},${t-o},${n-l}A${i},${i},0,1,${h},${this._x1=f},${this._y1=d}`:p>kl&&this._append`A${i},${i},0,${+(p>=uw)},${h},${this._x1=t+i*Math.cos(a)},${this._y1=n+i*Math.sin(a)}`)}rect(t,n,i,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${i=+i}v${+r}h${-i}Z`}toString(){return this._}};function ab(){return new C$}ab.prototype=C$.prototype;function sb(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const i=Math.floor(n);if(!(i>=0))throw new RangeError(`invalid digits: ${n}`);t=i}return e},()=>new C$(t)}function JK(e){return e.innerRadius}function eJ(e){return e.outerRadius}function tJ(e){return e.startAngle}function nJ(e){return e.endAngle}function iJ(e){return e&&e.padAngle}function rJ(e,t,n,i,r,a,s,o){var l=n-e,f=i-t,d=s-r,h=o-a,p=h*l-d*f;if(!(p*p<Kn))return p=(d*(t-a)-h*(e-r))/p,[e+p*l,t+p*f]}function Zm(e,t,n,i,r,a,s){var o=e-n,l=t-i,f=(s?a:-a)/Ul(o*o+l*l),d=f*l,h=-f*o,p=e+d,y=t+h,v=n+d,b=i+h,E=(p+v)/2,_=(y+b)/2,w=v-p,A=b-y,M=w*w+A*A,T=r-a,R=p*b-v*y,O=(A<0?-1:1)*Ul(WK(0,T*T*M-R*R)),k=(R*A-w*O)/M,$=(-R*w-A*O)/M,D=(R*A+w*O)/M,z=(-R*w+A*O)/M,P=k-E,q=$-_,j=D-E,L=z-_;return P*P+q*q>j*j+L*L&&(k=D,$=z),{cx:k,cy:$,x01:-d,y01:-h,x11:k*(r/T-1),y11:$*(r/T-1)}}function aJ(){var e=JK,t=eJ,n=yt(0),i=null,r=tJ,a=nJ,s=iJ,o=null,l=sb(f);function f(){var d,h,p=+e.apply(this,arguments),y=+t.apply(this,arguments),v=r.apply(this,arguments)-my,b=a.apply(this,arguments)-my,E=aN(b-v),_=b>v;if(o||(o=d=l()),y<p&&(h=y,y=p,p=h),!(y>Kn))o.moveTo(0,0);else if(E>T9-Kn)o.moveTo(y*bl(v),y*Fa(v)),o.arc(0,0,y,v,b,!_),p>Kn&&(o.moveTo(p*bl(b),p*Fa(b)),o.arc(0,0,p,b,v,_));else{var w=v,A=b,M=v,T=b,R=E,O=E,k=s.apply(this,arguments)/2,$=k>Kn&&(i?+i.apply(this,arguments):Ul(p*p+y*y)),D=pS(aN(y-p)/2,+n.apply(this,arguments)),z=D,P=D,q,j;if($>Kn){var L=sN($/p*Fa(k)),U=sN($/y*Fa(k));(R-=L*2)>Kn?(L*=_?1:-1,M+=L,T-=L):(R=0,M=T=(v+b)/2),(O-=U*2)>Kn?(U*=_?1:-1,w+=U,A-=U):(O=0,w=A=(v+b)/2)}var I=y*bl(w),V=y*Fa(w),G=p*bl(T),F=p*Fa(T);if(D>Kn){var X=y*bl(A),J=y*Fa(A),Z=p*bl(M),ue=p*Fa(M),de;if(E<rd)if(de=rJ(I,V,Z,ue,X,J,G,F)){var Ae=I-de[0],tt=V-de[1],we=X-de[0],se=J-de[1],ye=1/Fa(QK((Ae*we+tt*se)/(Ul(Ae*Ae+tt*tt)*Ul(we*we+se*se)))/2),ve=Ul(de[0]*de[0]+de[1]*de[1]);z=pS(D,(p-ve)/(ye-1)),P=pS(D,(y-ve)/(ye+1))}else z=P=0}O>Kn?P>Kn?(q=Zm(Z,ue,I,V,y,P,_),j=Zm(X,J,G,F,y,P,_),o.moveTo(q.cx+q.x01,q.cy+q.y01),P<D?o.arc(q.cx,q.cy,P,Qn(q.y01,q.x01),Qn(j.y01,j.x01),!_):(o.arc(q.cx,q.cy,P,Qn(q.y01,q.x01),Qn(q.y11,q.x11),!_),o.arc(0,0,y,Qn(q.cy+q.y11,q.cx+q.x11),Qn(j.cy+j.y11,j.cx+j.x11),!_),o.arc(j.cx,j.cy,P,Qn(j.y11,j.x11),Qn(j.y01,j.x01),!_))):(o.moveTo(I,V),o.arc(0,0,y,w,A,!_)):o.moveTo(I,V),!(p>Kn)||!(R>Kn)?o.lineTo(G,F):z>Kn?(q=Zm(G,F,X,J,p,-z,_),j=Zm(I,V,Z,ue,p,-z,_),o.lineTo(q.cx+q.x01,q.cy+q.y01),z<D?o.arc(q.cx,q.cy,z,Qn(q.y01,q.x01),Qn(j.y01,j.x01),!_):(o.arc(q.cx,q.cy,z,Qn(q.y01,q.x01),Qn(q.y11,q.x11),!_),o.arc(0,0,p,Qn(q.cy+q.y11,q.cx+q.x11),Qn(j.cy+j.y11,j.cx+j.x11),_),o.arc(j.cx,j.cy,z,Qn(j.y11,j.x11),Qn(j.y01,j.x01),!_))):o.arc(0,0,p,T,M,_)}if(o.closePath(),d)return o=null,d+""||null}return f.centroid=function(){var d=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,h=(+r.apply(this,arguments)+ +a.apply(this,arguments))/2-rd/2;return[bl(h)*d,Fa(h)*d]},f.innerRadius=function(d){return arguments.length?(e=typeof d=="function"?d:yt(+d),f):e},f.outerRadius=function(d){return arguments.length?(t=typeof d=="function"?d:yt(+d),f):t},f.cornerRadius=function(d){return arguments.length?(n=typeof d=="function"?d:yt(+d),f):n},f.padRadius=function(d){return arguments.length?(i=d==null?null:typeof d=="function"?d:yt(+d),f):i},f.startAngle=function(d){return arguments.length?(r=typeof d=="function"?d:yt(+d),f):r},f.endAngle=function(d){return arguments.length?(a=typeof d=="function"?d:yt(+d),f):a},f.padAngle=function(d){return arguments.length?(s=typeof d=="function"?d:yt(+d),f):s},f.context=function(d){return arguments.length?(o=d??null,f):o},f}function k9(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function O9(e){this._context=e}O9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function $$(e){return new O9(e)}function R9(e){return e[0]}function D9(e){return e[1]}function N9(e,t){var n=yt(!0),i=null,r=$$,a=null,s=sb(o);e=typeof e=="function"?e:e===void 0?R9:yt(e),t=typeof t=="function"?t:t===void 0?D9:yt(t);function o(l){var f,d=(l=k9(l)).length,h,p=!1,y;for(i==null&&(a=r(y=s())),f=0;f<=d;++f)!(f<d&&n(h=l[f],f,l))===p&&((p=!p)?a.lineStart():a.lineEnd()),p&&a.point(+e(h,f,l),+t(h,f,l));if(y)return a=null,y+""||null}return o.x=function(l){return arguments.length?(e=typeof l=="function"?l:yt(+l),o):e},o.y=function(l){return arguments.length?(t=typeof l=="function"?l:yt(+l),o):t},o.defined=function(l){return arguments.length?(n=typeof l=="function"?l:yt(!!l),o):n},o.curve=function(l){return arguments.length?(r=l,i!=null&&(a=r(i)),o):r},o.context=function(l){return arguments.length?(l==null?i=a=null:a=r(i=l),o):i},o}function z9(e,t,n){var i=null,r=yt(!0),a=null,s=$$,o=null,l=sb(f);e=typeof e=="function"?e:e===void 0?R9:yt(+e),t=typeof t=="function"?t:yt(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?D9:yt(+n);function f(h){var p,y,v,b=(h=k9(h)).length,E,_=!1,w,A=new Array(b),M=new Array(b);for(a==null&&(o=s(w=l())),p=0;p<=b;++p){if(!(p<b&&r(E=h[p],p,h))===_)if(_=!_)y=p,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),v=p-1;v>=y;--v)o.point(A[v],M[v]);o.lineEnd(),o.areaEnd()}_&&(A[p]=+e(E,p,h),M[p]=+t(E,p,h),o.point(i?+i(E,p,h):A[p],n?+n(E,p,h):M[p]))}if(w)return o=null,w+""||null}function d(){return N9().defined(r).curve(s).context(a)}return f.x=function(h){return arguments.length?(e=typeof h=="function"?h:yt(+h),i=null,f):e},f.x0=function(h){return arguments.length?(e=typeof h=="function"?h:yt(+h),f):e},f.x1=function(h){return arguments.length?(i=h==null?null:typeof h=="function"?h:yt(+h),f):i},f.y=function(h){return arguments.length?(t=typeof h=="function"?h:yt(+h),n=null,f):t},f.y0=function(h){return arguments.length?(t=typeof h=="function"?h:yt(+h),f):t},f.y1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:yt(+h),f):n},f.lineX0=f.lineY0=function(){return d().x(e).y(t)},f.lineY1=function(){return d().x(e).y(n)},f.lineX1=function(){return d().x(i).y(t)},f.defined=function(h){return arguments.length?(r=typeof h=="function"?h:yt(!!h),f):r},f.curve=function(h){return arguments.length?(s=h,a!=null&&(o=s(a)),f):s},f.context=function(h){return arguments.length?(h==null?a=o=null:o=s(a=h),f):a},f}const sJ={draw(e,t){const n=Ul(t/rd);e.moveTo(n,0),e.arc(0,0,n,0,T9)}};function oJ(e,t){let n=null,i=sb(r);e=typeof e=="function"?e:yt(e||sJ),t=typeof t=="function"?t:yt(t===void 0?64:+t);function r(){let a;if(n||(n=a=i()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),a)return n=null,a+""||null}return r.type=function(a){return arguments.length?(e=typeof a=="function"?a:yt(a),r):e},r.size=function(a){return arguments.length?(t=typeof a=="function"?a:yt(+a),r):t},r.context=function(a){return arguments.length?(n=a??null,r):n},r}function _u(){}function yy(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function ob(e){this._context=e}ob.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:yy(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:yy(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function uJ(e){return new ob(e)}function F9(e){this._context=e}F9.prototype={areaStart:_u,areaEnd:_u,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:yy(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function lJ(e){return new F9(e)}function L9(e){this._context=e}L9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,i=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:yy(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function cJ(e){return new L9(e)}function U9(e,t){this._basis=new ob(e),this._beta=t}U9.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var i=e[0],r=t[0],a=e[n]-i,s=t[n]-r,o=-1,l;++o<=n;)l=o/n,this._basis.point(this._beta*e[o]+(1-this._beta)*(i+l*a),this._beta*t[o]+(1-this._beta)*(r+l*s));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const fJ=function e(t){function n(i){return t===1?new ob(i):new U9(i,t)}return n.beta=function(i){return e(+i)},n}(.85);function vy(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function T$(e,t){this._context=e,this._k=(1-t)/6}T$.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:vy(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:vy(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const dJ=function e(t){function n(i){return new T$(i,t)}return n.tension=function(i){return e(+i)},n}(0);function M$(e,t){this._context=e,this._k=(1-t)/6}M$.prototype={areaStart:_u,areaEnd:_u,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:vy(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const hJ=function e(t){function n(i){return new M$(i,t)}return n.tension=function(i){return e(+i)},n}(0);function k$(e,t){this._context=e,this._k=(1-t)/6}k$.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:vy(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const gJ=function e(t){function n(i){return new k$(i,t)}return n.tension=function(i){return e(+i)},n}(0);function O$(e,t,n){var i=e._x1,r=e._y1,a=e._x2,s=e._y2;if(e._l01_a>Kn){var o=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,l=3*e._l01_a*(e._l01_a+e._l12_a);i=(i*o-e._x0*e._l12_2a+e._x2*e._l01_2a)/l,r=(r*o-e._y0*e._l12_2a+e._y2*e._l01_2a)/l}if(e._l23_a>Kn){var f=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,d=3*e._l23_a*(e._l23_a+e._l12_a);a=(a*f+e._x1*e._l23_2a-t*e._l12_2a)/d,s=(s*f+e._y1*e._l23_2a-n*e._l12_2a)/d}e._context.bezierCurveTo(i,r,a,s,e._x2,e._y2)}function B9(e,t){this._context=e,this._alpha=t}B9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:O$(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const pJ=function e(t){function n(i){return t?new B9(i,t):new T$(i,0)}return n.alpha=function(i){return e(+i)},n}(.5);function j9(e,t){this._context=e,this._alpha=t}j9.prototype={areaStart:_u,areaEnd:_u,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:O$(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const mJ=function e(t){function n(i){return t?new j9(i,t):new M$(i,0)}return n.alpha=function(i){return e(+i)},n}(.5);function P9(e,t){this._context=e,this._alpha=t}P9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:O$(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const yJ=function e(t){function n(i){return t?new P9(i,t):new k$(i,0)}return n.alpha=function(i){return e(+i)},n}(.5);function I9(e){this._context=e}I9.prototype={areaStart:_u,areaEnd:_u,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function vJ(e){return new I9(e)}function oN(e){return e<0?-1:1}function uN(e,t,n){var i=e._x1-e._x0,r=t-e._x1,a=(e._y1-e._y0)/(i||r<0&&-0),s=(n-e._y1)/(r||i<0&&-0),o=(a*r+s*i)/(i+r);return(oN(a)+oN(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(o))||0}function lN(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function mS(e,t,n){var i=e._x0,r=e._y0,a=e._x1,s=e._y1,o=(a-i)/3;e._context.bezierCurveTo(i+o,r+o*t,a-o,s-o*n,a,s)}function by(e){this._context=e}by.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:mS(this,this._t0,lN(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,mS(this,lN(this,n=uN(this,e,t)),n);break;default:mS(this,this._t0,n=uN(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function q9(e){this._context=new H9(e)}(q9.prototype=Object.create(by.prototype)).point=function(e,t){by.prototype.point.call(this,t,e)};function H9(e){this._context=e}H9.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,i,r,a){this._context.bezierCurveTo(t,e,i,n,a,r)}};function bJ(e){return new by(e)}function xJ(e){return new q9(e)}function G9(e){this._context=e}G9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var i=cN(e),r=cN(t),a=0,s=1;s<n;++a,++s)this._context.bezierCurveTo(i[0][a],r[0][a],i[1][a],r[1][a],e[s],t[s]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function cN(e){var t,n=e.length-1,i,r=new Array(n),a=new Array(n),s=new Array(n);for(r[0]=0,a[0]=2,s[0]=e[0]+2*e[1],t=1;t<n-1;++t)r[t]=1,a[t]=4,s[t]=4*e[t]+2*e[t+1];for(r[n-1]=2,a[n-1]=7,s[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)i=r[t]/a[t-1],a[t]-=i,s[t]-=i*s[t-1];for(r[n-1]=s[n-1]/a[n-1],t=n-2;t>=0;--t)r[t]=(s[t]-r[t+1])/a[t];for(a[n-1]=(e[n]+r[n-1])/2,t=0;t<n-1;++t)a[t]=2*e[t+1]-r[t+1];return[r,a]}function EJ(e){return new G9(e)}function ub(e,t){this._context=e,this._t=t}ub.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function SJ(e){return new ub(e,.5)}function _J(e){return new ub(e,0)}function wJ(e){return new ub(e,1)}function yu(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const AJ=()=>typeof Image<"u"?Image:null;function cs(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Fu(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const cw=Symbol("implicit");function R$(){var e=new $5,t=[],n=[],i=cw;function r(a){let s=e.get(a);if(s===void 0){if(i!==cw)return i;e.set(a,s=t.push(a)-1)}return n[s%n.length]}return r.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new $5;for(const s of a)e.has(s)||e.set(s,t.push(s)-1);return r},r.range=function(a){return arguments.length?(n=Array.from(a),r):n.slice()},r.unknown=function(a){return arguments.length?(i=a,r):i},r.copy=function(){return R$(t,n).unknown(i)},cs.apply(r,arguments),r}function Hd(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Wp(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function Lu(){}var Jl=.7,ad=1/Jl,qf="\\s*([+-]?\\d+)\\s*",vp="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Va="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",CJ=/^#([0-9a-f]{3,8})$/,$J=new RegExp(`^rgb\\(${qf},${qf},${qf}\\)$`),TJ=new RegExp(`^rgb\\(${Va},${Va},${Va}\\)$`),MJ=new RegExp(`^rgba\\(${qf},${qf},${qf},${vp}\\)$`),kJ=new RegExp(`^rgba\\(${Va},${Va},${Va},${vp}\\)$`),OJ=new RegExp(`^hsl\\(${vp},${Va},${Va}\\)$`),RJ=new RegExp(`^hsla\\(${vp},${Va},${Va},${vp}\\)$`),fN={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Hd(Lu,bp,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:dN,formatHex:dN,formatHex8:DJ,formatHsl:NJ,formatRgb:hN,toString:hN});function dN(){return this.rgb().formatHex()}function DJ(){return this.rgb().formatHex8()}function NJ(){return Y9(this).formatHsl()}function hN(){return this.rgb().formatRgb()}function bp(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=CJ.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?gN(t):n===3?new _n(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Km(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Km(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=$J.exec(e))?new _n(t[1],t[2],t[3],1):(t=TJ.exec(e))?new _n(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=MJ.exec(e))?Km(t[1],t[2],t[3],t[4]):(t=kJ.exec(e))?Km(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=OJ.exec(e))?yN(t[1],t[2]/100,t[3]/100,1):(t=RJ.exec(e))?yN(t[1],t[2]/100,t[3]/100,t[4]):fN.hasOwnProperty(e)?gN(fN[e]):e==="transparent"?new _n(NaN,NaN,NaN,0):null}function gN(e){return new _n(e>>16&255,e>>8&255,e&255,1)}function Km(e,t,n,i){return i<=0&&(e=t=n=NaN),new _n(e,t,n,i)}function D$(e){return e instanceof Lu||(e=bp(e)),e?(e=e.rgb(),new _n(e.r,e.g,e.b,e.opacity)):new _n}function wu(e,t,n,i){return arguments.length===1?D$(e):new _n(e,t,n,i??1)}function _n(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}Hd(_n,wu,Wp(Lu,{brighter(e){return e=e==null?ad:Math.pow(ad,e),new _n(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Jl:Math.pow(Jl,e),new _n(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new _n(ql(this.r),ql(this.g),ql(this.b),xy(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:pN,formatHex:pN,formatHex8:zJ,formatRgb:mN,toString:mN}));function pN(){return`#${Bl(this.r)}${Bl(this.g)}${Bl(this.b)}`}function zJ(){return`#${Bl(this.r)}${Bl(this.g)}${Bl(this.b)}${Bl((isNaN(this.opacity)?1:this.opacity)*255)}`}function mN(){const e=xy(this.opacity);return`${e===1?"rgb(":"rgba("}${ql(this.r)}, ${ql(this.g)}, ${ql(this.b)}${e===1?")":`, ${e})`}`}function xy(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ql(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Bl(e){return e=ql(e),(e<16?"0":"")+e.toString(16)}function yN(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new oa(e,t,n,i)}function Y9(e){if(e instanceof oa)return new oa(e.h,e.s,e.l,e.opacity);if(e instanceof Lu||(e=bp(e)),!e)return new oa;if(e instanceof oa)return e;e=e.rgb();var t=e.r/255,n=e.g/255,i=e.b/255,r=Math.min(t,n,i),a=Math.max(t,n,i),s=NaN,o=a-r,l=(a+r)/2;return o?(t===a?s=(n-i)/o+(n<i)*6:n===a?s=(i-t)/o+2:s=(t-n)/o+4,o/=l<.5?a+r:2-a-r,s*=60):o=l>0&&l<1?0:s,new oa(s,o,l,e.opacity)}function Ey(e,t,n,i){return arguments.length===1?Y9(e):new oa(e,t,n,i??1)}function oa(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}Hd(oa,Ey,Wp(Lu,{brighter(e){return e=e==null?ad:Math.pow(ad,e),new oa(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Jl:Math.pow(Jl,e),new oa(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,r=2*n-i;return new _n(yS(e>=240?e-240:e+120,r,i),yS(e,r,i),yS(e<120?e+240:e-120,r,i),this.opacity)},clamp(){return new oa(vN(this.h),Jm(this.s),Jm(this.l),xy(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=xy(this.opacity);return`${e===1?"hsl(":"hsla("}${vN(this.h)}, ${Jm(this.s)*100}%, ${Jm(this.l)*100}%${e===1?")":`, ${e})`}`}}));function vN(e){return e=(e||0)%360,e<0?e+360:e}function Jm(e){return Math.max(0,Math.min(1,e||0))}function yS(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const X9=Math.PI/180,V9=180/Math.PI,Sy=18,W9=.96422,Q9=1,Z9=.82521,K9=4/29,Hf=6/29,J9=3*Hf*Hf,FJ=Hf*Hf*Hf;function eL(e){if(e instanceof Wa)return new Wa(e.l,e.a,e.b,e.opacity);if(e instanceof Ks)return tL(e);e instanceof _n||(e=D$(e));var t=ES(e.r),n=ES(e.g),i=ES(e.b),r=vS((.2225045*t+.7168786*n+.0606169*i)/Q9),a,s;return t===n&&n===i?a=s=r:(a=vS((.4360747*t+.3850649*n+.1430804*i)/W9),s=vS((.0139322*t+.0971045*n+.7141733*i)/Z9)),new Wa(116*r-16,500*(a-r),200*(r-s),e.opacity)}function _y(e,t,n,i){return arguments.length===1?eL(e):new Wa(e,t,n,i??1)}function Wa(e,t,n,i){this.l=+e,this.a=+t,this.b=+n,this.opacity=+i}Hd(Wa,_y,Wp(Lu,{brighter(e){return new Wa(this.l+Sy*(e??1),this.a,this.b,this.opacity)},darker(e){return new Wa(this.l-Sy*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=W9*bS(t),e=Q9*bS(e),n=Z9*bS(n),new _n(xS(3.1338561*t-1.6168667*e-.4906146*n),xS(-.9787684*t+1.9161415*e+.033454*n),xS(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function vS(e){return e>FJ?Math.pow(e,1/3):e/J9+K9}function bS(e){return e>Hf?e*e*e:J9*(e-K9)}function xS(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function ES(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function LJ(e){if(e instanceof Ks)return new Ks(e.h,e.c,e.l,e.opacity);if(e instanceof Wa||(e=eL(e)),e.a===0&&e.b===0)return new Ks(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*V9;return new Ks(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function wy(e,t,n,i){return arguments.length===1?LJ(e):new Ks(e,t,n,i??1)}function Ks(e,t,n,i){this.h=+e,this.c=+t,this.l=+n,this.opacity=+i}function tL(e){if(isNaN(e.h))return new Wa(e.l,0,0,e.opacity);var t=e.h*X9;return new Wa(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}Hd(Ks,wy,Wp(Lu,{brighter(e){return new Ks(this.h,this.c,this.l+Sy*(e??1),this.opacity)},darker(e){return new Ks(this.h,this.c,this.l-Sy*(e??1),this.opacity)},rgb(){return tL(this).rgb()}}));var nL=-.14861,N$=1.78277,z$=-.29227,lb=-.90649,xp=1.97294,bN=xp*lb,xN=xp*N$,EN=N$*z$-lb*nL;function UJ(e){if(e instanceof Hl)return new Hl(e.h,e.s,e.l,e.opacity);e instanceof _n||(e=D$(e));var t=e.r/255,n=e.g/255,i=e.b/255,r=(EN*i+bN*t-xN*n)/(EN+bN-xN),a=i-r,s=(xp*(n-r)-z$*a)/lb,o=Math.sqrt(s*s+a*a)/(xp*r*(1-r)),l=o?Math.atan2(s,a)*V9-120:NaN;return new Hl(l<0?l+360:l,o,r,e.opacity)}function fw(e,t,n,i){return arguments.length===1?UJ(e):new Hl(e,t,n,i??1)}function Hl(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}Hd(Hl,fw,Wp(Lu,{brighter(e){return e=e==null?ad:Math.pow(ad,e),new Hl(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Jl:Math.pow(Jl,e),new Hl(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*X9,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),i=Math.cos(e),r=Math.sin(e);return new _n(255*(t+n*(nL*i+N$*r)),255*(t+n*(z$*i+lb*r)),255*(t+n*(xp*i)),this.opacity)}}));function iL(e,t,n,i,r){var a=e*e,s=a*e;return((1-3*e+3*a-s)*t+(4-6*a+3*s)*n+(1+3*e+3*a-3*s)*i+s*r)/6}function rL(e){var t=e.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),r=e[i],a=e[i+1],s=i>0?e[i-1]:2*r-a,o=i<t-1?e[i+2]:2*a-r;return iL((n-i/t)*t,s,r,a,o)}}function aL(e){var t=e.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*t),r=e[(i+t-1)%t],a=e[i%t],s=e[(i+1)%t],o=e[(i+2)%t];return iL((n-i/t)*t,r,a,s,o)}}const cb=e=>()=>e;function sL(e,t){return function(n){return e+n*t}}function BJ(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}function fb(e,t){var n=t-e;return n?sL(e,n>180||n<-180?n-360*Math.round(n/360):n):cb(isNaN(e)?t:e)}function jJ(e){return(e=+e)==1?wn:function(t,n){return n-t?BJ(t,n,e):cb(isNaN(t)?n:t)}}function wn(e,t){var n=t-e;return n?sL(e,n):cb(isNaN(e)?t:e)}const dw=function e(t){var n=jJ(t);function i(r,a){var s=n((r=wu(r)).r,(a=wu(a)).r),o=n(r.g,a.g),l=n(r.b,a.b),f=wn(r.opacity,a.opacity);return function(d){return r.r=s(d),r.g=o(d),r.b=l(d),r.opacity=f(d),r+""}}return i.gamma=e,i}(1);function oL(e){return function(t){var n=t.length,i=new Array(n),r=new Array(n),a=new Array(n),s,o;for(s=0;s<n;++s)o=wu(t[s]),i[s]=o.r||0,r[s]=o.g||0,a[s]=o.b||0;return i=e(i),r=e(r),a=e(a),o.opacity=1,function(l){return o.r=i(l),o.g=r(l),o.b=a(l),o+""}}}var PJ=oL(rL),IJ=oL(aL);function F$(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,i=t.slice(),r;return function(a){for(r=0;r<n;++r)i[r]=e[r]*(1-a)+t[r]*a;return i}}function uL(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function qJ(e,t){return(uL(t)?F$:lL)(e,t)}function lL(e,t){var n=t?t.length:0,i=e?Math.min(n,e.length):0,r=new Array(i),a=new Array(n),s;for(s=0;s<i;++s)r[s]=Uu(e[s],t[s]);for(;s<n;++s)a[s]=t[s];return function(o){for(s=0;s<i;++s)a[s]=r[s](o);return a}}function cL(e,t){var n=new Date;return e=+e,t=+t,function(i){return n.setTime(e*(1-i)+t*i),n}}function aa(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function fL(e,t){var n={},i={},r;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(r in t)r in e?n[r]=Uu(e[r],t[r]):i[r]=t[r];return function(a){for(r in n)i[r]=n[r](a);return i}}var hw=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,SS=new RegExp(hw.source,"g");function HJ(e){return function(){return e}}function GJ(e){return function(t){return e(t)+""}}function dL(e,t){var n=hw.lastIndex=SS.lastIndex=0,i,r,a,s=-1,o=[],l=[];for(e=e+"",t=t+"";(i=hw.exec(e))&&(r=SS.exec(t));)(a=r.index)>n&&(a=t.slice(n,a),o[s]?o[s]+=a:o[++s]=a),(i=i[0])===(r=r[0])?o[s]?o[s]+=r:o[++s]=r:(o[++s]=null,l.push({i:s,x:aa(i,r)})),n=SS.lastIndex;return n<t.length&&(a=t.slice(n),o[s]?o[s]+=a:o[++s]=a),o.length<2?l[0]?GJ(l[0].x):HJ(t):(t=l.length,function(f){for(var d=0,h;d<t;++d)o[(h=l[d]).i]=h.x(f);return o.join("")})}function Uu(e,t){var n=typeof t,i;return t==null||n==="boolean"?cb(t):(n==="number"?aa:n==="string"?(i=bp(t))?(t=i,dw):dL:t instanceof bp?dw:t instanceof Date?cL:uL(t)?F$:Array.isArray(t)?lL:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?fL:aa)(e,t)}function YJ(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function XJ(e,t){var n=fb(+e,+t);return function(i){var r=n(i);return r-360*Math.floor(r/360)}}function Qp(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var SN=180/Math.PI,gw={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function hL(e,t,n,i,r,a){var s,o,l;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(l=e*n+t*i)&&(n-=e*l,i-=t*l),(o=Math.sqrt(n*n+i*i))&&(n/=o,i/=o,l/=o),e*i<t*n&&(e=-e,t=-t,l=-l,s=-s),{translateX:r,translateY:a,rotate:Math.atan2(t,e)*SN,skewX:Math.atan(l)*SN,scaleX:s,scaleY:o}}var e1;function VJ(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?gw:hL(t.a,t.b,t.c,t.d,t.e,t.f)}function WJ(e){return e==null||(e1||(e1=document.createElementNS("http://www.w3.org/2000/svg","g")),e1.setAttribute("transform",e),!(e=e1.transform.baseVal.consolidate()))?gw:(e=e.matrix,hL(e.a,e.b,e.c,e.d,e.e,e.f))}function gL(e,t,n,i){function r(f){return f.length?f.pop()+" ":""}function a(f,d,h,p,y,v){if(f!==h||d!==p){var b=y.push("translate(",null,t,null,n);v.push({i:b-4,x:aa(f,h)},{i:b-2,x:aa(d,p)})}else(h||p)&&y.push("translate("+h+t+p+n)}function s(f,d,h,p){f!==d?(f-d>180?d+=360:d-f>180&&(f+=360),p.push({i:h.push(r(h)+"rotate(",null,i)-2,x:aa(f,d)})):d&&h.push(r(h)+"rotate("+d+i)}function o(f,d,h,p){f!==d?p.push({i:h.push(r(h)+"skewX(",null,i)-2,x:aa(f,d)}):d&&h.push(r(h)+"skewX("+d+i)}function l(f,d,h,p,y,v){if(f!==h||d!==p){var b=y.push(r(y)+"scale(",null,",",null,")");v.push({i:b-4,x:aa(f,h)},{i:b-2,x:aa(d,p)})}else(h!==1||p!==1)&&y.push(r(y)+"scale("+h+","+p+")")}return function(f,d){var h=[],p=[];return f=e(f),d=e(d),a(f.translateX,f.translateY,d.translateX,d.translateY,h,p),s(f.rotate,d.rotate,h,p),o(f.skewX,d.skewX,h,p),l(f.scaleX,f.scaleY,d.scaleX,d.scaleY,h,p),f=d=null,function(y){for(var v=-1,b=p.length,E;++v<b;)h[(E=p[v]).i]=E.x(y);return h.join("")}}}var QJ=gL(VJ,"px, ","px)","deg)"),ZJ=gL(WJ,", ",")",")"),KJ=1e-12;function _N(e){return((e=Math.exp(e))+1/e)/2}function JJ(e){return((e=Math.exp(e))-1/e)/2}function eee(e){return((e=Math.exp(2*e))-1)/(e+1)}const tee=function e(t,n,i){function r(a,s){var o=a[0],l=a[1],f=a[2],d=s[0],h=s[1],p=s[2],y=d-o,v=h-l,b=y*y+v*v,E,_;if(b<KJ)_=Math.log(p/f)/t,E=function(O){return[o+O*y,l+O*v,f*Math.exp(t*O*_)]};else{var w=Math.sqrt(b),A=(p*p-f*f+i*b)/(2*f*n*w),M=(p*p-f*f-i*b)/(2*p*n*w),T=Math.log(Math.sqrt(A*A+1)-A),R=Math.log(Math.sqrt(M*M+1)-M);_=(R-T)/t,E=function(O){var k=O*_,$=_N(T),D=f/(n*w)*($*eee(t*k+T)-JJ(T));return[o+D*y,l+D*v,f*$/_N(t*k+T)]}}return E.duration=_*1e3*t/Math.SQRT2,E}return r.rho=function(a){var s=Math.max(.001,+a),o=s*s,l=o*o;return e(s,o,l)},r}(Math.SQRT2,2,4);function pL(e){return function(t,n){var i=e((t=Ey(t)).h,(n=Ey(n)).h),r=wn(t.s,n.s),a=wn(t.l,n.l),s=wn(t.opacity,n.opacity);return function(o){return t.h=i(o),t.s=r(o),t.l=a(o),t.opacity=s(o),t+""}}}const nee=pL(fb);var iee=pL(wn);function ree(e,t){var n=wn((e=_y(e)).l,(t=_y(t)).l),i=wn(e.a,t.a),r=wn(e.b,t.b),a=wn(e.opacity,t.opacity);return function(s){return e.l=n(s),e.a=i(s),e.b=r(s),e.opacity=a(s),e+""}}function mL(e){return function(t,n){var i=e((t=wy(t)).h,(n=wy(n)).h),r=wn(t.c,n.c),a=wn(t.l,n.l),s=wn(t.opacity,n.opacity);return function(o){return t.h=i(o),t.c=r(o),t.l=a(o),t.opacity=s(o),t+""}}}const aee=mL(fb);var see=mL(wn);function yL(e){return function t(n){n=+n;function i(r,a){var s=e((r=fw(r)).h,(a=fw(a)).h),o=wn(r.s,a.s),l=wn(r.l,a.l),f=wn(r.opacity,a.opacity);return function(d){return r.h=s(d),r.s=o(d),r.l=l(Math.pow(d,n)),r.opacity=f(d),r+""}}return i.gamma=t,i}(1)}const oee=yL(fb);var uee=yL(wn);function L$(e,t){t===void 0&&(t=e,e=Uu);for(var n=0,i=t.length-1,r=t[0],a=new Array(i<0?0:i);n<i;)a[n]=e(r,r=t[++n]);return function(s){var o=Math.max(0,Math.min(i-1,Math.floor(s*=i)));return a[o](s-o)}}function lee(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e(i/(t-1));return n}const cee=Object.freeze(Object.defineProperty({__proto__:null,interpolate:Uu,interpolateArray:qJ,interpolateBasis:rL,interpolateBasisClosed:aL,interpolateCubehelix:oee,interpolateCubehelixLong:uee,interpolateDate:cL,interpolateDiscrete:YJ,interpolateHcl:aee,interpolateHclLong:see,interpolateHsl:nee,interpolateHslLong:iee,interpolateHue:XJ,interpolateLab:ree,interpolateNumber:aa,interpolateNumberArray:F$,interpolateObject:fL,interpolateRgb:dw,interpolateRgbBasis:PJ,interpolateRgbBasisClosed:IJ,interpolateRound:Qp,interpolateString:dL,interpolateTransformCss:QJ,interpolateTransformSvg:ZJ,interpolateZoom:tee,piecewise:L$,quantize:lee},Symbol.toStringTag,{value:"Module"}));function fee(e){return function(){return e}}function pw(e){return+e}var wN=[0,1];function Li(e){return e}function mw(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:fee(isNaN(t)?NaN:.5)}function dee(e,t){var n;return e>t&&(n=e,e=t,t=n),function(i){return Math.max(e,Math.min(t,i))}}function hee(e,t,n){var i=e[0],r=e[1],a=t[0],s=t[1];return r<i?(i=mw(r,i),a=n(s,a)):(i=mw(i,r),a=n(a,s)),function(o){return a(i(o))}}function gee(e,t,n){var i=Math.min(e.length,t.length)-1,r=new Array(i),a=new Array(i),s=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<i;)r[s]=mw(e[s],e[s+1]),a[s]=n(t[s],t[s+1]);return function(o){var l=xu(e,o,1,i)-1;return a[l](r[l](o))}}function Zp(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function db(){var e=wN,t=wN,n=Uu,i,r,a,s=Li,o,l,f;function d(){var p=Math.min(e.length,t.length);return s!==Li&&(s=dee(e[0],e[p-1])),o=p>2?gee:hee,l=f=null,h}function h(p){return p==null||isNaN(p=+p)?a:(l||(l=o(e.map(i),t,n)))(i(s(p)))}return h.invert=function(p){return s(r((f||(f=o(t,e.map(i),aa)))(p)))},h.domain=function(p){return arguments.length?(e=Array.from(p,pw),d()):e.slice()},h.range=function(p){return arguments.length?(t=Array.from(p),d()):t.slice()},h.rangeRound=function(p){return t=Array.from(p),n=Qp,d()},h.clamp=function(p){return arguments.length?(s=p?!0:Li,d()):s!==Li},h.interpolate=function(p){return arguments.length?(n=p,d()):n},h.unknown=function(p){return arguments.length?(a=p,h):a},function(p,y){return i=p,r=y,d()}}function vL(){return db()(Li,Li)}function bL(e,t,n,i){var r=Eu(e,t,n),a;switch(i=Kl(i??",f"),i.type){case"s":{var s=Math.max(Math.abs(e),Math.abs(t));return i.precision==null&&!isNaN(a=G8(r,s))&&(i.precision=a),wC(i,s)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(a=Y8(r,Math.max(Math.abs(e),Math.abs(t))))&&(i.precision=a-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(a=H8(r))&&(i.precision=a-(i.type==="%")*2);break}}return Pv(i)}function wc(e){var t=e.domain;return e.ticks=function(n){var i=t();return V_(i[0],i[i.length-1],n??10)},e.tickFormat=function(n,i){var r=t();return bL(r[0],r[r.length-1],n??10,i)},e.nice=function(n){n==null&&(n=10);var i=t(),r=0,a=i.length-1,s=i[r],o=i[a],l,f,d=10;for(o<s&&(f=s,s=o,o=f,f=r,r=a,a=f);d-- >0;){if(f=W_(s,o,n),f===l)return i[r]=s,i[a]=o,t(i);if(f>0)s=Math.floor(s/f)*f,o=Math.ceil(o/f)*f;else if(f<0)s=Math.ceil(s*f)/f,o=Math.floor(o*f)/f;else break;l=f}return e},e}function xL(){var e=vL();return e.copy=function(){return Zp(e,xL())},cs.apply(e,arguments),wc(e)}function EL(e){var t;function n(i){return i==null||isNaN(i=+i)?t:i}return n.invert=n,n.domain=n.range=function(i){return arguments.length?(e=Array.from(i,pw),n):e.slice()},n.unknown=function(i){return arguments.length?(t=i,n):t},n.copy=function(){return EL(e).unknown(t)},e=arguments.length?Array.from(e,pw):[0,1],wc(n)}function SL(e,t){e=e.slice();var n=0,i=e.length-1,r=e[n],a=e[i],s;return a<r&&(s=n,n=i,i=s,s=r,r=a,a=s),e[n]=t.floor(r),e[i]=t.ceil(a),e}function AN(e){return Math.log(e)}function CN(e){return Math.exp(e)}function pee(e){return-Math.log(-e)}function mee(e){return-Math.exp(-e)}function yee(e){return isFinite(e)?+("1e"+e):e<0?0:e}function vee(e){return e===10?yee:e===Math.E?Math.exp:t=>Math.pow(e,t)}function bee(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function $N(e){return(t,n)=>-e(-t,n)}function U$(e){const t=e(AN,CN),n=t.domain;let i=10,r,a;function s(){return r=bee(i),a=vee(i),n()[0]<0?(r=$N(r),a=$N(a),e(pee,mee)):e(AN,CN),t}return t.base=function(o){return arguments.length?(i=+o,s()):i},t.domain=function(o){return arguments.length?(n(o),s()):n()},t.ticks=o=>{const l=n();let f=l[0],d=l[l.length-1];const h=d<f;h&&([f,d]=[d,f]);let p=r(f),y=r(d),v,b;const E=o==null?10:+o;let _=[];if(!(i%1)&&y-p<E){if(p=Math.floor(p),y=Math.ceil(y),f>0){for(;p<=y;++p)for(v=1;v<i;++v)if(b=p<0?v/a(-p):v*a(p),!(b<f)){if(b>d)break;_.push(b)}}else for(;p<=y;++p)for(v=i-1;v>=1;--v)if(b=p>0?v/a(-p):v*a(p),!(b<f)){if(b>d)break;_.push(b)}_.length*2<E&&(_=V_(f,d,E))}else _=V_(p,y,Math.min(y-p,E)).map(a);return h?_.reverse():_},t.tickFormat=(o,l)=>{if(o==null&&(o=10),l==null&&(l=i===10?"s":","),typeof l!="function"&&(!(i%1)&&(l=Kl(l)).precision==null&&(l.trim=!0),l=Pv(l)),o===1/0)return l;const f=Math.max(1,i*o/t.ticks().length);return d=>{let h=d/a(Math.round(r(d)));return h*i<i-.5&&(h*=i),h<=f?l(d):""}},t.nice=()=>n(SL(n(),{floor:o=>a(Math.floor(r(o))),ceil:o=>a(Math.ceil(r(o)))})),t}function _L(){const e=U$(db()).domain([1,10]);return e.copy=()=>Zp(e,_L()).base(e.base()),cs.apply(e,arguments),e}function TN(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function MN(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function B$(e){var t=1,n=e(TN(t),MN(t));return n.constant=function(i){return arguments.length?e(TN(t=+i),MN(t)):t},wc(n)}function wL(){var e=B$(db());return e.copy=function(){return Zp(e,wL()).constant(e.constant())},cs.apply(e,arguments)}function kN(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function xee(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Eee(e){return e<0?-e*e:e*e}function j$(e){var t=e(Li,Li),n=1;function i(){return n===1?e(Li,Li):n===.5?e(xee,Eee):e(kN(n),kN(1/n))}return t.exponent=function(r){return arguments.length?(n=+r,i()):n},wc(t)}function P$(){var e=j$(db());return e.copy=function(){return Zp(e,P$()).exponent(e.exponent())},cs.apply(e,arguments),e}function See(){return P$.apply(null,arguments).exponent(.5)}function AL(){var e=[],t=[],n=[],i;function r(){var s=0,o=Math.max(1,t.length);for(n=new Array(o-1);++s<o;)n[s-1]=U8(e,s/o);return a}function a(s){return s==null||isNaN(s=+s)?i:t[xu(n,s)]}return a.invertExtent=function(s){var o=t.indexOf(s);return o<0?[NaN,NaN]:[o>0?n[o-1]:e[0],o<n.length?n[o]:e[e.length-1]]},a.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let o of s)o!=null&&!isNaN(o=+o)&&e.push(o);return e.sort(to),r()},a.range=function(s){return arguments.length?(t=Array.from(s),r()):t.slice()},a.unknown=function(s){return arguments.length?(i=s,a):i},a.quantiles=function(){return n.slice()},a.copy=function(){return AL().domain(e).range(t).unknown(i)},cs.apply(a,arguments)}function CL(){var e=0,t=1,n=1,i=[.5],r=[0,1],a;function s(l){return l!=null&&l<=l?r[xu(i,l,0,n)]:a}function o(){var l=-1;for(i=new Array(n);++l<n;)i[l]=((l+1)*t-(l-n)*e)/(n+1);return s}return s.domain=function(l){return arguments.length?([e,t]=l,e=+e,t=+t,o()):[e,t]},s.range=function(l){return arguments.length?(n=(r=Array.from(l)).length-1,o()):r.slice()},s.invertExtent=function(l){var f=r.indexOf(l);return f<0?[NaN,NaN]:f<1?[e,i[0]]:f>=n?[i[n-1],t]:[i[f-1],i[f]]},s.unknown=function(l){return arguments.length&&(a=l),s},s.thresholds=function(){return i.slice()},s.copy=function(){return CL().domain([e,t]).range(r).unknown(a)},cs.apply(wc(s),arguments)}function $L(){var e=[.5],t=[0,1],n,i=1;function r(a){return a!=null&&a<=a?t[xu(e,a,0,i)]:n}return r.domain=function(a){return arguments.length?(e=Array.from(a),i=Math.min(e.length,t.length-1),r):e.slice()},r.range=function(a){return arguments.length?(t=Array.from(a),i=Math.min(e.length,t.length-1),r):t.slice()},r.invertExtent=function(a){var s=t.indexOf(a);return[e[s-1],e[s]]},r.unknown=function(a){return arguments.length?(n=a,r):n},r.copy=function(){return $L().domain(e).range(t).unknown(n)},cs.apply(r,arguments)}function _ee(e){return new Date(e)}function wee(e){return e instanceof Date?+e:+new Date(+e)}function I$(e,t,n,i,r,a,s,o,l,f){var d=vL(),h=d.invert,p=d.domain,y=f(".%L"),v=f(":%S"),b=f("%I:%M"),E=f("%I %p"),_=f("%a %d"),w=f("%b %d"),A=f("%B"),M=f("%Y");function T(R){return(l(R)<R?y:o(R)<R?v:s(R)<R?b:a(R)<R?E:i(R)<R?r(R)<R?_:w:n(R)<R?A:M)(R)}return d.invert=function(R){return new Date(h(R))},d.domain=function(R){return arguments.length?p(Array.from(R,wee)):p().map(_ee)},d.ticks=function(R){var O=p();return e(O[0],O[O.length-1],R??10)},d.tickFormat=function(R,O){return O==null?T:f(O)},d.nice=function(R){var O=p();return(!R||typeof R.range!="function")&&(R=t(O[0],O[O.length-1],R??10)),R?p(SL(O,R)):d},d.copy=function(){return Zp(d,I$(e,t,n,i,r,a,s,o,l,f))},d}function Aee(){return cs.apply(I$(OW,RW,ts,hp,Bd,no,Hv,Iv,Zs,MC).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Cee(){return cs.apply(I$(MW,kW,ns,gp,jd,pu,Gv,qv,Zs,kC).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function hb(){var e=0,t=1,n,i,r,a,s=Li,o=!1,l;function f(h){return h==null||isNaN(h=+h)?l:s(r===0?.5:(h=(a(h)-n)*r,o?Math.max(0,Math.min(1,h)):h))}f.domain=function(h){return arguments.length?([e,t]=h,n=a(e=+e),i=a(t=+t),r=n===i?0:1/(i-n),f):[e,t]},f.clamp=function(h){return arguments.length?(o=!!h,f):o},f.interpolator=function(h){return arguments.length?(s=h,f):s};function d(h){return function(p){var y,v;return arguments.length?([y,v]=p,s=h(y,v),f):[s(0),s(1)]}}return f.range=d(Uu),f.rangeRound=d(Qp),f.unknown=function(h){return arguments.length?(l=h,f):l},function(h){return a=h,n=h(e),i=h(t),r=n===i?0:1/(i-n),f}}function Bu(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function q$(){var e=wc(hb()(Li));return e.copy=function(){return Bu(e,q$())},Fu.apply(e,arguments)}function TL(){var e=U$(hb()).domain([1,10]);return e.copy=function(){return Bu(e,TL()).base(e.base())},Fu.apply(e,arguments)}function ML(){var e=B$(hb());return e.copy=function(){return Bu(e,ML()).constant(e.constant())},Fu.apply(e,arguments)}function H$(){var e=j$(hb());return e.copy=function(){return Bu(e,H$()).exponent(e.exponent())},Fu.apply(e,arguments)}function $ee(){return H$.apply(null,arguments).exponent(.5)}function gb(){var e=0,t=.5,n=1,i=1,r,a,s,o,l,f=Li,d,h=!1,p;function y(b){return isNaN(b=+b)?p:(b=.5+((b=+d(b))-a)*(i*b<i*a?o:l),f(h?Math.max(0,Math.min(1,b)):b))}y.domain=function(b){return arguments.length?([e,t,n]=b,r=d(e=+e),a=d(t=+t),s=d(n=+n),o=r===a?0:.5/(a-r),l=a===s?0:.5/(s-a),i=a<r?-1:1,y):[e,t,n]},y.clamp=function(b){return arguments.length?(h=!!b,y):h},y.interpolator=function(b){return arguments.length?(f=b,y):f};function v(b){return function(E){var _,w,A;return arguments.length?([_,w,A]=E,f=L$(b,[_,w,A]),y):[f(0),f(.5),f(1)]}}return y.range=v(Uu),y.rangeRound=v(Qp),y.unknown=function(b){return arguments.length?(p=b,y):p},function(b){return d=b,r=b(e),a=b(t),s=b(n),o=r===a?0:.5/(a-r),l=a===s?0:.5/(s-a),i=a<r?-1:1,y}}function kL(){var e=wc(gb()(Li));return e.copy=function(){return Bu(e,kL())},Fu.apply(e,arguments)}function OL(){var e=U$(gb()).domain([.1,1,10]);return e.copy=function(){return Bu(e,OL()).base(e.base())},Fu.apply(e,arguments)}function RL(){var e=B$(gb());return e.copy=function(){return Bu(e,RL()).constant(e.constant())},Fu.apply(e,arguments)}function G$(){var e=j$(gb());return e.copy=function(){return Bu(e,G$()).exponent(e.exponent())},Fu.apply(e,arguments)}function Tee(){return G$.apply(null,arguments).exponent(.5)}function fs(e){for(var t=e.length/6|0,n=new Array(t),i=0;i<t;)n[i]="#"+e.slice(i*6,++i*6);return n}const Mee=fs("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),kee=fs("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),Oee=fs("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),Ree=fs("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),Dee=fs("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),Nee=fs("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),zee=fs("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),Fee=fs("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),Lee=fs("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),Uee=fs("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f");function Y$(e,t,n){const i=e-t+n*2;return e?i>0?i:1:0}const Bee="identity",sd="linear",co="log",Kp="pow",Jp="sqrt",pb="symlog",ec="time",tc="utc",Qa="sequential",Gd="diverging",od="quantile",mb="quantize",yb="threshold",X$="ordinal",yw="point",DL="band",V$="bin-ordinal",yn="continuous",e0="discrete",t0="discretizing",Yr="interpolating",W$="temporal";function jee(e){return function(t){let n=t[0],i=t[1],r;return i<n&&(r=n,n=i,i=r),[e.invert(n),e.invert(i)]}}function Pee(e){return function(t){const n=e.range();let i=t[0],r=t[1],a=-1,s,o,l,f;for(r<i&&(o=i,i=r,r=o),l=0,f=n.length;l<f;++l)n[l]>=i&&n[l]<=r&&(a<0&&(a=l),s=l);if(!(a<0))return i=e.invertExtent(n[a]),r=e.invertExtent(n[s]),[i[0]===void 0?i[1]:i[0],r[1]===void 0?r[0]:r[1]]}}function Q$(){const e=R$().unknown(void 0),t=e.domain,n=e.range;let i=[0,1],r,a,s=!1,o=0,l=0,f=.5;delete e.unknown;function d(){const h=t().length,p=i[1]<i[0],y=i[1-p],v=Y$(h,o,l);let b=i[p-0];r=(y-b)/(v||1),s&&(r=Math.floor(r)),b+=(y-b-r*(h-o))*f,a=r*(1-o),s&&(b=Math.round(b),a=Math.round(a));const E=rr(h).map(_=>b+r*_);return n(p?E.reverse():E)}return e.domain=function(h){return arguments.length?(t(h),d()):t()},e.range=function(h){return arguments.length?(i=[+h[0],+h[1]],d()):i.slice()},e.rangeRound=function(h){return i=[+h[0],+h[1]],s=!0,d()},e.bandwidth=function(){return a},e.step=function(){return r},e.round=function(h){return arguments.length?(s=!!h,d()):s},e.padding=function(h){return arguments.length?(l=Math.max(0,Math.min(1,h)),o=l,d()):o},e.paddingInner=function(h){return arguments.length?(o=Math.max(0,Math.min(1,h)),d()):o},e.paddingOuter=function(h){return arguments.length?(l=Math.max(0,Math.min(1,h)),d()):l},e.align=function(h){return arguments.length?(f=Math.max(0,Math.min(1,h)),d()):f},e.invertRange=function(h){if(h[0]==null||h[1]==null)return;const p=i[1]<i[0],y=p?n().reverse():n(),v=y.length-1;let b=+h[0],E=+h[1],_,w,A;if(!(b!==b||E!==E)&&(E<b&&(A=b,b=E,E=A),!(E<y[0]||b>i[1-p])))return _=Math.max(0,xu(y,b)-1),w=b===E?_:xu(y,E)-1,b-y[_]>a+1e-10&&++_,p&&(A=_,_=v-w,w=v-A),_>w?void 0:t().slice(_,w+1)},e.invert=function(h){const p=e.invertRange([h,h]);return p&&p[0]},e.copy=function(){return Q$().domain(t()).range(i).round(s).paddingInner(o).paddingOuter(l).align(f)},d()}function NL(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return NL(t())},e}function Iee(){return NL(Q$().paddingInner(1))}var qee=Array.prototype.map;function Hee(e){return qee.call(e,ni)}const Gee=Array.prototype.slice;function zL(){let e=[],t=[];function n(i){return i==null||i!==i?void 0:t[(xu(e,i)-1)%t.length]}return n.domain=function(i){return arguments.length?(e=Hee(i),n):e.slice()},n.range=function(i){return arguments.length?(t=Gee.call(i),n):t.slice()},n.tickFormat=function(i,r){return bL(e[0],st(e),i??10,r)},n.copy=function(){return zL().domain(n.domain()).range(n.range())},n}const Ay=new Map,FL=Symbol("vega_scale");function LL(e){return e[FL]=!0,e}function Yee(e){return e&&e[FL]===!0}function Xee(e,t,n){const i=function(){const a=t();return a.invertRange||(a.invertRange=a.invert?jee(a):a.invertExtent?Pee(a):void 0),a.type=e,LL(a)};return i.metadata=pa(Se(n)),i}function gt(e,t,n){return arguments.length>1?(Ay.set(e,Xee(e,t,n)),this):UL(e)?Ay.get(e):void 0}gt(Bee,EL);gt(sd,xL,yn);gt(co,_L,[yn,co]);gt(Kp,P$,yn);gt(Jp,See,yn);gt(pb,wL,yn);gt(ec,Aee,[yn,W$]);gt(tc,Cee,[yn,W$]);gt(Qa,q$,[yn,Yr]);gt(`${Qa}-${sd}`,q$,[yn,Yr]);gt(`${Qa}-${co}`,TL,[yn,Yr,co]);gt(`${Qa}-${Kp}`,H$,[yn,Yr]);gt(`${Qa}-${Jp}`,$ee,[yn,Yr]);gt(`${Qa}-${pb}`,ML,[yn,Yr]);gt(`${Gd}-${sd}`,kL,[yn,Yr]);gt(`${Gd}-${co}`,OL,[yn,Yr,co]);gt(`${Gd}-${Kp}`,G$,[yn,Yr]);gt(`${Gd}-${Jp}`,Tee,[yn,Yr]);gt(`${Gd}-${pb}`,RL,[yn,Yr]);gt(od,AL,[t0,od]);gt(mb,CL,t0);gt(yb,$L,t0);gt(V$,zL,[e0,t0]);gt(X$,R$,e0);gt(DL,Q$,e0);gt(yw,Iee,e0);function UL(e){return Ay.has(e)}function Ac(e,t){const n=Ay.get(e);return n&&n.metadata[t]}function Z$(e){return Ac(e,yn)}function ud(e){return Ac(e,e0)}function vw(e){return Ac(e,t0)}function BL(e){return Ac(e,co)}function Vee(e){return Ac(e,W$)}function jL(e){return Ac(e,Yr)}function PL(e){return Ac(e,od)}const Wee=["clamp","base","constant","exponent"];function IL(e,t){const n=t[0],i=st(t)-n;return function(r){return e(n+r*i)}}function vb(e,t,n){return L$(K$(t||"rgb",n),e)}function qL(e,t){const n=new Array(t),i=t+1;for(let r=0;r<t;)n[r]=e(++r/i);return n}function HL(e,t,n){const i=n-t;let r,a,s;return!i||!Number.isFinite(i)?li(.5):(r=(a=e.type).indexOf("-"),a=r<0?a:a.slice(r+1),s=gt(a)().domain([t,n]).range([0,1]),Wee.forEach(o=>e[o]?s[o](e[o]()):0),s)}function K$(e,t){const n=cee[Qee(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function Qee(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const Zee={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},Kee={accent:kee,category10:Mee,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:Oee,observable10:Ree,paired:Dee,pastel1:Nee,pastel2:zee,set1:Fee,set2:Lee,set3:Uee,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function GL(e){if(oe(e))return e;const t=e.length/6|0,n=new Array(t);for(let i=0;i<t;)n[i]="#"+e.slice(i*6,++i*6);return n}function YL(e,t){for(const n in e)J$(n,t(e[n]))}const ON={};YL(Kee,GL);YL(Zee,e=>vb(GL(e)));function J$(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(ON[e]=t,this):ON[e]}const U1="symbol",Jee="discrete",ete="gradient",tte=e=>oe(e)?e.map(t=>String(t)):String(e),nte=(e,t)=>e[1]-t[1],ite=(e,t)=>t[1]-e[1];function eT(e,t,n){let i;return dt(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(Gp(e.domain())/n||1)+1))),Ee(t)&&(i=t.step,t=t.interval),_e(t)&&(t=e.type===ec?Pd(t):e.type==tc?Id(t):ie("Only time and utc scales accept interval strings."),i&&(t=t.every(i))),t}function XL(e,t,n){let i=e.range(),r=i[0],a=st(i),s=nte;if(r>a&&(i=a,a=r,r=i,s=ite),r=Math.floor(r),a=Math.ceil(a),t=t.map(o=>[o,e(o)]).filter(o=>r<=o[1]&&o[1]<=a).sort(s).map(o=>o[0]),n>0&&t.length>1){const o=[t[0],st(t)];for(;t.length>n&&t.length>=3;)t=t.filter((l,f)=>!(f%2));t.length<3&&(t=o)}return t}function tT(e,t){return e.bins?XL(e,e.bins,t):e.ticks?e.ticks(t):e.domain()}function VL(e,t,n,i,r,a){const s=t.type;let o=tte;if(s===ec||r===ec)o=e.timeFormat(i);else if(s===tc||r===tc)o=e.utcFormat(i);else if(BL(s)){const l=e.formatFloat(i);if(a||t.bins)o=l;else{const f=WL(t,n,!1);o=d=>f(d)?l(d):""}}else if(t.tickFormat){const l=t.domain();o=e.formatSpan(l[0],l[l.length-1],n,i)}else i&&(o=e.format(i));return o}function WL(e,t,n){const i=tT(e,t),r=e.base(),a=Math.log(r),s=Math.max(1,r*t/i.length),o=l=>{let f=l/Math.pow(r,Math.round(Math.log(l)/a));return f*r<r-.5&&(f*=r),f<=s};return n?i.filter(o):o}const bw={[od]:"quantiles",[mb]:"thresholds",[yb]:"domain"},QL={[od]:"quantiles",[mb]:"domain"};function ZL(e,t){return e.bins?ste(e.bins):e.type===co?WL(e,t,!0):bw[e.type]?ate(e[bw[e.type]]()):tT(e,t)}function rte(e,t,n){const i=t[QL[t.type]](),r=i.length;let a=r>1?i[1]-i[0]:i[0],s;for(s=1;s<r;++s)a=Math.min(a,i[s]-i[s-1]);return e.formatSpan(0,a,3*10,n)}function ate(e){const t=[-1/0].concat(e);return t.max=1/0,t}function ste(e){const t=e.slice(0,-1);return t.max=st(e),t}const ote=e=>bw[e.type]||e.bins;function KL(e,t,n,i,r,a,s){const o=QL[t.type]&&a!==ec&&a!==tc?rte(e,t,r):VL(e,t,n,r,a,s);return i===U1&&ote(t)?ute(o):i===Jee?lte(o):cte(o)}const ute=e=>(t,n,i)=>{const r=RN(i[n+1],RN(i.max,1/0)),a=DN(t,e),s=DN(r,e);return a&&s?a+"  "+s:s?"< "+s:" "+a},RN=(e,t)=>e??t,lte=e=>(t,n)=>n?e(t):null,cte=e=>t=>e(t),DN=(e,t)=>Number.isFinite(e)?t(e):null;function fte(e){const t=e.domain(),n=t.length-1;let i=+t[0],r=+st(t),a=r-i;if(e.type===yb){const s=n?a/n:.1;i-=s,r+=s,a=r-i}return s=>(s-i)/a}function dte(e,t,n,i){const r=i||t.type;return _e(n)&&Vee(r)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&r===ec?e.timeFormat("%A, %d %B %Y, %X"):!n&&r===tc?e.utcFormat("%A, %d %B %Y, %X UTC"):KL(e,t,5,null,n,i,!0)}function JL(e,t,n){n=n||{};const i=Math.max(3,n.maxlen||7),r=dte(e,t,n.format,n.formatType);if(vw(t.type)){const a=ZL(t).slice(1).map(r),s=a.length;return`${s} boundar${s===1?"y":"ies"}: ${a.join(", ")}`}else if(ud(t.type)){const a=t.domain(),s=a.length,o=s>i?a.slice(0,i-2).map(r).join(", ")+", ending with "+a.slice(-1).map(r):a.map(r).join(", ");return`${s} value${s===1?"":"s"}: ${o}`}else{const a=t.domain();return`values from ${r(a[0])} to ${r(st(a))}`}}let eU=0;function hte(){eU=0}const Cy="p_";function nT(e){return e&&e.gradient}function tU(e,t,n){const i=e.gradient;let r=e.id,a=i==="radial"?Cy:"";return r||(r=e.id="gradient_"+eU++,i==="radial"?(e.x1=La(e.x1,.5),e.y1=La(e.y1,.5),e.r1=La(e.r1,0),e.x2=La(e.x2,.5),e.y2=La(e.y2,.5),e.r2=La(e.r2,.5),a=Cy):(e.x1=La(e.x1,0),e.y1=La(e.y1,0),e.x2=La(e.x2,1),e.y2=La(e.y2,0))),t[r]=e,"url("+(n||"")+"#"+a+r+")"}function La(e,t){return e??t}function nU(e,t){var n=[],i;return i={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(r,a){return n.push({offset:r,color:a}),i}}}const NN={basis:{curve:uJ},"basis-closed":{curve:lJ},"basis-open":{curve:cJ},bundle:{curve:fJ,tension:"beta",value:.85},cardinal:{curve:dJ,tension:"tension",value:0},"cardinal-open":{curve:gJ,tension:"tension",value:0},"cardinal-closed":{curve:hJ,tension:"tension",value:0},"catmull-rom":{curve:pJ,tension:"alpha",value:.5},"catmull-rom-closed":{curve:mJ,tension:"alpha",value:.5},"catmull-rom-open":{curve:yJ,tension:"alpha",value:.5},linear:{curve:$$},"linear-closed":{curve:vJ},monotone:{horizontal:xJ,vertical:bJ},natural:{curve:EJ},step:{curve:SJ},"step-after":{curve:wJ},"step-before":{curve:_J}};function iT(e,t,n){var i=Ce(NN,e)&&NN[e],r=null;return i&&(r=i.curve||i[t||"vertical"],i.tension&&n!=null&&(r=r[i.tension](n))),r}const gte={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},pte=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,mte=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,yte=/^((\s+,?\s*)|(,\s*))/,vte=/^[01]/;function ld(e){const t=[];return(e.match(pte)||[]).forEach(i=>{let r=i[0];const a=r.toLowerCase(),s=gte[a],o=bte(a,s,i.slice(1).trim()),l=o.length;if(l<s||l&&l%s!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([r,...o.slice(0,s)]),l!==s){a==="m"&&(r=r==="M"?"L":"l");for(let f=s;f<l;f+=s)t.push([r,...o.slice(f,f+s)])}}),t}function bte(e,t,n){const i=[];for(let r=0;t&&r<n.length;)for(let a=0;a<t;++a){const s=e==="a"&&(a===3||a===4)?vte:mte,o=n.slice(r).match(s);if(o===null)throw Error("Invalid SVG path, incorrect parameter type");r+=o[0].length,i.push(+o[0]);const l=n.slice(r).match(yte);l!==null&&(r+=l[0].length)}return i}const Au=Math.PI/180,xte=1e-14,Nl=Math.PI/2,qa=Math.PI*2,Sf=Math.sqrt(3)/2;var _S={},wS={},iU=[].join;function Ete(e,t,n,i,r,a,s,o,l){const f=iU.call(arguments);if(_S[f])return _S[f];const d=s*Au,h=Math.sin(d),p=Math.cos(d);n=Math.abs(n),i=Math.abs(i);const y=p*(o-e)*.5+h*(l-t)*.5,v=p*(l-t)*.5-h*(o-e)*.5;let b=y*y/(n*n)+v*v/(i*i);b>1&&(b=Math.sqrt(b),n*=b,i*=b);const E=p/n,_=h/n,w=-h/i,A=p/i,M=E*o+_*l,T=w*o+A*l,R=E*e+_*t,O=w*e+A*t;let $=1/((R-M)*(R-M)+(O-T)*(O-T))-.25;$<0&&($=0);let D=Math.sqrt($);a==r&&(D=-D);const z=.5*(M+R)-D*(O-T),P=.5*(T+O)+D*(R-M),q=Math.atan2(T-P,M-z);let L=Math.atan2(O-P,R-z)-q;L<0&&a===1?L+=qa:L>0&&a===0&&(L-=qa);const U=Math.ceil(Math.abs(L/(Nl+.001))),I=[];for(let V=0;V<U;++V){const G=q+V*L/U,F=q+(V+1)*L/U;I[V]=[z,P,G,F,n,i,h,p]}return _S[f]=I}function Ste(e){const t=iU.call(e);if(wS[t])return wS[t];var n=e[0],i=e[1],r=e[2],a=e[3],s=e[4],o=e[5],l=e[6],f=e[7];const d=f*s,h=-l*o,p=l*s,y=f*o,v=Math.cos(r),b=Math.sin(r),E=Math.cos(a),_=Math.sin(a),w=.5*(a-r),A=Math.sin(w*.5),M=8/3*A*A/Math.sin(w),T=n+v-M*b,R=i+b+M*v,O=n+E,k=i+_,$=O+M*_,D=k-M*E;return wS[t]=[d*T+h*R,p*T+y*R,d*$+h*D,p*$+y*D,d*O+h*k,p*O+y*k]}const Mr=["l",0,0,0,0,0,0,0];function _te(e,t,n){const i=Mr[0]=e[0];if(i==="a"||i==="A")Mr[1]=t*e[1],Mr[2]=n*e[2],Mr[3]=e[3],Mr[4]=e[4],Mr[5]=e[5],Mr[6]=t*e[6],Mr[7]=n*e[7];else if(i==="h"||i==="H")Mr[1]=t*e[1];else if(i==="v"||i==="V")Mr[1]=n*e[1];else for(var r=1,a=e.length;r<a;++r)Mr[r]=(r%2==1?t:n)*e[r];return Mr}function Ep(e,t,n,i,r,a){var s,o=null,l=0,f=0,d=0,h=0,p,y,v,b,E=0,_=0;n==null&&(n=0),i==null&&(i=0),r==null&&(r=1),a==null&&(a=r),e.beginPath&&e.beginPath();for(var w=0,A=t.length;w<A;++w){switch(s=t[w],(r!==1||a!==1)&&(s=_te(s,r,a)),s[0]){case"l":l+=s[1],f+=s[2],e.lineTo(l+n,f+i);break;case"L":l=s[1],f=s[2],e.lineTo(l+n,f+i);break;case"h":l+=s[1],e.lineTo(l+n,f+i);break;case"H":l=s[1],e.lineTo(l+n,f+i);break;case"v":f+=s[1],e.lineTo(l+n,f+i);break;case"V":f=s[1],e.lineTo(l+n,f+i);break;case"m":l+=s[1],f+=s[2],E=l,_=f,e.moveTo(l+n,f+i);break;case"M":l=s[1],f=s[2],E=l,_=f,e.moveTo(l+n,f+i);break;case"c":p=l+s[5],y=f+s[6],d=l+s[3],h=f+s[4],e.bezierCurveTo(l+s[1]+n,f+s[2]+i,d+n,h+i,p+n,y+i),l=p,f=y;break;case"C":l=s[5],f=s[6],d=s[3],h=s[4],e.bezierCurveTo(s[1]+n,s[2]+i,d+n,h+i,l+n,f+i);break;case"s":p=l+s[3],y=f+s[4],d=2*l-d,h=2*f-h,e.bezierCurveTo(d+n,h+i,l+s[1]+n,f+s[2]+i,p+n,y+i),d=l+s[1],h=f+s[2],l=p,f=y;break;case"S":p=s[3],y=s[4],d=2*l-d,h=2*f-h,e.bezierCurveTo(d+n,h+i,s[1]+n,s[2]+i,p+n,y+i),l=p,f=y,d=s[1],h=s[2];break;case"q":p=l+s[3],y=f+s[4],d=l+s[1],h=f+s[2],e.quadraticCurveTo(d+n,h+i,p+n,y+i),l=p,f=y;break;case"Q":p=s[3],y=s[4],e.quadraticCurveTo(s[1]+n,s[2]+i,p+n,y+i),l=p,f=y,d=s[1],h=s[2];break;case"t":p=l+s[1],y=f+s[2],o[0].match(/[QqTt]/)===null?(d=l,h=f):o[0]==="t"?(d=2*l-v,h=2*f-b):o[0]==="q"&&(d=2*l-d,h=2*f-h),v=d,b=h,e.quadraticCurveTo(d+n,h+i,p+n,y+i),l=p,f=y,d=l+s[1],h=f+s[2];break;case"T":p=s[1],y=s[2],d=2*l-d,h=2*f-h,e.quadraticCurveTo(d+n,h+i,p+n,y+i),l=p,f=y;break;case"a":zN(e,l+n,f+i,[s[1],s[2],s[3],s[4],s[5],s[6]+l+n,s[7]+f+i]),l+=s[6],f+=s[7];break;case"A":zN(e,l+n,f+i,[s[1],s[2],s[3],s[4],s[5],s[6]+n,s[7]+i]),l=s[6],f=s[7];break;case"z":case"Z":l=E,f=_,e.closePath();break}o=s}}function zN(e,t,n,i){const r=Ete(i[5],i[6],i[0],i[1],i[3],i[4],i[2],t,n);for(let a=0;a<r.length;++a){const s=Ste(r[a]);e.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5])}}const FN=.5773502691896257,LN={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,qa)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,i=n/2.5;e.moveTo(-n,-i),e.lineTo(-n,i),e.lineTo(-i,i),e.lineTo(-i,n),e.lineTo(i,n),e.lineTo(i,i),e.lineTo(n,i),e.lineTo(n,-i),e.lineTo(i,-i),e.lineTo(i,-n),e.lineTo(-i,-n),e.lineTo(-i,-i),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),i=-n/2;e.rect(i,i,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,i=n/7,r=n/2.5,a=n/8;e.moveTo(-i,n),e.lineTo(i,n),e.lineTo(i,-a),e.lineTo(r,-a),e.lineTo(0,-n),e.lineTo(-r,-a),e.lineTo(-i,-a),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,i=Sf*n,r=i-n*FN,a=n/4;e.moveTo(0,-i-r),e.lineTo(-a,i-r),e.lineTo(a,i-r),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,i=Sf*n,r=i-n*FN;e.moveTo(0,-i-r),e.lineTo(-n,i-r),e.lineTo(n,i-r),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,i=Sf*n;e.moveTo(0,-i),e.lineTo(-n,i),e.lineTo(n,i),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,i=Sf*n;e.moveTo(0,i),e.lineTo(-n,-i),e.lineTo(n,-i),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,i=Sf*n;e.moveTo(i,0),e.lineTo(-i,-n),e.lineTo(-i,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,i=Sf*n;e.moveTo(-i,0),e.lineTo(i,-n),e.lineTo(i,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function rU(e){return Ce(LN,e)?LN[e]:wte(e)}var AS={};function wte(e){if(!Ce(AS,e)){const t=ld(e);AS[e]={draw:function(n,i){Ep(n,t,0,0,Math.sqrt(i)/2)}}}return AS[e]}const Wo=.448084975506;function Ate(e){return e.x}function Cte(e){return e.y}function $te(e){return e.width}function Tte(e){return e.height}function Bs(e){return typeof e=="function"?e:()=>+e}function t1(e,t,n){return Math.max(t,Math.min(e,n))}function aU(){var e=Ate,t=Cte,n=$te,i=Tte,r=Bs(0),a=r,s=r,o=r,l=null;function f(d,h,p){var y,v=h??+e.call(this,d),b=p??+t.call(this,d),E=+n.call(this,d),_=+i.call(this,d),w=Math.min(E,_)/2,A=t1(+r.call(this,d),0,w),M=t1(+a.call(this,d),0,w),T=t1(+s.call(this,d),0,w),R=t1(+o.call(this,d),0,w);if(l||(l=y=ab()),A<=0&&M<=0&&T<=0&&R<=0)l.rect(v,b,E,_);else{var O=v+E,k=b+_;l.moveTo(v+A,b),l.lineTo(O-M,b),l.bezierCurveTo(O-Wo*M,b,O,b+Wo*M,O,b+M),l.lineTo(O,k-R),l.bezierCurveTo(O,k-Wo*R,O-Wo*R,k,O-R,k),l.lineTo(v+T,k),l.bezierCurveTo(v+Wo*T,k,v,k-Wo*T,v,k-T),l.lineTo(v,b+A),l.bezierCurveTo(v,b+Wo*A,v+Wo*A,b,v+A,b),l.closePath()}if(y)return l=null,y+""||null}return f.x=function(d){return arguments.length?(e=Bs(d),f):e},f.y=function(d){return arguments.length?(t=Bs(d),f):t},f.width=function(d){return arguments.length?(n=Bs(d),f):n},f.height=function(d){return arguments.length?(i=Bs(d),f):i},f.cornerRadius=function(d,h,p,y){return arguments.length?(r=Bs(d),a=h!=null?Bs(h):r,o=p!=null?Bs(p):r,s=y!=null?Bs(y):a,f):r},f.context=function(d){return arguments.length?(l=d??null,f):l},f}function sU(){var e,t,n,i,r=null,a,s,o,l;function f(h,p,y){const v=y/2;if(a){var b=o-p,E=h-s;if(b||E){var _=Math.hypot(b,E),w=(b/=_)*l,A=(E/=_)*l,M=Math.atan2(E,b);r.moveTo(s-w,o-A),r.lineTo(h-b*v,p-E*v),r.arc(h,p,v,M-Math.PI,M),r.lineTo(s+w,o+A),r.arc(s,o,l,M,M+Math.PI)}else r.arc(h,p,v,0,qa);r.closePath()}else a=1;s=h,o=p,l=v}function d(h){var p,y=h.length,v,b=!1,E;for(r==null&&(r=E=ab()),p=0;p<=y;++p)!(p<y&&i(v=h[p],p,h))===b&&(b=!b)&&(a=0),b&&f(+e(v,p,h),+t(v,p,h),+n(v,p,h));if(E)return r=null,E+""||null}return d.x=function(h){return arguments.length?(e=h,d):e},d.y=function(h){return arguments.length?(t=h,d):t},d.size=function(h){return arguments.length?(n=h,d):n},d.defined=function(h){return arguments.length?(i=h,d):i},d.context=function(h){return arguments.length?(h==null?r=null:r=h,d):r},d}function n0(e,t){return e??t}const i0=e=>e.x||0,r0=e=>e.y||0,Mte=e=>e.width||0,kte=e=>e.height||0,Ote=e=>(e.x||0)+(e.width||0),Rte=e=>(e.y||0)+(e.height||0),Dte=e=>e.startAngle||0,Nte=e=>e.endAngle||0,zte=e=>e.padAngle||0,Fte=e=>e.innerRadius||0,Lte=e=>e.outerRadius||0,Ute=e=>e.cornerRadius||0,Bte=e=>n0(e.cornerRadiusTopLeft,e.cornerRadius)||0,jte=e=>n0(e.cornerRadiusTopRight,e.cornerRadius)||0,Pte=e=>n0(e.cornerRadiusBottomRight,e.cornerRadius)||0,Ite=e=>n0(e.cornerRadiusBottomLeft,e.cornerRadius)||0,qte=e=>n0(e.size,64),Hte=e=>e.size||1,bb=e=>e.defined!==!1,Gte=e=>rU(e.shape||"circle"),Yte=aJ().startAngle(Dte).endAngle(Nte).padAngle(zte).innerRadius(Fte).outerRadius(Lte).cornerRadius(Ute),Xte=z9().x(i0).y1(r0).y0(Rte).defined(bb),Vte=z9().y(r0).x1(i0).x0(Ote).defined(bb),Wte=N9().x(i0).y(r0).defined(bb),Qte=aU().x(i0).y(r0).width(Mte).height(kte).cornerRadius(Bte,jte,Pte,Ite),Zte=oJ().type(Gte).size(qte),Kte=sU().x(i0).y(r0).defined(bb).size(Hte);function rT(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function Jte(e,t){return Yte.context(e)(t)}function ene(e,t){const n=t[0],i=n.interpolate||"linear";return(n.orient==="horizontal"?Vte:Xte).curve(iT(i,n.orient,n.tension)).context(e)(t)}function tne(e,t){const n=t[0],i=n.interpolate||"linear";return Wte.curve(iT(i,n.orient,n.tension)).context(e)(t)}function Yd(e,t,n,i){return Qte.context(e)(t,n,i)}function nne(e,t){return(t.mark.shape||t.shape).context(e)(t)}function ine(e,t){return Zte.context(e)(t)}function rne(e,t){return Kte.context(e)(t)}var oU=1;function uU(){oU=1}function aT(e,t,n){var i=t.clip,r=e._defs,a=t.clip_id||(t.clip_id="clip"+oU++),s=r.clipping[a]||(r.clipping[a]={id:a});return Xe(i)?s.path=i(null):rT(n)?s.path=Yd(null,n,0,0):(s.width=n.width||0,s.height=n.height||0),"url(#"+a+")"}function un(e){this.clear(),e&&this.union(e)}un.prototype={clone(){return new un(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,i){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),i<t?(this.y2=t,this.y1=i):(this.y1=t,this.y2=i),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const i=this.rotatedPoints(e,t,n);return this.clear().add(i[0],i[1]).add(i[2],i[3]).add(i[4],i[5]).add(i[6],i[7])},rotatedPoints(e,t,n){var{x1:i,y1:r,x2:a,y2:s}=this,o=Math.cos(e),l=Math.sin(e),f=t-t*o+n*l,d=n-t*l-n*o;return[o*i-l*r+f,l*i+o*r+d,o*i-l*s+f,l*i+o*s+d,o*a-l*r+f,l*a+o*r+d,o*a-l*s+f,l*a+o*s+d]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function xb(e){this.mark=e,this.bounds=this.bounds||new un}function Eb(e){xb.call(this,e),this.items=this.items||[]}be(Eb,xb);class lU{constructor(t){this._pending=0,this._loader=t||Xv()}pending(){return this._pending}sanitizeURL(t){const n=this;return UN(n),n._loader.sanitize(t,{context:"href"}).then(i=>(gg(n),i)).catch(()=>(gg(n),null))}loadImage(t){const n=this,i=AJ();return UN(n),n._loader.sanitize(t,{context:"image"}).then(r=>{const a=r.href;if(!a||!i)throw{url:a};const s=new i,o=Ce(r,"crossOrigin")?r.crossOrigin:"anonymous";return o!=null&&(s.crossOrigin=o),s.onload=()=>gg(n),s.onerror=()=>gg(n),s.src=a,s}).catch(r=>(gg(n),{complete:!1,width:0,height:0,src:r&&r.url||""}))}ready(){const t=this;return new Promise(n=>{function i(r){t.pending()?setTimeout(()=>{i(!0)},10):n(r)}i(!1)})}}function UN(e){e._pending+=1}function gg(e){e._pending-=1}function mo(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const i=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(i+(n?ane(t,i):0))}return e}function ane(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const sne=qa-1e-8;let Sb,B1,j1,jl,xw,P1,Ew,Sw;const au=(e,t)=>Sb.add(e,t),I1=(e,t)=>au(B1=e,j1=t),BN=e=>au(e,Sb.y1),jN=e=>au(Sb.x1,e),zl=(e,t)=>xw*e+Ew*t,Fl=(e,t)=>P1*e+Sw*t,CS=(e,t)=>au(zl(e,t),Fl(e,t)),$S=(e,t)=>I1(zl(e,t),Fl(e,t));function a0(e,t){return Sb=e,t?(jl=t*Au,xw=Sw=Math.cos(jl),P1=Math.sin(jl),Ew=-P1):(xw=Sw=1,jl=P1=Ew=0),one}const one={beginPath(){},closePath(){},moveTo:$S,lineTo:$S,rect(e,t,n,i){jl?(CS(e+n,t),CS(e+n,t+i),CS(e,t+i),$S(e,t)):(au(e+n,t+i),I1(e,t))},quadraticCurveTo(e,t,n,i){const r=zl(e,t),a=Fl(e,t),s=zl(n,i),o=Fl(n,i);PN(B1,r,s,BN),PN(j1,a,o,jN),I1(s,o)},bezierCurveTo(e,t,n,i,r,a){const s=zl(e,t),o=Fl(e,t),l=zl(n,i),f=Fl(n,i),d=zl(r,a),h=Fl(r,a);IN(B1,s,l,d,BN),IN(j1,o,f,h,jN),I1(d,h)},arc(e,t,n,i,r,a){if(i+=jl,r+=jl,B1=n*Math.cos(r)+e,j1=n*Math.sin(r)+t,Math.abs(r-i)>sne)au(e-n,t-n),au(e+n,t+n);else{const s=f=>au(n*Math.cos(f)+e,n*Math.sin(f)+t);let o,l;if(s(i),s(r),r!==i)if(i=i%qa,i<0&&(i+=qa),r=r%qa,r<0&&(r+=qa),r<i&&(a=!a,o=i,i=r,r=o),a)for(r-=qa,o=i-i%Nl,l=0;l<4&&o>r;++l,o-=Nl)s(o);else for(o=i-i%Nl+Nl,l=0;l<4&&o<r;++l,o=o+Nl)s(o)}}};function PN(e,t,n,i){const r=(e-t)/(e+n-2*t);0<r&&r<1&&i(e+(t-e)*r)}function IN(e,t,n,i,r){const a=i-e+3*t-3*n,s=e+n-2*t,o=e-t;let l=0,f=0,d;Math.abs(a)>xte?(d=s*s+o*a,d>=0&&(d=Math.sqrt(d),l=(-s+d)/a,f=(-s-d)/a)):l=.5*o/s,0<l&&l<1&&r(qN(l,e,t,n,i)),0<f&&f<1&&r(qN(f,e,t,n,i))}function qN(e,t,n,i,r){const a=1-e,s=a*a,o=e*e;return s*a*t+3*s*e*n+3*a*o*i+o*e*r}var vu=(vu=yu(1,1))?vu.getContext("2d"):null;const _w=new un;function sT(e){return function(t,n){if(!vu)return!0;e(vu,t),_w.clear().union(t.bounds).intersect(n).round();const{x1:i,y1:r,x2:a,y2:s}=_w;for(let o=r;o<=s;++o)for(let l=i;l<=a;++l)if(vu.isPointInPath(l,o))return!0;return!1}}function oT(e,t){return t.contains(e.x||0,e.y||0)}function cU(e,t){const n=e.x||0,i=e.y||0,r=e.width||0,a=e.height||0;return t.intersects(_w.set(n,i,n+r,i+a))}function fU(e,t){const n=e.x||0,i=e.y||0,r=e.x2!=null?e.x2:n,a=e.y2!=null?e.y2:i;return Ff(t,n,i,r,a)}function Ff(e,t,n,i,r){const{x1:a,y1:s,x2:o,y2:l}=e,f=i-t,d=r-n;let h=0,p=1,y,v,b,E;for(E=0;E<4;++E){if(E===0&&(y=-f,v=-(a-t)),E===1&&(y=f,v=o-t),E===2&&(y=-d,v=-(s-n)),E===3&&(y=d,v=l-n),Math.abs(y)<1e-10&&v<0)return!1;if(b=v/y,y<0){if(b>p)return!1;b>h&&(h=b)}else if(y>0){if(b<h)return!1;b<p&&(p=b)}}return!0}function cd(e,t){e.globalCompositeOperation=t.blend||"source-over"}function ta(e,t){return e??t}function HN(e,t){const n=t.length;for(let i=0;i<n;++i)e.addColorStop(t[i].offset,t[i].color);return e}function une(e,t,n){const i=n.width(),r=n.height();let a;if(t.gradient==="radial")a=e.createRadialGradient(n.x1+ta(t.x1,.5)*i,n.y1+ta(t.y1,.5)*r,Math.max(i,r)*ta(t.r1,0),n.x1+ta(t.x2,.5)*i,n.y1+ta(t.y2,.5)*r,Math.max(i,r)*ta(t.r2,.5));else{const s=ta(t.x1,0),o=ta(t.y1,0),l=ta(t.x2,1),f=ta(t.y2,0);if(s===l||o===f||i===r)a=e.createLinearGradient(n.x1+s*i,n.y1+o*r,n.x1+l*i,n.y1+f*r);else{const d=yu(Math.ceil(i),Math.ceil(r)),h=d.getContext("2d");return h.scale(i,r),h.fillStyle=HN(h.createLinearGradient(s,o,l,f),t.stops),h.fillRect(0,0,i,r),e.createPattern(d,"no-repeat")}}return HN(a,t.stops)}function dU(e,t,n){return nT(n)?une(e,n,t.bounds):n}function $y(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=dU(e,t,t.fill),!0):!1}var lne=[];function fd(e,t,n){var i=(i=t.strokeWidth)!=null?i:1;return i<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=dU(e,t,t.stroke),e.lineWidth=i,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||lne),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function cne(e,t){return e.zindex-t.zindex||e.index-t.index}function uT(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],i,r,a;for(r=0,a=t.length;r<a;++r)i=t[r],i.index=r,i.zindex&&n.push(i);return e.zdirty=!1,e.zitems=n.sort(cne)}function ya(e,t){var n=e.items,i,r;if(!n||!n.length)return;const a=uT(e);if(a&&a.length){for(i=0,r=n.length;i<r;++i)n[i].zindex||t(n[i]);n=a}for(i=0,r=n.length;i<r;++i)t(n[i])}function Ty(e,t){var n=e.items,i,r;if(!n||!n.length)return null;const a=uT(e);for(a&&a.length&&(n=a),r=n.length;--r>=0;)if(i=t(n[r]))return i;if(n===a){for(n=e.items,r=n.length;--r>=0;)if(!n[r].zindex&&(i=t(n[r])))return i}return null}function lT(e){return function(t,n,i){ya(n,r=>{(!i||i.intersects(r.bounds))&&hU(e,t,r,r)})}}function fne(e){return function(t,n,i){n.items.length&&(!i||i.intersects(n.bounds))&&hU(e,t,n.items[0],n.items)}}function hU(e,t,n,i){var r=n.opacity==null?1:n.opacity;r!==0&&(e(t,i)||(cd(t,n),n.fill&&$y(t,n,r)&&t.fill(),n.stroke&&fd(t,n,r)&&t.stroke()))}function _b(e){return e=e||jr,function(t,n,i,r,a,s){return i*=t.pixelRatio,r*=t.pixelRatio,Ty(n,o=>{const l=o.bounds;if(!(l&&!l.contains(a,s)||!l)&&e(t,o,i,r,a,s))return o})}}function s0(e,t){return function(n,i,r,a){var s=Array.isArray(i)?i[0]:i,o=t??s.fill,l=s.stroke&&n.isPointInStroke,f,d;return l&&(f=s.strokeWidth,d=s.strokeCap,n.lineWidth=f??1,n.lineCap=d??"butt"),e(n,i)?!1:o&&n.isPointInPath(r,a)||l&&n.isPointInStroke(r,a)}}function cT(e){return _b(s0(e))}function Gl(e,t){return"translate("+e+","+t+")"}function fT(e){return"rotate("+e+")"}function dne(e,t){return"scale("+e+","+t+")"}function gU(e){return Gl(e.x||0,e.y||0)}function hne(e){return Gl(e.x||0,e.y||0)+(e.angle?" "+fT(e.angle):"")}function gne(e){return Gl(e.x||0,e.y||0)+(e.angle?" "+fT(e.angle):"")+(e.scaleX||e.scaleY?" "+dne(e.scaleX||1,e.scaleY||1):"")}function dT(e,t,n){function i(s,o){s("transform",hne(o)),s("d",t(null,o))}function r(s,o){return t(a0(s,o.angle),o),mo(s,o).translate(o.x||0,o.y||0)}function a(s,o){var l=o.x||0,f=o.y||0,d=o.angle||0;s.translate(l,f),d&&s.rotate(d*=Au),s.beginPath(),t(s,o),d&&s.rotate(-d),s.translate(-l,-f)}return{type:e,tag:"path",nested:!1,attr:i,bound:r,draw:lT(a),pick:cT(a),isect:n||sT(a)}}var pne=dT("arc",Jte);function mne(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],i=e[0].orient==="horizontal"?"y":"x",r=e.length,a=1/0,s,o;--r>=0;)e[r].defined!==!1&&(o=Math.abs(e[r][i]-n),o<a&&(a=o,s=e[r]));return s}function yne(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),i=e.length,r,a,s;--i>=0;)if(e[i].defined!==!1&&(r=e[i].x-t[0],a=e[i].y-t[1],s=r*r+a*a,s<n))return e[i];return null}function vne(e,t){for(var n=e.length,i,r,a;--n>=0;)if(e[n].defined!==!1&&(i=e[n].x-t[0],r=e[n].y-t[1],a=i*i+r*r,i=e[n].size||1,a<i*i))return e[n];return null}function hT(e,t,n){function i(l,f){var d=f.mark.items;d.length&&l("d",t(null,d))}function r(l,f){var d=f.items;return d.length===0?l:(t(a0(l),d),mo(l,d[0]))}function a(l,f){l.beginPath(),t(l,f)}const s=s0(a);function o(l,f,d,h,p,y){var v=f.items,b=f.bounds;return!v||!v.length||b&&!b.contains(p,y)?null:(d*=l.pixelRatio,h*=l.pixelRatio,s(l,v,d,h)?v[0]:null)}return{type:e,tag:"path",nested:!0,attr:i,bound:r,draw:fne(a),pick:o,isect:oT,tip:n}}var bne=hT("area",ene,mne);function xne(e,t){var n=t.clip;e.save(),Xe(n)?(e.beginPath(),n(e),e.clip()):pU(e,t.group)}function pU(e,t){e.beginPath(),rT(t)?Yd(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function mU(e){const t=ta(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function Ene(e,t){e("transform",gU(t))}function yU(e,t){const n=mU(t);e("d",Yd(null,t,n,n))}function Sne(e,t){e("class","background"),e("aria-hidden",!0),yU(e,t)}function _ne(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?yU(e,t):e("d","")}function wne(e,t,n){const i=t.clip?aT(n,t,t):null;e("clip-path",i)}function Ane(e,t){if(!t.clip&&t.items){const n=t.items,i=n.length;for(let r=0;r<i;++r)e.union(n[r].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),mo(e,t),e.translate(t.x||0,t.y||0)}function Sp(e,t,n,i){const r=mU(t);e.beginPath(),Yd(e,t,(n||0)+r,(i||0)+r)}const Cne=s0(Sp),$ne=s0(Sp,!1),Tne=s0(Sp,!0);function Mne(e,t,n,i){ya(t,r=>{const a=r.x||0,s=r.y||0,o=r.strokeForeground,l=r.opacity==null?1:r.opacity;(r.stroke||r.fill)&&l&&(Sp(e,r,a,s),cd(e,r),r.fill&&$y(e,r,l)&&e.fill(),r.stroke&&!o&&fd(e,r,l)&&e.stroke()),e.save(),e.translate(a,s),r.clip&&pU(e,r),n&&n.translate(-a,-s),ya(r,f=>{(f.marktype==="group"||i==null||i.includes(f.marktype))&&this.draw(e,f,n,i)}),n&&n.translate(a,s),e.restore(),o&&r.stroke&&l&&(Sp(e,r,a,s),cd(e,r),fd(e,r,l)&&e.stroke())})}function kne(e,t,n,i,r,a){if(t.bounds&&!t.bounds.contains(r,a)||!t.items)return null;const s=n*e.pixelRatio,o=i*e.pixelRatio;return Ty(t,l=>{let f,d,h;const p=l.bounds;if(p&&!p.contains(r,a))return;d=l.x||0,h=l.y||0;const y=d+(l.width||0),v=h+(l.height||0),b=l.clip;if(b&&(r<d||r>y||a<h||a>v))return;if(e.save(),e.translate(d,h),d=r-d,h=a-h,b&&rT(l)&&!Tne(e,l,s,o))return e.restore(),null;const E=l.strokeForeground,_=t.interactive!==!1;return _&&E&&l.stroke&&$ne(e,l,s,o)?(e.restore(),l):(f=Ty(l,w=>One(w,d,h)?this.pick(w,n,i,d,h):null),!f&&_&&(l.fill||!E&&l.stroke)&&Cne(e,l,s,o)&&(f=l),e.restore(),f||null)})}function One(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var Rne={type:"group",tag:"g",nested:!1,attr:Ene,bound:Ane,draw:Mne,pick:kne,isect:cU,content:wne,background:Sne,foreground:_ne},_p={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function gT(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(i=>{e.image=i,e.image.url=e.url})),n}function pT(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function mT(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function wb(e,t){return e==="center"?t/2:e==="right"?t:0}function Ab(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function Dne(e,t,n){const i=gT(t,n),r=pT(t,i),a=mT(t,i),s=(t.x||0)-wb(t.align,r),o=(t.y||0)-Ab(t.baseline,a),l=!i.src&&i.toDataURL?i.toDataURL():i.src||"";e("href",l,_p["xmlns:xlink"],"xlink:href"),e("transform",Gl(s,o)),e("width",r),e("height",a),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function Nne(e,t){const n=t.image,i=pT(t,n),r=mT(t,n),a=(t.x||0)-wb(t.align,i),s=(t.y||0)-Ab(t.baseline,r);return e.set(a,s,a+i,s+r)}function zne(e,t,n){ya(t,i=>{if(n&&!n.intersects(i.bounds))return;const r=gT(i,this);let a=pT(i,r),s=mT(i,r);if(a===0||s===0)return;let o=(i.x||0)-wb(i.align,a),l=(i.y||0)-Ab(i.baseline,s),f,d,h,p;i.aspect!==!1&&(d=r.width/r.height,h=i.width/i.height,d===d&&h===h&&d!==h&&(h<d?(p=a/d,l+=(s-p)/2,s=p):(p=s*d,o+=(a-p)/2,a=p))),(r.complete||r.toDataURL)&&(cd(e,i),e.globalAlpha=(f=i.opacity)!=null?f:1,e.imageSmoothingEnabled=i.smooth!==!1,e.drawImage(r,o,l,a,s))})}var Fne={type:"image",tag:"image",nested:!1,attr:Dne,bound:Nne,draw:zne,pick:_b(),isect:jr,get:gT,xOffset:wb,yOffset:Ab},Lne=hT("line",tne,yne);function Une(e,t){var n=t.scaleX||1,i=t.scaleY||1;(n!==1||i!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",gne(t)),e("d",t.path)}function q1(e,t){var n=t.path;if(n==null)return!0;var i=t.x||0,r=t.y||0,a=t.scaleX||1,s=t.scaleY||1,o=(t.angle||0)*Au,l=t.pathCache;(!l||l.path!==n)&&((t.pathCache=l=ld(n)).path=n),o&&e.rotate&&e.translate?(e.translate(i,r),e.rotate(o),Ep(e,l,0,0,a,s),e.rotate(-o),e.translate(-i,-r)):Ep(e,l,i,r,a,s)}function Bne(e,t){return q1(a0(e,t.angle),t)?e.set(0,0,0,0):mo(e,t,!0)}var jne={type:"path",tag:"path",nested:!1,attr:Une,bound:Bne,draw:lT(q1),pick:cT(q1),isect:sT(q1)};function Pne(e,t){e("d",Yd(null,t))}function Ine(e,t){var n,i;return mo(e.set(n=t.x||0,i=t.y||0,n+t.width||0,i+t.height||0),t)}function GN(e,t){e.beginPath(),Yd(e,t)}var qne={type:"rect",tag:"path",nested:!1,attr:Pne,bound:Ine,draw:lT(GN),pick:cT(GN),isect:cU};function Hne(e,t){e("transform",gU(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function Gne(e,t){var n,i;return mo(e.set(n=t.x||0,i=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:i),t)}function vU(e,t,n){var i,r,a,s;return t.stroke&&fd(e,t,n)?(i=t.x||0,r=t.y||0,a=t.x2!=null?t.x2:i,s=t.y2!=null?t.y2:r,e.beginPath(),e.moveTo(i,r),e.lineTo(a,s),!0):!1}function Yne(e,t,n){ya(t,i=>{if(!(n&&!n.intersects(i.bounds))){var r=i.opacity==null?1:i.opacity;r&&vU(e,i,r)&&(cd(e,i),e.stroke())}})}function Xne(e,t,n,i){return e.isPointInStroke?vU(e,t,1)&&e.isPointInStroke(n,i):!1}var Vne={type:"rule",tag:"line",nested:!1,attr:Hne,bound:Gne,draw:Yne,pick:_b(Xne),isect:fU},Wne=dT("shape",nne),Qne=dT("symbol",ine,oT);const YN=A8();var or={height:ds,measureWidth:yT,estimateWidth:My,width:My,canvas:bU};bU(!0);function bU(e){or.width=e&&vu?yT:My}function My(e,t){return xU($u(e,t),ds(e))}function xU(e,t){return~~(.8*e.length*t)}function yT(e,t){return ds(e)<=0||!(t=$u(e,t))?0:EU(t,Cb(e))}function EU(e,t){const n=`(${t}) ${e}`;let i=YN.get(n);return i===void 0&&(vu.font=t,i=vu.measureText(e).width,YN.set(n,i)),i}function ds(e){return e.fontSize!=null?+e.fontSize||0:11}function Cu(e){return e.lineHeight!=null?e.lineHeight:ds(e)+2}function Zne(e){return oe(e)?e.length>1?e:e[0]:e}function o0(e){return Zne(e.lineBreak&&e.text&&!oe(e.text)?e.text.split(e.lineBreak):e.text)}function vT(e){const t=o0(e);return(oe(t)?t.length-1:0)*Cu(e)}function $u(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?Jne(e,n):n}function Kne(e){if(or.width===yT){const t=Cb(e);return n=>EU(n,t)}else if(or.width===My){const t=ds(e);return n=>xU(n,t)}else return t=>or.width(e,t)}function Jne(e,t){var n=+e.limit,i=Kne(e);if(i(t)<n)return t;var r=e.ellipsis||"",a=e.dir==="rtl",s=0,o=t.length,l;if(n-=i(r),a){for(;s<o;)l=s+o>>>1,i(t.slice(l))>n?s=l+1:o=l;return r+t.slice(s)}else{for(;s<o;)l=1+(s+o>>>1),i(t.slice(0,l))<n?s=l:o=l-1;return t.slice(0,s)+r}}function u0(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function Cb(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+ds(e)+"px "+u0(e,t)}function bT(e){var t=e.baseline,n=ds(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*Cu(e):t==="line-bottom"?.29*n-.5*Cu(e):0)}const eie={left:"start",center:"middle",right:"end"},Jg=new un;function $b(e){var t=e.x||0,n=e.y||0,i=e.radius||0,r;return i&&(r=(e.theta||0)-Nl,t+=i*Math.cos(r),n+=i*Math.sin(r)),Jg.x1=t,Jg.y1=n,Jg}function tie(e,t){var n=t.dx||0,i=(t.dy||0)+bT(t),r=$b(t),a=r.x1,s=r.y1,o=t.angle||0,l;e("text-anchor",eie[t.align]||"start"),o?(l=Gl(a,s)+" "+fT(o),(n||i)&&(l+=" "+Gl(n,i))):l=Gl(a+n,s+i),e("transform",l)}function xT(e,t,n){var i=or.height(t),r=t.align,a=$b(t),s=a.x1,o=a.y1,l=t.dx||0,f=(t.dy||0)+bT(t)-Math.round(.8*i),d=o0(t),h;if(oe(d)?(i+=Cu(t)*(d.length-1),h=d.reduce((p,y)=>Math.max(p,or.width(t,y)),0)):h=or.width(t,d),r==="center"?l-=h/2:r==="right"&&(l-=h),e.set(l+=s,f+=o,l+h,f+i),t.angle&&!n)e.rotate(t.angle*Au,s,o);else if(n===2)return e.rotatedPoints(t.angle*Au,s,o);return e}function nie(e,t,n){ya(t,i=>{var r=i.opacity==null?1:i.opacity,a,s,o,l,f,d,h;if(!(n&&!n.intersects(i.bounds)||r===0||i.fontSize<=0||i.text==null||i.text.length===0)){if(e.font=Cb(i),e.textAlign=i.align||"left",a=$b(i),s=a.x1,o=a.y1,i.angle&&(e.save(),e.translate(s,o),e.rotate(i.angle*Au),s=o=0),s+=i.dx||0,o+=(i.dy||0)+bT(i),d=o0(i),cd(e,i),oe(d))for(f=Cu(i),l=0;l<d.length;++l)h=$u(i,d[l]),i.fill&&$y(e,i,r)&&e.fillText(h,s,o),i.stroke&&fd(e,i,r)&&e.strokeText(h,s,o),o+=f;else h=$u(i,d),i.fill&&$y(e,i,r)&&e.fillText(h,s,o),i.stroke&&fd(e,i,r)&&e.strokeText(h,s,o);i.angle&&e.restore()}})}function iie(e,t,n,i,r,a){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var s=$b(t),o=s.x1,l=s.y1,f=xT(Jg,t,1),d=-t.angle*Au,h=Math.cos(d),p=Math.sin(d),y=h*r-p*a+(o-h*o+p*l),v=p*r+h*a+(l-p*o-h*l);return f.contains(y,v)}function rie(e,t){const n=xT(Jg,e,2);return Ff(t,n[0],n[1],n[2],n[3])||Ff(t,n[0],n[1],n[4],n[5])||Ff(t,n[4],n[5],n[6],n[7])||Ff(t,n[2],n[3],n[6],n[7])}var aie={type:"text",tag:"text",nested:!1,attr:tie,bound:xT,draw:nie,pick:_b(iie),isect:rie},sie=hT("trail",rne,vne),dr={arc:pne,area:bne,group:Rne,image:Fne,line:Lne,path:jne,rect:qne,rule:Vne,shape:Wne,symbol:Qne,text:aie,trail:sie};function ww(e,t,n){var i=dr[e.mark.marktype],r=t||i.bound;return i.nested&&(e=e.mark),r(e.bounds||(e.bounds=new un),e,n)}var XN={mark:null};function SU(e,t,n){var i=dr[e.marktype],r=i.bound,a=e.items,s=a&&a.length,o,l,f,d;if(i.nested)return s?f=a[0]:(XN.mark=e,f=XN),d=ww(f,r,n),t=t&&t.union(d)||d,t;if(t=t||e.bounds&&e.bounds.clear()||new un,s)for(o=0,l=a.length;o<l;++o)t.union(ww(a[o],r,n));return e.bounds=t}const oie=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function _U(e,t){return JSON.stringify(e,oie,t)}function wU(e){const t=typeof e=="string"?JSON.parse(e):e;return AU(t)}function AU(e){var t=e.marktype,n=e.items,i,r,a;if(n)for(r=0,a=n.length;r<a;++r)i=t?"mark":"group",n[r][i]=e,n[r].zindex&&(n[r][i].zdirty=!0),(t||i)==="group"&&AU(n[r]);return t&&SU(e),e}class CU{constructor(t){arguments.length?this.root=wU(t):(this.root=VN({marktype:"group",name:"root",role:"frame"}),this.root.items=[new Eb(this.root)])}toJSON(t){return _U(this.root,t||0)}mark(t,n,i){n=n||this.root.items[0];const r=VN(t,n);return n.items[i]=r,r.zindex&&(r.group.zdirty=!0),r}}function VN(e,t){const n={bounds:new un,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function su(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function ET(e,t){t=t.toLowerCase();for(var n=e.childNodes,i=0,r=n.length;i<r;++i)if(n[i].tagName.toLowerCase()===t)return n[i]}function dn(e,t,n,i){var r=e.childNodes[t],a;return(!r||r.tagName.toLowerCase()!==n.toLowerCase())&&(a=r||null,r=su(e.ownerDocument,n,i),e.insertBefore(r,a)),r}function Or(e,t){for(var n=e.childNodes,i=n.length;i>t;)e.removeChild(n[--i]);return e}function $U(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function Tb(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function uie(e,t,n,i){var r=e&&e.mark,a,s;if(r&&(a=dr[r.marktype]).tip){for(s=Tb(t,n),s[0]-=i[0],s[1]-=i[1];e=e.mark.group;)s[0]-=e.x||0,s[1]-=e.y||0;e=a.tip(r.items,s)}return e}let ST=class{constructor(t,n){this._active=null,this._handlers={},this._loader=t||Xv(),this._tooltip=n||lie}initialize(t,n,i){return this._el=t,this._obj=i||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()}scene(t){return arguments.length?(this._scene=t,this):this._scene}on(){}off(){}_handlerIndex(t,n,i){for(let r=t?t.length:0;--r>=0;)if(t[r].type===n&&(!i||t[r].handler===i))return r;return-1}handlers(t){const n=this._handlers,i=[];if(t)i.push(...n[this.eventName(t)]);else for(const r in n)i.push(...n[r]);return i}eventName(t){const n=t.indexOf(".");return n<0?t:t.slice(0,n)}handleHref(t,n,i){this._loader.sanitize(i,{context:"href"}).then(r=>{const a=new MouseEvent(t.type,t),s=su(null,"a");for(const o in r)s.setAttribute(o,r[o]);s.dispatchEvent(a)}).catch(()=>{})}handleTooltip(t,n,i){if(n&&n.tooltip!=null){n=uie(n,t,this.canvas(),this._origin);const r=i&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,t,n,r)}}getItemBoundingClientRect(t){const n=this.canvas();if(!n)return;const i=n.getBoundingClientRect(),r=this._origin,a=t.bounds,s=a.width(),o=a.height();let l=a.x1+r[0]+i.left,f=a.y1+r[1]+i.top;for(;t.mark&&(t=t.mark.group);)l+=t.x||0,f+=t.y||0;return{x:l,y:f,width:s,height:o,left:l,top:f,right:l+s,bottom:f+o}}};function lie(e,t,n,i){e.element().setAttribute("title",i||"")}class l0{constructor(t){this._el=null,this._bgcolor=null,this._loader=new lU(t)}initialize(t,n,i,r,a){return this._el=t,this.resize(n,i,r,a)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)}resize(t,n,i,r){return this._width=t,this._height=n,this._origin=i||[0,0],this._scale=r||1,this}dirty(){}render(t,n){const i=this;return i._call=function(){i._render(t,n)},i._call(),i._call=null,i}_render(){}renderAsync(t,n){const i=this.render(t,n);return this._ready?this._ready.then(()=>i):Promise.resolve(i)}_load(t,n){var i=this,r=i._loader[t](n);if(!i._ready){const a=i._call;i._ready=i._loader.ready().then(s=>{s&&a(),i._ready=null})}return r}sanitizeURL(t){return this._load("sanitizeURL",t)}loadImage(t){return this._load("loadImage",t)}}const cie="keydown",fie="keypress",die="keyup",TU="dragenter",H1="dragleave",MU="dragover",Aw="pointerdown",hie="pointerup",ky="pointermove",G1="pointerout",kU="pointerover",Cw="mousedown",gie="mouseup",OU="mousemove",Oy="mouseout",RU="mouseover",Ry="click",pie="dblclick",mie="wheel",DU="mousewheel",Dy="touchstart",Ny="touchmove",zy="touchend",yie=[cie,fie,die,TU,H1,MU,Aw,hie,ky,G1,kU,Cw,gie,OU,Oy,RU,Ry,pie,mie,DU,Dy,Ny,zy],$w=ky,ep=Oy,Tw=Ry;class c0 extends ST{constructor(t,n){super(t,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=yie,this.pointermove=QN([ky,OU],[kU,RU],[G1,Oy]),this.dragover=QN([MU],[TU],[H1]),this.pointerout=ZN([G1,Oy]),this.dragleave=ZN([H1])}initialize(t,n,i){return this._canvas=t&&ET(t,"canvas"),[Ry,Cw,Aw,ky,G1,H1].forEach(r=>WN(this,r)),super.initialize(t,n,i)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(t){this.fire(DU,t)}pointerdown(t){this._down=this._active,this.fire(Aw,t)}mousedown(t){this._down=this._active,this.fire(Cw,t)}click(t){this._down===this._active&&(this.fire(Ry,t),this._down=null)}touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(Dy,t,!0)}touchmove(t){this.fire(Ny,t,!0)}touchend(t){this.fire(zy,t,!0),this._touch=null}fire(t,n,i){const r=i?this._touch:this._active,a=this._handlers[t];if(n.vegaType=t,t===Tw&&r&&r.href?this.handleHref(n,r,r.href):(t===$w||t===ep)&&this.handleTooltip(n,r,t!==ep),a)for(let s=0,o=a.length;s<o;++s)a[s].handler.call(this._obj,n,r)}on(t,n){const i=this.eventName(t),r=this._handlers;return this._handlerIndex(r[i],t,n)<0&&(WN(this,t),(r[i]||(r[i]=[])).push({type:t,handler:n})),this}off(t,n){const i=this.eventName(t),r=this._handlers[i],a=this._handlerIndex(r,t,n);return a>=0&&r.splice(a,1),this}pickEvent(t){const n=Tb(t,this._canvas),i=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-i[0],n[1]-i[1])}pick(t,n,i,r,a){const s=this.context();return dr[t.marktype].pick.call(this,s,t,n,i,r,a)}}const vie=e=>e===Dy||e===Ny||e===zy?[Dy,Ny,zy]:[e];function WN(e,t){vie(t).forEach(n=>bie(e,n))}function bie(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?i=>e[t](i):i=>e.fire(t,i)))}function Ug(e,t,n){t.forEach(i=>e.fire(i,n))}function QN(e,t,n){return function(i){const r=this._active,a=this.pickEvent(i);a===r?Ug(this,e,i):((!r||!r.exit)&&Ug(this,n,i),this._active=a,Ug(this,t,i),Ug(this,e,i))}}function ZN(e){return function(t){Ug(this,e,t),this._active=null}}function xie(){return typeof window<"u"&&window.devicePixelRatio||1}function Eie(e,t,n,i,r,a){const s=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,o=e.getContext("2d"),l=s?xie():r;e.width=t*l,e.height=n*l;for(const f in a)o[f]=a[f];return s&&l!==1&&(e.style.width=t+"px",e.style.height=n+"px"),o.pixelRatio=l,o.setTransform(l,0,0,l,l*i[0],l*i[1]),e}class Fy extends l0{constructor(t){super(t),this._options={},this._redraw=!1,this._dirty=new un,this._tempb=new un}initialize(t,n,i,r,a,s){return this._options=s||{},this._canvas=this._options.externalContext?null:yu(1,1,this._options.type),t&&this._canvas&&(Or(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(t,n,i,r,a)}resize(t,n,i,r){if(super.resize(t,n,i,r),this._canvas)Eie(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const a=this._options.externalContext;a||ie("CanvasRenderer is missing a valid canvas or context"),a.scale(this._scale,this._scale),a.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(t){const n=this._tempb.clear().union(t.bounds);let i=t.mark.group;for(;i;)n.translate(i.x||0,i.y||0),i=i.mark.group;this._dirty.union(n)}_render(t,n){const i=this.context(),r=this._origin,a=this._width,s=this._height,o=this._dirty,l=Sie(r,a,s);i.save();const f=this._redraw||o.empty()?(this._redraw=!1,l.expand(1)):_ie(i,l.intersect(o),r);return this.clear(-r[0],-r[1],a,s),this.draw(i,t,f,n),i.restore(),o.clear(),this}draw(t,n,i,r){if(n.marktype!=="group"&&r!=null&&!r.includes(n.marktype))return;const a=dr[n.marktype];n.clip&&xne(t,n),a.draw.call(this,t,n,i,r),n.clip&&t.restore()}clear(t,n,i,r){const a=this._options,s=this.context();a.type!=="pdf"&&!a.externalContext&&s.clearRect(t,n,i,r),this._bgcolor!=null&&(s.fillStyle=this._bgcolor,s.fillRect(t,n,i,r))}}const Sie=(e,t,n)=>new un().set(0,0,t,n).translate(-e[0],-e[1]);function _ie(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}class NU extends ST{constructor(t,n){super(t,n);const i=this;i._hrefHandler=TS(i,(r,a)=>{a&&a.href&&i.handleHref(r,a,a.href)}),i._tooltipHandler=TS(i,(r,a)=>{i.handleTooltip(r,a,r.type!==ep)})}initialize(t,n,i){let r=this._svg;return r&&(r.removeEventListener(Tw,this._hrefHandler),r.removeEventListener($w,this._tooltipHandler),r.removeEventListener(ep,this._tooltipHandler)),this._svg=r=t&&ET(t,"svg"),r&&(r.addEventListener(Tw,this._hrefHandler),r.addEventListener($w,this._tooltipHandler),r.addEventListener(ep,this._tooltipHandler)),super.initialize(t,n,i)}canvas(){return this._svg}on(t,n){const i=this.eventName(t),r=this._handlers;if(this._handlerIndex(r[i],t,n)<0){const s={type:t,handler:n,listener:TS(this,n)};(r[i]||(r[i]=[])).push(s),this._svg&&this._svg.addEventListener(i,s.listener)}return this}off(t,n){const i=this.eventName(t),r=this._handlers[i],a=this._handlerIndex(r,t,n);return a>=0&&(this._svg&&this._svg.removeEventListener(i,r[a].listener),r.splice(a,1)),this}}const TS=(e,t)=>n=>{let i=n.target.__data__;i=Array.isArray(i)?i[0]:i,n.vegaType=n.type,t.call(e._obj,n,i)},zU="aria-hidden",_T="aria-label",wT="role",AT="aria-roledescription",FU="graphics-object",CT="graphics-symbol",LU=(e,t,n)=>({[wT]:e,[AT]:t,[_T]:n||void 0}),wie=pa(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),KN={axis:{desc:"axis",caption:$ie},legend:{desc:"legend",caption:Tie},"title-text":{desc:"title",caption:e=>`Title text '${e6(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${e6(e)}'`}},JN={ariaRole:wT,ariaRoleDescription:AT,description:_T};function UU(e,t){const n=t.aria===!1;if(e(zU,n||void 0),n||t.description==null)for(const i in JN)e(JN[i],void 0);else{const i=t.mark.marktype;e(_T,t.description),e(wT,t.ariaRole||(i==="group"?FU:CT)),e(AT,t.ariaRoleDescription||`${i} mark`)}}function BU(e){return e.aria===!1?{[zU]:!0}:wie[e.role]?null:KN[e.role]?Cie(e,KN[e.role]):Aie(e)}function Aie(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(i=>i.description!=null&&i.aria!==!1);return LU(n?FU:CT,`${t} mark container`,e.description)}function Cie(e,t){try{const n=e.items[0],i=t.caption||(()=>"");return LU(t.role||CT,t.desc,n.description||i(n))}catch{return null}}function e6(e){return Se(e.text).join(" ")}function $ie(e){const t=e.datum,n=e.orient,i=t.title?jU(e):null,r=e.context,a=r.scales[t.scale].value,s=r.dataflow.locale(),o=a.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(i?` titled '${i}'`:"")+` for a ${ud(o)?"discrete":o} scale with ${JL(s,a,e)}`}function Tie(e){const t=e.datum,n=t.title?jU(e):null,i=`${t.type||""} legend`.trim(),r=t.scales,a=Object.keys(r),s=e.context,o=s.scales[r[a[0]]].value,l=s.dataflow.locale();return kie(i)+(n?` titled '${n}'`:"")+` for ${Mie(a)} with ${JL(l,o,e)}`}function jU(e){try{return Se(st(e.items).items[0].text).join(" ")}catch{return null}}function Mie(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+st(e)}function kie(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const PU=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),Oie=e=>PU(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function $T(){let e="",t="",n="";const i=[],r=()=>t=n="",a=l=>{t&&(e+=`${t}>${n}`,r()),i.push(l)},s=(l,f)=>(f!=null&&(t+=` ${l}="${Oie(f)}"`),o),o={open(l){a(l),t="<"+l;for(var f=arguments.length,d=new Array(f>1?f-1:0),h=1;h<f;h++)d[h-1]=arguments[h];for(const p of d)for(const y in p)s(y,p[y]);return o},close(){const l=i.pop();return t?e+=t+(n?`>${n}</${l}>`:"/>"):e+=`</${l}>`,r(),o},attr:s,text:l=>(n+=PU(l),o),toString:()=>e};return o}const IU=e=>qU($T(),e)+"";function qU(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,i=n.length;for(let r=0;r<i;++r)e.attr(n[r].name,n[r].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const i of n)i.nodeType===3?e.text(i.nodeValue):qU(e,i)}return e.close()}const Ly={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},Uy={blend:"mix-blend-mode"},HU={fill:"none","stroke-miterlimit":10},pg=0,t6="http://www.w3.org/2000/xmlns/",fn=_p.xmlns;class TT extends l0{constructor(t){super(t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(t,n,i,r,a){return this._defs={},this._clearDefs(),t&&(this._svg=dn(t,0,"svg",fn),this._svg.setAttributeNS(t6,"xmlns",fn),this._svg.setAttributeNS(t6,"xmlns:xlink",_p["xmlns:xlink"]),this._svg.setAttribute("version",_p.version),this._svg.setAttribute("class","marks"),Or(t,1),this._root=dn(this._svg,pg,"g",fn),ou(this._root,HU),Or(this._svg,pg+1)),this.background(this._bgcolor),super.initialize(t,n,i,r,a)}background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),super.background(...arguments)}resize(t,n,i,r){return super.resize(t,n,i,r),this._svg&&(ou(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){const t=this._svg,n=this._bgcolor;if(!t)return null;let i;n&&(t.removeAttribute("style"),i=dn(t,pg,"rect",fn),ou(i,{width:this._width,height:this._height,fill:n}));const r=IU(t);return n&&(t.removeChild(i),this._svg.style.setProperty("background-color",n)),r}_render(t,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t,void 0,n),Or(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))}isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const n=++this._dirtyID;let i,r,a,s,o,l,f;for(o=0,l=t.length;o<l;++o)if(i=t[o],r=i.mark,r.marktype!==a&&(a=r.marktype,s=dr[a]),r.zdirty&&r.dirty!==n&&(this._dirtyAll=!1,n6(i,n),r.items.forEach(d=>{d.dirty=n})),!r.zdirty){if(i.exit){s.nested&&r.items.length?(f=r.items[0],f._svg&&this._update(s,f._svg,f)):i._svg&&(f=i._svg.parentNode,f&&f.removeChild(i._svg)),i._svg=null;continue}i=s.nested?r.items[0]:i,i._update!==n&&(!i._svg||!i._svg.ownerSVGElement?(this._dirtyAll=!1,n6(i,n)):this._update(s,i._svg,i),i._update=n)}return!this._dirtyAll}mark(t,n,i,r){if(!this.isDirty(n))return n._svg;const a=this._svg,s=n.marktype,o=dr[s],l=n.interactive===!1?"none":null,f=o.tag==="g",d=i6(n,t,i,"g",a);if(s!=="group"&&r!=null&&!r.includes(s))return Or(d,0),n._svg;d.setAttribute("class",$U(n));const h=BU(n);for(const b in h)gi(d,b,h[b]);f||gi(d,"pointer-events",l),gi(d,"clip-path",n.clip?aT(this,n,n.group):null);let p=null,y=0;const v=b=>{const E=this.isDirty(b),_=i6(b,d,p,o.tag,a);E&&(this._update(o,_,b),f&&Nie(this,_,b,r)),p=_,++y};return o.nested?n.items.length&&v(n.items[0]):ya(n,v),Or(d,y),d}_update(t,n,i){Js=n,ei=n.__values__,UU(tp,i),t.attr(tp,i,this);const r=Fie[t.type];r&&r.call(this,t,n,i),Js&&this.style(Js,i)}style(t,n){if(n!=null){for(const i in Ly){let r=i==="font"?u0(n):n[i];if(r===ei[i])continue;const a=Ly[i];r==null?t.removeAttribute(a):(nT(r)&&(r=tU(r,this._defs.gradient,GU())),t.setAttribute(a,r+"")),ei[i]=r}for(const i in Uy)Y1(t,Uy[i],n[i])}}defs(){const t=this._svg,n=this._defs;let i=n.el,r=0;for(const a in n.gradient)i||(n.el=i=dn(t,pg+1,"defs",fn)),r=Rie(i,n.gradient[a],r);for(const a in n.clipping)i||(n.el=i=dn(t,pg+1,"defs",fn)),r=Die(i,n.clipping[a],r);i&&(r===0?(t.removeChild(i),n.el=null):Or(i,r))}_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}}function n6(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function Rie(e,t,n){let i,r,a;if(t.gradient==="radial"){let s=dn(e,n++,"pattern",fn);ou(s,{id:Cy+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),s=dn(s,0,"rect",fn),ou(s,{width:1,height:1,fill:`url(${GU()}#${t.id})`}),e=dn(e,n++,"radialGradient",fn),ou(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=dn(e,n++,"linearGradient",fn),ou(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(i=0,r=t.stops.length;i<r;++i)a=dn(e,i,"stop",fn),a.setAttribute("offset",t.stops[i].offset),a.setAttribute("stop-color",t.stops[i].color);return Or(e,i),n}function Die(e,t,n){let i;return e=dn(e,n,"clipPath",fn),e.setAttribute("id",t.id),t.path?(i=dn(e,0,"path",fn),i.setAttribute("d",t.path)):(i=dn(e,0,"rect",fn),ou(i,{x:0,y:0,width:t.width,height:t.height})),Or(e,1),n+1}function Nie(e,t,n,i){t=t.lastChild.previousSibling;let r,a=0;ya(n,s=>{r=e.mark(t,s,r,i),++a}),Or(t,1+a)}function i6(e,t,n,i,r){let a=e._svg,s;if(!a&&(s=t.ownerDocument,a=su(s,i,fn),e._svg=a,e.mark&&(a.__data__=e,a.__values__={fill:"default"},i==="g"))){const o=su(s,"path",fn);a.appendChild(o),o.__data__=e;const l=su(s,"g",fn);a.appendChild(l),l.__data__=e;const f=su(s,"path",fn);a.appendChild(f),f.__data__=e,f.__values__={fill:"default"}}return(a.ownerSVGElement!==r||zie(a,n))&&t.insertBefore(a,n?n.nextSibling:t.firstChild),a}function zie(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let Js=null,ei=null;const Fie={group(e,t,n){const i=Js=t.childNodes[2];ei=i.__values__,e.foreground(tp,n,this),ei=t.__values__,Js=t.childNodes[1],e.content(tp,n,this);const r=Js=t.childNodes[0];e.background(tp,n,this);const a=n.mark.interactive===!1?"none":null;if(a!==ei.events&&(gi(i,"pointer-events",a),gi(r,"pointer-events",a),ei.events=a),n.strokeForeground&&n.stroke){const s=n.fill;gi(i,"display",null),this.style(r,n),gi(r,"stroke",null),s&&(n.fill=null),ei=i.__values__,this.style(i,n),s&&(n.fill=s),Js=null}else gi(i,"display","none")},image(e,t,n){n.smooth===!1?(Y1(t,"image-rendering","optimizeSpeed"),Y1(t,"image-rendering","pixelated")):Y1(t,"image-rendering",null)},text(e,t,n){const i=o0(n);let r,a,s,o;oe(i)?(a=i.map(l=>$u(n,l)),r=a.join(`
`),r!==ei.text&&(Or(t,0),s=t.ownerDocument,o=Cu(n),a.forEach((l,f)=>{const d=su(s,"tspan",fn);d.__data__=n,d.textContent=l,f&&(d.setAttribute("x",0),d.setAttribute("dy",o)),t.appendChild(d)}),ei.text=r)):(a=$u(n,i),a!==ei.text&&(t.textContent=a,ei.text=a)),gi(t,"font-family",u0(n)),gi(t,"font-size",ds(n)+"px"),gi(t,"font-style",n.fontStyle),gi(t,"font-variant",n.fontVariant),gi(t,"font-weight",n.fontWeight)}};function tp(e,t,n){t!==ei[e]&&(n?Lie(Js,e,t,n):gi(Js,e,t),ei[e]=t)}function Y1(e,t,n){n!==ei[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),ei[t]=n)}function ou(e,t){for(const n in t)gi(e,n,t[n])}function gi(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function Lie(e,t,n,i){n!=null?e.setAttributeNS(i,t,n):e.removeAttributeNS(i,t)}function GU(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}class YU extends l0{constructor(t){super(t),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(t){const n=$T();n.open("svg",Ge({},_p,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const i=this._bgcolor;return i&&i!=="transparent"&&i!=="none"&&n.open("rect",{width:this._width,height:this._height,fill:i}).close(),n.open("g",HU,{transform:"translate("+this._origin+")"}),this.mark(n,t),n.close(),this.defs(n),this._text=n.close()+"",this}mark(t,n){const i=dr[n.marktype],r=i.tag,a=[UU,i.attr];t.open("g",{class:$U(n),"clip-path":n.clip?aT(this,n,n.group):null},BU(n),{"pointer-events":r!=="g"&&n.interactive===!1?"none":null});const s=o=>{const l=this.href(o);if(l&&t.open("a",l),t.open(r,this.attr(n,o,a,r!=="g"?r:null)),r==="text"){const f=o0(o);if(oe(f)){const d={x:0,dy:Cu(o)};for(let h=0;h<f.length;++h)t.open("tspan",h?d:null).text($u(o,f[h])).close()}else t.text($u(o,f))}else if(r==="g"){const f=o.strokeForeground,d=o.fill,h=o.stroke;f&&h&&(o.stroke=null),t.open("path",this.attr(n,o,i.background,"bgrect")).close(),t.open("g",this.attr(n,o,i.content)),ya(o,p=>this.mark(t,p)),t.close(),f&&h?(d&&(o.fill=null),o.stroke=h,t.open("path",this.attr(n,o,i.foreground,"bgrect")).close(),d&&(o.fill=d)):t.open("path",this.attr(n,o,i.foreground,"bgfore")).close()}t.close(),l&&t.close()};return i.nested?n.items&&n.items.length&&s(n.items[0]):ya(n,s),t.close()}href(t){const n=t.href;let i;if(n){if(i=this._hrefs&&this._hrefs[n])return i;this.sanitizeURL(n).then(r=>{r["xlink:href"]=r.href,r.href=null,(this._hrefs||(this._hrefs={}))[n]=r})}return null}attr(t,n,i,r){const a={},s=(o,l,f,d)=>{a[d||o]=l};return Array.isArray(i)?i.forEach(o=>o(s,n,this)):i(s,n,this),r&&Uie(a,n,t,r,this._defs),a}defs(t){const n=this._defs.gradient,i=this._defs.clipping;if(Object.keys(n).length+Object.keys(i).length!==0){t.open("defs");for(const a in n){const s=n[a],o=s.stops;s.gradient==="radial"?(t.open("pattern",{id:Cy+a,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+a+")"}).close(),t.close(),t.open("radialGradient",{id:a,fx:s.x1,fy:s.y1,fr:s.r1,cx:s.x2,cy:s.y2,r:s.r2})):t.open("linearGradient",{id:a,x1:s.x1,x2:s.x2,y1:s.y1,y2:s.y2});for(let l=0;l<o.length;++l)t.open("stop",{offset:o[l].offset,"stop-color":o[l].color}).close();t.close()}for(const a in i){const s=i[a];t.open("clipPath",{id:a}),s.path?t.open("path",{d:s.path}).close():t.open("rect",{x:0,y:0,width:s.width,height:s.height}).close(),t.close()}t.close()}}}function Uie(e,t,n,i,r){let a;if(t==null||(i==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),i==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;i==="image"&&t.smooth===!1&&(a=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),i==="text"&&(e["font-family"]=u0(t),e["font-size"]=ds(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const s in Ly){let o=t[s];const l=Ly[s];o==="transparent"&&(l==="fill"||l==="stroke")||o!=null&&(nT(o)&&(o=tU(o,r.gradient,"")),e[l]=o)}for(const s in Uy){const o=t[s];o!=null&&(a=a||[],a.push(`${Uy[s]}: ${o};`))}return a&&(e.style=a.join(" ")),e}const ia={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function Bie(e){ia.svgMarkTypes=e.svgMarkTypes??["text"],ia.svgOnTop=e.svgOnTop??!0,ia.debug=e.debug??!1}class Mw extends l0{constructor(t){super(t),this._svgRenderer=new TT(t),this._canvasRenderer=new Fy(t)}initialize(t,n,i,r,a){this._root_el=dn(t,0,"div");const s=dn(this._root_el,0,"div"),o=dn(this._root_el,1,"div");return this._root_el.style.position="relative",ia.debug||(s.style.height="100%",o.style.position="absolute",o.style.top="0",o.style.left="0",o.style.height="100%",o.style.width="100%"),this._svgEl=ia.svgOnTop?o:s,this._canvasEl=ia.svgOnTop?s:o,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,i,r,a),this._svgRenderer.initialize(this._svgEl,n,i,r,a),super.initialize(t,n,i,r,a)}dirty(t){return ia.svgMarkTypes.includes(t.mark.marktype)?this._svgRenderer.dirty(t):this._canvasRenderer.dirty(t),this}_render(t,n){const r=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(a=>!ia.svgMarkTypes.includes(a));this._svgRenderer.render(t,ia.svgMarkTypes),this._canvasRenderer.render(t,r)}resize(t,n,i,r){return super.resize(t,n,i,r),this._svgRenderer.resize(t,n,i,r),this._canvasRenderer.resize(t,n,i,r),this}background(t){return ia.svgOnTop?this._canvasRenderer.background(t):this._svgRenderer.background(t),this}}class XU extends c0{constructor(t,n){super(t,n)}initialize(t,n,i){const r=dn(dn(t,0,"div"),ia.svgOnTop?0:1,"div");return super.initialize(r,n,i)}}const VU="canvas",WU="hybrid",QU="png",ZU="svg",KU="none",uu={Canvas:VU,PNG:QU,SVG:ZU,Hybrid:WU,None:KU},nc={};nc[VU]=nc[QU]={renderer:Fy,headless:Fy,handler:c0};nc[ZU]={renderer:TT,headless:YU,handler:NU};nc[WU]={renderer:Mw,headless:Mw,handler:XU};nc[KU]={};function Mb(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(nc[e]=t,this):nc[e]}function JU(e,t,n){const i=[],r=new un().union(t),a=e.marktype;return a?eB(e,r,n,i):a==="group"?tB(e,r,n,i):ie("Intersect scene must be mark node or group item.")}function eB(e,t,n,i){if(jie(e,t,n)){const r=e.items,a=e.marktype,s=r.length;let o=0;if(a==="group")for(;o<s;++o)tB(r[o],t,n,i);else for(const l=dr[a].isect;o<s;++o){const f=r[o];nB(f,t,l)&&i.push(f)}}return i}function jie(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function tB(e,t,n,i){n&&n(e.mark)&&nB(e,t,dr.group.isect)&&i.push(e);const r=e.items,a=r&&r.length;if(a){const s=e.x||0,o=e.y||0;t.translate(-s,-o);for(let l=0;l<a;++l)eB(r[l],t,n,i);t.translate(s,o)}return i}function nB(e,t,n){const i=e.bounds;return t.encloses(i)||t.intersects(i)&&n(e,t)}const MS=new un;function iB(e){const t=e.clip;if(Xe(t))t(a0(MS.clear()));else if(t)MS.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(MS)}const Pie=1e-9;function MT(e,t,n){return e===t?!0:n==="path"?rB(e,t):e instanceof Date&&t instanceof Date?+e==+t:dt(e)&&dt(t)?Math.abs(e-t)<=Pie:!e||!t||!Ee(e)&&!Ee(t)?e==t:Iie(e,t)}function rB(e,t){return MT(ld(e),ld(t))}function Iie(e,t){var n=Object.keys(e),i=Object.keys(t),r,a;if(n.length!==i.length)return!1;for(n.sort(),i.sort(),a=n.length-1;a>=0;a--)if(n[a]!=i[a])return!1;for(a=n.length-1;a>=0;a--)if(r=n[a],!MT(e[r],t[r],r))return!1;return typeof e==typeof t}function qie(){uU(),hte()}const dd="top",ua="left",la="right",Tu="bottom",Hie="top-left",Gie="top-right",Yie="bottom-left",Xie="bottom-right",kT="start",kw="middle",pi="end",Vie="x",Wie="y",kb="group",OT="axis",RT="title",Qie="frame",Zie="scope",DT="legend",aB="row-header",sB="row-footer",oB="row-title",uB="column-header",lB="column-footer",cB="column-title",Kie="padding",Jie="symbol",fB="fit",dB="fit-x",hB="fit-y",ere="pad",NT="none",n1="all",Ow="each",zT="flush",lu="column",cu="row";function gB(e){ee.call(this,null,e)}be(gB,ee,{transform(e,t){const n=t.dataflow,i=e.mark,r=i.marktype,a=dr[r],s=a.bound;let o=i.bounds,l;if(a.nested)i.items.length&&n.dirty(i.items[0]),o=i1(i,s),i.items.forEach(f=>{f.bounds.clear().union(o)});else if(r===kb||e.modified())switch(t.visit(t.MOD,f=>n.dirty(f)),o.clear(),i.items.forEach(f=>o.union(i1(f,s))),i.role){case OT:case DT:case RT:t.reflow()}else l=t.changed(t.REM),t.visit(t.ADD,f=>{o.union(i1(f,s))}),t.visit(t.MOD,f=>{l=l||o.alignsWith(f.bounds),n.dirty(f),o.union(i1(f,s))}),l&&(o.clear(),i.items.forEach(f=>o.union(f.bounds)));return iB(i),t.modifies("bounds")}});function i1(e,t,n){return t(e.bounds.clear(),e,n)}const r6=":vega_identifier:";function FT(e){ee.call(this,0,e)}FT.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};be(FT,ee,{transform(e,t){const n=tre(t.dataflow),i=e.as;let r=n.value;return t.visit(t.ADD,a=>a[i]=a[i]||++r),n.set(this.value=r),t}});function tre(e){return e._signals[r6]||(e._signals[r6]=e.add(0))}function pB(e){ee.call(this,null,e)}be(pB,ee,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,nre(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const i=n.marktype===kb?Eb:xb;return t.visit(t.ADD,r=>i.call(r,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function nre(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function mB(e){ee.call(this,null,e)}const a6={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((i,r)=>!r||!yB(n.bounds,i.bounds,t)?(n=i,1):i.opacity=0)}},yB=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),s6=(e,t)=>{for(var n=1,i=e.length,r=e[0].bounds,a;n<i;r=a,++n)if(yB(r,a=e[n].bounds,t))return!0},ire=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},rre=(e,t,n)=>{var i=e.range(),r=new un;return t===dd||t===Tu?r.set(i[0],-1/0,i[1],1/0):r.set(-1/0,i[0],1/0,i[1]),r.expand(n||1),a=>r.encloses(a.bounds)},o6=e=>(e.forEach(t=>t.opacity=1),e),u6=(e,t)=>e.reflow(t.modified()).modifies("opacity");be(mB,ee,{transform(e,t){const n=a6[e.method]||a6.parity,i=e.separation||0;let r=t.materialize(t.SOURCE).source,a,s;if(!r||!r.length)return;if(!e.method)return e.modified("method")&&(o6(r),t=u6(t,e)),t;if(r=r.filter(ire),!r.length)return;if(e.sort&&(r=r.slice().sort(e.sort)),a=o6(r),t=u6(t,e),a.length>=3&&s6(a,i)){do a=n(a,i);while(a.length>=3&&s6(a,i));a.length<3&&!st(r).opacity&&(a.length>1&&(st(a).opacity=0),st(r).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(s=rre(e.boundScale,e.boundOrient,+e.boundTolerance),r.forEach(l=>{s(l)||(l.opacity=0)}));const o=a[0].mark.bounds.clear();return r.forEach(l=>{l.opacity&&o.union(l.bounds)}),t}});function vB(e){ee.call(this,null,e)}be(vB,ee,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,i=>n.dirty(i)),t.fields&&t.fields.zindex){const i=t.source&&t.source[0];i&&(i.mark.zdirty=!0)}}});const Jn=new un;function Lf(e,t,n){return e[t]===n?0:(e[t]=n,1)}function are(e){var t=e.items[0].orient;return t===ua||t===la}function sre(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function ore(e,t,n,i){var r=t.items[0],a=r.datum,s=r.translate!=null?r.translate:.5,o=r.orient,l=sre(a),f=r.range,d=r.offset,h=r.position,p=r.minExtent,y=r.maxExtent,v=a.title&&r.items[l[2]].items[0],b=r.titlePadding,E=r.bounds,_=v&&vT(v),w=0,A=0,M,T;switch(Jn.clear().union(E),E.clear(),(M=l[0])>-1&&E.union(r.items[M].bounds),(M=l[1])>-1&&E.union(r.items[M].bounds),o){case dd:w=h||0,A=-d,T=Math.max(p,Math.min(y,-E.y1)),E.add(0,-T).add(f,0),v&&r1(e,v,T,b,_,0,-1,E);break;case ua:w=-d,A=h||0,T=Math.max(p,Math.min(y,-E.x1)),E.add(-T,0).add(0,f),v&&r1(e,v,T,b,_,1,-1,E);break;case la:w=n+d,A=h||0,T=Math.max(p,Math.min(y,E.x2)),E.add(0,0).add(T,f),v&&r1(e,v,T,b,_,1,1,E);break;case Tu:w=h||0,A=i+d,T=Math.max(p,Math.min(y,E.y2)),E.add(0,0).add(f,T),v&&r1(e,v,T,b,0,0,1,E);break;default:w=r.x,A=r.y}return mo(E.translate(w,A),r),Lf(r,"x",w+s)|Lf(r,"y",A+s)&&(r.bounds=Jn,e.dirty(r),r.bounds=E,e.dirty(r)),r.mark.bounds.clear().union(E)}function r1(e,t,n,i,r,a,s,o){const l=t.bounds;if(t.auto){const f=s*(n+r+i);let d=0,h=0;e.dirty(t),a?d=(t.x||0)-(t.x=f):h=(t.y||0)-(t.y=f),t.mark.bounds.clear().union(l.translate(-d,-h)),e.dirty(t)}o.union(l)}const l6=(e,t)=>Math.floor(Math.min(e,t)),c6=(e,t)=>Math.ceil(Math.max(e,t));function ure(e){var t=e.items,n=t.length,i=0,r,a;const s={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;i<n;++i)if(r=t[i],a=r.items,r.marktype===kb)switch(r.role){case OT:case DT:case RT:break;case aB:s.rowheaders.push(...a);break;case sB:s.rowfooters.push(...a);break;case uB:s.colheaders.push(...a);break;case lB:s.colfooters.push(...a);break;case oB:s.rowtitle=a[0];break;case cB:s.coltitle=a[0];break;default:s.marks.push(...a)}return s}function lre(e){return new un().set(0,0,e.width||0,e.height||0)}function cre(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function Ft(e,t,n){const i=Ee(e)?e[t]:e;return i??(n!==void 0?n:0)}function f6(e){return e<0?Math.ceil(-e):0}function bB(e,t,n){var i=!n.nodirty,r=n.bounds===zT?lre:cre,a=Jn.set(0,0,0,0),s=Ft(n.align,lu),o=Ft(n.align,cu),l=Ft(n.padding,lu),f=Ft(n.padding,cu),d=n.columns||t.length,h=d<=0?1:Math.ceil(t.length/d),p=t.length,y=Array(p),v=Array(d),b=0,E=Array(p),_=Array(h),w=0,A=Array(p),M=Array(p),T=Array(p),R,O,k,$,D,z,P,q,j,L,U;for(O=0;O<d;++O)v[O]=0;for(O=0;O<h;++O)_[O]=0;for(O=0;O<p;++O)z=t[O],D=T[O]=r(z),z.x=z.x||0,A[O]=0,z.y=z.y||0,M[O]=0,k=O%d,$=~~(O/d),b=Math.max(b,P=Math.ceil(D.x2)),w=Math.max(w,q=Math.ceil(D.y2)),v[k]=Math.max(v[k],P),_[$]=Math.max(_[$],q),y[O]=l+f6(D.x1),E[O]=f+f6(D.y1),i&&e.dirty(t[O]);for(O=0;O<p;++O)O%d===0&&(y[O]=0),O<d&&(E[O]=0);if(s===Ow)for(k=1;k<d;++k){for(U=0,O=k;O<p;O+=d)U<y[O]&&(U=y[O]);for(O=k;O<p;O+=d)y[O]=U+v[k-1]}else if(s===n1){for(U=0,O=0;O<p;++O)O%d&&U<y[O]&&(U=y[O]);for(O=0;O<p;++O)O%d&&(y[O]=U+b)}else for(s=!1,k=1;k<d;++k)for(O=k;O<p;O+=d)y[O]+=v[k-1];if(o===Ow)for($=1;$<h;++$){for(U=0,O=$*d,R=O+d;O<R;++O)U<E[O]&&(U=E[O]);for(O=$*d;O<R;++O)E[O]=U+_[$-1]}else if(o===n1){for(U=0,O=d;O<p;++O)U<E[O]&&(U=E[O]);for(O=d;O<p;++O)E[O]=U+w}else for(o=!1,$=1;$<h;++$)for(O=$*d,R=O+d;O<R;++O)E[O]+=_[$-1];for(j=0,O=0;O<p;++O)j=y[O]+(O%d?j:0),A[O]+=j-t[O].x;for(k=0;k<d;++k)for(L=0,O=k;O<p;O+=d)L+=E[O],M[O]+=L-t[O].y;if(s&&Ft(n.center,lu)&&h>1)for(O=0;O<p;++O)D=s===n1?b:v[O%d],j=D-T[O].x2-t[O].x-A[O],j>0&&(A[O]+=j/2);if(o&&Ft(n.center,cu)&&d!==1)for(O=0;O<p;++O)D=o===n1?w:_[~~(O/d)],L=D-T[O].y2-t[O].y-M[O],L>0&&(M[O]+=L/2);for(O=0;O<p;++O)a.union(T[O].translate(A[O],M[O]));switch(j=Ft(n.anchor,Vie),L=Ft(n.anchor,Wie),Ft(n.anchor,lu)){case pi:j-=a.width();break;case kw:j-=a.width()/2}switch(Ft(n.anchor,cu)){case pi:L-=a.height();break;case kw:L-=a.height()/2}for(j=Math.round(j),L=Math.round(L),a.clear(),O=0;O<p;++O)t[O].mark.bounds.clear();for(O=0;O<p;++O)z=t[O],z.x+=A[O]+=j,z.y+=M[O]+=L,a.union(z.mark.bounds.union(z.bounds.translate(A[O],M[O]))),i&&e.dirty(z);return a}function fre(e,t,n){var i=ure(t),r=i.marks,a=n.bounds===zT?dre:hre,s=n.offset,o=n.columns||r.length,l=o<=0?1:Math.ceil(r.length/o),f=l*o,d,h,p,y,v,b,E;const _=bB(e,r,n);_.empty()&&_.set(0,0,0,0),i.rowheaders&&(b=Ft(n.headerBand,cu,null),d=a1(e,i.rowheaders,r,o,l,-Ft(s,"rowHeader"),l6,0,a,"x1",0,o,1,b)),i.colheaders&&(b=Ft(n.headerBand,lu,null),h=a1(e,i.colheaders,r,o,o,-Ft(s,"columnHeader"),l6,1,a,"y1",0,1,o,b)),i.rowfooters&&(b=Ft(n.footerBand,cu,null),p=a1(e,i.rowfooters,r,o,l,Ft(s,"rowFooter"),c6,0,a,"x2",o-1,o,1,b)),i.colfooters&&(b=Ft(n.footerBand,lu,null),y=a1(e,i.colfooters,r,o,o,Ft(s,"columnFooter"),c6,1,a,"y2",f-o,1,o,b)),i.rowtitle&&(v=Ft(n.titleAnchor,cu),E=Ft(s,"rowTitle"),E=v===pi?p+E:d-E,b=Ft(n.titleBand,cu,.5),d6(e,i.rowtitle,E,0,_,b)),i.coltitle&&(v=Ft(n.titleAnchor,lu),E=Ft(s,"columnTitle"),E=v===pi?y+E:h-E,b=Ft(n.titleBand,lu,.5),d6(e,i.coltitle,E,1,_,b))}function dre(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function hre(e,t){return e.bounds[t]}function a1(e,t,n,i,r,a,s,o,l,f,d,h,p,y){var v=n.length,b=0,E=0,_,w,A,M,T,R,O,k,$;if(!v)return b;for(_=d;_<v;_+=h)n[_]&&(b=s(b,l(n[_],f)));if(!t.length)return b;for(t.length>r&&(e.warn("Grid headers exceed limit: "+r),t=t.slice(0,r)),b+=a,w=0,M=t.length;w<M;++w)e.dirty(t[w]),t[w].mark.bounds.clear();for(_=d,w=0,M=t.length;w<M;++w,_+=h){for(R=t[w],T=R.mark.bounds,A=_;A>=0&&(O=n[A])==null;A-=p);o?(k=y==null?O.x:Math.round(O.bounds.x1+y*O.bounds.width()),$=b):(k=b,$=y==null?O.y:Math.round(O.bounds.y1+y*O.bounds.height())),T.union(R.bounds.translate(k-(R.x||0),$-(R.y||0))),R.x=k,R.y=$,e.dirty(R),E=s(E,T[f])}return E}function d6(e,t,n,i,r,a){if(t){e.dirty(t);var s=n,o=n;i?s=Math.round(r.x1+a*r.width()):o=Math.round(r.y1+a*r.height()),t.bounds.translate(s-(t.x||0),o-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=s,t.y=o,e.dirty(t)}}function gre(e,t){const n=e[t]||{};return(i,r)=>n[i]!=null?n[i]:e[i]!=null?e[i]:r}function pre(e,t){let n=-1/0;return e.forEach(i=>{i.offset!=null&&(n=Math.max(n,i.offset))}),n>-1/0?n:t}function mre(e,t,n,i,r,a,s){const o=gre(n,t),l=pre(e,o("offset",0)),f=o("anchor",kT),d=f===pi?1:f===kw?.5:0,h={align:Ow,bounds:o("bounds",zT),columns:o("direction")==="vertical"?1:e.length,padding:o("margin",8),center:o("center"),nodirty:!0};switch(t){case ua:h.anchor={x:Math.floor(i.x1)-l,column:pi,y:d*(s||i.height()+2*i.y1),row:f};break;case la:h.anchor={x:Math.ceil(i.x2)+l,y:d*(s||i.height()+2*i.y1),row:f};break;case dd:h.anchor={y:Math.floor(r.y1)-l,row:pi,x:d*(a||r.width()+2*r.x1),column:f};break;case Tu:h.anchor={y:Math.ceil(r.y2)+l,x:d*(a||r.width()+2*r.x1),column:f};break;case Hie:h.anchor={x:l,y:l};break;case Gie:h.anchor={x:a-l,y:l,column:pi};break;case Yie:h.anchor={x:l,y:s-l,row:pi};break;case Xie:h.anchor={x:a-l,y:s-l,column:pi,row:pi};break}return h}function yre(e,t){var n=t.items[0],i=n.datum,r=n.orient,a=n.bounds,s=n.x,o=n.y,l,f;return n._bounds?n._bounds.clear().union(a):n._bounds=a.clone(),a.clear(),bre(e,n,n.items[0].items[0]),a=vre(n,a),l=2*n.padding,f=2*n.padding,a.empty()||(l=Math.ceil(a.width()+l),f=Math.ceil(a.height()+f)),i.type===Jie&&xre(n.items[0].items[0].items[0].items),r!==NT&&(n.x=s=0,n.y=o=0),n.width=l,n.height=f,mo(a.set(s,o,s+l,o+f),n),n.mark.bounds.clear().union(a),n}function vre(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function bre(e,t,n){var i=t.padding,r=i-n.x,a=i-n.y;if(!t.datum.title)(r||a)&&mg(e,n,r,a);else{var s=t.items[1].items[0],o=s.anchor,l=t.titlePadding||0,f=i-s.x,d=i-s.y;switch(s.orient){case ua:r+=Math.ceil(s.bounds.width())+l;break;case la:case Tu:break;default:a+=s.bounds.height()+l}switch((r||a)&&mg(e,n,r,a),s.orient){case ua:d+=_f(t,n,s,o,1,1);break;case la:f+=_f(t,n,s,pi,0,0)+l,d+=_f(t,n,s,o,1,1);break;case Tu:f+=_f(t,n,s,o,0,0),d+=_f(t,n,s,pi,-1,0,1)+l;break;default:f+=_f(t,n,s,o,0,0)}(f||d)&&mg(e,s,f,d),(f=Math.round(s.bounds.x1-i))<0&&(mg(e,n,-f,0),mg(e,s,-f,0))}}function _f(e,t,n,i,r,a,s){const o=e.datum.type!=="symbol",l=n.datum.vgrad,f=o&&(a||!l)&&!s?t.items[0]:t,d=f.bounds[r?"y2":"x2"]-e.padding,h=l&&a?d:0,p=l&&a?0:d,y=r<=0?0:vT(n);return Math.round(i===kT?h:i===pi?p-y:.5*(d-y))}function mg(e,t,n,i){t.x+=n,t.y+=i,t.bounds.translate(n,i),t.mark.bounds.translate(n,i),e.dirty(t)}function xre(e){const t=e.reduce((n,i)=>(n[i.column]=Math.max(i.bounds.x2-i.x,n[i.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function Ere(e,t,n,i,r){var a=t.items[0],s=a.frame,o=a.orient,l=a.anchor,f=a.offset,d=a.padding,h=a.items[0].items[0],p=a.items[1]&&a.items[1].items[0],y=o===ua||o===la?i:n,v=0,b=0,E=0,_=0,w=0,A;if(s!==kb?o===ua?(v=r.y2,y=r.y1):o===la?(v=r.y1,y=r.y2):(v=r.x1,y=r.x2):o===ua&&(v=i,y=0),A=l===kT?v:l===pi?y:(v+y)/2,p&&p.text){switch(o){case dd:case Tu:w=h.bounds.height()+d;break;case ua:_=h.bounds.width()+d;break;case la:_=-h.bounds.width()-d;break}Jn.clear().union(p.bounds),Jn.translate(_-(p.x||0),w-(p.y||0)),Lf(p,"x",_)|Lf(p,"y",w)&&(e.dirty(p),p.bounds.clear().union(Jn),p.mark.bounds.clear().union(Jn),e.dirty(p)),Jn.clear().union(p.bounds)}else Jn.clear();switch(Jn.union(h.bounds),o){case dd:b=A,E=r.y1-Jn.height()-f;break;case ua:b=r.x1-Jn.width()-f,E=A;break;case la:b=r.x2+Jn.width()+f,E=A;break;case Tu:b=A,E=r.y2+f;break;default:b=a.x,E=a.y}return Lf(a,"x",b)|Lf(a,"y",E)&&(Jn.translate(b,E),e.dirty(a),a.bounds.clear().union(Jn),t.bounds.clear().union(Jn),e.dirty(a)),a.bounds}function xB(e){ee.call(this,null,e)}be(xB,ee,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(i=>{e.layout&&fre(n,i,e.layout),_re(n,i,e)}),Sre(e.mark.group)?t.reflow():t}});function Sre(e){return e&&e.mark.role!=="legend-entry"}function _re(e,t,n){var i=t.items,r=Math.max(0,t.width||0),a=Math.max(0,t.height||0),s=new un().set(0,0,r,a),o=s.clone(),l=s.clone(),f=[],d,h,p,y,v,b;for(v=0,b=i.length;v<b;++v)switch(h=i[v],h.role){case OT:y=are(h)?o:l,y.union(ore(e,h,r,a));break;case RT:d=h;break;case DT:f.push(yre(e,h));break;case Qie:case Zie:case aB:case sB:case oB:case uB:case lB:case cB:o.union(h.bounds),l.union(h.bounds);break;default:s.union(h.bounds)}if(f.length){const E={};f.forEach(_=>{p=_.orient||la,p!==NT&&(E[p]||(E[p]=[])).push(_)});for(const _ in E){const w=E[_];bB(e,w,mre(w,_,n.legends,o,l,r,a))}f.forEach(_=>{const w=_.bounds;if(w.equals(_._bounds)||(_.bounds=_._bounds,e.dirty(_),_.bounds=w,e.dirty(_)),n.autosize&&(n.autosize.type===fB||n.autosize.type===dB||n.autosize.type===hB))switch(_.orient){case ua:case la:s.add(w.x1,0).add(w.x2,0);break;case dd:case Tu:s.add(0,w.y1).add(0,w.y2)}else s.union(w)})}s.union(o).union(l),d&&s.union(Ere(e,d,r,a,s)),t.clip&&s.set(0,0,t.width||0,t.height||0),wre(e,t,s,n)}function wre(e,t,n,i){const r=i.autosize||{},a=r.type;if(e._autosize<1||!a)return;let s=e._width,o=e._height,l=Math.max(0,t.width||0),f=Math.max(0,Math.ceil(-n.x1)),d=Math.max(0,t.height||0),h=Math.max(0,Math.ceil(-n.y1));const p=Math.max(0,Math.ceil(n.x2-l)),y=Math.max(0,Math.ceil(n.y2-d));if(r.contains===Kie){const v=e.padding();s-=v.left+v.right,o-=v.top+v.bottom}a===NT?(f=0,h=0,l=s,d=o):a===fB?(l=Math.max(0,s-f-p),d=Math.max(0,o-h-y)):a===dB?(l=Math.max(0,s-f-p),o=d+h+y):a===hB?(s=l+f+p,d=Math.max(0,o-h-y)):a===ere&&(s=l+f+p,o=d+h+y),e._resizeView(s,o,l,d,[f,h],r.resize)}const Are=Object.freeze(Object.defineProperty({__proto__:null,bound:gB,identifier:FT,mark:pB,overlap:mB,render:vB,viewlayout:xB},Symbol.toStringTag,{value:"Module"}));function EB(e){ee.call(this,null,e)}be(EB,ee,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=this.value,a=e.scale,s=e.count==null?e.values?e.values.length:10:e.count,o=eT(a,s,e.minstep),l=e.format||VL(n,a,o,e.formatSpecifier,e.formatType,!!e.values),f=e.values?XL(a,e.values,o):tT(a,o);return r&&(i.rem=r),r=f.map((d,h)=>mt({index:h/(f.length-1||1),value:d,label:l(d)})),e.extra&&r.length&&r.push(mt({index:-1,extra:{value:r[0].value},label:""})),i.source=r,i.add=r,this.value=r,i}});function SB(e){ee.call(this,null,e)}function Cre(){return mt({})}function $re(e){const t=Ld().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}be(SB,ee,{transform(e,t){var n=t.dataflow,i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.item||Cre,a=e.key||ze,s=this.value;return oe(i.encode)&&(i.encode=null),s&&(e.modified("key")||t.modified(a))&&ie("DataJoin does not support modified key function or fields."),s||(t=t.addAll(),this.value=s=$re(a)),t.visit(t.ADD,o=>{const l=a(o);let f=s.get(l);f?f.exit?(s.empty--,i.add.push(f)):i.mod.push(f):(f=r(o),s.set(l,f),i.add.push(f)),f.datum=o,f.exit=!1}),t.visit(t.MOD,o=>{const l=a(o),f=s.get(l);f&&(f.datum=o,i.mod.push(f))}),t.visit(t.REM,o=>{const l=a(o),f=s.get(l);o===f.datum&&!f.exit&&(i.rem.push(f),f.exit=!0,++s.empty)}),t.changed(t.ADD_MOD)&&i.modifies("datum"),(t.clean()||e.clean&&s.empty>n.cleanThreshold)&&n.runAfter(s.clean),i}});function _B(e){ee.call(this,null,e)}be(_B,ee,{transform(e,t){var n=t.fork(t.ADD_REM),i=e.mod||!1,r=e.encoders,a=t.encode;if(oe(a))if(n.changed()||a.every(h=>r[h]))a=a[0],n.encode=null;else return t.StopPropagation;var s=a==="enter",o=r.update||Qo,l=r.enter||Qo,f=r.exit||Qo,d=(a&&!s?r[a]:o)||Qo;if(t.changed(t.ADD)&&(t.visit(t.ADD,h=>{l(h,e),o(h,e)}),n.modifies(l.output),n.modifies(o.output),d!==Qo&&d!==o&&(t.visit(t.ADD,h=>{d(h,e)}),n.modifies(d.output))),t.changed(t.REM)&&f!==Qo&&(t.visit(t.REM,h=>{f(h,e)}),n.modifies(f.output)),s||d!==Qo){const h=t.MOD|(e.modified()?t.REFLOW:0);s?(t.visit(h,p=>{const y=l(p,e)||i;(d(p,e)||y)&&n.mod.push(p)}),n.mod.length&&n.modifies(l.output)):t.visit(h,p=>{(d(p,e)||i)&&n.mod.push(p)}),n.mod.length&&n.modifies(d.output)}return n.changed()?n:t.StopPropagation}});function wB(e){ee.call(this,[],e)}be(wB,ee,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=this.value,a=e.type||U1,s=e.scale,o=+e.limit,l=eT(s,e.count==null?5:e.count,e.minstep),f=!!e.values||a===U1,d=e.format||KL(n,s,l,a,e.formatSpecifier,e.formatType,f),h=e.values||ZL(s,l),p,y,v,b,E;return r&&(i.rem=r),a===U1?(o&&h.length>o?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),r=h.slice(0,o-1),E=!0):r=h,Xe(v=e.size)?(!e.values&&s(r[0])===0&&(r=r.slice(1)),b=r.reduce((_,w)=>Math.max(_,v(w,e)),0)):v=li(b=v||8),r=r.map((_,w)=>mt({index:w,label:d(_,w,r),value:_,offset:b,size:v(_,e)})),E&&(E=h[r.length],r.push(mt({index:r.length,label:`${h.length-r.length} entries`,value:E,offset:b,size:v(E,e)})))):a===ete?(p=s.domain(),y=HL(s,p[0],st(p)),h.length<3&&!e.values&&p[0]!==st(p)&&(h=[p[0],st(p)]),r=h.map((_,w)=>mt({index:w,label:d(_,w,h),value:_,perc:y(_)}))):(v=h.length-1,y=fte(s),r=h.map((_,w)=>mt({index:w,label:d(_,w,h),value:_,perc:w?y(_):0,perc2:w===v?1:y(h[w+1])}))),i.source=r,i.add=r,this.value=r,i}});const Tre=e=>e.source.x,Mre=e=>e.source.y,kre=e=>e.target.x,Ore=e=>e.target.y;function LT(e){ee.call(this,{},e)}LT.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};be(LT,ee,{transform(e,t){var n=e.sourceX||Tre,i=e.sourceY||Mre,r=e.targetX||kre,a=e.targetY||Ore,s=e.as||"path",o=e.orient||"vertical",l=e.shape||"line",f=h6.get(l+"-"+o)||h6.get(l);return f||ie("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,d=>{d[s]=f(n(d),i(d),r(d),a(d))}),t.reflow(e.modified()).modifies(s)}});const AB=(e,t,n,i)=>"M"+e+","+t+"L"+n+","+i,Rre=(e,t,n,i)=>AB(t*Math.cos(e),t*Math.sin(e),i*Math.cos(n),i*Math.sin(n)),CB=(e,t,n,i)=>{var r=n-e,a=i-t,s=Math.hypot(r,a)/2,o=180*Math.atan2(a,r)/Math.PI;return"M"+e+","+t+"A"+s+","+s+" "+o+" 0 1 "+n+","+i},Dre=(e,t,n,i)=>CB(t*Math.cos(e),t*Math.sin(e),i*Math.cos(n),i*Math.sin(n)),$B=(e,t,n,i)=>{const r=n-e,a=i-t,s=.2*(r+a),o=.2*(a-r);return"M"+e+","+t+"C"+(e+s)+","+(t+o)+" "+(n+o)+","+(i-s)+" "+n+","+i},Nre=(e,t,n,i)=>$B(t*Math.cos(e),t*Math.sin(e),i*Math.cos(n),i*Math.sin(n)),zre=(e,t,n,i)=>"M"+e+","+t+"V"+i+"H"+n,Fre=(e,t,n,i)=>"M"+e+","+t+"H"+n+"V"+i,Lre=(e,t,n,i)=>{const r=Math.cos(e),a=Math.sin(e),s=Math.cos(n),o=Math.sin(n),l=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*r+","+t*a+"A"+t+","+t+" 0 0,"+(l?1:0)+" "+t*s+","+t*o+"L"+i*s+","+i*o},Ure=(e,t,n,i)=>{const r=(e+n)/2;return"M"+e+","+t+"C"+r+","+t+" "+r+","+i+" "+n+","+i},Bre=(e,t,n,i)=>{const r=(t+i)/2;return"M"+e+","+t+"C"+e+","+r+" "+n+","+r+" "+n+","+i},jre=(e,t,n,i)=>{const r=Math.cos(e),a=Math.sin(e),s=Math.cos(n),o=Math.sin(n),l=(t+i)/2;return"M"+t*r+","+t*a+"C"+l*r+","+l*a+" "+l*s+","+l*o+" "+i*s+","+i*o},h6=Ld({line:AB,"line-radial":Rre,arc:CB,"arc-radial":Dre,curve:$B,"curve-radial":Nre,"orthogonal-horizontal":zre,"orthogonal-vertical":Fre,"orthogonal-radial":Lre,"diagonal-horizontal":Ure,"diagonal-vertical":Bre,"diagonal-radial":jre});function UT(e){ee.call(this,null,e)}UT.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};be(UT,ee,{transform(e,t){var n=e.as||["startAngle","endAngle"],i=n[0],r=n[1],a=e.field||Dd,s=e.startAngle||0,o=e.endAngle!=null?e.endAngle:2*Math.PI,l=t.source,f=l.map(a),d=f.length,h=s,p=(o-s)/P8(f),y=rr(d),v,b,E;for(e.sort&&y.sort((_,w)=>f[_]-f[w]),v=0;v<d;++v)E=f[y[v]],b=l[y[v]],b[i]=h,b[r]=h+=E*p;return this.value=f,t.reflow(e.modified()).modifies(n)}});const Pre=5;function Ire(e){const t=e.type;return!e.bins&&(t===sd||t===Kp||t===Jp)}function TB(e){return Z$(e)&&e!==Qa}const qre=pa(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function MB(e){ee.call(this,null,e),this.modified(!0)}be(MB,ee,{transform(e,t){var n=t.dataflow,i=this.value,r=Hre(e);(!i||r!==i.type)&&(this.value=i=gt(r)());for(r in e)if(!qre[r]){if(r==="padding"&&TB(i.type))continue;Xe(i[r])?i[r](e[r]):n.warn("Unsupported scale property: "+r)}return Qre(i,e,Wre(i,e,Yre(i,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function Hre(e){var t=e.type,n="",i;return t===Qa?Qa+"-"+sd:(Gre(e)&&(i=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=i===2?Qa+"-":i===3?Gd+"-":""),(n+t||sd).toLowerCase())}function Gre(e){const t=e.type;return Z$(t)&&t!==ec&&t!==tc&&(e.scheme||e.range&&e.range.length&&e.range.every(_e))}function Yre(e,t,n){const i=Xre(e,t.domainRaw,n);if(i>-1)return i;var r=t.domain,a=e.type,s=t.zero||t.zero===void 0&&Ire(e),o,l;if(!r)return 0;if((s||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(o=(r=r.slice()).length-1||1,s&&(r[0]>0&&(r[0]=0),r[o]<0&&(r[o]=0)),t.domainMin!=null&&(r[0]=t.domainMin),t.domainMax!=null&&(r[o]=t.domainMax),t.domainMid!=null)){l=t.domainMid;const f=l>r[o]?o+1:l<r[0]?0:o;f!==o&&n.warn("Scale domainMid exceeds domain min or max.",l),r.splice(f,0,l)}return TB(a)&&t.padding&&r[0]!==st(r)&&(r=Vre(a,r,t.range,t.padding,t.exponent,t.constant)),e.domain(kB(a,r,n)),a===X$&&e.unknown(t.domainImplicit?cw:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&eT(e,t.nice)||null),r.length}function Xre(e,t,n){return t?(e.domain(kB(e.type,t,n)),t.length):-1}function Vre(e,t,n,i,r,a){var s=Math.abs(st(n)-n[0]),o=s/(s-2*i),l=e===co?pC(t,null,o):e===Jp?uy(t,null,o,.5):e===Kp?uy(t,null,o,r||1):e===pb?mC(t,null,o,a||1):gC(t,null,o);return t=t.slice(),t[0]=l[0],t[t.length-1]=l[1],t}function kB(e,t,n){if(BL(e)){var i=Math.abs(t.reduce((r,a)=>r+(a<0?-1:a>0?1:0),0));i!==t.length&&n.warn("Log scale domain includes zero: "+me(t))}return t}function Wre(e,t,n){let i=t.bins;if(i&&!oe(i)){const r=e.domain(),a=r[0],s=st(r),o=i.step;let l=i.start==null?a:i.start,f=i.stop==null?s:i.stop;o||ie("Scale bins parameter missing step property."),l<a&&(l=o*Math.ceil(a/o)),f>s&&(f=o*Math.floor(s/o)),i=rr(l,f+o/2,o)}return i?e.bins=i:e.bins&&delete e.bins,e.type===V$&&(i?!t.domain&&!t.domainRaw&&(e.domain(i),n=i.length):e.bins=e.domain()),n}function Qre(e,t,n){var i=e.type,r=t.round||!1,a=t.range;if(t.rangeStep!=null)a=Zre(i,t,n);else if(t.scheme&&(a=Kre(i,t,n),Xe(a))){if(e.interpolator)return e.interpolator(a);ie(`Scale type ${i} does not support interpolating color schemes.`)}if(a&&jL(i))return e.interpolator(vb(Rw(a,t.reverse),t.interpolate,t.interpolateGamma));a&&t.interpolate&&e.interpolate?e.interpolate(K$(t.interpolate,t.interpolateGamma)):Xe(e.round)?e.round(r):Xe(e.rangeRound)&&e.interpolate(r?Qp:Uu),a&&e.range(Rw(a,t.reverse))}function Zre(e,t,n){e!==DL&&e!==yw&&ie("Only band and point scales support rangeStep.");var i=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,r=e===yw?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*Y$(n,r,i)]}function Kre(e,t,n){var i=t.schemeExtent,r,a;return oe(t.scheme)?a=vb(t.scheme,t.interpolate,t.interpolateGamma):(r=t.scheme.toLowerCase(),a=J$(r),a||ie(`Unrecognized scheme name: ${t.scheme}`)),n=e===yb?n+1:e===V$?n-1:e===od||e===mb?+t.schemeCount||Pre:n,jL(e)?g6(a,i,t.reverse):Xe(a)?qL(g6(a,i),n):e===X$?a:a.slice(0,n)}function g6(e,t,n){return Xe(e)&&(t||n)?IL(e,Rw(t||[0,1],n)):e}function Rw(e,t){return t?e.slice().reverse():e}function OB(e){ee.call(this,null,e)}be(OB,ee,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(Sc(e.sort)),this.modified(n),t}});const p6="zero",RB="center",DB="normalize",NB=["y0","y1"];function BT(e){ee.call(this,null,e)}BT.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:p6,values:[p6,RB,DB]},{name:"as",type:"string",array:!0,length:2,default:NB}]};be(BT,ee,{transform(e,t){var n=e.as||NB,i=n[0],r=n[1],a=Sc(e.sort),s=e.field||Dd,o=e.offset===RB?Jre:e.offset===DB?eae:tae,l,f,d,h;for(l=nae(t.source,e.groupby,a,s),f=0,d=l.length,h=l.max;f<d;++f)o(l[f],h,s,i,r);return t.reflow(e.modified()).modifies(n)}});function Jre(e,t,n,i,r){for(var a=(t-e.sum)/2,s=e.length,o=0,l;o<s;++o)l=e[o],l[i]=a,l[r]=a+=Math.abs(n(l))}function eae(e,t,n,i,r){for(var a=1/e.sum,s=0,o=e.length,l=0,f=0,d;l<o;++l)d=e[l],d[i]=s,d[r]=s=a*(f+=Math.abs(n(d)))}function tae(e,t,n,i,r){for(var a=0,s=0,o=e.length,l=0,f,d;l<o;++l)d=e[l],f=+n(d),f<0?(d[i]=s,d[r]=s+=f):(d[i]=a,d[r]=a+=f)}function nae(e,t,n,i){var r=[],a=b=>b(d),s,o,l,f,d,h,p,y,v;if(t==null)r.push(e.slice());else for(s={},o=0,l=e.length;o<l;++o)d=e[o],h=t.map(a),p=s[h],p||(s[h]=p=[],r.push(p)),p.push(d);for(h=0,v=0,f=r.length;h<f;++h){for(p=r[h],o=0,y=0,l=p.length;o<l;++o)y+=Math.abs(i(p[o]));p.sum=y,y>v&&(v=y),n&&p.sort(n)}return r.max=v,r}const iae=Object.freeze(Object.defineProperty({__proto__:null,axisticks:EB,datajoin:SB,encode:_B,legendentries:wB,linkpath:LT,pie:UT,scale:MB,sortitems:OB,stack:BT},Symbol.toStringTag,{value:"Module"}));var Ue=1e-6,Dw=1e-12,Ke=Math.PI,Qt=Ke/2,By=Ke/4,wi=Ke*2,en=180/Ke,Qe=Ke/180,at=Math.abs,Xd=Math.atan,qr=Math.atan2,Le=Math.cos,s1=Math.ceil,zB=Math.exp,Nw=Math.hypot,jy=Math.log,kS=Math.pow,Fe=Math.sin,Nr=Math.sign||function(e){return e>0?1:e<0?-1:0},Ai=Math.sqrt,jT=Math.tan;function FB(e){return e>1?0:e<-1?Ke:Math.acos(e)}function Ii(e){return e>1?Qt:e<-1?-Qt:Math.asin(e)}function jn(){}function Py(e,t){e&&y6.hasOwnProperty(e.type)&&y6[e.type](e,t)}var m6={Feature:function(e,t){Py(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,i=-1,r=n.length;++i<r;)Py(n[i].geometry,t)}},y6={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)e=n[i],t.point(e[0],e[1],e[2])},LineString:function(e,t){zw(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)zw(n[i],t,0)},Polygon:function(e,t){v6(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)v6(n[i],t)},GeometryCollection:function(e,t){for(var n=e.geometries,i=-1,r=n.length;++i<r;)Py(n[i],t)}};function zw(e,t,n){var i=-1,r=e.length-n,a;for(t.lineStart();++i<r;)a=e[i],t.point(a[0],a[1],a[2]);t.lineEnd()}function v6(e,t){var n=-1,i=e.length;for(t.polygonStart();++n<i;)zw(e[n],t,1);t.polygonEnd()}function Xs(e,t){e&&m6.hasOwnProperty(e.type)?m6[e.type](e,t):Py(e,t)}var Iy=new Si,qy=new Si,LB,UB,Fw,Lw,Uw,rs={point:jn,lineStart:jn,lineEnd:jn,polygonStart:function(){Iy=new Si,rs.lineStart=rae,rs.lineEnd=aae},polygonEnd:function(){var e=+Iy;qy.add(e<0?wi+e:e),this.lineStart=this.lineEnd=this.point=jn},sphere:function(){qy.add(wi)}};function rae(){rs.point=sae}function aae(){BB(LB,UB)}function sae(e,t){rs.point=BB,LB=e,UB=t,e*=Qe,t*=Qe,Fw=e,Lw=Le(t=t/2+By),Uw=Fe(t)}function BB(e,t){e*=Qe,t*=Qe,t=t/2+By;var n=e-Fw,i=n>=0?1:-1,r=i*n,a=Le(t),s=Fe(t),o=Uw*s,l=Lw*a+o*Le(r),f=o*i*Fe(r);Iy.add(qr(f,l)),Fw=e,Lw=a,Uw=s}function oae(e){return qy=new Si,Xs(e,rs),qy*2}function Hy(e){return[qr(e[1],e[0]),Ii(e[2])]}function ic(e){var t=e[0],n=e[1],i=Le(n);return[i*Le(t),i*Fe(t),Fe(n)]}function o1(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function hd(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function OS(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function u1(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Gy(e){var t=Ai(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var It,zi,Vt,nr,Ol,jB,PB,Gf,np,tu,fo,Hs={point:Bw,lineStart:b6,lineEnd:x6,polygonStart:function(){Hs.point=qB,Hs.lineStart=uae,Hs.lineEnd=lae,np=new Si,rs.polygonStart()},polygonEnd:function(){rs.polygonEnd(),Hs.point=Bw,Hs.lineStart=b6,Hs.lineEnd=x6,Iy<0?(It=-(Vt=180),zi=-(nr=90)):np>Ue?nr=90:np<-1e-6&&(zi=-90),fo[0]=It,fo[1]=Vt},sphere:function(){It=-(Vt=180),zi=-(nr=90)}};function Bw(e,t){tu.push(fo=[It=e,Vt=e]),t<zi&&(zi=t),t>nr&&(nr=t)}function IB(e,t){var n=ic([e*Qe,t*Qe]);if(Gf){var i=hd(Gf,n),r=[i[1],-i[0],0],a=hd(r,i);Gy(a),a=Hy(a);var s=e-Ol,o=s>0?1:-1,l=a[0]*en*o,f,d=at(s)>180;d^(o*Ol<l&&l<o*e)?(f=a[1]*en,f>nr&&(nr=f)):(l=(l+360)%360-180,d^(o*Ol<l&&l<o*e)?(f=-a[1]*en,f<zi&&(zi=f)):(t<zi&&(zi=t),t>nr&&(nr=t))),d?e<Ol?tr(It,e)>tr(It,Vt)&&(Vt=e):tr(e,Vt)>tr(It,Vt)&&(It=e):Vt>=It?(e<It&&(It=e),e>Vt&&(Vt=e)):e>Ol?tr(It,e)>tr(It,Vt)&&(Vt=e):tr(e,Vt)>tr(It,Vt)&&(It=e)}else tu.push(fo=[It=e,Vt=e]);t<zi&&(zi=t),t>nr&&(nr=t),Gf=n,Ol=e}function b6(){Hs.point=IB}function x6(){fo[0]=It,fo[1]=Vt,Hs.point=Bw,Gf=null}function qB(e,t){if(Gf){var n=e-Ol;np.add(at(n)>180?n+(n>0?360:-360):n)}else jB=e,PB=t;rs.point(e,t),IB(e,t)}function uae(){rs.lineStart()}function lae(){qB(jB,PB),rs.lineEnd(),at(np)>Ue&&(It=-(Vt=180)),fo[0]=It,fo[1]=Vt,Gf=null}function tr(e,t){return(t-=e)<0?t+360:t}function cae(e,t){return e[0]-t[0]}function E6(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function fae(e){var t,n,i,r,a,s,o;if(nr=Vt=-(It=zi=1/0),tu=[],Xs(e,Hs),n=tu.length){for(tu.sort(cae),t=1,i=tu[0],a=[i];t<n;++t)r=tu[t],E6(i,r[0])||E6(i,r[1])?(tr(i[0],r[1])>tr(i[0],i[1])&&(i[1]=r[1]),tr(r[0],i[1])>tr(i[0],i[1])&&(i[0]=r[0])):a.push(i=r);for(s=-1/0,n=a.length-1,t=0,i=a[n];t<=n;i=r,++t)r=a[t],(o=tr(i[1],r[0]))>s&&(s=o,It=r[0],Vt=i[1])}return tu=fo=null,It===1/0||zi===1/0?[[NaN,NaN],[NaN,NaN]]:[[It,zi],[Vt,nr]]}var Bg,Yy,Xy,Vy,Wy,Qy,Zy,Ky,jw,Pw,Iw,HB,GB,mi,yi,vi,ca={sphere:jn,point:PT,lineStart:S6,lineEnd:_6,polygonStart:function(){ca.lineStart=gae,ca.lineEnd=pae},polygonEnd:function(){ca.lineStart=S6,ca.lineEnd=_6}};function PT(e,t){e*=Qe,t*=Qe;var n=Le(t);f0(n*Le(e),n*Fe(e),Fe(t))}function f0(e,t,n){++Bg,Xy+=(e-Xy)/Bg,Vy+=(t-Vy)/Bg,Wy+=(n-Wy)/Bg}function S6(){ca.point=dae}function dae(e,t){e*=Qe,t*=Qe;var n=Le(t);mi=n*Le(e),yi=n*Fe(e),vi=Fe(t),ca.point=hae,f0(mi,yi,vi)}function hae(e,t){e*=Qe,t*=Qe;var n=Le(t),i=n*Le(e),r=n*Fe(e),a=Fe(t),s=qr(Ai((s=yi*a-vi*r)*s+(s=vi*i-mi*a)*s+(s=mi*r-yi*i)*s),mi*i+yi*r+vi*a);Yy+=s,Qy+=s*(mi+(mi=i)),Zy+=s*(yi+(yi=r)),Ky+=s*(vi+(vi=a)),f0(mi,yi,vi)}function _6(){ca.point=PT}function gae(){ca.point=mae}function pae(){YB(HB,GB),ca.point=PT}function mae(e,t){HB=e,GB=t,e*=Qe,t*=Qe,ca.point=YB;var n=Le(t);mi=n*Le(e),yi=n*Fe(e),vi=Fe(t),f0(mi,yi,vi)}function YB(e,t){e*=Qe,t*=Qe;var n=Le(t),i=n*Le(e),r=n*Fe(e),a=Fe(t),s=yi*a-vi*r,o=vi*i-mi*a,l=mi*r-yi*i,f=Nw(s,o,l),d=Ii(f),h=f&&-d/f;jw.add(h*s),Pw.add(h*o),Iw.add(h*l),Yy+=d,Qy+=d*(mi+(mi=i)),Zy+=d*(yi+(yi=r)),Ky+=d*(vi+(vi=a)),f0(mi,yi,vi)}function yae(e){Bg=Yy=Xy=Vy=Wy=Qy=Zy=Ky=0,jw=new Si,Pw=new Si,Iw=new Si,Xs(e,ca);var t=+jw,n=+Pw,i=+Iw,r=Nw(t,n,i);return r<Dw&&(t=Qy,n=Zy,i=Ky,Yy<Ue&&(t=Xy,n=Vy,i=Wy),r=Nw(t,n,i),r<Dw)?[NaN,NaN]:[qr(n,t)*en,Ii(i/r)*en]}function qw(e,t){function n(i,r){return i=e(i,r),t(i[0],i[1])}return e.invert&&t.invert&&(n.invert=function(i,r){return i=t.invert(i,r),i&&e.invert(i[0],i[1])}),n}function Hw(e,t){return at(e)>Ke&&(e-=Math.round(e/wi)*wi),[e,t]}Hw.invert=Hw;function XB(e,t,n){return(e%=wi)?t||n?qw(A6(e),C6(t,n)):A6(e):t||n?C6(t,n):Hw}function w6(e){return function(t,n){return t+=e,at(t)>Ke&&(t-=Math.round(t/wi)*wi),[t,n]}}function A6(e){var t=w6(e);return t.invert=w6(-e),t}function C6(e,t){var n=Le(e),i=Fe(e),r=Le(t),a=Fe(t);function s(o,l){var f=Le(l),d=Le(o)*f,h=Fe(o)*f,p=Fe(l),y=p*n+d*i;return[qr(h*r-y*a,d*n-p*i),Ii(y*r+h*a)]}return s.invert=function(o,l){var f=Le(l),d=Le(o)*f,h=Fe(o)*f,p=Fe(l),y=p*r-h*a;return[qr(h*r+p*a,d*n+y*i),Ii(y*n-d*i)]},s}function vae(e){e=XB(e[0]*Qe,e[1]*Qe,e.length>2?e[2]*Qe:0);function t(n){return n=e(n[0]*Qe,n[1]*Qe),n[0]*=en,n[1]*=en,n}return t.invert=function(n){return n=e.invert(n[0]*Qe,n[1]*Qe),n[0]*=en,n[1]*=en,n},t}function bae(e,t,n,i,r,a){if(n){var s=Le(t),o=Fe(t),l=i*n;r==null?(r=t+i*wi,a=t-l/2):(r=$6(s,r),a=$6(s,a),(i>0?r<a:r>a)&&(r+=i*wi));for(var f,d=r;i>0?d>a:d<a;d-=l)f=Hy([s,-o*Le(d),-o*Fe(d)]),e.point(f[0],f[1])}}function $6(e,t){t=ic(t),t[0]-=e,Gy(t);var n=FB(-t[1]);return((-t[2]<0?-n:n)+wi-Ue)%wi}function VB(){var e=[],t;return{point:function(n,i,r){t.push([n,i,r])},lineStart:function(){e.push(t=[])},lineEnd:jn,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function X1(e,t){return at(e[0]-t[0])<Ue&&at(e[1]-t[1])<Ue}function l1(e,t,n,i){this.x=e,this.z=t,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function WB(e,t,n,i,r){var a=[],s=[],o,l;if(e.forEach(function(v){if(!((b=v.length-1)<=0)){var b,E=v[0],_=v[b],w;if(X1(E,_)){if(!E[2]&&!_[2]){for(r.lineStart(),o=0;o<b;++o)r.point((E=v[o])[0],E[1]);r.lineEnd();return}_[0]+=2*Ue}a.push(w=new l1(E,v,null,!0)),s.push(w.o=new l1(E,null,w,!1)),a.push(w=new l1(_,v,null,!1)),s.push(w.o=new l1(_,null,w,!0))}}),!!a.length){for(s.sort(t),T6(a),T6(s),o=0,l=s.length;o<l;++o)s[o].e=n=!n;for(var f=a[0],d,h;;){for(var p=f,y=!0;p.v;)if((p=p.n)===f)return;d=p.z,r.lineStart();do{if(p.v=p.o.v=!0,p.e){if(y)for(o=0,l=d.length;o<l;++o)r.point((h=d[o])[0],h[1]);else i(p.x,p.n.x,1,r);p=p.n}else{if(y)for(d=p.p.z,o=d.length-1;o>=0;--o)r.point((h=d[o])[0],h[1]);else i(p.x,p.p.x,-1,r);p=p.p}p=p.o,d=p.z,y=!y}while(!p.v);r.lineEnd()}}}function T6(e){if(t=e.length){for(var t,n=0,i=e[0],r;++n<t;)i.n=r=e[n],r.p=i,i=r;i.n=r=e[0],r.p=i}}function RS(e){return at(e[0])<=Ke?e[0]:Nr(e[0])*((at(e[0])+Ke)%wi-Ke)}function xae(e,t){var n=RS(t),i=t[1],r=Fe(i),a=[Fe(n),-Le(n),0],s=0,o=0,l=new Si;r===1?i=Qt+Ue:r===-1&&(i=-Qt-Ue);for(var f=0,d=e.length;f<d;++f)if(p=(h=e[f]).length)for(var h,p,y=h[p-1],v=RS(y),b=y[1]/2+By,E=Fe(b),_=Le(b),w=0;w<p;++w,v=M,E=R,_=O,y=A){var A=h[w],M=RS(A),T=A[1]/2+By,R=Fe(T),O=Le(T),k=M-v,$=k>=0?1:-1,D=$*k,z=D>Ke,P=E*R;if(l.add(qr(P*$*Fe(D),_*O+P*Le(D))),s+=z?k+$*wi:k,z^v>=n^M>=n){var q=hd(ic(y),ic(A));Gy(q);var j=hd(a,q);Gy(j);var L=(z^k>=0?-1:1)*Ii(j[2]);(i>L||i===L&&(q[0]||q[1]))&&(o+=z^k>=0?1:-1)}}return(s<-1e-6||s<Ue&&l<-1e-12)^o&1}function QB(e,t,n,i){return function(r){var a=t(r),s=VB(),o=t(s),l=!1,f,d,h,p={point:y,lineStart:b,lineEnd:E,polygonStart:function(){p.point=_,p.lineStart=w,p.lineEnd=A,d=[],f=[]},polygonEnd:function(){p.point=y,p.lineStart=b,p.lineEnd=E,d=j8(d);var M=xae(f,i);d.length?(l||(r.polygonStart(),l=!0),WB(d,Sae,M,n,r)):M&&(l||(r.polygonStart(),l=!0),r.lineStart(),n(null,null,1,r),r.lineEnd()),l&&(r.polygonEnd(),l=!1),d=f=null},sphere:function(){r.polygonStart(),r.lineStart(),n(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function y(M,T){e(M,T)&&r.point(M,T)}function v(M,T){a.point(M,T)}function b(){p.point=v,a.lineStart()}function E(){p.point=y,a.lineEnd()}function _(M,T){h.push([M,T]),o.point(M,T)}function w(){o.lineStart(),h=[]}function A(){_(h[0][0],h[0][1]),o.lineEnd();var M=o.clean(),T=s.result(),R,O=T.length,k,$,D;if(h.pop(),f.push(h),h=null,!!O){if(M&1){if($=T[0],(k=$.length-1)>0){for(l||(r.polygonStart(),l=!0),r.lineStart(),R=0;R<k;++R)r.point((D=$[R])[0],D[1]);r.lineEnd()}return}O>1&&M&2&&T.push(T.pop().concat(T.shift())),d.push(T.filter(Eae))}}return p}}function Eae(e){return e.length>1}function Sae(e,t){return((e=e.x)[0]<0?e[1]-Qt-Ue:Qt-e[1])-((t=t.x)[0]<0?t[1]-Qt-Ue:Qt-t[1])}const M6=QB(function(){return!0},_ae,Aae,[-Ke,-Qt]);function _ae(e){var t=NaN,n=NaN,i=NaN,r;return{lineStart:function(){e.lineStart(),r=1},point:function(a,s){var o=a>0?Ke:-Ke,l=at(a-t);at(l-Ke)<Ue?(e.point(t,n=(n+s)/2>0?Qt:-Qt),e.point(i,n),e.lineEnd(),e.lineStart(),e.point(o,n),e.point(a,n),r=0):i!==o&&l>=Ke&&(at(t-i)<Ue&&(t-=i*Ue),at(a-o)<Ue&&(a-=o*Ue),n=wae(t,n,a,s),e.point(i,n),e.lineEnd(),e.lineStart(),e.point(o,n),r=0),e.point(t=a,n=s),i=o},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-r}}}function wae(e,t,n,i){var r,a,s=Fe(e-n);return at(s)>Ue?Xd((Fe(t)*(a=Le(i))*Fe(n)-Fe(i)*(r=Le(t))*Fe(e))/(r*a*s)):(t+i)/2}function Aae(e,t,n,i){var r;if(e==null)r=n*Qt,i.point(-Ke,r),i.point(0,r),i.point(Ke,r),i.point(Ke,0),i.point(Ke,-r),i.point(0,-r),i.point(-Ke,-r),i.point(-Ke,0),i.point(-Ke,r);else if(at(e[0]-t[0])>Ue){var a=e[0]<t[0]?Ke:-Ke;r=n*a/2,i.point(-a,r),i.point(0,r),i.point(a,r)}else i.point(t[0],t[1])}function Cae(e){var t=Le(e),n=2*Qe,i=t>0,r=at(t)>Ue;function a(d,h,p,y){bae(y,e,n,p,d,h)}function s(d,h){return Le(d)*Le(h)>t}function o(d){var h,p,y,v,b;return{lineStart:function(){v=y=!1,b=1},point:function(E,_){var w=[E,_],A,M=s(E,_),T=i?M?0:f(E,_):M?f(E+(E<0?Ke:-Ke),_):0;if(!h&&(v=y=M)&&d.lineStart(),M!==y&&(A=l(h,w),(!A||X1(h,A)||X1(w,A))&&(w[2]=1)),M!==y)b=0,M?(d.lineStart(),A=l(w,h),d.point(A[0],A[1])):(A=l(h,w),d.point(A[0],A[1],2),d.lineEnd()),h=A;else if(r&&h&&i^M){var R;!(T&p)&&(R=l(w,h,!0))&&(b=0,i?(d.lineStart(),d.point(R[0][0],R[0][1]),d.point(R[1][0],R[1][1]),d.lineEnd()):(d.point(R[1][0],R[1][1]),d.lineEnd(),d.lineStart(),d.point(R[0][0],R[0][1],3)))}M&&(!h||!X1(h,w))&&d.point(w[0],w[1]),h=w,y=M,p=T},lineEnd:function(){y&&d.lineEnd(),h=null},clean:function(){return b|(v&&y)<<1}}}function l(d,h,p){var y=ic(d),v=ic(h),b=[1,0,0],E=hd(y,v),_=o1(E,E),w=E[0],A=_-w*w;if(!A)return!p&&d;var M=t*_/A,T=-t*w/A,R=hd(b,E),O=u1(b,M),k=u1(E,T);OS(O,k);var $=R,D=o1(O,$),z=o1($,$),P=D*D-z*(o1(O,O)-1);if(!(P<0)){var q=Ai(P),j=u1($,(-D-q)/z);if(OS(j,O),j=Hy(j),!p)return j;var L=d[0],U=h[0],I=d[1],V=h[1],G;U<L&&(G=L,L=U,U=G);var F=U-L,X=at(F-Ke)<Ue,J=X||F<Ue;if(!X&&V<I&&(G=I,I=V,V=G),J?X?I+V>0^j[1]<(at(j[0]-L)<Ue?I:V):I<=j[1]&&j[1]<=V:F>Ke^(L<=j[0]&&j[0]<=U)){var Z=u1($,(-D+q)/z);return OS(Z,O),[j,Hy(Z)]}}}function f(d,h){var p=i?e:Ke-e,y=0;return d<-p?y|=1:d>p&&(y|=2),h<-p?y|=4:h>p&&(y|=8),y}return QB(s,o,a,i?[0,-e]:[-Ke,e-Ke])}function $ae(e,t,n,i,r,a){var s=e[0],o=e[1],l=t[0],f=t[1],d=0,h=1,p=l-s,y=f-o,v;if(v=n-s,!(!p&&v>0)){if(v/=p,p<0){if(v<d)return;v<h&&(h=v)}else if(p>0){if(v>h)return;v>d&&(d=v)}if(v=r-s,!(!p&&v<0)){if(v/=p,p<0){if(v>h)return;v>d&&(d=v)}else if(p>0){if(v<d)return;v<h&&(h=v)}if(v=i-o,!(!y&&v>0)){if(v/=y,y<0){if(v<d)return;v<h&&(h=v)}else if(y>0){if(v>h)return;v>d&&(d=v)}if(v=a-o,!(!y&&v<0)){if(v/=y,y<0){if(v>h)return;v>d&&(d=v)}else if(y>0){if(v<d)return;v<h&&(h=v)}return d>0&&(e[0]=s+d*p,e[1]=o+d*y),h<1&&(t[0]=s+h*p,t[1]=o+h*y),!0}}}}}var c1=1e9,f1=-1e9;function ZB(e,t,n,i){function r(f,d){return e<=f&&f<=n&&t<=d&&d<=i}function a(f,d,h,p){var y=0,v=0;if(f==null||(y=s(f,h))!==(v=s(d,h))||l(f,d)<0^h>0)do p.point(y===0||y===3?e:n,y>1?i:t);while((y=(y+h+4)%4)!==v);else p.point(d[0],d[1])}function s(f,d){return at(f[0]-e)<Ue?d>0?0:3:at(f[0]-n)<Ue?d>0?2:1:at(f[1]-t)<Ue?d>0?1:0:d>0?3:2}function o(f,d){return l(f.x,d.x)}function l(f,d){var h=s(f,1),p=s(d,1);return h!==p?h-p:h===0?d[1]-f[1]:h===1?f[0]-d[0]:h===2?f[1]-d[1]:d[0]-f[0]}return function(f){var d=f,h=VB(),p,y,v,b,E,_,w,A,M,T,R,O={point:k,lineStart:P,lineEnd:q,polygonStart:D,polygonEnd:z};function k(L,U){r(L,U)&&d.point(L,U)}function $(){for(var L=0,U=0,I=y.length;U<I;++U)for(var V=y[U],G=1,F=V.length,X=V[0],J,Z,ue=X[0],de=X[1];G<F;++G)J=ue,Z=de,X=V[G],ue=X[0],de=X[1],Z<=i?de>i&&(ue-J)*(i-Z)>(de-Z)*(e-J)&&++L:de<=i&&(ue-J)*(i-Z)<(de-Z)*(e-J)&&--L;return L}function D(){d=h,p=[],y=[],R=!0}function z(){var L=$(),U=R&&L,I=(p=j8(p)).length;(U||I)&&(f.polygonStart(),U&&(f.lineStart(),a(null,null,1,f),f.lineEnd()),I&&WB(p,o,L,a,f),f.polygonEnd()),d=f,p=y=v=null}function P(){O.point=j,y&&y.push(v=[]),T=!0,M=!1,w=A=NaN}function q(){p&&(j(b,E),_&&M&&h.rejoin(),p.push(h.result())),O.point=k,M&&d.lineEnd()}function j(L,U){var I=r(L,U);if(y&&v.push([L,U]),T)b=L,E=U,_=I,T=!1,I&&(d.lineStart(),d.point(L,U));else if(I&&M)d.point(L,U);else{var V=[w=Math.max(f1,Math.min(c1,w)),A=Math.max(f1,Math.min(c1,A))],G=[L=Math.max(f1,Math.min(c1,L)),U=Math.max(f1,Math.min(c1,U))];$ae(V,G,e,t,n,i)?(M||(d.lineStart(),d.point(V[0],V[1])),d.point(G[0],G[1]),I||d.lineEnd(),R=!1):I&&(d.lineStart(),d.point(L,U),R=!1)}w=L,A=U,M=I}return O}}function k6(e,t,n){var i=rr(e,t-Ue,n).concat(t);return function(r){return i.map(function(a){return[r,a]})}}function O6(e,t,n){var i=rr(e,t-Ue,n).concat(t);return function(r){return i.map(function(a){return[a,r]})}}function Tae(){var e,t,n,i,r,a,s,o,l=10,f=l,d=90,h=360,p,y,v,b,E=2.5;function _(){return{type:"MultiLineString",coordinates:w()}}function w(){return rr(s1(i/d)*d,n,d).map(v).concat(rr(s1(o/h)*h,s,h).map(b)).concat(rr(s1(t/l)*l,e,l).filter(function(A){return at(A%d)>Ue}).map(p)).concat(rr(s1(a/f)*f,r,f).filter(function(A){return at(A%h)>Ue}).map(y))}return _.lines=function(){return w().map(function(A){return{type:"LineString",coordinates:A}})},_.outline=function(){return{type:"Polygon",coordinates:[v(i).concat(b(s).slice(1),v(n).reverse().slice(1),b(o).reverse().slice(1))]}},_.extent=function(A){return arguments.length?_.extentMajor(A).extentMinor(A):_.extentMinor()},_.extentMajor=function(A){return arguments.length?(i=+A[0][0],n=+A[1][0],o=+A[0][1],s=+A[1][1],i>n&&(A=i,i=n,n=A),o>s&&(A=o,o=s,s=A),_.precision(E)):[[i,o],[n,s]]},_.extentMinor=function(A){return arguments.length?(t=+A[0][0],e=+A[1][0],a=+A[0][1],r=+A[1][1],t>e&&(A=t,t=e,e=A),a>r&&(A=a,a=r,r=A),_.precision(E)):[[t,a],[e,r]]},_.step=function(A){return arguments.length?_.stepMajor(A).stepMinor(A):_.stepMinor()},_.stepMajor=function(A){return arguments.length?(d=+A[0],h=+A[1],_):[d,h]},_.stepMinor=function(A){return arguments.length?(l=+A[0],f=+A[1],_):[l,f]},_.precision=function(A){return arguments.length?(E=+A,p=k6(a,r,90),y=O6(t,e,E),v=k6(o,s,90),b=O6(i,n,E),_):E},_.extentMajor([[-180,-90+Ue],[180,90-Ue]]).extentMinor([[-180,-80-Ue],[180,80+Ue]])}const wp=e=>e;var DS=new Si,Gw=new Si,KB,JB,Yw,Xw,Vs={point:jn,lineStart:jn,lineEnd:jn,polygonStart:function(){Vs.lineStart=Mae,Vs.lineEnd=Oae},polygonEnd:function(){Vs.lineStart=Vs.lineEnd=Vs.point=jn,DS.add(at(Gw)),Gw=new Si},result:function(){var e=DS/2;return DS=new Si,e}};function Mae(){Vs.point=kae}function kae(e,t){Vs.point=ej,KB=Yw=e,JB=Xw=t}function ej(e,t){Gw.add(Xw*e-Yw*t),Yw=e,Xw=t}function Oae(){ej(KB,JB)}var gd=1/0,Jy=gd,Ap=-gd,ev=Ap,tv={point:Rae,lineStart:jn,lineEnd:jn,polygonStart:jn,polygonEnd:jn,result:function(){var e=[[gd,Jy],[Ap,ev]];return Ap=ev=-(Jy=gd=1/0),e}};function Rae(e,t){e<gd&&(gd=e),e>Ap&&(Ap=e),t<Jy&&(Jy=t),t>ev&&(ev=t)}var Vw=0,Ww=0,jg=0,nv=0,iv=0,Uf=0,Qw=0,Zw=0,Pg=0,tj,nj,Ha,Ga,Rr={point:rc,lineStart:R6,lineEnd:D6,polygonStart:function(){Rr.lineStart=zae,Rr.lineEnd=Fae},polygonEnd:function(){Rr.point=rc,Rr.lineStart=R6,Rr.lineEnd=D6},result:function(){var e=Pg?[Qw/Pg,Zw/Pg]:Uf?[nv/Uf,iv/Uf]:jg?[Vw/jg,Ww/jg]:[NaN,NaN];return Vw=Ww=jg=nv=iv=Uf=Qw=Zw=Pg=0,e}};function rc(e,t){Vw+=e,Ww+=t,++jg}function R6(){Rr.point=Dae}function Dae(e,t){Rr.point=Nae,rc(Ha=e,Ga=t)}function Nae(e,t){var n=e-Ha,i=t-Ga,r=Ai(n*n+i*i);nv+=r*(Ha+e)/2,iv+=r*(Ga+t)/2,Uf+=r,rc(Ha=e,Ga=t)}function D6(){Rr.point=rc}function zae(){Rr.point=Lae}function Fae(){ij(tj,nj)}function Lae(e,t){Rr.point=ij,rc(tj=Ha=e,nj=Ga=t)}function ij(e,t){var n=e-Ha,i=t-Ga,r=Ai(n*n+i*i);nv+=r*(Ha+e)/2,iv+=r*(Ga+t)/2,Uf+=r,r=Ga*e-Ha*t,Qw+=r*(Ha+e),Zw+=r*(Ga+t),Pg+=r*3,rc(Ha=e,Ga=t)}function rj(e){this._context=e}rj.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,wi);break}}},result:jn};var Kw=new Si,NS,aj,sj,Ig,qg,Cp={point:jn,lineStart:function(){Cp.point=Uae},lineEnd:function(){NS&&oj(aj,sj),Cp.point=jn},polygonStart:function(){NS=!0},polygonEnd:function(){NS=null},result:function(){var e=+Kw;return Kw=new Si,e}};function Uae(e,t){Cp.point=oj,aj=Ig=e,sj=qg=t}function oj(e,t){Ig-=e,qg-=t,Kw.add(Ai(Ig*Ig+qg*qg)),Ig=e,qg=t}let N6,rv,z6,F6;class L6{constructor(t){this._append=t==null?uj:Bae(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==z6||this._append!==rv){const i=this._radius,r=this._;this._="",this._append`m0,${i}a${i},${i} 0 1,1 0,${-2*i}a${i},${i} 0 1,1 0,${2*i}z`,z6=i,rv=this._append,F6=this._,this._=r}this._+=F6;break}}}result(){const t=this._;return this._="",t.length?t:null}}function uj(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Bae(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return uj;if(t!==N6){const n=10**t;N6=t,rv=function(r){let a=1;this._+=r[0];for(const s=r.length;a<s;++a)this._+=Math.round(arguments[a]*n)/n+r[a]}}return rv}function lj(e,t){let n=3,i=4.5,r,a;function s(o){return o&&(typeof i=="function"&&a.pointRadius(+i.apply(this,arguments)),Xs(o,r(a))),a.result()}return s.area=function(o){return Xs(o,r(Vs)),Vs.result()},s.measure=function(o){return Xs(o,r(Cp)),Cp.result()},s.bounds=function(o){return Xs(o,r(tv)),tv.result()},s.centroid=function(o){return Xs(o,r(Rr)),Rr.result()},s.projection=function(o){return arguments.length?(r=o==null?(e=null,wp):(e=o).stream,s):e},s.context=function(o){return arguments.length?(a=o==null?(t=null,new L6(n)):new rj(t=o),typeof i!="function"&&a.pointRadius(i),s):t},s.pointRadius=function(o){return arguments.length?(i=typeof o=="function"?o:(a.pointRadius(+o),+o),s):i},s.digits=function(o){if(!arguments.length)return n;if(o==null)n=null;else{const l=Math.floor(o);if(!(l>=0))throw new RangeError(`invalid digits: ${o}`);n=l}return t===null&&(a=new L6(n)),s},s.projection(e).digits(n).context(t)}function Ob(e){return function(t){var n=new Jw;for(var i in e)n[i]=e[i];return n.stream=t,n}}function Jw(){}Jw.prototype={constructor:Jw,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function IT(e,t,n){var i=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),i!=null&&e.clipExtent(null),Xs(n,e.stream(tv)),t(tv.result()),i!=null&&e.clipExtent(i),e}function Rb(e,t,n){return IT(e,function(i){var r=t[1][0]-t[0][0],a=t[1][1]-t[0][1],s=Math.min(r/(i[1][0]-i[0][0]),a/(i[1][1]-i[0][1])),o=+t[0][0]+(r-s*(i[1][0]+i[0][0]))/2,l=+t[0][1]+(a-s*(i[1][1]+i[0][1]))/2;e.scale(150*s).translate([o,l])},n)}function qT(e,t,n){return Rb(e,[[0,0],t],n)}function HT(e,t,n){return IT(e,function(i){var r=+t,a=r/(i[1][0]-i[0][0]),s=(r-a*(i[1][0]+i[0][0]))/2,o=-a*i[0][1];e.scale(150*a).translate([s,o])},n)}function GT(e,t,n){return IT(e,function(i){var r=+t,a=r/(i[1][1]-i[0][1]),s=-a*i[0][0],o=(r-a*(i[1][1]+i[0][1]))/2;e.scale(150*a).translate([s,o])},n)}var U6=16,jae=Le(30*Qe);function B6(e,t){return+t?Iae(e,t):Pae(e)}function Pae(e){return Ob({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function Iae(e,t){function n(i,r,a,s,o,l,f,d,h,p,y,v,b,E){var _=f-i,w=d-r,A=_*_+w*w;if(A>4*t&&b--){var M=s+p,T=o+y,R=l+v,O=Ai(M*M+T*T+R*R),k=Ii(R/=O),$=at(at(R)-1)<Ue||at(a-h)<Ue?(a+h)/2:qr(T,M),D=e($,k),z=D[0],P=D[1],q=z-i,j=P-r,L=w*q-_*j;(L*L/A>t||at((_*q+w*j)/A-.5)>.3||s*p+o*y+l*v<jae)&&(n(i,r,a,s,o,l,z,P,$,M/=O,T/=O,R,b,E),E.point(z,P),n(z,P,$,M,T,R,f,d,h,p,y,v,b,E))}}return function(i){var r,a,s,o,l,f,d,h,p,y,v,b,E={point:_,lineStart:w,lineEnd:M,polygonStart:function(){i.polygonStart(),E.lineStart=T},polygonEnd:function(){i.polygonEnd(),E.lineStart=w}};function _(k,$){k=e(k,$),i.point(k[0],k[1])}function w(){h=NaN,E.point=A,i.lineStart()}function A(k,$){var D=ic([k,$]),z=e(k,$);n(h,p,d,y,v,b,h=z[0],p=z[1],d=k,y=D[0],v=D[1],b=D[2],U6,i),i.point(h,p)}function M(){E.point=_,i.lineEnd()}function T(){w(),E.point=R,E.lineEnd=O}function R(k,$){A(r=k,$),a=h,s=p,o=y,l=v,f=b,E.point=A}function O(){n(h,p,d,y,v,b,a,s,r,o,l,f,U6,i),E.lineEnd=M,M()}return E}}var qae=Ob({point:function(e,t){this.stream.point(e*Qe,t*Qe)}});function Hae(e){return Ob({point:function(t,n){var i=e(t,n);return this.stream.point(i[0],i[1])}})}function Gae(e,t,n,i,r){function a(s,o){return s*=i,o*=r,[t+e*s,n-e*o]}return a.invert=function(s,o){return[(s-t)/e*i,(n-o)/e*r]},a}function j6(e,t,n,i,r,a){if(!a)return Gae(e,t,n,i,r);var s=Le(a),o=Fe(a),l=s*e,f=o*e,d=s/e,h=o/e,p=(o*n-s*t)/e,y=(o*t+s*n)/e;function v(b,E){return b*=i,E*=r,[l*b-f*E+t,n-f*b-l*E]}return v.invert=function(b,E){return[i*(d*b-h*E+p),r*(y-h*b-d*E)]},v}function hs(e){return cj(function(){return e})()}function cj(e){var t,n=150,i=480,r=250,a=0,s=0,o=0,l=0,f=0,d,h=0,p=1,y=1,v=null,b=M6,E=null,_,w,A,M=wp,T=.5,R,O,k,$,D;function z(L){return k(L[0]*Qe,L[1]*Qe)}function P(L){return L=k.invert(L[0],L[1]),L&&[L[0]*en,L[1]*en]}z.stream=function(L){return $&&D===L?$:$=qae(Hae(d)(b(R(M(D=L)))))},z.preclip=function(L){return arguments.length?(b=L,v=void 0,j()):b},z.postclip=function(L){return arguments.length?(M=L,E=_=w=A=null,j()):M},z.clipAngle=function(L){return arguments.length?(b=+L?Cae(v=L*Qe):(v=null,M6),j()):v*en},z.clipExtent=function(L){return arguments.length?(M=L==null?(E=_=w=A=null,wp):ZB(E=+L[0][0],_=+L[0][1],w=+L[1][0],A=+L[1][1]),j()):E==null?null:[[E,_],[w,A]]},z.scale=function(L){return arguments.length?(n=+L,q()):n},z.translate=function(L){return arguments.length?(i=+L[0],r=+L[1],q()):[i,r]},z.center=function(L){return arguments.length?(a=L[0]%360*Qe,s=L[1]%360*Qe,q()):[a*en,s*en]},z.rotate=function(L){return arguments.length?(o=L[0]%360*Qe,l=L[1]%360*Qe,f=L.length>2?L[2]%360*Qe:0,q()):[o*en,l*en,f*en]},z.angle=function(L){return arguments.length?(h=L%360*Qe,q()):h*en},z.reflectX=function(L){return arguments.length?(p=L?-1:1,q()):p<0},z.reflectY=function(L){return arguments.length?(y=L?-1:1,q()):y<0},z.precision=function(L){return arguments.length?(R=B6(O,T=L*L),j()):Ai(T)},z.fitExtent=function(L,U){return Rb(z,L,U)},z.fitSize=function(L,U){return qT(z,L,U)},z.fitWidth=function(L,U){return HT(z,L,U)},z.fitHeight=function(L,U){return GT(z,L,U)};function q(){var L=j6(n,0,0,p,y,h).apply(null,t(a,s)),U=j6(n,i-L[0],r-L[1],p,y,h);return d=XB(o,l,f),O=qw(t,U),k=qw(d,O),R=B6(O,T),j()}function j(){return $=D=null,z}return function(){return t=e.apply(this,arguments),z.invert=t.invert&&P,q()}}function YT(e){var t=0,n=Ke/3,i=cj(e),r=i(t,n);return r.parallels=function(a){return arguments.length?i(t=a[0]*Qe,n=a[1]*Qe):[t*en,n*en]},r}function Yae(e){var t=Le(e);function n(i,r){return[i*t,Fe(r)/t]}return n.invert=function(i,r){return[i/t,Ii(r*t)]},n}function Xae(e,t){var n=Fe(e),i=(n+Fe(t))/2;if(at(i)<Ue)return Yae(e);var r=1+n*(2*i-n),a=Ai(r)/i;function s(o,l){var f=Ai(r-2*i*Fe(l))/i;return[f*Fe(o*=i),a-f*Le(o)]}return s.invert=function(o,l){var f=a-l,d=qr(o,at(f))*Nr(f);return f*i<0&&(d-=Ke*Nr(o)*Nr(f)),[d/i,Ii((r-(o*o+f*f)*i*i)/(2*i))]},s}function av(){return YT(Xae).scale(155.424).center([0,33.6442])}function fj(){return av().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Vae(e){var t=e.length;return{point:function(n,i){for(var r=-1;++r<t;)e[r].point(n,i)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function Wae(){var e,t,n=fj(),i,r=av().rotate([154,0]).center([-2,58.5]).parallels([55,65]),a,s=av().rotate([157,0]).center([-3,19.9]).parallels([8,18]),o,l,f={point:function(p,y){l=[p,y]}};function d(p){var y=p[0],v=p[1];return l=null,i.point(y,v),l||(a.point(y,v),l)||(o.point(y,v),l)}d.invert=function(p){var y=n.scale(),v=n.translate(),b=(p[0]-v[0])/y,E=(p[1]-v[1])/y;return(E>=.12&&E<.234&&b>=-.425&&b<-.214?r:E>=.166&&E<.234&&b>=-.214&&b<-.115?s:n).invert(p)},d.stream=function(p){return e&&t===p?e:e=Vae([n.stream(t=p),r.stream(p),s.stream(p)])},d.precision=function(p){return arguments.length?(n.precision(p),r.precision(p),s.precision(p),h()):n.precision()},d.scale=function(p){return arguments.length?(n.scale(p),r.scale(p*.35),s.scale(p),d.translate(n.translate())):n.scale()},d.translate=function(p){if(!arguments.length)return n.translate();var y=n.scale(),v=+p[0],b=+p[1];return i=n.translate(p).clipExtent([[v-.455*y,b-.238*y],[v+.455*y,b+.238*y]]).stream(f),a=r.translate([v-.307*y,b+.201*y]).clipExtent([[v-.425*y+Ue,b+.12*y+Ue],[v-.214*y-Ue,b+.234*y-Ue]]).stream(f),o=s.translate([v-.205*y,b+.212*y]).clipExtent([[v-.214*y+Ue,b+.166*y+Ue],[v-.115*y-Ue,b+.234*y-Ue]]).stream(f),h()},d.fitExtent=function(p,y){return Rb(d,p,y)},d.fitSize=function(p,y){return qT(d,p,y)},d.fitWidth=function(p,y){return HT(d,p,y)},d.fitHeight=function(p,y){return GT(d,p,y)};function h(){return e=t=null,d}return d.scale(1070)}function dj(e){return function(t,n){var i=Le(t),r=Le(n),a=e(i*r);return a===1/0?[2,0]:[a*r*Fe(t),a*Fe(n)]}}function d0(e){return function(t,n){var i=Ai(t*t+n*n),r=e(i),a=Fe(r),s=Le(r);return[qr(t*a,i*s),Ii(i&&n*a/i)]}}var hj=dj(function(e){return Ai(2/(1+e))});hj.invert=d0(function(e){return 2*Ii(e/2)});function Qae(){return hs(hj).scale(124.75).clipAngle(180-.001)}var gj=dj(function(e){return(e=FB(e))&&e/Fe(e)});gj.invert=d0(function(e){return e});function Zae(){return hs(gj).scale(79.4188).clipAngle(180-.001)}function Db(e,t){return[e,jy(jT((Qt+t)/2))]}Db.invert=function(e,t){return[e,2*Xd(zB(t))-Qt]};function Kae(){return pj(Db).scale(961/wi)}function pj(e){var t=hs(e),n=t.center,i=t.scale,r=t.translate,a=t.clipExtent,s=null,o,l,f;t.scale=function(h){return arguments.length?(i(h),d()):i()},t.translate=function(h){return arguments.length?(r(h),d()):r()},t.center=function(h){return arguments.length?(n(h),d()):n()},t.clipExtent=function(h){return arguments.length?(h==null?s=o=l=f=null:(s=+h[0][0],o=+h[0][1],l=+h[1][0],f=+h[1][1]),d()):s==null?null:[[s,o],[l,f]]};function d(){var h=Ke*i(),p=t(vae(t.rotate()).invert([0,0]));return a(s==null?[[p[0]-h,p[1]-h],[p[0]+h,p[1]+h]]:e===Db?[[Math.max(p[0]-h,s),o],[Math.min(p[0]+h,l),f]]:[[s,Math.max(p[1]-h,o)],[l,Math.min(p[1]+h,f)]])}return d()}function d1(e){return jT((Qt+e)/2)}function Jae(e,t){var n=Le(e),i=e===t?Fe(e):jy(n/Le(t))/jy(d1(t)/d1(e)),r=n*kS(d1(e),i)/i;if(!i)return Db;function a(s,o){r>0?o<-Qt+Ue&&(o=-Qt+Ue):o>Qt-Ue&&(o=Qt-Ue);var l=r/kS(d1(o),i);return[l*Fe(i*s),r-l*Le(i*s)]}return a.invert=function(s,o){var l=r-o,f=Nr(i)*Ai(s*s+l*l),d=qr(s,at(l))*Nr(l);return l*i<0&&(d-=Ke*Nr(s)*Nr(l)),[d/i,2*Xd(kS(r/f,1/i))-Qt]},a}function ese(){return YT(Jae).scale(109.5).parallels([30,30])}function sv(e,t){return[e,t]}sv.invert=sv;function tse(){return hs(sv).scale(152.63)}function nse(e,t){var n=Le(e),i=e===t?Fe(e):(n-Le(t))/(t-e),r=n/i+e;if(at(i)<Ue)return sv;function a(s,o){var l=r-o,f=i*s;return[l*Fe(f),r-l*Le(f)]}return a.invert=function(s,o){var l=r-o,f=qr(s,at(l))*Nr(l);return l*i<0&&(f-=Ke*Nr(s)*Nr(l)),[f/i,r-Nr(i)*Ai(s*s+l*l)]},a}function ise(){return YT(nse).scale(131.154).center([0,13.9389])}var ip=1.340264,rp=-.081106,ap=893e-6,sp=.003796,ov=Ai(3)/2,rse=12;function mj(e,t){var n=Ii(ov*Fe(t)),i=n*n,r=i*i*i;return[e*Le(n)/(ov*(ip+3*rp*i+r*(7*ap+9*sp*i))),n*(ip+rp*i+r*(ap+sp*i))]}mj.invert=function(e,t){for(var n=t,i=n*n,r=i*i*i,a=0,s,o,l;a<rse&&(o=n*(ip+rp*i+r*(ap+sp*i))-t,l=ip+3*rp*i+r*(7*ap+9*sp*i),n-=s=o/l,i=n*n,r=i*i*i,!(at(s)<Dw));++a);return[ov*e*(ip+3*rp*i+r*(7*ap+9*sp*i))/Le(n),Ii(Fe(n)/ov)]};function ase(){return hs(mj).scale(177.158)}function yj(e,t){var n=Le(t),i=Le(e)*n;return[n*Fe(e)/i,Fe(t)/i]}yj.invert=d0(Xd);function sse(){return hs(yj).scale(144.049).clipAngle(60)}function ose(){var e=1,t=0,n=0,i=1,r=1,a=0,s,o,l=null,f,d,h,p=1,y=1,v=Ob({point:function(M,T){var R=A([M,T]);this.stream.point(R[0],R[1])}}),b=wp,E,_;function w(){return p=e*i,y=e*r,E=_=null,A}function A(M){var T=M[0]*p,R=M[1]*y;if(a){var O=R*s-T*o;T=T*s+R*o,R=O}return[T+t,R+n]}return A.invert=function(M){var T=M[0]-t,R=M[1]-n;if(a){var O=R*s+T*o;T=T*s-R*o,R=O}return[T/p,R/y]},A.stream=function(M){return E&&_===M?E:E=v(b(_=M))},A.postclip=function(M){return arguments.length?(b=M,l=f=d=h=null,w()):b},A.clipExtent=function(M){return arguments.length?(b=M==null?(l=f=d=h=null,wp):ZB(l=+M[0][0],f=+M[0][1],d=+M[1][0],h=+M[1][1]),w()):l==null?null:[[l,f],[d,h]]},A.scale=function(M){return arguments.length?(e=+M,w()):e},A.translate=function(M){return arguments.length?(t=+M[0],n=+M[1],w()):[t,n]},A.angle=function(M){return arguments.length?(a=M%360*Qe,o=Fe(a),s=Le(a),w()):a*en},A.reflectX=function(M){return arguments.length?(i=M?-1:1,w()):i<0},A.reflectY=function(M){return arguments.length?(r=M?-1:1,w()):r<0},A.fitExtent=function(M,T){return Rb(A,M,T)},A.fitSize=function(M,T){return qT(A,M,T)},A.fitWidth=function(M,T){return HT(A,M,T)},A.fitHeight=function(M,T){return GT(A,M,T)},A}function vj(e,t){var n=t*t,i=n*n;return[e*(.8707-.131979*n+i*(-.013791+i*(.003971*n-.001529*i))),t*(1.007226+n*(.015085+i*(-.044475+.028874*n-.005916*i)))]}vj.invert=function(e,t){var n=t,i=25,r;do{var a=n*n,s=a*a;n-=r=(n*(1.007226+a*(.015085+s*(-.044475+.028874*a-.005916*s)))-t)/(1.007226+a*(.015085*3+s*(-.044475*7+.028874*9*a-.005916*11*s)))}while(at(r)>Ue&&--i>0);return[e/(.8707+(a=n*n)*(-.131979+a*(-.013791+a*a*a*(.003971-.001529*a)))),n]};function use(){return hs(vj).scale(175.295)}function bj(e,t){return[Le(t)*Fe(e),Fe(t)]}bj.invert=d0(Ii);function lse(){return hs(bj).scale(249.5).clipAngle(90+Ue)}function xj(e,t){var n=Le(t),i=1+Le(e)*n;return[n*Fe(e)/i,Fe(t)/i]}xj.invert=d0(function(e){return 2*Xd(e)});function cse(){return hs(xj).scale(250).clipAngle(142)}function Ej(e,t){return[jy(jT((Qt+t)/2)),-e]}Ej.invert=function(e,t){return[-t,2*Xd(zB(e))-Qt]};function fse(){var e=pj(Ej),t=e.center,n=e.rotate;return e.center=function(i){return arguments.length?t([-i[1],i[0]]):(i=t(),[i[1],-i[0]])},e.rotate=function(i){return arguments.length?n([i[0],i[1],i.length>2?i[2]+90:90]):(i=n(),[i[0],i[1],i[2]-90])},n([0,0,90]).scale(159.155)}var dse=Math.abs,eA=Math.cos,uv=Math.sin,hse=1e-6,Sj=Math.PI,tA=Sj/2,P6=gse(2);function I6(e){return e>1?tA:e<-1?-tA:Math.asin(e)}function gse(e){return e>0?Math.sqrt(e):0}function pse(e,t){var n=e*uv(t),i=30,r;do t-=r=(t+uv(t)-n)/(1+eA(t));while(dse(r)>hse&&--i>0);return t/2}function mse(e,t,n){function i(r,a){return[e*r*eA(a=pse(n,a)),t*uv(a)]}return i.invert=function(r,a){return a=I6(a/t),[r/(e*eA(a)),I6((2*a+uv(2*a))/n)]},i}var yse=mse(P6/tA,P6,Sj);function vse(){return hs(yse).scale(169.529)}const bse=lj(),nA=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function xse(e,t){return function n(){const i=t();return i.type=e,i.path=lj().projection(i),i.copy=i.copy||function(){const r=n();return nA.forEach(a=>{i[a]&&r[a](i[a]())}),r.path.pointRadius(i.path.pointRadius()),r},LL(i)}}function XT(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(lv[e]=xse(e,t),this):lv[e]||null}function _j(e){return e&&e.path||bse}const lv={albers:fj,albersusa:Wae,azimuthalequalarea:Qae,azimuthalequidistant:Zae,conicconformal:ese,conicequalarea:av,conicequidistant:ise,equalEarth:ase,equirectangular:tse,gnomonic:sse,identity:ose,mercator:Kae,mollweide:vse,naturalEarth1:use,orthographic:lse,stereographic:cse,transversemercator:fse};for(const e in lv)XT(e,lv[e]);function Ese(){}const js=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function wj(){var e=1,t=1,n=o;function i(l,f){return f.map(d=>r(l,d))}function r(l,f){var d=[],h=[];return a(l,f,p=>{n(p,l,f),Sse(p)>0?d.push([p]):h.push(p)}),h.forEach(p=>{for(var y=0,v=d.length,b;y<v;++y)if(_se((b=d[y])[0],p)!==-1){b.push(p);return}}),{type:"MultiPolygon",value:f,coordinates:d}}function a(l,f,d){var h=[],p=[],y,v,b,E,_,w;for(y=v=-1,E=l[0]>=f,js[E<<1].forEach(A);++y<e-1;)b=E,E=l[y+1]>=f,js[b|E<<1].forEach(A);for(js[E<<0].forEach(A);++v<t-1;){for(y=-1,E=l[v*e+e]>=f,_=l[v*e]>=f,js[E<<1|_<<2].forEach(A);++y<e-1;)b=E,E=l[v*e+e+y+1]>=f,w=_,_=l[v*e+y+1]>=f,js[b|E<<1|_<<2|w<<3].forEach(A);js[E|_<<3].forEach(A)}for(y=-1,_=l[v*e]>=f,js[_<<2].forEach(A);++y<e-1;)w=_,_=l[v*e+y+1]>=f,js[_<<2|w<<3].forEach(A);js[_<<3].forEach(A);function A(M){var T=[M[0][0]+y,M[0][1]+v],R=[M[1][0]+y,M[1][1]+v],O=s(T),k=s(R),$,D;($=p[O])?(D=h[k])?(delete p[$.end],delete h[D.start],$===D?($.ring.push(R),d($.ring)):h[$.start]=p[D.end]={start:$.start,end:D.end,ring:$.ring.concat(D.ring)}):(delete p[$.end],$.ring.push(R),p[$.end=k]=$):($=h[k])?(D=p[O])?(delete h[$.start],delete p[D.end],$===D?($.ring.push(R),d($.ring)):h[D.start]=p[$.end]={start:D.start,end:$.end,ring:D.ring.concat($.ring)}):(delete h[$.start],$.ring.unshift(T),h[$.start=O]=$):h[O]=p[k]={start:O,end:k,ring:[T,R]}}}function s(l){return l[0]*2+l[1]*(e+1)*4}function o(l,f,d){l.forEach(h=>{var p=h[0],y=h[1],v=p|0,b=y|0,E,_=f[b*e+v];p>0&&p<e&&v===p&&(E=f[b*e+v-1],h[0]=p+(d-E)/(_-E)-.5),y>0&&y<t&&b===y&&(E=f[(b-1)*e+v],h[1]=y+(d-E)/(_-E)-.5)})}return i.contour=r,i.size=function(l){if(!arguments.length)return[e,t];var f=Math.floor(l[0]),d=Math.floor(l[1]);return f>=0&&d>=0||ie("invalid size"),e=f,t=d,i},i.smooth=function(l){return arguments.length?(n=l?o:Ese,i):n===o},i}function Sse(e){for(var t=0,n=e.length,i=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)i+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return i}function _se(e,t){for(var n=-1,i=t.length,r;++n<i;)if(r=wse(e,t[n]))return r;return 0}function wse(e,t){for(var n=t[0],i=t[1],r=-1,a=0,s=e.length,o=s-1;a<s;o=a++){var l=e[a],f=l[0],d=l[1],h=e[o],p=h[0],y=h[1];if(Ase(l,h,t))return 0;d>i!=y>i&&n<(p-f)*(i-d)/(y-d)+f&&(r=-r)}return r}function Ase(e,t,n){var i;return Cse(e,t,n)&&$se(e[i=+(e[0]===t[0])],n[i],t[i])}function Cse(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function $se(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function Aj(e,t,n){return function(i){var r=es(i),a=n?Math.min(r[0],0):r[0],s=r[1],o=s-a,l=t?Eu(a,s,e):o/(e+1);return rr(a+l,s,l)}}function VT(e){ee.call(this,null,e)}VT.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};be(VT,ee,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=t.materialize(t.SOURCE).source,r=e.field||ui,a=wj().smooth(e.smooth!==!1),s=e.thresholds||Tse(i,r,e),o=e.as===null?null:e.as||"contour",l=[];return i.forEach(f=>{const d=r(f),h=a.size([d.width,d.height])(d.values,oe(s)?s:s(d.values));Mse(h,d,f,e),h.forEach(p=>{l.push(Qv(f,mt(o!=null?{[o]:p}:p)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=l,n}});function Tse(e,t,n){const i=Aj(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?i:i(e.map(r=>Il(t(r).values)))}function Mse(e,t,n,i){let r=i.scale||t.scale,a=i.translate||t.translate;if(Xe(r)&&(r=r(n,i)),Xe(a)&&(a=a(n,i)),(r===1||r==null)&&!a)return;const s=(dt(r)?r:r[0])||1,o=(dt(r)?r:r[1])||1,l=a&&a[0]||0,f=a&&a[1]||0;e.forEach(Cj(t,s,o,l,f))}function Cj(e,t,n,i,r){const a=e.x1||0,s=e.y1||0,o=t*n<0;function l(h){h.forEach(f)}function f(h){o&&h.reverse(),h.forEach(d)}function d(h){h[0]=(h[0]-a)*t+i,h[1]=(h[1]-s)*n+r}return function(h){return h.coordinates.forEach(l),h}}function q6(e,t,n){const i=e>=0?e:jC(t,n);return Math.round((Math.sqrt(4*i*i+1)-1)/2)}function zS(e){return Xe(e)?e:li(+e)}function $j(){var e=l=>l[0],t=l=>l[1],n=Dd,i=[-1,-1],r=960,a=500,s=2;function o(l,f){const d=q6(i[0],l,e)>>s,h=q6(i[1],l,t)>>s,p=d?d+2:0,y=h?h+2:0,v=2*p+(r>>s),b=2*y+(a>>s),E=new Float32Array(v*b),_=new Float32Array(v*b);let w=E;l.forEach(M=>{const T=p+(+e(M)>>s),R=y+(+t(M)>>s);T>=0&&T<v&&R>=0&&R<b&&(E[T+R*v]+=+n(M))}),d>0&&h>0?(wf(v,b,E,_,d),Af(v,b,_,E,h),wf(v,b,E,_,d),Af(v,b,_,E,h),wf(v,b,E,_,d),Af(v,b,_,E,h)):d>0?(wf(v,b,E,_,d),wf(v,b,_,E,d),wf(v,b,E,_,d),w=_):h>0&&(Af(v,b,E,_,h),Af(v,b,_,E,h),Af(v,b,E,_,h),w=_);const A=f?Math.pow(2,-2*s):1/P8(w);for(let M=0,T=v*b;M<T;++M)w[M]*=A;return{values:w,scale:1<<s,width:v,height:b,x1:p,y1:y,x2:p+(r>>s),y2:y+(a>>s)}}return o.x=function(l){return arguments.length?(e=zS(l),o):e},o.y=function(l){return arguments.length?(t=zS(l),o):t},o.weight=function(l){return arguments.length?(n=zS(l),o):n},o.size=function(l){if(!arguments.length)return[r,a];var f=+l[0],d=+l[1];return f>=0&&d>=0||ie("invalid size"),r=f,a=d,o},o.cellSize=function(l){return arguments.length?((l=+l)>=1||ie("invalid cell size"),s=Math.floor(Math.log(l)/Math.LN2),o):1<<s},o.bandwidth=function(l){return arguments.length?(l=Se(l),l.length===1&&(l=[+l[0],+l[0]]),l.length!==2&&ie("invalid bandwidth"),i=l,o):i},o}function wf(e,t,n,i,r){const a=(r<<1)+1;for(let s=0;s<t;++s)for(let o=0,l=0;o<e+r;++o)o<e&&(l+=n[o+s*e]),o>=r&&(o>=a&&(l-=n[o-a+s*e]),i[o-r+s*e]=l/Math.min(o+1,e-1+a-o,a))}function Af(e,t,n,i,r){const a=(r<<1)+1;for(let s=0;s<e;++s)for(let o=0,l=0;o<t+r;++o)o<t&&(l+=n[s+o*e]),o>=r&&(o>=a&&(l-=n[s+(o-a)*e]),i[s+(o-r)*e]=l/Math.min(o+1,t-1+a-o,a))}function WT(e){ee.call(this,null,e)}WT.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const kse=["x","y","weight","size","cellSize","bandwidth"];function Tj(e,t){return kse.forEach(n=>t[n]!=null?e[n](t[n]):0),e}be(WT,ee,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=t.materialize(t.SOURCE).source,r=Ose(i,e.groupby),a=(e.groupby||[]).map(Zt),s=Tj($j(),e),o=e.as||"grid",l=[];function f(d,h){for(let p=0;p<a.length;++p)d[a[p]]=h[p];return d}return l=r.map(d=>mt(f({[o]:s(d,e.counts)},d.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=l,n}});function Ose(e,t){var n=[],i=d=>d(o),r,a,s,o,l,f;if(t==null)n.push(e);else for(r={},a=0,s=e.length;a<s;++a)o=e[a],l=t.map(i),f=r[l],f||(r[l]=f=[],f.dims=l,n.push(f)),f.push(o);return n}function QT(e){ee.call(this,null,e)}QT.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};be(QT,ee,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=wj().smooth(e.smooth!==!1),r=e.values,a=e.thresholds||Aj(e.count||10,e.nice,!!r),s=e.size,o,l;return r||(r=t.materialize(t.SOURCE).source,o=Tj($j(),e)(r,!0),l=Cj(o,o.scale||1,o.scale||1,0,0),s=[o.width,o.height],r=o.values),a=oe(a)?a:a(r),r=i.size(s)(r,a),l&&r.forEach(l),this.value&&(n.rem=this.value),this.value=n.source=n.add=(r||[]).map(mt),n}});const iA="Feature",ZT="FeatureCollection",Rse="MultiPoint";function KT(e){ee.call(this,null,e)}KT.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};be(KT,ee,{transform(e,t){var n=this._features,i=this._points,r=e.fields,a=r&&r[0],s=r&&r[1],o=e.geojson||!r&&ui,l=t.ADD,f;f=e.modified()||t.changed(t.REM)||t.modified(ri(o))||a&&t.modified(ri(a))||s&&t.modified(ri(s)),(!this.value||f)&&(l=t.SOURCE,this._features=n=[],this._points=i=[]),o&&t.visit(l,d=>n.push(o(d))),a&&s&&(t.visit(l,d=>{var h=a(d),p=s(d);h!=null&&p!=null&&(h=+h)===h&&(p=+p)===p&&i.push([h,p])}),n=n.concat({type:iA,geometry:{type:Rse,coordinates:i}})),this.value={type:ZT,features:n}}});function JT(e){ee.call(this,null,e)}JT.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};be(JT,ee,{transform(e,t){var n=t.fork(t.ALL),i=this.value,r=e.field||ui,a=e.as||"path",s=n.SOURCE;!i||e.modified()?(this.value=i=_j(e.projection),n.materialize().reflow()):s=r===ui||t.modified(r.fields)?n.ADD_MOD:n.ADD;const o=Dse(i,e.pointRadius);return n.visit(s,l=>l[a]=i(r(l))),i.pointRadius(o),n.modifies(a)}});function Dse(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function eM(e){ee.call(this,null,e)}eM.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};be(eM,ee,{transform(e,t){var n=e.projection,i=e.fields[0],r=e.fields[1],a=e.as||["x","y"],s=a[0],o=a[1],l;function f(d){const h=n([i(d),r(d)]);h?(d[s]=h[0],d[o]=h[1]):(d[s]=void 0,d[o]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,f):(l=t.modified(i.fields)||t.modified(r.fields),t.visit(l?t.ADD_MOD:t.ADD,f)),t.modifies(a)}});function tM(e){ee.call(this,null,e)}tM.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};be(tM,ee,{transform(e,t){var n=t.fork(t.ALL),i=this.value,r=e.as||"shape",a=n.ADD;return(!i||e.modified())&&(this.value=i=Nse(_j(e.projection),e.field||Br("datum"),e.pointRadius),n.materialize().reflow(),a=n.SOURCE),n.visit(a,s=>s[r]=i),n.modifies(r)}});function Nse(e,t,n){const i=n==null?r=>e(t(r)):r=>{var a=e.pointRadius(),s=e.pointRadius(n)(t(r));return e.pointRadius(a),s};return i.context=r=>(e.context(r),i),i}function nM(e){ee.call(this,[],e),this.generator=Tae()}nM.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};be(nM,ee,{transform(e,t){var n=this.value,i=this.generator,r;if(!n.length||e.modified())for(const a in e)Xe(i[a])&&i[a](e[a]);return r=i(),n.length?t.mod.push(F7(n[0],r)):t.add.push(mt(r)),n[0]=r,t}});function iM(e){ee.call(this,null,e)}iM.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};be(iM,ee,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,i=e.resolve==="shared",r=e.field||ui,a=Fse(e.opacity,e),s=zse(e.color,e),o=e.as||"image",l={$x:0,$y:0,$value:0,$max:i?Il(n.map(f=>Il(r(f).values))):0};return n.forEach(f=>{const d=r(f),h=Ge({},f,l);i||(h.$max=Il(d.values||[])),f[o]=Lse(d,h,s.dep?s:li(s(h)),a.dep?a:li(a(h)))}),t.reflow(!0).modifies(o)}});function zse(e,t){let n;return Xe(e)?(n=i=>wu(e(i,t)),n.dep=Mj(e)):n=li(wu(e||"#888")),n}function Fse(e,t){let n;return Xe(e)?(n=i=>e(i,t),n.dep=Mj(e)):e?n=li(e):(n=i=>i.$value/i.$max||0,n.dep=!0),n}function Mj(e){if(!Xe(e))return!1;const t=pa(ri(e));return t.$x||t.$y||t.$value||t.$max}function Lse(e,t,n,i){const r=e.width,a=e.height,s=e.x1||0,o=e.y1||0,l=e.x2||r,f=e.y2||a,d=e.values,h=d?E=>d[E]:ru,p=yu(l-s,f-o),y=p.getContext("2d"),v=y.getImageData(0,0,l-s,f-o),b=v.data;for(let E=o,_=0;E<f;++E){t.$y=E-o;for(let w=s,A=E*r;w<l;++w,_+=4){t.$x=w-s,t.$value=h(w+A);const M=n(t);b[_+0]=M.r,b[_+1]=M.g,b[_+2]=M.b,b[_+3]=~~(255*i(t))}}return y.putImageData(v,0,0),p}function kj(e){ee.call(this,null,e),this.modified(!0)}be(kj,ee,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=Bse(e.type),nA.forEach(i=>{e[i]!=null&&H6(n,i,e[i])})):nA.forEach(i=>{e.modified(i)&&H6(n,i,e[i])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&Use(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function Use(e,t){const n=jse(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function Bse(e){const t=XT((e||"mercator").toLowerCase());return t||ie("Unrecognized projection type: "+e),t()}function H6(e,t,n){Xe(e[t])&&e[t](n)}function jse(e){return e=Se(e),e.length===1?e[0]:{type:ZT,features:e.reduce((t,n)=>t.concat(Pse(n)),[])}}function Pse(e){return e.type===ZT?e.features:Se(e).filter(t=>t!=null).map(t=>t.type===iA?t:{type:iA,geometry:t})}const Ise=Object.freeze(Object.defineProperty({__proto__:null,contour:QT,geojson:KT,geopath:JT,geopoint:eM,geoshape:tM,graticule:nM,heatmap:iM,isocontour:VT,kde2d:WT,projection:kj},Symbol.toStringTag,{value:"Module"}));function qse(e,t){var n,i=1;e==null&&(e=0),t==null&&(t=0);function r(){var a,s=n.length,o,l=0,f=0;for(a=0;a<s;++a)o=n[a],l+=o.x,f+=o.y;for(l=(l/s-e)*i,f=(f/s-t)*i,a=0;a<s;++a)o=n[a],o.x-=l,o.y-=f}return r.initialize=function(a){n=a},r.x=function(a){return arguments.length?(e=+a,r):e},r.y=function(a){return arguments.length?(t=+a,r):t},r.strength=function(a){return arguments.length?(i=+a,r):i},r}function Hse(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return Oj(this.cover(t,n),t,n,e)}function Oj(e,t,n,i){if(isNaN(t)||isNaN(n))return e;var r,a=e._root,s={data:i},o=e._x0,l=e._y0,f=e._x1,d=e._y1,h,p,y,v,b,E,_,w;if(!a)return e._root=s,e;for(;a.length;)if((b=t>=(h=(o+f)/2))?o=h:f=h,(E=n>=(p=(l+d)/2))?l=p:d=p,r=a,!(a=a[_=E<<1|b]))return r[_]=s,e;if(y=+e._x.call(null,a.data),v=+e._y.call(null,a.data),t===y&&n===v)return s.next=a,r?r[_]=s:e._root=s,e;do r=r?r[_]=new Array(4):e._root=new Array(4),(b=t>=(h=(o+f)/2))?o=h:f=h,(E=n>=(p=(l+d)/2))?l=p:d=p;while((_=E<<1|b)===(w=(v>=p)<<1|y>=h));return r[w]=a,r[_]=s,e}function Gse(e){var t,n,i=e.length,r,a,s=new Array(i),o=new Array(i),l=1/0,f=1/0,d=-1/0,h=-1/0;for(n=0;n<i;++n)isNaN(r=+this._x.call(null,t=e[n]))||isNaN(a=+this._y.call(null,t))||(s[n]=r,o[n]=a,r<l&&(l=r),r>d&&(d=r),a<f&&(f=a),a>h&&(h=a));if(l>d||f>h)return this;for(this.cover(l,f).cover(d,h),n=0;n<i;++n)Oj(this,s[n],o[n],e[n]);return this}function Yse(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,i=this._y0,r=this._x1,a=this._y1;if(isNaN(n))r=(n=Math.floor(e))+1,a=(i=Math.floor(t))+1;else{for(var s=r-n||1,o=this._root,l,f;n>e||e>=r||i>t||t>=a;)switch(f=(t<i)<<1|e<n,l=new Array(4),l[f]=o,o=l,s*=2,f){case 0:r=n+s,a=i+s;break;case 1:n=r-s,a=i+s;break;case 2:r=n+s,i=a-s;break;case 3:n=r-s,i=a-s;break}this._root&&this._root.length&&(this._root=o)}return this._x0=n,this._y0=i,this._x1=r,this._y1=a,this}function Xse(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function Vse(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function bi(e,t,n,i,r){this.node=e,this.x0=t,this.y0=n,this.x1=i,this.y1=r}function Wse(e,t,n){var i,r=this._x0,a=this._y0,s,o,l,f,d=this._x1,h=this._y1,p=[],y=this._root,v,b;for(y&&p.push(new bi(y,r,a,d,h)),n==null?n=1/0:(r=e-n,a=t-n,d=e+n,h=t+n,n*=n);v=p.pop();)if(!(!(y=v.node)||(s=v.x0)>d||(o=v.y0)>h||(l=v.x1)<r||(f=v.y1)<a))if(y.length){var E=(s+l)/2,_=(o+f)/2;p.push(new bi(y[3],E,_,l,f),new bi(y[2],s,_,E,f),new bi(y[1],E,o,l,_),new bi(y[0],s,o,E,_)),(b=(t>=_)<<1|e>=E)&&(v=p[p.length-1],p[p.length-1]=p[p.length-1-b],p[p.length-1-b]=v)}else{var w=e-+this._x.call(null,y.data),A=t-+this._y.call(null,y.data),M=w*w+A*A;if(M<n){var T=Math.sqrt(n=M);r=e-T,a=t-T,d=e+T,h=t+T,i=y.data}}return i}function Qse(e){if(isNaN(d=+this._x.call(null,e))||isNaN(h=+this._y.call(null,e)))return this;var t,n=this._root,i,r,a,s=this._x0,o=this._y0,l=this._x1,f=this._y1,d,h,p,y,v,b,E,_;if(!n)return this;if(n.length)for(;;){if((v=d>=(p=(s+l)/2))?s=p:l=p,(b=h>=(y=(o+f)/2))?o=y:f=y,t=n,!(n=n[E=b<<1|v]))return this;if(!n.length)break;(t[E+1&3]||t[E+2&3]||t[E+3&3])&&(i=t,_=E)}for(;n.data!==e;)if(r=n,!(n=n.next))return this;return(a=n.next)&&delete n.next,r?(a?r.next=a:delete r.next,this):t?(a?t[E]=a:delete t[E],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(i?i[_]=n:this._root=n),this):(this._root=a,this)}function Zse(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function Kse(){return this._root}function Jse(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function eoe(e){var t=[],n,i=this._root,r,a,s,o,l;for(i&&t.push(new bi(i,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(i=n.node,a=n.x0,s=n.y0,o=n.x1,l=n.y1)&&i.length){var f=(a+o)/2,d=(s+l)/2;(r=i[3])&&t.push(new bi(r,f,d,o,l)),(r=i[2])&&t.push(new bi(r,a,d,f,l)),(r=i[1])&&t.push(new bi(r,f,s,o,d)),(r=i[0])&&t.push(new bi(r,a,s,f,d))}return this}function toe(e){var t=[],n=[],i;for(this._root&&t.push(new bi(this._root,this._x0,this._y0,this._x1,this._y1));i=t.pop();){var r=i.node;if(r.length){var a,s=i.x0,o=i.y0,l=i.x1,f=i.y1,d=(s+l)/2,h=(o+f)/2;(a=r[0])&&t.push(new bi(a,s,o,d,h)),(a=r[1])&&t.push(new bi(a,d,o,l,h)),(a=r[2])&&t.push(new bi(a,s,h,d,f)),(a=r[3])&&t.push(new bi(a,d,h,l,f))}n.push(i)}for(;i=n.pop();)e(i.node,i.x0,i.y0,i.x1,i.y1);return this}function noe(e){return e[0]}function ioe(e){return arguments.length?(this._x=e,this):this._x}function roe(e){return e[1]}function aoe(e){return arguments.length?(this._y=e,this):this._y}function rM(e,t,n){var i=new aM(t??noe,n??roe,NaN,NaN,NaN,NaN);return e==null?i:i.addAll(e)}function aM(e,t,n,i,r,a){this._x=e,this._y=t,this._x0=n,this._y0=i,this._x1=r,this._y1=a,this._root=void 0}function G6(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var $i=rM.prototype=aM.prototype;$i.copy=function(){var e=new aM(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,i;if(!t)return e;if(!t.length)return e._root=G6(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var r=0;r<4;++r)(i=t.source[r])&&(i.length?n.push({source:i,target:t.target[r]=new Array(4)}):t.target[r]=G6(i));return e};$i.add=Hse;$i.addAll=Gse;$i.cover=Yse;$i.data=Xse;$i.extent=Vse;$i.find=Wse;$i.remove=Qse;$i.removeAll=Zse;$i.root=Kse;$i.size=Jse;$i.visit=eoe;$i.visitAfter=toe;$i.x=ioe;$i.y=aoe;function xi(e){return function(){return e}}function fu(e){return(e()-.5)*1e-6}function soe(e){return e.x+e.vx}function ooe(e){return e.y+e.vy}function uoe(e){var t,n,i,r=1,a=1;typeof e!="function"&&(e=xi(e==null?1:+e));function s(){for(var f,d=t.length,h,p,y,v,b,E,_=0;_<a;++_)for(h=rM(t,soe,ooe).visitAfter(o),f=0;f<d;++f)p=t[f],b=n[p.index],E=b*b,y=p.x+p.vx,v=p.y+p.vy,h.visit(w);function w(A,M,T,R,O){var k=A.data,$=A.r,D=b+$;if(k){if(k.index>p.index){var z=y-k.x-k.vx,P=v-k.y-k.vy,q=z*z+P*P;q<D*D&&(z===0&&(z=fu(i),q+=z*z),P===0&&(P=fu(i),q+=P*P),q=(D-(q=Math.sqrt(q)))/q*r,p.vx+=(z*=q)*(D=($*=$)/(E+$)),p.vy+=(P*=q)*D,k.vx-=z*(D=1-D),k.vy-=P*D)}return}return M>y+D||R<y-D||T>v+D||O<v-D}}function o(f){if(f.data)return f.r=n[f.data.index];for(var d=f.r=0;d<4;++d)f[d]&&f[d].r>f.r&&(f.r=f[d].r)}function l(){if(t){var f,d=t.length,h;for(n=new Array(d),f=0;f<d;++f)h=t[f],n[h.index]=+e(h,f,t)}}return s.initialize=function(f,d){t=f,i=d,l()},s.iterations=function(f){return arguments.length?(a=+f,s):a},s.strength=function(f){return arguments.length?(r=+f,s):r},s.radius=function(f){return arguments.length?(e=typeof f=="function"?f:xi(+f),l(),s):e},s}function loe(e){return e.index}function Y6(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function coe(e){var t=loe,n=h,i,r=xi(30),a,s,o,l,f,d=1;e==null&&(e=[]);function h(E){return 1/Math.min(o[E.source.index],o[E.target.index])}function p(E){for(var _=0,w=e.length;_<d;++_)for(var A=0,M,T,R,O,k,$,D;A<w;++A)M=e[A],T=M.source,R=M.target,O=R.x+R.vx-T.x-T.vx||fu(f),k=R.y+R.vy-T.y-T.vy||fu(f),$=Math.sqrt(O*O+k*k),$=($-a[A])/$*E*i[A],O*=$,k*=$,R.vx-=O*(D=l[A]),R.vy-=k*D,T.vx+=O*(D=1-D),T.vy+=k*D}function y(){if(s){var E,_=s.length,w=e.length,A=new Map(s.map((T,R)=>[t(T,R,s),T])),M;for(E=0,o=new Array(_);E<w;++E)M=e[E],M.index=E,typeof M.source!="object"&&(M.source=Y6(A,M.source)),typeof M.target!="object"&&(M.target=Y6(A,M.target)),o[M.source.index]=(o[M.source.index]||0)+1,o[M.target.index]=(o[M.target.index]||0)+1;for(E=0,l=new Array(w);E<w;++E)M=e[E],l[E]=o[M.source.index]/(o[M.source.index]+o[M.target.index]);i=new Array(w),v(),a=new Array(w),b()}}function v(){if(s)for(var E=0,_=e.length;E<_;++E)i[E]=+n(e[E],E,e)}function b(){if(s)for(var E=0,_=e.length;E<_;++E)a[E]=+r(e[E],E,e)}return p.initialize=function(E,_){s=E,f=_,y()},p.links=function(E){return arguments.length?(e=E,y(),p):e},p.id=function(E){return arguments.length?(t=E,p):t},p.iterations=function(E){return arguments.length?(d=+E,p):d},p.strength=function(E){return arguments.length?(n=typeof E=="function"?E:xi(+E),v(),p):n},p.distance=function(E){return arguments.length?(r=typeof E=="function"?E:xi(+E),b(),p):r},p}var foe={value:()=>{}};function Rj(){for(var e=0,t=arguments.length,n={},i;e<t;++e){if(!(i=arguments[e]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new V1(n)}function V1(e){this._=e}function doe(e,t){return e.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}V1.prototype=Rj.prototype={constructor:V1,on:function(e,t){var n=this._,i=doe(e+"",n),r,a=-1,s=i.length;if(arguments.length<2){for(;++a<s;)if((r=(e=i[a]).type)&&(r=hoe(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<s;)if(r=(e=i[a]).type)n[r]=X6(n[r],e.name,t);else if(t==null)for(r in n)n[r]=X6(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new V1(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,a;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],i=0,r=a.length;i<r;++i)a[i].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],r=0,a=i.length;r<a;++r)i[r].value.apply(t,n)}};function hoe(e,t){for(var n=0,i=e.length,r;n<i;++n)if((r=e[n]).name===t)return r.value}function X6(e,t,n){for(var i=0,r=e.length;i<r;++i)if(e[i].name===t){e[i]=foe,e=e.slice(0,i).concat(e.slice(i+1));break}return n!=null&&e.push({name:t,value:n}),e}var pd=0,Hg=0,yg=0,Dj=1e3,cv,Gg,fv=0,ac=0,Nb=0,$p=typeof performance=="object"&&performance.now?performance:Date,Nj=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function sM(){return ac||(Nj(goe),ac=$p.now()+Nb)}function goe(){ac=0}function dv(){this._call=this._time=this._next=null}dv.prototype=zj.prototype={constructor:dv,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?sM():+n)+(t==null?0:+t),!this._next&&Gg!==this&&(Gg?Gg._next=this:cv=this,Gg=this),this._call=e,this._time=n,rA()},stop:function(){this._call&&(this._call=null,this._time=1/0,rA())}};function zj(e,t,n){var i=new dv;return i.restart(e,t,n),i}function poe(){sM(),++pd;for(var e=cv,t;e;)(t=ac-e._time)>=0&&e._call.call(void 0,t),e=e._next;--pd}function V6(){ac=(fv=$p.now())+Nb,pd=Hg=0;try{poe()}finally{pd=0,yoe(),ac=0}}function moe(){var e=$p.now(),t=e-fv;t>Dj&&(Nb-=t,fv=e)}function yoe(){for(var e,t=cv,n,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:cv=n);Gg=e,rA(i)}function rA(e){if(!pd){Hg&&(Hg=clearTimeout(Hg));var t=e-ac;t>24?(e<1/0&&(Hg=setTimeout(V6,e-$p.now()-Nb)),yg&&(yg=clearInterval(yg))):(yg||(fv=$p.now(),yg=setInterval(moe,Dj)),pd=1,Nj(V6))}}function voe(e,t,n){var i=new dv,r=t;return t==null?(i.restart(e,t,n),i):(i._restart=i.restart,i.restart=function(a,s,o){s=+s,o=o==null?sM():+o,i._restart(function l(f){f+=r,i._restart(l,r+=s,o),a(f)},s,o)},i.restart(e,t,n),i)}const boe=1664525,xoe=1013904223,W6=4294967296;function Eoe(){let e=1;return()=>(e=(boe*e+xoe)%W6)/W6}function Soe(e){return e.x}function _oe(e){return e.y}var woe=10,Aoe=Math.PI*(3-Math.sqrt(5));function Coe(e){var t,n=1,i=.001,r=1-Math.pow(i,1/300),a=0,s=.6,o=new Map,l=zj(h),f=Rj("tick","end"),d=Eoe();e==null&&(e=[]);function h(){p(),f.call("tick",t),n<i&&(l.stop(),f.call("end",t))}function p(b){var E,_=e.length,w;b===void 0&&(b=1);for(var A=0;A<b;++A)for(n+=(a-n)*r,o.forEach(function(M){M(n)}),E=0;E<_;++E)w=e[E],w.fx==null?w.x+=w.vx*=s:(w.x=w.fx,w.vx=0),w.fy==null?w.y+=w.vy*=s:(w.y=w.fy,w.vy=0);return t}function y(){for(var b=0,E=e.length,_;b<E;++b){if(_=e[b],_.index=b,_.fx!=null&&(_.x=_.fx),_.fy!=null&&(_.y=_.fy),isNaN(_.x)||isNaN(_.y)){var w=woe*Math.sqrt(.5+b),A=b*Aoe;_.x=w*Math.cos(A),_.y=w*Math.sin(A)}(isNaN(_.vx)||isNaN(_.vy))&&(_.vx=_.vy=0)}}function v(b){return b.initialize&&b.initialize(e,d),b}return y(),t={tick:p,restart:function(){return l.restart(h),t},stop:function(){return l.stop(),t},nodes:function(b){return arguments.length?(e=b,y(),o.forEach(v),t):e},alpha:function(b){return arguments.length?(n=+b,t):n},alphaMin:function(b){return arguments.length?(i=+b,t):i},alphaDecay:function(b){return arguments.length?(r=+b,t):+r},alphaTarget:function(b){return arguments.length?(a=+b,t):a},velocityDecay:function(b){return arguments.length?(s=1-b,t):1-s},randomSource:function(b){return arguments.length?(d=b,o.forEach(v),t):d},force:function(b,E){return arguments.length>1?(E==null?o.delete(b):o.set(b,v(E)),t):o.get(b)},find:function(b,E,_){var w=0,A=e.length,M,T,R,O,k;for(_==null?_=1/0:_*=_,w=0;w<A;++w)O=e[w],M=b-O.x,T=E-O.y,R=M*M+T*T,R<_&&(k=O,_=R);return k},on:function(b,E){return arguments.length>1?(f.on(b,E),t):f.on(b)}}}function $oe(){var e,t,n,i,r=xi(-30),a,s=1,o=1/0,l=.81;function f(y){var v,b=e.length,E=rM(e,Soe,_oe).visitAfter(h);for(i=y,v=0;v<b;++v)t=e[v],E.visit(p)}function d(){if(e){var y,v=e.length,b;for(a=new Array(v),y=0;y<v;++y)b=e[y],a[b.index]=+r(b,y,e)}}function h(y){var v=0,b,E,_=0,w,A,M;if(y.length){for(w=A=M=0;M<4;++M)(b=y[M])&&(E=Math.abs(b.value))&&(v+=b.value,_+=E,w+=E*b.x,A+=E*b.y);y.x=w/_,y.y=A/_}else{b=y,b.x=b.data.x,b.y=b.data.y;do v+=a[b.data.index];while(b=b.next)}y.value=v}function p(y,v,b,E){if(!y.value)return!0;var _=y.x-t.x,w=y.y-t.y,A=E-v,M=_*_+w*w;if(A*A/l<M)return M<o&&(_===0&&(_=fu(n),M+=_*_),w===0&&(w=fu(n),M+=w*w),M<s&&(M=Math.sqrt(s*M)),t.vx+=_*y.value*i/M,t.vy+=w*y.value*i/M),!0;if(y.length||M>=o)return;(y.data!==t||y.next)&&(_===0&&(_=fu(n),M+=_*_),w===0&&(w=fu(n),M+=w*w),M<s&&(M=Math.sqrt(s*M)));do y.data!==t&&(A=a[y.data.index]*i/M,t.vx+=_*A,t.vy+=w*A);while(y=y.next)}return f.initialize=function(y,v){e=y,n=v,d()},f.strength=function(y){return arguments.length?(r=typeof y=="function"?y:xi(+y),d(),f):r},f.distanceMin=function(y){return arguments.length?(s=y*y,f):Math.sqrt(s)},f.distanceMax=function(y){return arguments.length?(o=y*y,f):Math.sqrt(o)},f.theta=function(y){return arguments.length?(l=y*y,f):Math.sqrt(l)},f}function Toe(e){var t=xi(.1),n,i,r;typeof e!="function"&&(e=xi(e==null?0:+e));function a(o){for(var l=0,f=n.length,d;l<f;++l)d=n[l],d.vx+=(r[l]-d.x)*i[l]*o}function s(){if(n){var o,l=n.length;for(i=new Array(l),r=new Array(l),o=0;o<l;++o)i[o]=isNaN(r[o]=+e(n[o],o,n))?0:+t(n[o],o,n)}}return a.initialize=function(o){n=o,s()},a.strength=function(o){return arguments.length?(t=typeof o=="function"?o:xi(+o),s(),a):t},a.x=function(o){return arguments.length?(e=typeof o=="function"?o:xi(+o),s(),a):e},a}function Moe(e){var t=xi(.1),n,i,r;typeof e!="function"&&(e=xi(e==null?0:+e));function a(o){for(var l=0,f=n.length,d;l<f;++l)d=n[l],d.vy+=(r[l]-d.y)*i[l]*o}function s(){if(n){var o,l=n.length;for(i=new Array(l),r=new Array(l),o=0;o<l;++o)i[o]=isNaN(r[o]=+e(n[o],o,n))?0:+t(n[o],o,n)}}return a.initialize=function(o){n=o,s()},a.strength=function(o){return arguments.length?(t=typeof o=="function"?o:xi(+o),s(),a):t},a.y=function(o){return arguments.length?(e=typeof o=="function"?o:xi(+o),s(),a):e},a}const Q6={center:qse,collide:uoe,nbody:$oe,link:coe,x:Toe,y:Moe},Yg="forces",aA=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],koe=["static","iterations"],Fj=["x","y","vx","vy"];function oM(e){ee.call(this,null,e)}oM.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:Fj}]};be(oM,ee,{transform(e,t){var n=this.value,i=t.changed(t.ADD_REM),r=e.modified(aA),a=e.iterations||300;if(n?(i&&(t.modifies("index"),n.nodes(t.source)),(r||t.changed(t.MOD))&&Lj(n,e,0,t)):(this.value=n=Roe(t.source,e),n.on("tick",Ooe(t.dataflow,this)),e.static||(i=!0,n.tick()),t.modifies("index")),r||i||e.modified(koe)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/a)),e.static)for(n.stop();--a>=0;)n.tick();else if(n.stopped()&&n.restart(),!i)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let o=this._argops,l=0,f=o.length,d;l<f;++l)if(d=o[l],!(d.name!==Yg||d.op._argval.force!=="link")){for(var i=d.op._argops,r=0,a=i.length,s;r<a;++r)if(i[r].name==="links"&&(s=i[r].op.source)){n.pulse(s,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(Fj)}});function Ooe(e,t){return()=>e.touch(t).run()}function Roe(e,t){const n=Coe(e),i=n.stop,r=n.restart;let a=!1;return n.stopped=()=>a,n.restart=()=>(a=!1,r()),n.stop=()=>(a=!0,i()),Lj(n,t,!0).on("end",()=>a=!0)}function Lj(e,t,n,i){var r=Se(t.forces),a,s,o,l;for(a=0,s=aA.length;a<s;++a)o=aA[a],o!==Yg&&t.modified(o)&&e[o](t[o]);for(a=0,s=r.length;a<s;++a)l=Yg+a,o=n||t.modified(Yg,a)?Noe(r[a]):i&&Doe(r[a],i)?e.force(l):null,o&&e.force(l,o);for(s=e.numForces||0;a<s;++a)e.force(Yg+a,null);return e.numForces=r.length,e}function Doe(e,t){var n,i;for(n in e)if(Xe(i=e[n])&&t.modified(ri(i)))return 1;return 0}function Noe(e){var t,n;Ce(Q6,e.force)||ie("Unrecognized force: "+e.force),t=Q6[e.force]();for(n in e)Xe(t[n])&&zoe(t[n],e[n],e);return t}function zoe(e,t,n){e(Xe(t)?i=>t(i,n):t)}const Foe=Object.freeze(Object.defineProperty({__proto__:null,force:oM},Symbol.toStringTag,{value:"Module"}));function Loe(e,t){return e.parent===t.parent?1:2}function Uoe(e){return e.reduce(Boe,0)/e.length}function Boe(e,t){return e+t.x}function joe(e){return 1+e.reduce(Poe,0)}function Poe(e,t){return Math.max(e,t.y)}function Ioe(e){for(var t;t=e.children;)e=t[0];return e}function qoe(e){for(var t;t=e.children;)e=t[t.length-1];return e}function Hoe(){var e=Loe,t=1,n=1,i=!1;function r(a){var s,o=0;a.eachAfter(function(p){var y=p.children;y?(p.x=Uoe(y),p.y=joe(y)):(p.x=s?o+=e(p,s):0,p.y=0,s=p)});var l=Ioe(a),f=qoe(a),d=l.x-e(l,f)/2,h=f.x+e(f,l)/2;return a.eachAfter(i?function(p){p.x=(p.x-a.x)*t,p.y=(a.y-p.y)*n}:function(p){p.x=(p.x-d)/(h-d)*t,p.y=(1-(a.y?p.y/a.y:1))*n})}return r.separation=function(a){return arguments.length?(e=a,r):e},r.size=function(a){return arguments.length?(i=!1,t=+a[0],n=+a[1],r):i?null:[t,n]},r.nodeSize=function(a){return arguments.length?(i=!0,t=+a[0],n=+a[1],r):i?[t,n]:null},r}function Goe(e){var t=0,n=e.children,i=n&&n.length;if(!i)t=1;else for(;--i>=0;)t+=n[i].value;e.value=t}function Yoe(){return this.eachAfter(Goe)}function Xoe(e,t){let n=-1;for(const i of this)e.call(t,i,++n,this);return this}function Voe(e,t){for(var n=this,i=[n],r,a,s=-1;n=i.pop();)if(e.call(t,n,++s,this),r=n.children)for(a=r.length-1;a>=0;--a)i.push(r[a]);return this}function Woe(e,t){for(var n=this,i=[n],r=[],a,s,o,l=-1;n=i.pop();)if(r.push(n),a=n.children)for(s=0,o=a.length;s<o;++s)i.push(a[s]);for(;n=r.pop();)e.call(t,n,++l,this);return this}function Qoe(e,t){let n=-1;for(const i of this)if(e.call(t,i,++n,this))return i}function Zoe(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,i=t.children,r=i&&i.length;--r>=0;)n+=i[r].value;t.value=n})}function Koe(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function Joe(e){for(var t=this,n=eue(t,e),i=[t];t!==n;)t=t.parent,i.push(t);for(var r=i.length;e!==n;)i.splice(r,0,e),e=e.parent;return i}function eue(e,t){if(e===t)return e;var n=e.ancestors(),i=t.ancestors(),r=null;for(e=n.pop(),t=i.pop();e===t;)r=e,e=n.pop(),t=i.pop();return r}function tue(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function nue(){return Array.from(this)}function iue(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function rue(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*aue(){var e=this,t,n=[e],i,r,a;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,i=e.children)for(r=0,a=i.length;r<a;++r)n.push(i[r]);while(n.length)}function uM(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=uue)):t===void 0&&(t=oue);for(var n=new md(e),i,r=[n],a,s,o,l;i=r.pop();)if((s=t(i.data))&&(l=(s=Array.from(s)).length))for(i.children=s,o=l-1;o>=0;--o)r.push(a=s[o]=new md(s[o])),a.parent=i,a.depth=i.depth+1;return n.eachBefore(Uj)}function sue(){return uM(this).eachBefore(lue)}function oue(e){return e.children}function uue(e){return Array.isArray(e)?e[1]:null}function lue(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function Uj(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function md(e){this.data=e,this.depth=this.height=0,this.parent=null}md.prototype=uM.prototype={constructor:md,count:Yoe,each:Xoe,eachAfter:Woe,eachBefore:Voe,find:Qoe,sum:Zoe,sort:Koe,path:Joe,ancestors:tue,descendants:nue,leaves:iue,links:rue,copy:sue,[Symbol.iterator]:aue};function W1(e){return e==null?null:Bj(e)}function Bj(e){if(typeof e!="function")throw new Error;return e}function Ll(){return 0}function Rf(e){return function(){return e}}const cue=1664525,fue=1013904223,Z6=4294967296;function due(){let e=1;return()=>(e=(cue*e+fue)%Z6)/Z6}function hue(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function gue(e,t){let n=e.length,i,r;for(;n;)r=t()*n--|0,i=e[n],e[n]=e[r],e[r]=i;return e}function pue(e,t){for(var n=0,i=(e=gue(Array.from(e),t)).length,r=[],a,s;n<i;)a=e[n],s&&jj(s,a)?++n:(s=yue(r=mue(r,a)),n=0);return s}function mue(e,t){var n,i;if(FS(t,e))return[t];for(n=0;n<e.length;++n)if(h1(t,e[n])&&FS(Xg(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(i=n+1;i<e.length;++i)if(h1(Xg(e[n],e[i]),t)&&h1(Xg(e[n],t),e[i])&&h1(Xg(e[i],t),e[n])&&FS(Pj(e[n],e[i],t),e))return[e[n],e[i],t];throw new Error}function h1(e,t){var n=e.r-t.r,i=t.x-e.x,r=t.y-e.y;return n<0||n*n<i*i+r*r}function jj(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,i=t.x-e.x,r=t.y-e.y;return n>0&&n*n>i*i+r*r}function FS(e,t){for(var n=0;n<t.length;++n)if(!jj(e,t[n]))return!1;return!0}function yue(e){switch(e.length){case 1:return vue(e[0]);case 2:return Xg(e[0],e[1]);case 3:return Pj(e[0],e[1],e[2])}}function vue(e){return{x:e.x,y:e.y,r:e.r}}function Xg(e,t){var n=e.x,i=e.y,r=e.r,a=t.x,s=t.y,o=t.r,l=a-n,f=s-i,d=o-r,h=Math.sqrt(l*l+f*f);return{x:(n+a+l/h*d)/2,y:(i+s+f/h*d)/2,r:(h+r+o)/2}}function Pj(e,t,n){var i=e.x,r=e.y,a=e.r,s=t.x,o=t.y,l=t.r,f=n.x,d=n.y,h=n.r,p=i-s,y=i-f,v=r-o,b=r-d,E=l-a,_=h-a,w=i*i+r*r-a*a,A=w-s*s-o*o+l*l,M=w-f*f-d*d+h*h,T=y*v-p*b,R=(v*M-b*A)/(T*2)-i,O=(b*E-v*_)/T,k=(y*A-p*M)/(T*2)-r,$=(p*_-y*E)/T,D=O*O+$*$-1,z=2*(a+R*O+k*$),P=R*R+k*k-a*a,q=-(Math.abs(D)>1e-6?(z+Math.sqrt(z*z-4*D*P))/(2*D):P/z);return{x:i+R+O*q,y:r+k+$*q,r:q}}function K6(e,t,n){var i=e.x-t.x,r,a,s=e.y-t.y,o,l,f=i*i+s*s;f?(a=t.r+n.r,a*=a,l=e.r+n.r,l*=l,a>l?(r=(f+l-a)/(2*f),o=Math.sqrt(Math.max(0,l/f-r*r)),n.x=e.x-r*i-o*s,n.y=e.y-r*s+o*i):(r=(f+a-l)/(2*f),o=Math.sqrt(Math.max(0,a/f-r*r)),n.x=t.x+r*i-o*s,n.y=t.y+r*s+o*i)):(n.x=t.x+n.r,n.y=t.y)}function J6(e,t){var n=e.r+t.r-1e-6,i=t.x-e.x,r=t.y-e.y;return n>0&&n*n>i*i+r*r}function e4(e){var t=e._,n=e.next._,i=t.r+n.r,r=(t.x*n.r+n.x*t.r)/i,a=(t.y*n.r+n.y*t.r)/i;return r*r+a*a}function g1(e){this._=e,this.next=null,this.previous=null}function bue(e,t){if(!(a=(e=hue(e)).length))return 0;var n,i,r,a,s,o,l,f,d,h,p;if(n=e[0],n.x=0,n.y=0,!(a>1))return n.r;if(i=e[1],n.x=-i.r,i.x=n.r,i.y=0,!(a>2))return n.r+i.r;K6(i,n,r=e[2]),n=new g1(n),i=new g1(i),r=new g1(r),n.next=r.previous=i,i.next=n.previous=r,r.next=i.previous=n;e:for(l=3;l<a;++l){K6(n._,i._,r=e[l]),r=new g1(r),f=i.next,d=n.previous,h=i._.r,p=n._.r;do if(h<=p){if(J6(f._,r._)){i=f,n.next=i,i.previous=n,--l;continue e}h+=f._.r,f=f.next}else{if(J6(d._,r._)){n=d,n.next=i,i.previous=n,--l;continue e}p+=d._.r,d=d.previous}while(f!==d.next);for(r.previous=n,r.next=i,n.next=i.previous=i=r,s=e4(n);(r=r.next)!==i;)(o=e4(r))<s&&(n=r,s=o);i=n.next}for(n=[i._],r=i;(r=r.next)!==i;)n.push(r._);for(r=pue(n,t),l=0;l<a;++l)n=e[l],n.x-=r.x,n.y-=r.y;return r.r}function xue(e){return Math.sqrt(e.value)}function Eue(){var e=null,t=1,n=1,i=Ll;function r(a){const s=due();return a.x=t/2,a.y=n/2,e?a.eachBefore(t4(e)).eachAfter(LS(i,.5,s)).eachBefore(n4(1)):a.eachBefore(t4(xue)).eachAfter(LS(Ll,1,s)).eachAfter(LS(i,a.r/Math.min(t,n),s)).eachBefore(n4(Math.min(t,n)/(2*a.r))),a}return r.radius=function(a){return arguments.length?(e=W1(a),r):e},r.size=function(a){return arguments.length?(t=+a[0],n=+a[1],r):[t,n]},r.padding=function(a){return arguments.length?(i=typeof a=="function"?a:Rf(+a),r):i},r}function t4(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function LS(e,t,n){return function(i){if(r=i.children){var r,a,s=r.length,o=e(i)*t||0,l;if(o)for(a=0;a<s;++a)r[a].r+=o;if(l=bue(r,n),o)for(a=0;a<s;++a)r[a].r-=o;i.r=l+o}}}function n4(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function Ij(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function h0(e,t,n,i,r){for(var a=e.children,s,o=-1,l=a.length,f=e.value&&(i-t)/e.value;++o<l;)s=a[o],s.y0=n,s.y1=r,s.x0=t,s.x1=t+=s.value*f}function Sue(){var e=1,t=1,n=0,i=!1;function r(s){var o=s.height+1;return s.x0=s.y0=n,s.x1=e,s.y1=t/o,s.eachBefore(a(t,o)),i&&s.eachBefore(Ij),s}function a(s,o){return function(l){l.children&&h0(l,l.x0,s*(l.depth+1)/o,l.x1,s*(l.depth+2)/o);var f=l.x0,d=l.y0,h=l.x1-n,p=l.y1-n;h<f&&(f=h=(f+h)/2),p<d&&(d=p=(d+p)/2),l.x0=f,l.y0=d,l.x1=h,l.y1=p}}return r.round=function(s){return arguments.length?(i=!!s,r):i},r.size=function(s){return arguments.length?(e=+s[0],t=+s[1],r):[e,t]},r.padding=function(s){return arguments.length?(n=+s,r):n},r}var _ue={depth:-1},i4={},US={};function wue(e){return e.id}function Aue(e){return e.parentId}function r4(){var e=wue,t=Aue,n;function i(r){var a=Array.from(r),s=e,o=t,l,f,d,h,p,y,v,b,E=new Map;if(n!=null){const _=a.map((M,T)=>Cue(n(M,T,r))),w=_.map(a4),A=new Set(_).add("");for(const M of w)A.has(M)||(A.add(M),_.push(M),w.push(a4(M)),a.push(US));s=(M,T)=>_[T],o=(M,T)=>w[T]}for(d=0,l=a.length;d<l;++d)f=a[d],y=a[d]=new md(f),(v=s(f,d,r))!=null&&(v+="")&&(b=y.id=v,E.set(b,E.has(b)?i4:y)),(v=o(f,d,r))!=null&&(v+="")&&(y.parent=v);for(d=0;d<l;++d)if(y=a[d],v=y.parent){if(p=E.get(v),!p)throw new Error("missing: "+v);if(p===i4)throw new Error("ambiguous: "+v);p.children?p.children.push(y):p.children=[y],y.parent=p}else{if(h)throw new Error("multiple roots");h=y}if(!h)throw new Error("no root");if(n!=null){for(;h.data===US&&h.children.length===1;)h=h.children[0],--l;for(let _=a.length-1;_>=0&&(y=a[_],y.data===US);--_)y.data=null}if(h.parent=_ue,h.eachBefore(function(_){_.depth=_.parent.depth+1,--l}).eachBefore(Uj),h.parent=null,l>0)throw new Error("cycle");return h}return i.id=function(r){return arguments.length?(e=W1(r),i):e},i.parentId=function(r){return arguments.length?(t=W1(r),i):t},i.path=function(r){return arguments.length?(n=W1(r),i):n},i}function Cue(e){e=`${e}`;let t=e.length;return sA(e,t-1)&&!sA(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function a4(e){let t=e.length;if(t<2)return"";for(;--t>1&&!sA(e,t););return e.slice(0,t)}function sA(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function $ue(e,t){return e.parent===t.parent?1:2}function BS(e){var t=e.children;return t?t[0]:e.t}function jS(e){var t=e.children;return t?t[t.length-1]:e.t}function Tue(e,t,n){var i=n/(t.i-e.i);t.c-=i,t.s+=n,e.c+=i,t.z+=n,t.m+=n}function Mue(e){for(var t=0,n=0,i=e.children,r=i.length,a;--r>=0;)a=i[r],a.z+=t,a.m+=t,t+=a.s+(n+=a.c)}function kue(e,t,n){return e.a.parent===t.parent?e.a:n}function Q1(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}Q1.prototype=Object.create(md.prototype);function Oue(e){for(var t=new Q1(e,0),n,i=[t],r,a,s,o;n=i.pop();)if(a=n._.children)for(n.children=new Array(o=a.length),s=o-1;s>=0;--s)i.push(r=n.children[s]=new Q1(a[s],s)),r.parent=n;return(t.parent=new Q1(null,0)).children=[t],t}function Rue(){var e=$ue,t=1,n=1,i=null;function r(f){var d=Oue(f);if(d.eachAfter(a),d.parent.m=-d.z,d.eachBefore(s),i)f.eachBefore(l);else{var h=f,p=f,y=f;f.eachBefore(function(w){w.x<h.x&&(h=w),w.x>p.x&&(p=w),w.depth>y.depth&&(y=w)});var v=h===p?1:e(h,p)/2,b=v-h.x,E=t/(p.x+v+b),_=n/(y.depth||1);f.eachBefore(function(w){w.x=(w.x+b)*E,w.y=w.depth*_})}return f}function a(f){var d=f.children,h=f.parent.children,p=f.i?h[f.i-1]:null;if(d){Mue(f);var y=(d[0].z+d[d.length-1].z)/2;p?(f.z=p.z+e(f._,p._),f.m=f.z-y):f.z=y}else p&&(f.z=p.z+e(f._,p._));f.parent.A=o(f,p,f.parent.A||h[0])}function s(f){f._.x=f.z+f.parent.m,f.m+=f.parent.m}function o(f,d,h){if(d){for(var p=f,y=f,v=d,b=p.parent.children[0],E=p.m,_=y.m,w=v.m,A=b.m,M;v=jS(v),p=BS(p),v&&p;)b=BS(b),y=jS(y),y.a=f,M=v.z+w-p.z-E+e(v._,p._),M>0&&(Tue(kue(v,f,h),f,M),E+=M,_+=M),w+=v.m,E+=p.m,A+=b.m,_+=y.m;v&&!jS(y)&&(y.t=v,y.m+=w-_),p&&!BS(b)&&(b.t=p,b.m+=E-A,h=f)}return h}function l(f){f.x*=t,f.y=f.depth*n}return r.separation=function(f){return arguments.length?(e=f,r):e},r.size=function(f){return arguments.length?(i=!1,t=+f[0],n=+f[1],r):i?null:[t,n]},r.nodeSize=function(f){return arguments.length?(i=!0,t=+f[0],n=+f[1],r):i?[t,n]:null},r}function zb(e,t,n,i,r){for(var a=e.children,s,o=-1,l=a.length,f=e.value&&(r-n)/e.value;++o<l;)s=a[o],s.x0=t,s.x1=i,s.y0=n,s.y1=n+=s.value*f}var qj=(1+Math.sqrt(5))/2;function Hj(e,t,n,i,r,a){for(var s=[],o=t.children,l,f,d=0,h=0,p=o.length,y,v,b=t.value,E,_,w,A,M,T,R;d<p;){y=r-n,v=a-i;do E=o[h++].value;while(!E&&h<p);for(_=w=E,T=Math.max(v/y,y/v)/(b*e),R=E*E*T,M=Math.max(w/R,R/_);h<p;++h){if(E+=f=o[h].value,f<_&&(_=f),f>w&&(w=f),R=E*E*T,A=Math.max(w/R,R/_),A>M){E-=f;break}M=A}s.push(l={value:E,dice:y<v,children:o.slice(d,h)}),l.dice?h0(l,n,i,r,b?i+=v*E/b:a):zb(l,n,i,b?n+=y*E/b:r,a),b-=E,d=h}return s}const Gj=function e(t){function n(i,r,a,s,o){Hj(t,i,r,a,s,o)}return n.ratio=function(i){return e((i=+i)>1?i:1)},n}(qj);function Due(){var e=Gj,t=!1,n=1,i=1,r=[0],a=Ll,s=Ll,o=Ll,l=Ll,f=Ll;function d(p){return p.x0=p.y0=0,p.x1=n,p.y1=i,p.eachBefore(h),r=[0],t&&p.eachBefore(Ij),p}function h(p){var y=r[p.depth],v=p.x0+y,b=p.y0+y,E=p.x1-y,_=p.y1-y;E<v&&(v=E=(v+E)/2),_<b&&(b=_=(b+_)/2),p.x0=v,p.y0=b,p.x1=E,p.y1=_,p.children&&(y=r[p.depth+1]=a(p)/2,v+=f(p)-y,b+=s(p)-y,E-=o(p)-y,_-=l(p)-y,E<v&&(v=E=(v+E)/2),_<b&&(b=_=(b+_)/2),e(p,v,b,E,_))}return d.round=function(p){return arguments.length?(t=!!p,d):t},d.size=function(p){return arguments.length?(n=+p[0],i=+p[1],d):[n,i]},d.tile=function(p){return arguments.length?(e=Bj(p),d):e},d.padding=function(p){return arguments.length?d.paddingInner(p).paddingOuter(p):d.paddingInner()},d.paddingInner=function(p){return arguments.length?(a=typeof p=="function"?p:Rf(+p),d):a},d.paddingOuter=function(p){return arguments.length?d.paddingTop(p).paddingRight(p).paddingBottom(p).paddingLeft(p):d.paddingTop()},d.paddingTop=function(p){return arguments.length?(s=typeof p=="function"?p:Rf(+p),d):s},d.paddingRight=function(p){return arguments.length?(o=typeof p=="function"?p:Rf(+p),d):o},d.paddingBottom=function(p){return arguments.length?(l=typeof p=="function"?p:Rf(+p),d):l},d.paddingLeft=function(p){return arguments.length?(f=typeof p=="function"?p:Rf(+p),d):f},d}function Nue(e,t,n,i,r){var a=e.children,s,o=a.length,l,f=new Array(o+1);for(f[0]=l=s=0;s<o;++s)f[s+1]=l+=a[s].value;d(0,o,e.value,t,n,i,r);function d(h,p,y,v,b,E,_){if(h>=p-1){var w=a[h];w.x0=v,w.y0=b,w.x1=E,w.y1=_;return}for(var A=f[h],M=y/2+A,T=h+1,R=p-1;T<R;){var O=T+R>>>1;f[O]<M?T=O+1:R=O}M-f[T-1]<f[T]-M&&h+1<T&&--T;var k=f[T]-A,$=y-k;if(E-v>_-b){var D=y?(v*$+E*k)/y:E;d(h,T,k,v,b,D,_),d(T,p,$,D,b,E,_)}else{var z=y?(b*$+_*k)/y:_;d(h,T,k,v,b,E,z),d(T,p,$,v,z,E,_)}}}function zue(e,t,n,i,r){(e.depth&1?zb:h0)(e,t,n,i,r)}const Fue=function e(t){function n(i,r,a,s,o){if((l=i._squarify)&&l.ratio===t)for(var l,f,d,h,p=-1,y,v=l.length,b=i.value;++p<v;){for(f=l[p],d=f.children,h=f.value=0,y=d.length;h<y;++h)f.value+=d[h].value;f.dice?h0(f,r,a,s,b?a+=(o-a)*f.value/b:o):zb(f,r,a,b?r+=(s-r)*f.value/b:s,o),b-=f.value}else i._squarify=l=Hj(t,i,r,a,s,o),l.ratio=t}return n.ratio=function(i){return e((i=+i)>1?i:1)},n}(qj);function oA(e,t,n){const i={};return e.each(r=>{const a=r.data;n(a)&&(i[t(a)]=r)}),e.lookup=i,e}function lM(e){ee.call(this,null,e)}lM.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const Lue=e=>e.values;be(lM,ee,{transform(e,t){t.source||ie("Nest transform requires an upstream data source.");var n=e.generate,i=e.modified(),r=t.clone(),a=this.value;return(!a||i||t.changed())&&(a&&a.each(s=>{s.children&&Wv(s.data)&&r.rem.push(s.data)}),this.value=a=uM({values:Se(e.keys).reduce((s,o)=>(s.key(o),s),Uue()).entries(r.source)},Lue),n&&a.each(s=>{s.children&&(s=mt(s.data),r.add.push(s),r.source.push(s))}),oA(a,ze,ze)),r.source.root=a,r}});function Uue(){const e=[],t={entries:r=>i(n(r,0),0),key:r=>(e.push(r),t)};function n(r,a){if(a>=e.length)return r;const s=r.length,o=e[a++],l={},f={};let d=-1,h,p,y;for(;++d<s;)h=o(p=r[d])+"",(y=l[h])?y.push(p):l[h]=[p];for(h in l)f[h]=n(l[h],a);return f}function i(r,a){if(++a>e.length)return r;const s=[];for(const o in r)s.push({key:o,values:i(r[o],a)});return s}return t}function yo(e){ee.call(this,null,e)}const Bue=(e,t)=>e.parent===t.parent?1:2;be(yo,ee,{transform(e,t){(!t.source||!t.source.root)&&ie(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),i=this.fields,r=t.source.root,a=e.as||i;e.field?r.sum(e.field):r.count(),e.sort&&r.sort(Sc(e.sort,s=>s.data)),jue(n,this.params,e),n.separation&&n.separation(e.separation!==!1?Bue:Dd);try{this.value=n(r)}catch(s){ie(s)}return r.each(s=>Pue(s,i,a)),t.reflow(e.modified()).modifies(a).modifies("leaf")}});function jue(e,t,n){for(let i,r=0,a=t.length;r<a;++r)i=t[r],i in n&&e[i](n[i])}function Pue(e,t,n){const i=e.data,r=t.length-1;for(let a=0;a<r;++a)i[n[a]]=e[t[a]];i[n[r]]=e.children?e.children.length:0}const uA=["x","y","r","depth","children"];function cM(e){yo.call(this,e)}cM.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:uA.length,default:uA}]};be(cM,yo,{layout:Eue,params:["radius","size","padding"],fields:uA});const lA=["x0","y0","x1","y1","depth","children"];function fM(e){yo.call(this,e)}fM.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:lA.length,default:lA}]};be(fM,yo,{layout:Sue,params:["size","round","padding"],fields:lA});function dM(e){ee.call(this,null,e)}dM.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};be(dM,ee,{transform(e,t){t.source||ie("Stratify transform requires an upstream data source.");let n=this.value;const i=e.modified(),r=t.fork(t.ALL).materialize(t.SOURCE),a=!n||i||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return r.source=r.source.slice(),a&&(n=r.source.length?oA(r4().id(e.key).parentId(e.parentKey)(r.source),e.key,jr):oA(r4()([{}]),e.key,e.key)),r.source.root=this.value=n,r}});const s4={tidy:Rue,cluster:Hoe},cA=["x","y","depth","children"];function hM(e){yo.call(this,e)}hM.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:cA.length,default:cA}]};be(hM,yo,{layout(e){const t=e||"tidy";if(Ce(s4,t))return s4[t]();ie("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:cA});function gM(e){ee.call(this,[],e)}gM.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};be(gM,ee,{transform(e,t){const n=this.value,i=t.source&&t.source.root,r=t.fork(t.NO_SOURCE),a={};return i||ie("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(r.rem=n,t.visit(t.SOURCE,s=>a[ze(s)]=1),i.each(s=>{const o=s.data,l=s.parent&&s.parent.data;l&&a[ze(o)]&&a[ze(l)]&&r.add.push(mt({source:l,target:o}))}),this.value=r.add):t.changed(t.MOD)&&(t.visit(t.MOD,s=>a[ze(s)]=1),n.forEach(s=>{(a[ze(s.source)]||a[ze(s.target)])&&r.mod.push(s)})),r}});const o4={binary:Nue,dice:h0,slice:zb,slicedice:zue,squarify:Gj,resquarify:Fue},fA=["x0","y0","x1","y1","depth","children"];function pM(e){yo.call(this,e)}pM.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:fA.length,default:fA}]};be(pM,yo,{layout(){const e=Due();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{Ce(o4,t)?e.tile(o4[t]):ie("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:fA});const Iue=Object.freeze(Object.defineProperty({__proto__:null,nest:lM,pack:cM,partition:fM,stratify:dM,tree:hM,treelinks:gM,treemap:pM},Symbol.toStringTag,{value:"Module"})),PS=4278190080;function que(e,t){const n=e.bitmap();return(t||[]).forEach(i=>n.set(e(i.boundary[0]),e(i.boundary[3]))),[n,void 0]}function Hue(e,t,n,i,r){const a=e.width,s=e.height,o=i||r,l=yu(a,s).getContext("2d"),f=yu(a,s).getContext("2d"),d=o&&yu(a,s).getContext("2d");n.forEach(k=>Z1(l,k,!1)),Z1(f,t,!1),o&&Z1(d,t,!0);const h=IS(l,a,s),p=IS(f,a,s),y=o&&IS(d,a,s),v=e.bitmap(),b=o&&e.bitmap();let E,_,w,A,M,T,R,O;for(_=0;_<s;++_)for(E=0;E<a;++E)M=_*a+E,T=h[M]&PS,O=p[M]&PS,R=o&&y[M]&PS,(T||R||O)&&(w=e(E),A=e(_),!r&&(T||O)&&v.set(w,A),o&&(T||R)&&b.set(w,A));return[v,b]}function IS(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function Z1(e,t,n){if(!t.length)return;const i=t[0].mark.marktype;i==="group"?t.forEach(r=>{r.items.forEach(a=>Z1(e,a.items,n))}):dr[i].draw(e,{items:n?t.map(Gue):t})}function Gue(e){const t=Qv(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const Ps=5,di=31,Tp=32,nu=new Uint32Array(Tp+1),sa=new Uint32Array(Tp+1);sa[0]=0;nu[0]=~sa[0];for(let e=1;e<=Tp;++e)sa[e]=sa[e-1]<<1|1,nu[e]=~sa[e];function Yue(e,t){const n=new Uint32Array(~~((e*t+Tp)/Tp));function i(a,s){n[a]|=s}function r(a,s){n[a]&=s}return{array:n,get:(a,s)=>{const o=s*e+a;return n[o>>>Ps]&1<<(o&di)},set:(a,s)=>{const o=s*e+a;i(o>>>Ps,1<<(o&di))},clear:(a,s)=>{const o=s*e+a;r(o>>>Ps,~(1<<(o&di)))},getRange:(a,s,o,l)=>{let f=l,d,h,p,y;for(;f>=s;--f)if(d=f*e+a,h=f*e+o,p=d>>>Ps,y=h>>>Ps,p===y){if(n[p]&nu[d&di]&sa[(h&di)+1])return!0}else{if(n[p]&nu[d&di]||n[y]&sa[(h&di)+1])return!0;for(let v=p+1;v<y;++v)if(n[v])return!0}return!1},setRange:(a,s,o,l)=>{let f,d,h,p,y;for(;s<=l;++s)if(f=s*e+a,d=s*e+o,h=f>>>Ps,p=d>>>Ps,h===p)i(h,nu[f&di]&sa[(d&di)+1]);else for(i(h,nu[f&di]),i(p,sa[(d&di)+1]),y=h+1;y<p;++y)i(y,4294967295)},clearRange:(a,s,o,l)=>{let f,d,h,p,y;for(;s<=l;++s)if(f=s*e+a,d=s*e+o,h=f>>>Ps,p=d>>>Ps,h===p)r(h,sa[f&di]|nu[(d&di)+1]);else for(r(h,sa[f&di]),r(p,nu[(d&di)+1]),y=h+1;y<p;++y)r(y,0)},outOfBounds:(a,s,o,l)=>a<0||s<0||l>=t||o>=e}}function Xue(e,t,n){const i=Math.max(1,Math.sqrt(e*t/1e6)),r=~~((e+2*n+i)/i),a=~~((t+2*n+i)/i),s=o=>~~((o+n)/i);return s.invert=o=>o*i-n,s.bitmap=()=>Yue(r,a),s.ratio=i,s.padding=n,s.width=e,s.height=t,s}function Vue(e,t,n,i){const r=e.width,a=e.height;return function(s){const o=s.datum.datum.items[i].items,l=o.length,f=s.datum.fontSize,d=or.width(s.datum,s.datum.text);let h=0,p,y,v,b,E,_,w;for(let A=0;A<l;++A)p=o[A].x,v=o[A].y,y=o[A].x2===void 0?p:o[A].x2,b=o[A].y2===void 0?v:o[A].y2,E=(p+y)/2,_=(v+b)/2,w=Math.abs(y-p+b-v),w>=h&&(h=w,s.x=E,s.y=_);return E=d/2,_=f/2,p=s.x-E,y=s.x+E,v=s.y-_,b=s.y+_,s.align="center",p<0&&y<=r?s.align="left":0<=p&&r<y&&(s.align="right"),s.baseline="middle",v<0&&b<=a?s.baseline="top":0<=v&&a<b&&(s.baseline="bottom"),!0}}function hv(e,t,n,i,r,a){let s=n/2;return e-s<0||e+s>r||t-(s=i/2)<0||t+s>a}function du(e,t,n,i,r,a,s,o){const l=r*a/(i*2),f=e(t-l),d=e(t+l),h=e(n-(a=a/2)),p=e(n+a);return s.outOfBounds(f,h,d,p)||s.getRange(f,h,d,p)||o&&o.getRange(f,h,d,p)}function Wue(e,t,n,i){const r=e.width,a=e.height,s=t[0],o=t[1];function l(f,d,h,p,y){const v=e.invert(f),b=e.invert(d);let E=h,_=a,w;if(!hv(v,b,p,y,r,a)&&!du(e,v,b,y,p,E,s,o)&&!du(e,v,b,y,p,y,s,null)){for(;_-E>=1;)w=(E+_)/2,du(e,v,b,y,p,w,s,o)?_=w:E=w;if(E>h)return[v,b,E,!0]}}return function(f){const d=f.datum.datum.items[i].items,h=d.length,p=f.datum.fontSize,y=or.width(f.datum,f.datum.text);let v=n?p:0,b=!1,E=!1,_=0,w,A,M,T,R,O,k,$,D,z,P,q,j,L,U,I,V;for(let G=0;G<h;++G){for(w=d[G].x,M=d[G].y,A=d[G].x2===void 0?w:d[G].x2,T=d[G].y2===void 0?M:d[G].y2,w>A&&(V=w,w=A,A=V),M>T&&(V=M,M=T,T=V),D=e(w),P=e(A),z=~~((D+P)/2),q=e(M),L=e(T),j=~~((q+L)/2),k=z;k>=D;--k)for($=j;$>=q;--$)I=l(k,$,v,y,p),I&&([f.x,f.y,v,b]=I);for(k=z;k<=P;++k)for($=j;$<=L;++$)I=l(k,$,v,y,p),I&&([f.x,f.y,v,b]=I);!b&&!n&&(U=Math.abs(A-w+T-M),R=(w+A)/2,O=(M+T)/2,U>=_&&!hv(R,O,y,p,r,a)&&!du(e,R,O,p,y,p,s,null)&&(_=U,f.x=R,f.y=O,E=!0))}return b||E?(R=y/2,O=p/2,s.setRange(e(f.x-R),e(f.y-O),e(f.x+R),e(f.y+O)),f.align="center",f.baseline="middle",!0):!1}}const Que=[-1,-1,1,1],Zue=[-1,1,-1,1];function Kue(e,t,n,i){const r=e.width,a=e.height,s=t[0],o=t[1],l=e.bitmap();return function(f){const d=f.datum.datum.items[i].items,h=d.length,p=f.datum.fontSize,y=or.width(f.datum,f.datum.text),v=[];let b=n?p:0,E=!1,_=!1,w=0,A,M,T,R,O,k,$,D,z,P,q,j;for(let L=0;L<h;++L){for(A=d[L].x,T=d[L].y,M=d[L].x2===void 0?A:d[L].x2,R=d[L].y2===void 0?T:d[L].y2,v.push([e((A+M)/2),e((T+R)/2)]);v.length;)if([$,D]=v.pop(),!(s.get($,D)||o.get($,D)||l.get($,D))){l.set($,D);for(let U=0;U<4;++U)O=$+Que[U],k=D+Zue[U],l.outOfBounds(O,k,O,k)||v.push([O,k]);if(O=e.invert($),k=e.invert(D),z=b,P=a,!hv(O,k,y,p,r,a)&&!du(e,O,k,p,y,z,s,o)&&!du(e,O,k,p,y,p,s,null)){for(;P-z>=1;)q=(z+P)/2,du(e,O,k,p,y,q,s,o)?P=q:z=q;z>b&&(f.x=O,f.y=k,b=z,E=!0)}}!E&&!n&&(j=Math.abs(M-A+R-T),O=(A+M)/2,k=(T+R)/2,j>=w&&!hv(O,k,y,p,r,a)&&!du(e,O,k,p,y,p,s,null)&&(w=j,f.x=O,f.y=k,_=!0))}return E||_?(O=y/2,k=p/2,s.setRange(e(f.x-O),e(f.y-k),e(f.x+O),e(f.y+k)),f.align="center",f.baseline="middle",!0):!1}}const Jue=["right","center","left"],ele=["bottom","middle","top"];function tle(e,t,n,i){const r=e.width,a=e.height,s=t[0],o=t[1],l=i.length;return function(f){const d=f.boundary,h=f.datum.fontSize;if(d[2]<0||d[5]<0||d[0]>r||d[3]>a)return!1;let p=f.textWidth??0,y,v,b,E,_,w,A,M,T,R,O,k,$,D,z;for(let P=0;P<l;++P){if(y=(n[P]&3)-1,v=(n[P]>>>2&3)-1,b=y===0&&v===0||i[P]<0,E=y&&v?Math.SQRT1_2:1,_=i[P]<0?-1:1,w=d[1+y]+i[P]*y*E,O=d[4+v]+_*h*v/2+i[P]*v*E,M=O-h/2,T=O+h/2,k=e(w),D=e(M),z=e(T),!p)if(u4(k,k,D,z,s,o,w,w,M,T,d,b))p=or.width(f.datum,f.datum.text);else continue;if(R=w+_*p*y/2,w=R-p/2,A=R+p/2,k=e(w),$=e(A),u4(k,$,D,z,s,o,w,A,M,T,d,b))return f.x=y?y*_<0?A:w:R,f.y=v?v*_<0?T:M:O,f.align=Jue[y*_+1],f.baseline=ele[v*_+1],s.setRange(k,D,$,z),!0}return!1}}function u4(e,t,n,i,r,a,s,o,l,f,d,h){return!(r.outOfBounds(e,n,t,i)||(h&&a||r).getRange(e,n,t,i))}const qS=0,HS=4,GS=8,YS=0,XS=1,VS=2,nle={"top-left":qS+YS,top:qS+XS,"top-right":qS+VS,left:HS+YS,middle:HS+XS,right:HS+VS,"bottom-left":GS+YS,bottom:GS+XS,"bottom-right":GS+VS},ile={naive:Vue,"reduced-search":Wue,floodfill:Kue};function rle(e,t,n,i,r,a,s,o,l,f,d){if(!e.length)return e;const h=Math.max(i.length,r.length),p=ale(i,h),y=sle(r,h),v=ole(e[0].datum),b=v==="group"&&e[0].datum.items[l].marktype,E=b==="area",_=ule(v,b,o,l),w=f===null||f===1/0,A=E&&d==="naive";let M=-1,T=-1;const R=e.map(D=>{const z=w?or.width(D,D.text):void 0;return M=Math.max(M,z),T=Math.max(T,D.fontSize),{datum:D,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:_(D),textWidth:z}});f=f===null||f===1/0?Math.max(M,T)+Math.max(...i):f;const O=Xue(t[0],t[1],f);let k;if(!A){n&&R.sort((P,q)=>n(P.datum,q.datum));let D=!1;for(let P=0;P<y.length&&!D;++P)D=y[P]===5||p[P]<0;const z=(v&&s||E)&&e.map(P=>P.datum);k=a.length||z?Hue(O,z||[],a,D,E):que(O,s&&R)}const $=E?ile[d](O,k,s,l):tle(O,k,y,p);return R.forEach(D=>D.opacity=+$(D)),R}function ale(e,t){const n=new Float64Array(t),i=e.length;for(let r=0;r<i;++r)n[r]=e[r]||0;for(let r=i;r<t;++r)n[r]=n[i-1];return n}function sle(e,t){const n=new Int8Array(t),i=e.length;for(let r=0;r<i;++r)n[r]|=nle[e[r]];for(let r=i;r<t;++r)n[r]=n[i-1];return n}function ole(e){return e&&e.mark&&e.mark.marktype}function ule(e,t,n,i){const r=a=>[a.x,a.x,a.x,a.y,a.y,a.y];return e?e==="line"||e==="area"?a=>r(a.datum):t==="line"?a=>{const s=a.datum.items[i].items;return r(s.length?s[n==="start"?0:s.length-1]:{x:NaN,y:NaN})}:a=>{const s=a.datum.bounds;return[s.x1,(s.x1+s.x2)/2,s.x2,s.y1,(s.y1+s.y2)/2,s.y2]}:r}const dA=["x","y","opacity","align","baseline"],Yj=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function mM(e){ee.call(this,null,e)}mM.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:Yj},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:dA.length,default:dA}]};be(mM,ee,{transform(e,t){function n(a){const s=e[a];return Xe(s)&&t.modified(s.fields)}const i=e.modified();if(!(i||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&ie("Size parameter should be specified as a [width, height] array.");const r=e.as||dA;return rle(t.materialize(t.SOURCE).source||[],e.size,e.sort,Se(e.offset==null?1:e.offset),Se(e.anchor||Yj),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(a=>{const s=a.datum;s[r[0]]=a.x,s[r[1]]=a.y,s[r[2]]=a.opacity,s[r[3]]=a.align,s[r[4]]=a.baseline}),t.reflow(i).modifies(r)}});const lle=Object.freeze(Object.defineProperty({__proto__:null,label:mM},Symbol.toStringTag,{value:"Module"}));function Xj(e,t){var n=[],i=function(d){return d(o)},r,a,s,o,l,f;if(t==null)n.push(e);else for(r={},a=0,s=e.length;a<s;++a)o=e[a],l=t.map(i),f=r[l],f||(r[l]=f=[],f.dims=l,n.push(f)),f.push(o);return n}function yM(e){ee.call(this,null,e)}yM.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};be(yM,ee,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=t.materialize(t.SOURCE).source,r=Xj(i,e.groupby),a=(e.groupby||[]).map(Zt),s=a.length,o=e.as||[Zt(e.x),Zt(e.y)],l=[];r.forEach(f=>{e9(f,e.x,e.y,e.bandwidth||.3).forEach(d=>{const h={};for(let p=0;p<s;++p)h[a[p]]=f.dims[p];h[o[0]]=d[0],h[o[1]]=d[1],l.push(mt(h))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});const hA={constant:KC,linear:JC,log:Q7,exp:Z7,pow:K7,quad:e$,poly:J7},cle=(e,t)=>e==="poly"?t:e==="quad"?2:1;function vM(e){ee.call(this,null,e)}vM.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(hA)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};be(vM,ee,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=t.materialize(t.SOURCE).source,r=Xj(i,e.groupby),a=(e.groupby||[]).map(Zt),s=e.method||"linear",o=e.order==null?3:e.order,l=cle(s,o),f=e.as||[Zt(e.x),Zt(e.y)],d=hA[s],h=[];let p=e.extent;Ce(hA,s)||ie("Invalid regression method: "+s),p!=null&&s==="log"&&p[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),p=null),r.forEach(y=>{if(y.length<=l){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const b=d(y,e.x,e.y,o);if(e.params){h.push(mt({keys:y.dims,coef:b.coef,rSquared:b.rSquared}));return}const E=p||es(y,e.x),_=w=>{const A={};for(let M=0;M<a.length;++M)A[a[M]]=y.dims[M];A[f[0]]=w[0],A[f[1]]=w[1],h.push(mt(A))};s==="linear"||s==="constant"?E.forEach(w=>_([w,b.predict(w)])):ib(b.predict,E,25,200).forEach(_)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=h}return n}});const fle=Object.freeze(Object.defineProperty({__proto__:null,loess:yM,regression:vM},Symbol.toStringTag,{value:"Module"})),io=11102230246251565e-32,Zn=134217729,dle=(3+8*io)*io;function WS(e,t,n,i,r){let a,s,o,l,f=t[0],d=i[0],h=0,p=0;d>f==d>-f?(a=f,f=t[++h]):(a=d,d=i[++p]);let y=0;if(h<e&&p<n)for(d>f==d>-f?(s=f+a,o=a-(s-f),f=t[++h]):(s=d+a,o=a-(s-d),d=i[++p]),a=s,o!==0&&(r[y++]=o);h<e&&p<n;)d>f==d>-f?(s=a+f,l=s-a,o=a-(s-l)+(f-l),f=t[++h]):(s=a+d,l=s-a,o=a-(s-l)+(d-l),d=i[++p]),a=s,o!==0&&(r[y++]=o);for(;h<e;)s=a+f,l=s-a,o=a-(s-l)+(f-l),f=t[++h],a=s,o!==0&&(r[y++]=o);for(;p<n;)s=a+d,l=s-a,o=a-(s-l)+(d-l),d=i[++p],a=s,o!==0&&(r[y++]=o);return(a!==0||y===0)&&(r[y++]=a),y}function hle(e,t){let n=t[0];for(let i=1;i<e;i++)n+=t[i];return n}function g0(e){return new Float64Array(e)}const gle=(3+16*io)*io,ple=(2+12*io)*io,mle=(9+64*io)*io*io,Cf=g0(4),l4=g0(8),c4=g0(12),f4=g0(16),hi=g0(4);function yle(e,t,n,i,r,a,s){let o,l,f,d,h,p,y,v,b,E,_,w,A,M,T,R,O,k;const $=e-r,D=n-r,z=t-a,P=i-a;M=$*P,p=Zn*$,y=p-(p-$),v=$-y,p=Zn*P,b=p-(p-P),E=P-b,T=v*E-(M-y*b-v*b-y*E),R=z*D,p=Zn*z,y=p-(p-z),v=z-y,p=Zn*D,b=p-(p-D),E=D-b,O=v*E-(R-y*b-v*b-y*E),_=T-O,h=T-_,Cf[0]=T-(_+h)+(h-O),w=M+_,h=w-M,A=M-(w-h)+(_-h),_=A-R,h=A-_,Cf[1]=A-(_+h)+(h-R),k=w+_,h=k-w,Cf[2]=w-(k-h)+(_-h),Cf[3]=k;let q=hle(4,Cf),j=ple*s;if(q>=j||-q>=j||(h=e-$,o=e-($+h)+(h-r),h=n-D,f=n-(D+h)+(h-r),h=t-z,l=t-(z+h)+(h-a),h=i-P,d=i-(P+h)+(h-a),o===0&&l===0&&f===0&&d===0)||(j=mle*s+dle*Math.abs(q),q+=$*d+P*o-(z*f+D*l),q>=j||-q>=j))return q;M=o*P,p=Zn*o,y=p-(p-o),v=o-y,p=Zn*P,b=p-(p-P),E=P-b,T=v*E-(M-y*b-v*b-y*E),R=l*D,p=Zn*l,y=p-(p-l),v=l-y,p=Zn*D,b=p-(p-D),E=D-b,O=v*E-(R-y*b-v*b-y*E),_=T-O,h=T-_,hi[0]=T-(_+h)+(h-O),w=M+_,h=w-M,A=M-(w-h)+(_-h),_=A-R,h=A-_,hi[1]=A-(_+h)+(h-R),k=w+_,h=k-w,hi[2]=w-(k-h)+(_-h),hi[3]=k;const L=WS(4,Cf,4,hi,l4);M=$*d,p=Zn*$,y=p-(p-$),v=$-y,p=Zn*d,b=p-(p-d),E=d-b,T=v*E-(M-y*b-v*b-y*E),R=z*f,p=Zn*z,y=p-(p-z),v=z-y,p=Zn*f,b=p-(p-f),E=f-b,O=v*E-(R-y*b-v*b-y*E),_=T-O,h=T-_,hi[0]=T-(_+h)+(h-O),w=M+_,h=w-M,A=M-(w-h)+(_-h),_=A-R,h=A-_,hi[1]=A-(_+h)+(h-R),k=w+_,h=k-w,hi[2]=w-(k-h)+(_-h),hi[3]=k;const U=WS(L,l4,4,hi,c4);M=o*d,p=Zn*o,y=p-(p-o),v=o-y,p=Zn*d,b=p-(p-d),E=d-b,T=v*E-(M-y*b-v*b-y*E),R=l*f,p=Zn*l,y=p-(p-l),v=l-y,p=Zn*f,b=p-(p-f),E=f-b,O=v*E-(R-y*b-v*b-y*E),_=T-O,h=T-_,hi[0]=T-(_+h)+(h-O),w=M+_,h=w-M,A=M-(w-h)+(_-h),_=A-R,h=A-_,hi[1]=A-(_+h)+(h-R),k=w+_,h=k-w,hi[2]=w-(k-h)+(_-h),hi[3]=k;const I=WS(U,c4,4,hi,f4);return f4[I-1]}function p1(e,t,n,i,r,a){const s=(t-a)*(n-r),o=(e-r)*(i-a),l=s-o,f=Math.abs(s+o);return Math.abs(l)>=gle*f?l:-yle(e,t,n,i,r,a,f)}const d4=Math.pow(2,-52),m1=new Uint32Array(512);class gv{static from(t,n=Sle,i=_le){const r=t.length,a=new Float64Array(r*2);for(let s=0;s<r;s++){const o=t[s];a[2*s]=n(o),a[2*s+1]=i(o)}return new gv(a)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const i=Math.max(2*n-5,0);this._triangles=new Uint32Array(i*3),this._halfedges=new Int32Array(i*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:i,_hullTri:r,_hullHash:a}=this,s=t.length>>1;let o=1/0,l=1/0,f=-1/0,d=-1/0;for(let $=0;$<s;$++){const D=t[2*$],z=t[2*$+1];D<o&&(o=D),z<l&&(l=z),D>f&&(f=D),z>d&&(d=z),this._ids[$]=$}const h=(o+f)/2,p=(l+d)/2;let y,v,b;for(let $=0,D=1/0;$<s;$++){const z=QS(h,p,t[2*$],t[2*$+1]);z<D&&(y=$,D=z)}const E=t[2*y],_=t[2*y+1];for(let $=0,D=1/0;$<s;$++){if($===y)continue;const z=QS(E,_,t[2*$],t[2*$+1]);z<D&&z>0&&(v=$,D=z)}let w=t[2*v],A=t[2*v+1],M=1/0;for(let $=0;$<s;$++){if($===y||$===v)continue;const D=xle(E,_,w,A,t[2*$],t[2*$+1]);D<M&&(b=$,M=D)}let T=t[2*b],R=t[2*b+1];if(M===1/0){for(let z=0;z<s;z++)this._dists[z]=t[2*z]-t[0]||t[2*z+1]-t[1];Bf(this._ids,this._dists,0,s-1);const $=new Uint32Array(s);let D=0;for(let z=0,P=-1/0;z<s;z++){const q=this._ids[z],j=this._dists[q];j>P&&($[D++]=q,P=j)}this.hull=$.subarray(0,D),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(p1(E,_,w,A,T,R)<0){const $=v,D=w,z=A;v=b,w=T,A=R,b=$,T=D,R=z}const O=Ele(E,_,w,A,T,R);this._cx=O.x,this._cy=O.y;for(let $=0;$<s;$++)this._dists[$]=QS(t[2*$],t[2*$+1],O.x,O.y);Bf(this._ids,this._dists,0,s-1),this._hullStart=y;let k=3;i[y]=n[b]=v,i[v]=n[y]=b,i[b]=n[v]=y,r[y]=0,r[v]=1,r[b]=2,a.fill(-1),a[this._hashKey(E,_)]=y,a[this._hashKey(w,A)]=v,a[this._hashKey(T,R)]=b,this.trianglesLen=0,this._addTriangle(y,v,b,-1,-1,-1);for(let $=0,D,z;$<this._ids.length;$++){const P=this._ids[$],q=t[2*P],j=t[2*P+1];if($>0&&Math.abs(q-D)<=d4&&Math.abs(j-z)<=d4||(D=q,z=j,P===y||P===v||P===b))continue;let L=0;for(let F=0,X=this._hashKey(q,j);F<this._hashSize&&(L=a[(X+F)%this._hashSize],!(L!==-1&&L!==i[L]));F++);L=n[L];let U=L,I;for(;I=i[U],p1(q,j,t[2*U],t[2*U+1],t[2*I],t[2*I+1])>=0;)if(U=I,U===L){U=-1;break}if(U===-1)continue;let V=this._addTriangle(U,P,i[U],-1,-1,r[U]);r[P]=this._legalize(V+2),r[U]=V,k++;let G=i[U];for(;I=i[G],p1(q,j,t[2*G],t[2*G+1],t[2*I],t[2*I+1])<0;)V=this._addTriangle(G,P,I,r[P],-1,r[G]),r[P]=this._legalize(V+2),i[G]=G,k--,G=I;if(U===L)for(;I=n[U],p1(q,j,t[2*I],t[2*I+1],t[2*U],t[2*U+1])<0;)V=this._addTriangle(I,P,U,-1,r[U],r[I]),this._legalize(V+2),r[I]=V,i[U]=U,k--,U=I;this._hullStart=n[P]=U,i[U]=n[G]=P,i[P]=G,a[this._hashKey(q,j)]=P,a[this._hashKey(t[2*U],t[2*U+1])]=U}this.hull=new Uint32Array(k);for(let $=0,D=this._hullStart;$<k;$++)this.hull[$]=D,D=i[D];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(vle(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:i,coords:r}=this;let a=0,s=0;for(;;){const o=i[t],l=t-t%3;if(s=l+(t+2)%3,o===-1){if(a===0)break;t=m1[--a];continue}const f=o-o%3,d=l+(t+1)%3,h=f+(o+2)%3,p=n[s],y=n[t],v=n[d],b=n[h];if(ble(r[2*p],r[2*p+1],r[2*y],r[2*y+1],r[2*v],r[2*v+1],r[2*b],r[2*b+1])){n[t]=b,n[o]=p;const _=i[h];if(_===-1){let A=this._hullStart;do{if(this._hullTri[A]===h){this._hullTri[A]=t;break}A=this._hullPrev[A]}while(A!==this._hullStart)}this._link(t,_),this._link(o,i[s]),this._link(s,h);const w=f+(o+1)%3;a<m1.length&&(m1[a++]=w)}else{if(a===0)break;t=m1[--a]}}return s}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,i,r,a,s){const o=this.trianglesLen;return this._triangles[o]=t,this._triangles[o+1]=n,this._triangles[o+2]=i,this._link(o,r),this._link(o+1,a),this._link(o+2,s),this.trianglesLen+=3,o}}function vle(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function QS(e,t,n,i){const r=e-n,a=t-i;return r*r+a*a}function ble(e,t,n,i,r,a,s,o){const l=e-s,f=t-o,d=n-s,h=i-o,p=r-s,y=a-o,v=l*l+f*f,b=d*d+h*h,E=p*p+y*y;return l*(h*E-b*y)-f*(d*E-b*p)+v*(d*y-h*p)<0}function xle(e,t,n,i,r,a){const s=n-e,o=i-t,l=r-e,f=a-t,d=s*s+o*o,h=l*l+f*f,p=.5/(s*f-o*l),y=(f*d-o*h)*p,v=(s*h-l*d)*p;return y*y+v*v}function Ele(e,t,n,i,r,a){const s=n-e,o=i-t,l=r-e,f=a-t,d=s*s+o*o,h=l*l+f*f,p=.5/(s*f-o*l),y=e+(f*d-o*h)*p,v=t+(s*h-l*d)*p;return{x:y,y:v}}function Bf(e,t,n,i){if(i-n<=20)for(let r=n+1;r<=i;r++){const a=e[r],s=t[a];let o=r-1;for(;o>=n&&t[e[o]]>s;)e[o+1]=e[o--];e[o+1]=a}else{const r=n+i>>1;let a=n+1,s=i;vg(e,r,a),t[e[n]]>t[e[i]]&&vg(e,n,i),t[e[a]]>t[e[i]]&&vg(e,a,i),t[e[n]]>t[e[a]]&&vg(e,n,a);const o=e[a],l=t[o];for(;;){do a++;while(t[e[a]]<l);do s--;while(t[e[s]]>l);if(s<a)break;vg(e,a,s)}e[n+1]=e[s],e[s]=o,i-a+1>=s-n?(Bf(e,t,a,i),Bf(e,t,n,s-1)):(Bf(e,t,n,s-1),Bf(e,t,a,i))}}function vg(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function Sle(e){return e[0]}function _le(e){return e[1]}const h4=1e-6;class Pl{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,i){t=+t,n=+n,i=+i;const r=t+i,a=n;if(i<0)throw new Error("negative radius");this._x1===null?this._+=`M${r},${a}`:(Math.abs(this._x1-r)>h4||Math.abs(this._y1-a)>h4)&&(this._+="L"+r+","+a),i&&(this._+=`A${i},${i},0,1,1,${t-i},${n}A${i},${i},0,1,1,${this._x1=r},${this._y1=a}`)}rect(t,n,i,r){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+i}v${+r}h${-i}Z`}value(){return this._||null}}class gA{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let wle=class{constructor(t,[n,i,r,a]=[0,0,960,500]){if(!((r=+r)>=(n=+n))||!((a=+a)>=(i=+i)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=r,this.xmin=n,this.ymax=a,this.ymin=i,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:i},vectors:r}=this;let a,s;const o=this.circumcenters=this._circumcenters.subarray(0,i.length/3*2);for(let b=0,E=0,_=i.length,w,A;b<_;b+=3,E+=2){const M=i[b]*2,T=i[b+1]*2,R=i[b+2]*2,O=t[M],k=t[M+1],$=t[T],D=t[T+1],z=t[R],P=t[R+1],q=$-O,j=D-k,L=z-O,U=P-k,I=(q*U-j*L)*2;if(Math.abs(I)<1e-9){if(a===void 0){a=s=0;for(const G of n)a+=t[G*2],s+=t[G*2+1];a/=n.length,s/=n.length}const V=1e9*Math.sign((a-O)*U-(s-k)*L);w=(O+z)/2-V*U,A=(k+P)/2+V*L}else{const V=1/I,G=q*q+j*j,F=L*L+U*U;w=O+(U*G-j*F)*V,A=k+(q*F-L*G)*V}o[E]=w,o[E+1]=A}let l=n[n.length-1],f,d=l*4,h,p=t[2*l],y,v=t[2*l+1];r.fill(0);for(let b=0;b<n.length;++b)l=n[b],f=d,h=p,y=v,d=l*4,p=t[2*l],v=t[2*l+1],r[f+2]=r[d]=y-v,r[f+3]=r[d+1]=p-h}render(t){const n=t==null?t=new Pl:void 0,{delaunay:{halfedges:i,inedges:r,hull:a},circumcenters:s,vectors:o}=this;if(a.length<=1)return null;for(let d=0,h=i.length;d<h;++d){const p=i[d];if(p<d)continue;const y=Math.floor(d/3)*2,v=Math.floor(p/3)*2,b=s[y],E=s[y+1],_=s[v],w=s[v+1];this._renderSegment(b,E,_,w,t)}let l,f=a[a.length-1];for(let d=0;d<a.length;++d){l=f,f=a[d];const h=Math.floor(r[f]/3)*2,p=s[h],y=s[h+1],v=l*4,b=this._project(p,y,o[v+2],o[v+3]);b&&this._renderSegment(p,y,b[0],b[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new Pl:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const i=n==null?n=new Pl:void 0,r=this._clip(t);if(r===null||!r.length)return;n.moveTo(r[0],r[1]);let a=r.length;for(;r[0]===r[a-2]&&r[1]===r[a-1]&&a>1;)a-=2;for(let s=2;s<a;s+=2)(r[s]!==r[s-2]||r[s+1]!==r[s-1])&&n.lineTo(r[s],r[s+1]);return n.closePath(),i&&i.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,i=t.length/2;n<i;++n){const r=this.cellPolygon(n);r&&(r.index=n,yield r)}}cellPolygon(t){const n=new gA;return this.renderCell(t,n),n.value()}_renderSegment(t,n,i,r,a){let s;const o=this._regioncode(t,n),l=this._regioncode(i,r);o===0&&l===0?(a.moveTo(t,n),a.lineTo(i,r)):(s=this._clipSegment(t,n,i,r,o,l))&&(a.moveTo(s[0],s[1]),a.lineTo(s[2],s[3]))}contains(t,n,i){return n=+n,n!==n||(i=+i,i!==i)?!1:this.delaunay._step(t,n,i)===t}*neighbors(t){const n=this._clip(t);if(n)for(const i of this.delaunay.neighbors(t)){const r=this._clip(i);if(r){e:for(let a=0,s=n.length;a<s;a+=2)for(let o=0,l=r.length;o<l;o+=2)if(n[a]===r[o]&&n[a+1]===r[o+1]&&n[(a+2)%s]===r[(o+l-2)%l]&&n[(a+3)%s]===r[(o+l-1)%l]){yield i;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:i,halfedges:r,triangles:a}}=this,s=i[t];if(s===-1)return null;const o=[];let l=s;do{const f=Math.floor(l/3);if(o.push(n[f*2],n[f*2+1]),l=l%3===2?l-2:l+1,a[l]!==t)break;l=r[l]}while(l!==s&&l!==-1);return o}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:i}=this,r=t*4;return this._simplify(i[r]||i[r+1]?this._clipInfinite(t,n,i[r],i[r+1],i[r+2],i[r+3]):this._clipFinite(t,n))}_clipFinite(t,n){const i=n.length;let r=null,a,s,o=n[i-2],l=n[i-1],f,d=this._regioncode(o,l),h,p=0;for(let y=0;y<i;y+=2)if(a=o,s=l,o=n[y],l=n[y+1],f=d,d=this._regioncode(o,l),f===0&&d===0)h=p,p=0,r?r.push(o,l):r=[o,l];else{let v,b,E,_,w;if(f===0){if((v=this._clipSegment(a,s,o,l,f,d))===null)continue;[b,E,_,w]=v}else{if((v=this._clipSegment(o,l,a,s,d,f))===null)continue;[_,w,b,E]=v,h=p,p=this._edgecode(b,E),h&&p&&this._edge(t,h,p,r,r.length),r?r.push(b,E):r=[b,E]}h=p,p=this._edgecode(_,w),h&&p&&this._edge(t,h,p,r,r.length),r?r.push(_,w):r=[_,w]}if(r)h=p,p=this._edgecode(r[0],r[1]),h&&p&&this._edge(t,h,p,r,r.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return r}_clipSegment(t,n,i,r,a,s){const o=a<s;for(o&&([t,n,i,r,a,s]=[i,r,t,n,s,a]);;){if(a===0&&s===0)return o?[i,r,t,n]:[t,n,i,r];if(a&s)return null;let l,f,d=a||s;d&8?(l=t+(i-t)*(this.ymax-n)/(r-n),f=this.ymax):d&4?(l=t+(i-t)*(this.ymin-n)/(r-n),f=this.ymin):d&2?(f=n+(r-n)*(this.xmax-t)/(i-t),l=this.xmax):(f=n+(r-n)*(this.xmin-t)/(i-t),l=this.xmin),a?(t=l,n=f,a=this._regioncode(t,n)):(i=l,r=f,s=this._regioncode(i,r))}}_clipInfinite(t,n,i,r,a,s){let o=Array.from(n),l;if((l=this._project(o[0],o[1],i,r))&&o.unshift(l[0],l[1]),(l=this._project(o[o.length-2],o[o.length-1],a,s))&&o.push(l[0],l[1]),o=this._clipFinite(t,o))for(let f=0,d=o.length,h,p=this._edgecode(o[d-2],o[d-1]);f<d;f+=2)h=p,p=this._edgecode(o[f],o[f+1]),h&&p&&(f=this._edge(t,h,p,o,f),d=o.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(o=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return o}_edge(t,n,i,r,a){for(;n!==i;){let s,o;switch(n){case 5:n=4;continue;case 4:n=6,s=this.xmax,o=this.ymin;break;case 6:n=2;continue;case 2:n=10,s=this.xmax,o=this.ymax;break;case 10:n=8;continue;case 8:n=9,s=this.xmin,o=this.ymax;break;case 9:n=1;continue;case 1:n=5,s=this.xmin,o=this.ymin;break}(r[a]!==s||r[a+1]!==o)&&this.contains(t,s,o)&&(r.splice(a,0,s,o),a+=2)}return a}_project(t,n,i,r){let a=1/0,s,o,l;if(r<0){if(n<=this.ymin)return null;(s=(this.ymin-n)/r)<a&&(l=this.ymin,o=t+(a=s)*i)}else if(r>0){if(n>=this.ymax)return null;(s=(this.ymax-n)/r)<a&&(l=this.ymax,o=t+(a=s)*i)}if(i>0){if(t>=this.xmax)return null;(s=(this.xmax-t)/i)<a&&(o=this.xmax,l=n+(a=s)*r)}else if(i<0){if(t<=this.xmin)return null;(s=(this.xmin-t)/i)<a&&(o=this.xmin,l=n+(a=s)*r)}return[o,l]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const i=(n+2)%t.length,r=(n+4)%t.length;(t[n]===t[i]&&t[i]===t[r]||t[n+1]===t[i+1]&&t[i+1]===t[r+1])&&(t.splice(i,2),n-=2)}t.length||(t=null)}return t}};const Ale=2*Math.PI,$f=Math.pow;function Cle(e){return e[0]}function $le(e){return e[1]}function Tle(e){const{triangles:t,coords:n}=e;for(let i=0;i<t.length;i+=3){const r=2*t[i],a=2*t[i+1],s=2*t[i+2];if((n[s]-n[r])*(n[a+1]-n[r+1])-(n[a]-n[r])*(n[s+1]-n[r+1])>1e-10)return!1}return!0}function Mle(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class bM{static from(t,n=Cle,i=$le,r){return new bM("length"in t?kle(t,n,i,r):Float64Array.from(Ole(t,n,i,r)))}constructor(t){this._delaunator=new gv(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&Tle(t)){this.collinear=Int32Array.from({length:n.length/2},(p,y)=>y).sort((p,y)=>n[2*p]-n[2*y]||n[2*p+1]-n[2*y+1]);const l=this.collinear[0],f=this.collinear[this.collinear.length-1],d=[n[2*l],n[2*l+1],n[2*f],n[2*f+1]],h=1e-8*Math.hypot(d[3]-d[1],d[2]-d[0]);for(let p=0,y=n.length/2;p<y;++p){const v=Mle(n[2*p],n[2*p+1],h);n[2*p]=v[0],n[2*p+1]=v[1]}this._delaunator=new gv(n)}else delete this.collinear;const i=this.halfedges=this._delaunator.halfedges,r=this.hull=this._delaunator.hull,a=this.triangles=this._delaunator.triangles,s=this.inedges.fill(-1),o=this._hullIndex.fill(-1);for(let l=0,f=i.length;l<f;++l){const d=a[l%3===2?l-2:l+1];(i[l]===-1||s[d]===-1)&&(s[d]=l)}for(let l=0,f=r.length;l<f;++l)o[r[l]]=l;r.length<=2&&r.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=r[0],s[r[0]]=1,r.length===2&&(s[r[1]]=0,this.triangles[1]=r[1],this.triangles[2]=r[1]))}voronoi(t){return new wle(this,t)}*neighbors(t){const{inedges:n,hull:i,_hullIndex:r,halfedges:a,triangles:s,collinear:o}=this;if(o){const h=o.indexOf(t);h>0&&(yield o[h-1]),h<o.length-1&&(yield o[h+1]);return}const l=n[t];if(l===-1)return;let f=l,d=-1;do{if(yield d=s[f],f=f%3===2?f-2:f+1,s[f]!==t)return;if(f=a[f],f===-1){const h=i[(r[t]+1)%i.length];h!==d&&(yield h);return}}while(f!==l)}find(t,n,i=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const r=i;let a;for(;(a=this._step(i,t,n))>=0&&a!==i&&a!==r;)i=a;return a}_step(t,n,i){const{inedges:r,hull:a,_hullIndex:s,halfedges:o,triangles:l,points:f}=this;if(r[t]===-1||!f.length)return(t+1)%(f.length>>1);let d=t,h=$f(n-f[t*2],2)+$f(i-f[t*2+1],2);const p=r[t];let y=p;do{let v=l[y];const b=$f(n-f[v*2],2)+$f(i-f[v*2+1],2);if(b<h&&(h=b,d=v),y=y%3===2?y-2:y+1,l[y]!==t)break;if(y=o[y],y===-1){if(y=a[(s[t]+1)%a.length],y!==v&&$f(n-f[y*2],2)+$f(i-f[y*2+1],2)<h)return y;break}}while(y!==p);return d}render(t){const n=t==null?t=new Pl:void 0,{points:i,halfedges:r,triangles:a}=this;for(let s=0,o=r.length;s<o;++s){const l=r[s];if(l<s)continue;const f=a[s]*2,d=a[l]*2;t.moveTo(i[f],i[f+1]),t.lineTo(i[d],i[d+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const i=t==null?t=new Pl:void 0,{points:r}=this;for(let a=0,s=r.length;a<s;a+=2){const o=r[a],l=r[a+1];t.moveTo(o+n,l),t.arc(o,l,n,0,Ale)}return i&&i.value()}renderHull(t){const n=t==null?t=new Pl:void 0,{hull:i,points:r}=this,a=i[0]*2,s=i.length;t.moveTo(r[a],r[a+1]);for(let o=1;o<s;++o){const l=2*i[o];t.lineTo(r[l],r[l+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new gA;return this.renderHull(t),t.value()}renderTriangle(t,n){const i=n==null?n=new Pl:void 0,{points:r,triangles:a}=this,s=a[t*=3]*2,o=a[t+1]*2,l=a[t+2]*2;return n.moveTo(r[s],r[s+1]),n.lineTo(r[o],r[o+1]),n.lineTo(r[l],r[l+1]),n.closePath(),i&&i.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,i=t.length/3;n<i;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new gA;return this.renderTriangle(t,n),n.value()}}function kle(e,t,n,i){const r=e.length,a=new Float64Array(r*2);for(let s=0;s<r;++s){const o=e[s];a[s*2]=t.call(i,o,s,e),a[s*2+1]=n.call(i,o,s,e)}return a}function*Ole(e,t,n,i){let r=0;for(const a of e)yield t.call(i,a,r,e),yield n.call(i,a,r,e),++r}function xM(e){ee.call(this,null,e)}xM.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const Rle=[-1e5,-1e5,1e5,1e5];be(xM,ee,{transform(e,t){const n=e.as||"path",i=t.source;if(!i||!i.length)return t;let r=e.size;r=r?[0,0,r[0],r[1]]:(r=e.extent)?[r[0][0],r[0][1],r[1][0],r[1][1]]:Rle;const a=this.value=bM.from(i,e.x,e.y).voronoi(r);for(let s=0,o=i.length;s<o;++s){const l=a.cellPolygon(s);i[s][n]=l&&!Nle(l)?Dle(l):null}return t.reflow(e.modified()).modifies(n)}});function Dle(e){const t=e[0][0],n=e[0][1];let i=e.length-1;for(;e[i][0]===t&&e[i][1]===n;--i);return"M"+e.slice(0,i+1).join("L")+"Z"}function Nle(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const zle=Object.freeze(Object.defineProperty({__proto__:null,voronoi:xM},Symbol.toStringTag,{value:"Module"}));var ZS=Math.PI/180,Vg=64,K1=2048;function Fle(){var e=[256,256],t,n,i,r,a,s,o,l=Vj,f=[],d=Math.random,h={};h.layout=function(){for(var v=p(yu()),b=Ile((e[0]>>5)*e[1]),E=null,_=f.length,w=-1,A=[],M=f.map(R=>({text:t(R),font:n(R),style:r(R),weight:a(R),rotate:s(R),size:~~(i(R)+1e-14),padding:o(R),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:R})).sort((R,O)=>O.size-R.size);++w<_;){var T=M[w];T.x=e[0]*(d()+.5)>>1,T.y=e[1]*(d()+.5)>>1,Lle(v,T,M,w),T.hasText&&y(b,T,E)&&(A.push(T),E?Ble(E,T):E=[{x:T.x+T.x0,y:T.y+T.y0},{x:T.x+T.x1,y:T.y+T.y1}],T.x-=e[0]>>1,T.y-=e[1]>>1)}return A};function p(v){v.width=v.height=1;var b=Math.sqrt(v.getContext("2d").getImageData(0,0,1,1).data.length>>2);v.width=(Vg<<5)/b,v.height=K1/b;var E=v.getContext("2d");return E.fillStyle=E.strokeStyle="red",E.textAlign="center",{context:E,ratio:b}}function y(v,b,E){for(var _=b.x,w=b.y,A=Math.hypot(e[0],e[1]),M=l(e),T=d()<.5?1:-1,R=-T,O,k,$;(O=M(R+=T))&&(k=~~O[0],$=~~O[1],!(Math.min(Math.abs(k),Math.abs($))>=A));)if(b.x=_+k,b.y=w+$,!(b.x+b.x0<0||b.y+b.y0<0||b.x+b.x1>e[0]||b.y+b.y1>e[1])&&(!E||!Ule(b,v,e[0]))&&(!E||jle(b,E))){for(var D=b.sprite,z=b.width>>5,P=e[0]>>5,q=b.x-(z<<4),j=q&127,L=32-j,U=b.y1-b.y0,I=(b.y+b.y0)*P+(q>>5),V,G=0;G<U;G++){V=0;for(var F=0;F<=z;F++)v[I+F]|=V<<L|(F<z?(V=D[G*z+F])>>>j:0);I+=P}return b.sprite=null,!0}return!1}return h.words=function(v){return arguments.length?(f=v,h):f},h.size=function(v){return arguments.length?(e=[+v[0],+v[1]],h):e},h.font=function(v){return arguments.length?(n=xl(v),h):n},h.fontStyle=function(v){return arguments.length?(r=xl(v),h):r},h.fontWeight=function(v){return arguments.length?(a=xl(v),h):a},h.rotate=function(v){return arguments.length?(s=xl(v),h):s},h.text=function(v){return arguments.length?(t=xl(v),h):t},h.spiral=function(v){return arguments.length?(l=qle[v]||v,h):l},h.fontSize=function(v){return arguments.length?(i=xl(v),h):i},h.padding=function(v){return arguments.length?(o=xl(v),h):o},h.random=function(v){return arguments.length?(d=v,h):d},h}function Lle(e,t,n,i){if(!t.sprite){var r=e.context,a=e.ratio;r.clearRect(0,0,(Vg<<5)/a,K1/a);var s=0,o=0,l=0,f=n.length,d,h,p,y,v;for(--i;++i<f;){if(t=n[i],r.save(),r.font=t.style+" "+t.weight+" "+~~((t.size+1)/a)+"px "+t.font,d=r.measureText(t.text+"m").width*a,p=t.size<<1,t.rotate){var b=Math.sin(t.rotate*ZS),E=Math.cos(t.rotate*ZS),_=d*E,w=d*b,A=p*E,M=p*b;d=Math.max(Math.abs(_+M),Math.abs(_-M))+31>>5<<5,p=~~Math.max(Math.abs(w+A),Math.abs(w-A))}else d=d+31>>5<<5;if(p>l&&(l=p),s+d>=Vg<<5&&(s=0,o+=l,l=0),o+p>=K1)break;r.translate((s+(d>>1))/a,(o+(p>>1))/a),t.rotate&&r.rotate(t.rotate*ZS),r.fillText(t.text,0,0),t.padding&&(r.lineWidth=2*t.padding,r.strokeText(t.text,0,0)),r.restore(),t.width=d,t.height=p,t.xoff=s,t.yoff=o,t.x1=d>>1,t.y1=p>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,s+=d}for(var T=r.getImageData(0,0,(Vg<<5)/a,K1/a).data,R=[];--i>=0;)if(t=n[i],!!t.hasText){for(d=t.width,h=d>>5,p=t.y1-t.y0,y=0;y<p*h;y++)R[y]=0;if(s=t.xoff,s==null)return;o=t.yoff;var O=0,k=-1;for(v=0;v<p;v++){for(y=0;y<d;y++){var $=h*v+(y>>5),D=T[(o+v)*(Vg<<5)+(s+y)<<2]?1<<31-y%32:0;R[$]|=D,O|=D}O?k=v:(t.y0++,p--,v--,o++)}t.y1=t.y0+k,t.sprite=R.slice(0,(t.y1-t.y0)*h)}}}function Ule(e,t,n){n>>=5;for(var i=e.sprite,r=e.width>>5,a=e.x-(r<<4),s=a&127,o=32-s,l=e.y1-e.y0,f=(e.y+e.y0)*n+(a>>5),d,h=0;h<l;h++){d=0;for(var p=0;p<=r;p++)if((d<<o|(p<r?(d=i[h*r+p])>>>s:0))&t[f+p])return!0;f+=n}return!1}function Ble(e,t){var n=e[0],i=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>i.x&&(i.x=t.x+t.x1),t.y+t.y1>i.y&&(i.y=t.y+t.y1)}function jle(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function Vj(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function Ple(e){var t=4,n=t*e[0]/e[1],i=0,r=0;return function(a){var s=a<0?-1:1;switch(Math.sqrt(1+4*s*a)-s&3){case 0:i+=n;break;case 1:r+=t;break;case 2:i-=n;break;default:r-=t;break}return[i,r]}}function Ile(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function xl(e){return typeof e=="function"?e:function(){return e}}var qle={archimedean:Vj,rectangular:Ple};const Wj=["x","y","font","fontSize","fontStyle","fontWeight","angle"],Hle=["text","font","rotate","fontSize","fontStyle","fontWeight"];function EM(e){ee.call(this,Fle(),e)}EM.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:Wj}]};be(EM,ee,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&ie("Wordcloud size dimensions must be non-zero.");function n(v){const b=e[v];return Xe(b)&&t.modified(b.fields)}const i=e.modified();if(!(i||t.changed(t.ADD_REM)||Hle.some(n)))return;const r=t.materialize(t.SOURCE).source,a=this.value,s=e.as||Wj;let o=e.fontSize||14,l;if(Xe(o)?l=e.fontSizeRange:o=li(o),l){const v=o,b=gt("sqrt")().domain(es(r,v)).range(l);o=E=>b(v(E))}r.forEach(v=>{v[s[0]]=NaN,v[s[1]]=NaN,v[s[3]]=0});const f=a.words(r).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(o).random(Ir).layout(),d=a.size(),h=d[0]>>1,p=d[1]>>1,y=f.length;for(let v=0,b,E;v<y;++v)b=f[v],E=b.datum,E[s[0]]=b.x+h,E[s[1]]=b.y+p,E[s[2]]=b.font,E[s[3]]=b.size,E[s[4]]=b.style,E[s[5]]=b.weight,E[s[6]]=b.rotate;return t.reflow(i).modifies(s)}});const Gle=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:EM},Symbol.toStringTag,{value:"Module"})),Yle=e=>new Uint8Array(e),Xle=e=>new Uint16Array(e),op=e=>new Uint32Array(e);function Vle(){let e=8,t=[],n=op(0),i=y1(0,e),r=y1(0,e);return{data:()=>t,seen:()=>n=Wle(n,t.length),add(a){for(let s=0,o=t.length,l=a.length,f;s<l;++s)f=a[s],f._index=o++,t.push(f)},remove(a,s){const o=t.length,l=Array(o-a),f=t;let d,h,p;for(h=0;!s[h]&&h<o;++h)l[h]=t[h],f[h]=h;for(p=h;h<o;++h)d=t[h],s[h]?f[h]=-1:(f[h]=p,i[p]=i[h],r[p]=r[h],l[p]=d,d._index=p++),i[h]=0;return t=l,f},size:()=>t.length,curr:()=>i,prev:()=>r,reset:a=>r[a]=i[a],all:()=>e<257?255:e<65537?65535:4294967295,set(a,s){i[a]|=s},clear(a,s){i[a]&=~s},resize(a,s){const o=i.length;(a>o||s>e)&&(e=Math.max(s,e),i=y1(a,e,i),r=y1(a,e))}}}function Wle(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function y1(e,t,n){const i=(t<257?Yle:t<65537?Xle:op)(e);return n&&i.set(n),i}function g4(e,t,n){const i=1<<t;return{one:i,zero:~i,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(r,a){const s=this,o=s.bisect(s.range,r.value),l=r.index,f=o[0],d=o[1],h=l.length;let p;for(p=0;p<f;++p)a[l[p]]|=i;for(p=d;p<h;++p)a[l[p]]|=i;return s}}}function p4(){let e=op(0),t=[],n=0;function i(o,l,f){if(!l.length)return[];const d=n,h=l.length,p=op(h);let y=Array(h),v,b,E;for(E=0;E<h;++E)y[E]=o(l[E]),p[E]=E;if(y=Qle(y,p),d)v=t,b=e,t=Array(d+h),e=op(d+h),Zle(f,v,b,d,y,p,h,t,e);else{if(f>0)for(E=0;E<h;++E)p[E]+=f;t=y,e=p}return n=d+h,{index:p,value:y}}function r(o,l){const f=n;let d,h,p;for(h=0;!l[e[h]]&&h<f;++h);for(p=h;h<f;++h)l[d=e[h]]||(e[p]=d,t[p]=t[h],++p);n=f-o}function a(o){for(let l=0,f=n;l<f;++l)e[l]=o[e[l]]}function s(o,l){let f;return l?f=l.length:(l=t,f=n),[tW(l,o[0],0,f),xu(l,o[1],0,f)]}return{insert:i,remove:r,bisect:s,reindex:a,index:()=>e,size:()=>n}}function Qle(e,t){return e.sort.call(t,(n,i)=>{const r=e[n],a=e[i];return r<a?-1:r>a?1:0}),rW(e,t)}function Zle(e,t,n,i,r,a,s,o,l){let f=0,d=0,h;for(h=0;f<i&&d<s;++h)t[f]<r[d]?(o[h]=t[f],l[h]=n[f++]):(o[h]=r[d],l[h]=a[d++]+e);for(;f<i;++f,++h)o[h]=t[f],l[h]=n[f];for(;d<s;++d,++h)o[h]=r[d],l[h]=a[d]+e}function SM(e){ee.call(this,Vle(),e),this._indices=null,this._dims=null}SM.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};be(SM,ee,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(i=>t.modified(i.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,i=e.query,r=this._indices={},a=this._dims=[],s=i.length;let o=0,l,f;for(;o<s;++o)l=n[o].fname,f=r[l]||(r[l]=p4()),a.push(g4(f,o,i[o]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),i=e.fields,r=e.query,a=this._indices,s=this._dims,o=this.value,l=o.curr(),f=o.prev(),d=o.all(),h=n.rem=n.add,p=n.mod,y=r.length,v={};let b,E,_,w,A,M,T,R,O;if(f.set(l),t.rem.length&&(A=this.remove(e,t,n)),t.add.length&&o.add(t.add),t.mod.length)for(M={},w=t.mod,T=0,R=w.length;T<R;++T)M[w[T]._index]=1;for(T=0;T<y;++T)O=i[T],(!s[T]||e.modified("fields",T)||t.modified(O.fields))&&(_=O.fname,(b=v[_])||(a[_]=E=p4(),v[_]=b=E.insert(O,t.source,0)),s[T]=g4(E,T,r[T]).onAdd(b,l));for(T=0,R=o.data().length;T<R;++T)A[T]||(f[T]!==l[T]?h.push(T):M[T]&&l[T]!==d&&p.push(T));return o.mask=(1<<y)-1,n},eval(e,t){const n=t.materialize().fork(),i=this._dims.length;let r=0;return t.rem.length&&(this.remove(e,t,n),r|=(1<<i)-1),e.modified("query")&&!e.modified("fields")&&(r|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),r|=(1<<i)-1),t.mod.length&&(this.modify(t,n),r|=(1<<i)-1),this.value.mask=r,n},insert(e,t,n){const i=t.add,r=this.value,a=this._dims,s=this._indices,o=e.fields,l={},f=n.add,d=r.size()+i.length,h=a.length;let p=r.size(),y,v,b;r.resize(d,h),r.add(i);const E=r.curr(),_=r.prev(),w=r.all();for(y=0;y<h;++y)v=o[y].fname,b=l[v]||(l[v]=s[v].insert(o[y],i,p)),a[y].onAdd(b,E);for(;p<d;++p)_[p]=w,E[p]!==w&&f.push(p)},modify(e,t){const n=t.mod,i=this.value,r=i.curr(),a=i.all(),s=e.mod;let o,l,f;for(o=0,l=s.length;o<l;++o)f=s[o]._index,r[f]!==a&&n.push(f)},remove(e,t,n){const i=this._indices,r=this.value,a=r.curr(),s=r.prev(),o=r.all(),l={},f=n.rem,d=t.rem;let h,p,y,v;for(h=0,p=d.length;h<p;++h)y=d[h]._index,l[y]=1,s[y]=v=a[y],a[y]=o,v!==o&&f.push(y);for(y in i)i[y].remove(p,l);return this.reindex(t,p,l),l},reindex(e,t,n){const i=this._indices,r=this.value;e.runAfter(()=>{const a=r.remove(t,n);for(const s in i)i[s].reindex(a)})},update(e,t,n){const i=this._dims,r=e.query,a=t.stamp,s=i.length;let o=0,l,f;for(n.filters=0,f=0;f<s;++f)e.modified("query",f)&&(l=f,++o);if(o===1)o=i[l].one,this.incrementOne(i[l],r[l],n.add,n.rem);else for(f=0,o=0;f<s;++f)e.modified("query",f)&&(o|=i[f].one,this.incrementAll(i[f],r[f],a,n.add),n.rem=n.add);return o},incrementAll(e,t,n,i){const r=this.value,a=r.seen(),s=r.curr(),o=r.prev(),l=e.index(),f=e.bisect(e.range),d=e.bisect(t),h=d[0],p=d[1],y=f[0],v=f[1],b=e.one;let E,_,w;if(h<y)for(E=h,_=Math.min(y,p);E<_;++E)w=l[E],a[w]!==n&&(o[w]=s[w],a[w]=n,i.push(w)),s[w]^=b;else if(h>y)for(E=y,_=Math.min(h,v);E<_;++E)w=l[E],a[w]!==n&&(o[w]=s[w],a[w]=n,i.push(w)),s[w]^=b;if(p>v)for(E=Math.max(h,v),_=p;E<_;++E)w=l[E],a[w]!==n&&(o[w]=s[w],a[w]=n,i.push(w)),s[w]^=b;else if(p<v)for(E=Math.max(y,p),_=v;E<_;++E)w=l[E],a[w]!==n&&(o[w]=s[w],a[w]=n,i.push(w)),s[w]^=b;e.range=t.slice()},incrementOne(e,t,n,i){const r=this.value,a=r.curr(),s=e.index(),o=e.bisect(e.range),l=e.bisect(t),f=l[0],d=l[1],h=o[0],p=o[1],y=e.one;let v,b,E;if(f<h)for(v=f,b=Math.min(h,d);v<b;++v)E=s[v],a[E]^=y,n.push(E);else if(f>h)for(v=h,b=Math.min(f,p);v<b;++v)E=s[v],a[E]^=y,i.push(E);if(d>p)for(v=Math.max(f,p),b=d;v<b;++v)E=s[v],a[E]^=y,n.push(E);else if(d<p)for(v=Math.max(h,d),b=p;v<b;++v)E=s[v],a[E]^=y,i.push(E);e.range=t.slice()}});function _M(e){ee.call(this,null,e)}_M.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};be(_M,ee,{transform(e,t){const n=~(e.ignore||0),i=e.filter,r=i.mask;if(!(r&n))return t.StopPropagation;const a=t.fork(t.ALL),s=i.data(),o=i.curr(),l=i.prev(),f=d=>o[d]&n?null:s[d];return a.filter(a.MOD,f),r&r-1?(a.filter(a.ADD,d=>{const h=o[d]&n;return!h&&h^l[d]&n?s[d]:null}),a.filter(a.REM,d=>{const h=o[d]&n;return h&&!(h^(h^l[d]&n))?s[d]:null})):(a.filter(a.ADD,f),a.filter(a.REM,d=>(o[d]&n)===r?s[d]:null)),a.filter(a.SOURCE,d=>f(d._index))}});const Kle=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:SM,resolvefilter:_M},Symbol.toStringTag,{value:"Module"})),Jle="RawCode",sc="Literal",ece="Property",tce="Identifier",nce="ArrayExpression",ice="BinaryExpression",Qj="CallExpression",rce="ConditionalExpression",ace="LogicalExpression",sce="MemberExpression",oce="ObjectExpression",uce="UnaryExpression";function Sa(e){this.type=e}Sa.prototype.visit=function(e){let t,n,i;if(e(this))return 1;for(t=lce(this),n=0,i=t.length;n<i;++n)if(t[n].visit(e))return 1};function lce(e){switch(e.type){case nce:return e.elements;case ice:case ace:return[e.left,e.right];case Qj:return[e.callee].concat(e.arguments);case rce:return[e.test,e.consequent,e.alternate];case sce:return[e.object,e.property];case oce:return e.properties;case ece:return[e.key,e.value];case uce:return[e.argument];case tce:case sc:case Jle:default:return[]}}var gs,Me,te,si,bt,Fb=1,p0=2,oc=3,ju=4,Lb=5,Cc=6,Ni=7,m0=8,cce=9;gs={};gs[Fb]="Boolean";gs[p0]="<end>";gs[oc]="Identifier";gs[ju]="Keyword";gs[Lb]="Null";gs[Cc]="Numeric";gs[Ni]="Punctuator";gs[m0]="String";gs[cce]="RegularExpression";var fce="ArrayExpression",dce="BinaryExpression",hce="CallExpression",gce="ConditionalExpression",Zj="Identifier",pce="Literal",mce="LogicalExpression",yce="MemberExpression",vce="ObjectExpression",bce="Property",xce="UnaryExpression",An="Unexpected token %0",Ece="Unexpected number",Sce="Unexpected string",_ce="Unexpected identifier",wce="Unexpected reserved word",Ace="Unexpected end of input",pA="Invalid regular expression",KS="Invalid regular expression: missing /",Kj="Octal literals are not allowed in strict mode.",Cce="Duplicate data property in object literal not allowed in strict mode",Pn="ILLEGAL",Mp="Disabled.",$ce=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),Tce=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function Ub(e,t){if(!e)throw new Error("ASSERT: "+t)}function Gs(e){return e>=48&&e<=57}function wM(e){return"0123456789abcdefABCDEF".includes(e)}function up(e){return"01234567".includes(e)}function Mce(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(e)}function kp(e){return e===10||e===13||e===8232||e===8233}function y0(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&$ce.test(String.fromCharCode(e))}function pv(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&Tce.test(String.fromCharCode(e))}const kce={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function Jj(){for(;te<si;){const e=Me.charCodeAt(te);if(Mce(e)||kp(e))++te;else break}}function mA(e){var t,n,i,r=0;for(n=e==="u"?4:2,t=0;t<n;++t)te<si&&wM(Me[te])?(i=Me[te++],r=r*16+"0123456789abcdef".indexOf(i.toLowerCase())):ft({},An,Pn);return String.fromCharCode(r)}function Oce(){var e,t,n,i;for(e=Me[te],t=0,e==="}"&&ft({},An,Pn);te<si&&(e=Me[te++],!!wM(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&ft({},An,Pn),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,i=(t-65536&1023)+56320,String.fromCharCode(n,i))}function eP(){var e,t;for(e=Me.charCodeAt(te++),t=String.fromCharCode(e),e===92&&(Me.charCodeAt(te)!==117&&ft({},An,Pn),++te,e=mA("u"),(!e||e==="\\"||!y0(e.charCodeAt(0)))&&ft({},An,Pn),t=e);te<si&&(e=Me.charCodeAt(te),!!pv(e));)++te,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),Me.charCodeAt(te)!==117&&ft({},An,Pn),++te,e=mA("u"),(!e||e==="\\"||!pv(e.charCodeAt(0)))&&ft({},An,Pn),t+=e);return t}function Rce(){var e,t;for(e=te++;te<si;){if(t=Me.charCodeAt(te),t===92)return te=e,eP();if(pv(t))++te;else break}return Me.slice(e,te)}function Dce(){var e,t,n;return e=te,t=Me.charCodeAt(te)===92?eP():Rce(),t.length===1?n=oc:kce.hasOwnProperty(t)?n=ju:t==="null"?n=Lb:t==="true"||t==="false"?n=Fb:n=oc,{type:n,value:t,start:e,end:te}}function JS(){var e=te,t=Me.charCodeAt(te),n,i=Me[te],r,a,s;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++te,{type:Ni,value:String.fromCharCode(t),start:e,end:te};default:if(n=Me.charCodeAt(te+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return te+=2,{type:Ni,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:te};case 33:case 61:return te+=2,Me.charCodeAt(te)===61&&++te,{type:Ni,value:Me.slice(e,te),start:e,end:te}}}if(s=Me.substr(te,4),s===">>>=")return te+=4,{type:Ni,value:s,start:e,end:te};if(a=s.substr(0,3),a===">>>"||a==="<<="||a===">>=")return te+=3,{type:Ni,value:a,start:e,end:te};if(r=a.substr(0,2),i===r[1]&&"+-<>&|".includes(i)||r==="=>")return te+=2,{type:Ni,value:r,start:e,end:te};if(r==="//"&&ft({},An,Pn),"<>=!+-*%&|^/".includes(i))return++te,{type:Ni,value:i,start:e,end:te};ft({},An,Pn)}function Nce(e){let t="";for(;te<si&&wM(Me[te]);)t+=Me[te++];return t.length===0&&ft({},An,Pn),y0(Me.charCodeAt(te))&&ft({},An,Pn),{type:Cc,value:parseInt("0x"+t,16),start:e,end:te}}function zce(e){let t="0"+Me[te++];for(;te<si&&up(Me[te]);)t+=Me[te++];return(y0(Me.charCodeAt(te))||Gs(Me.charCodeAt(te)))&&ft({},An,Pn),{type:Cc,value:parseInt(t,8),octal:!0,start:e,end:te}}function m4(){var e,t,n;if(n=Me[te],Ub(Gs(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=te,e="",n!=="."){if(e=Me[te++],n=Me[te],e==="0"){if(n==="x"||n==="X")return++te,Nce(t);if(up(n))return zce(t);n&&Gs(n.charCodeAt(0))&&ft({},An,Pn)}for(;Gs(Me.charCodeAt(te));)e+=Me[te++];n=Me[te]}if(n==="."){for(e+=Me[te++];Gs(Me.charCodeAt(te));)e+=Me[te++];n=Me[te]}if(n==="e"||n==="E")if(e+=Me[te++],n=Me[te],(n==="+"||n==="-")&&(e+=Me[te++]),Gs(Me.charCodeAt(te)))for(;Gs(Me.charCodeAt(te));)e+=Me[te++];else ft({},An,Pn);return y0(Me.charCodeAt(te))&&ft({},An,Pn),{type:Cc,value:parseFloat(e),start:t,end:te}}function Fce(){var e="",t,n,i,r,a=!1;for(t=Me[te],Ub(t==="'"||t==='"',"String literal must starts with a quote"),n=te,++te;te<si;)if(i=Me[te++],i===t){t="";break}else if(i==="\\")if(i=Me[te++],!i||!kp(i.charCodeAt(0)))switch(i){case"u":case"x":Me[te]==="{"?(++te,e+=Oce()):e+=mA(i);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:up(i)?(r="01234567".indexOf(i),r!==0&&(a=!0),te<si&&up(Me[te])&&(a=!0,r=r*8+"01234567".indexOf(Me[te++]),"0123".includes(i)&&te<si&&up(Me[te])&&(r=r*8+"01234567".indexOf(Me[te++]))),e+=String.fromCharCode(r)):e+=i;break}else i==="\r"&&Me[te]===`
`&&++te;else{if(kp(i.charCodeAt(0)))break;e+=i}return t!==""&&ft({},An,Pn),{type:m0,value:e,octal:a,start:n,end:te}}function Lce(e,t){let n=e;t.includes("u")&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(i,r)=>{if(parseInt(r,16)<=1114111)return"x";ft({},pA)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{ft({},pA)}try{return new RegExp(e,t)}catch{return null}}function Uce(){var e,t,n,i,r;for(e=Me[te],Ub(e==="/","Regular expression literal must start with a slash"),t=Me[te++],n=!1,i=!1;te<si;)if(e=Me[te++],t+=e,e==="\\")e=Me[te++],kp(e.charCodeAt(0))&&ft({},KS),t+=e;else if(kp(e.charCodeAt(0)))ft({},KS);else if(n)e==="]"&&(n=!1);else if(e==="/"){i=!0;break}else e==="["&&(n=!0);return i||ft({},KS),r=t.substr(1,t.length-2),{value:r,literal:t}}function Bce(){var e,t,n;for(t="",n="";te<si&&(e=Me[te],!!pv(e.charCodeAt(0)));)++te,e==="\\"&&te<si?ft({},An,Pn):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&ft({},pA,n),{value:n,literal:t}}function jce(){var e,t,n,i;return bt=null,Jj(),e=te,t=Uce(),n=Bce(),i=Lce(t.value,n.value),{literal:t.literal+n.literal,value:i,regex:{pattern:t.value,flags:n.value},start:e,end:te}}function Pce(e){return e.type===oc||e.type===ju||e.type===Fb||e.type===Lb}function tP(){if(Jj(),te>=si)return{type:p0,start:te,end:te};const e=Me.charCodeAt(te);return y0(e)?Dce():e===40||e===41||e===59?JS():e===39||e===34?Fce():e===46?Gs(Me.charCodeAt(te+1))?m4():JS():Gs(e)?m4():JS()}function Fi(){const e=bt;return te=e.end,bt=tP(),te=e.end,e}function nP(){const e=te;bt=tP(),te=e}function Ice(e){const t=new Sa(fce);return t.elements=e,t}function y4(e,t,n){const i=new Sa(e==="||"||e==="&&"?mce:dce);return i.operator=e,i.left=t,i.right=n,i}function qce(e,t){const n=new Sa(hce);return n.callee=e,n.arguments=t,n}function Hce(e,t,n){const i=new Sa(gce);return i.test=e,i.consequent=t,i.alternate=n,i}function AM(e){const t=new Sa(Zj);return t.name=e,t}function Wg(e){const t=new Sa(pce);return t.value=e.value,t.raw=Me.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function v4(e,t,n){const i=new Sa(yce);return i.computed=e==="[",i.object=t,i.property=n,i.computed||(n.member=!0),i}function Gce(e){const t=new Sa(vce);return t.properties=e,t}function b4(e,t,n){const i=new Sa(bce);return i.key=t,i.value=n,i.kind=e,i}function Yce(e,t){const n=new Sa(xce);return n.operator=e,n.argument=t,n.prefix=!0,n}function ft(e,t){var n,i=Array.prototype.slice.call(arguments,2),r=t.replace(/%(\d)/g,(a,s)=>(Ub(s<i.length,"Message reference must be in range"),i[s]));throw n=new Error(r),n.index=te,n.description=r,n}function Bb(e){e.type===p0&&ft(e,Ace),e.type===Cc&&ft(e,Ece),e.type===m0&&ft(e,Sce),e.type===oc&&ft(e,_ce),e.type===ju&&ft(e,wce),ft(e,An,e.value)}function oi(e){const t=Fi();(t.type!==Ni||t.value!==e)&&Bb(t)}function Nt(e){return bt.type===Ni&&bt.value===e}function e_(e){return bt.type===ju&&bt.value===e}function Xce(){const e=[];for(te=bt.start,oi("[");!Nt("]");)Nt(",")?(Fi(),e.push(null)):(e.push(uc()),Nt("]")||oi(","));return Fi(),Ice(e)}function x4(){te=bt.start;const e=Fi();return e.type===m0||e.type===Cc?(e.octal&&ft(e,Kj),Wg(e)):AM(e.value)}function Vce(){var e,t,n,i;if(te=bt.start,e=bt,e.type===oc)return n=x4(),oi(":"),i=uc(),b4("init",n,i);if(e.type===p0||e.type===Ni)Bb(e);else return t=x4(),oi(":"),i=uc(),b4("init",t,i)}function Wce(){var e=[],t,n,i,r={},a=String;for(te=bt.start,oi("{");!Nt("}");)t=Vce(),t.key.type===Zj?n=t.key.name:n=a(t.key.value),i="$"+n,Object.prototype.hasOwnProperty.call(r,i)?ft({},Cce):r[i]=!0,e.push(t),Nt("}")||oi(",");return oi("}"),Gce(e)}function Qce(){oi("(");const e=CM();return oi(")"),e}const Zce={if:1};function Kce(){var e,t,n;if(Nt("("))return Qce();if(Nt("["))return Xce();if(Nt("{"))return Wce();if(e=bt.type,te=bt.start,e===oc||Zce[bt.value])n=AM(Fi().value);else if(e===m0||e===Cc)bt.octal&&ft(bt,Kj),n=Wg(Fi());else{if(e===ju)throw new Error(Mp);e===Fb?(t=Fi(),t.value=t.value==="true",n=Wg(t)):e===Lb?(t=Fi(),t.value=null,n=Wg(t)):Nt("/")||Nt("/=")?(n=Wg(jce()),nP()):Bb(Fi())}return n}function Jce(){const e=[];if(oi("("),!Nt(")"))for(;te<si&&(e.push(uc()),!Nt(")"));)oi(",");return oi(")"),e}function efe(){te=bt.start;const e=Fi();return Pce(e)||Bb(e),AM(e.value)}function tfe(){return oi("."),efe()}function nfe(){oi("[");const e=CM();return oi("]"),e}function ife(){var e,t,n;for(e=Kce();;)if(Nt("."))n=tfe(),e=v4(".",e,n);else if(Nt("("))t=Jce(),e=qce(e,t);else if(Nt("["))n=nfe(),e=v4("[",e,n);else break;return e}function E4(){const e=ife();if(bt.type===Ni&&(Nt("++")||Nt("--")))throw new Error(Mp);return e}function J1(){var e,t;if(bt.type!==Ni&&bt.type!==ju)t=E4();else{if(Nt("++")||Nt("--"))throw new Error(Mp);if(Nt("+")||Nt("-")||Nt("~")||Nt("!"))e=Fi(),t=J1(),t=Yce(e.value,t);else{if(e_("delete")||e_("void")||e_("typeof"))throw new Error(Mp);t=E4()}}return t}function S4(e){let t=0;if(e.type!==Ni&&e.type!==ju)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function rfe(){var e,t,n,i,r,a,s,o,l,f;if(e=bt,l=J1(),i=bt,r=S4(i),r===0)return l;for(i.prec=r,Fi(),t=[e,bt],s=J1(),a=[l,i,s];(r=S4(bt))>0;){for(;a.length>2&&r<=a[a.length-2].prec;)s=a.pop(),o=a.pop().value,l=a.pop(),t.pop(),n=y4(o,l,s),a.push(n);i=Fi(),i.prec=r,a.push(i),t.push(bt),n=J1(),a.push(n)}for(f=a.length-1,n=a[f],t.pop();f>1;)t.pop(),n=y4(a[f-1].value,a[f-2],n),f-=2;return n}function uc(){var e,t,n;return e=rfe(),Nt("?")&&(Fi(),t=uc(),oi(":"),n=uc(),e=Hce(e,t,n)),e}function CM(){const e=uc();if(Nt(","))throw new Error(Mp);return e}function $M(e){Me=e,te=0,si=Me.length,bt=null,nP();const t=CM();if(bt.type!==p0)throw new Error("Unexpect token after expression.");return t}var iP={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function rP(e){function t(s,o,l,f){let d=e(o[0]);return l&&(d=l+"("+d+")",l.lastIndexOf("new ",0)===0&&(d="("+d+")")),d+"."+s+(f<0?"":f===0?"()":"("+o.slice(1).map(e).join(",")+")")}function n(s,o,l){return f=>t(s,f,o,l)}const i="new Date",r="String",a="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(s){s.length<3&&ie("Missing arguments to clamp function."),s.length>3&&ie("Too many arguments to clamp function.");const o=s.map(e);return"Math.max("+o[1]+", Math.min("+o[2]+","+o[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:i,date:n("getDate",i,0),day:n("getDay",i,0),year:n("getFullYear",i,0),month:n("getMonth",i,0),hours:n("getHours",i,0),minutes:n("getMinutes",i,0),seconds:n("getSeconds",i,0),milliseconds:n("getMilliseconds",i,0),time:n("getTime",i,0),timezoneoffset:n("getTimezoneOffset",i,0),utcdate:n("getUTCDate",i,0),utcday:n("getUTCDay",i,0),utcyear:n("getUTCFullYear",i,0),utcmonth:n("getUTCMonth",i,0),utchours:n("getUTCHours",i,0),utcminutes:n("getUTCMinutes",i,0),utcseconds:n("getUTCSeconds",i,0),utcmilliseconds:n("getUTCMilliseconds",i,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",r,0),lower:n("toLowerCase",r,0),substring:n("substring",r),split:n("split",r),trim:n("trim",r,0),regexp:a,test:n("test",a),if:function(s){s.length<3&&ie("Missing arguments to if function."),s.length>3&&ie("Too many arguments to if function.");const o=s.map(e);return"("+o[0]+"?"+o[1]+":"+o[2]+")"}}}function afe(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function aP(e){e=e||{};const t=e.allowed?pa(e.allowed):{},n=e.forbidden?pa(e.forbidden):{},i=e.constants||iP,r=(e.functions||rP)(h),a=e.globalvar,s=e.fieldvar,o=Xe(a)?a:v=>`${a}["${v}"]`;let l={},f={},d=0;function h(v){if(_e(v))return v;const b=p[v.type];return b==null&&ie("Unsupported type: "+v.type),b(v)}const p={Literal:v=>v.raw,Identifier:v=>{const b=v.name;return d>0?b:Ce(n,b)?ie("Illegal identifier: "+b):Ce(i,b)?i[b]:Ce(t,b)?b:(l[b]=1,o(b))},MemberExpression:v=>{const b=!v.computed,E=h(v.object);b&&(d+=1);const _=h(v.property);return E===s&&(f[afe(_)]=1),b&&(d-=1),E+(b?"."+_:"["+_+"]")},CallExpression:v=>{v.callee.type!=="Identifier"&&ie("Illegal callee type: "+v.callee.type);const b=v.callee.name,E=v.arguments,_=Ce(r,b)&&r[b];return _||ie("Unrecognized function: "+b),Xe(_)?_(E):_+"("+E.map(h).join(",")+")"},ArrayExpression:v=>"["+v.elements.map(h).join(",")+"]",BinaryExpression:v=>"("+h(v.left)+" "+v.operator+" "+h(v.right)+")",UnaryExpression:v=>"("+v.operator+h(v.argument)+")",ConditionalExpression:v=>"("+h(v.test)+"?"+h(v.consequent)+":"+h(v.alternate)+")",LogicalExpression:v=>"("+h(v.left)+v.operator+h(v.right)+")",ObjectExpression:v=>"{"+v.properties.map(h).join(",")+"}",Property:v=>{d+=1;const b=h(v.key);return d-=1,b+":"+h(v.value)}};function y(v){const b={code:h(v),globals:Object.keys(l),fields:Object.keys(f)};return l={},f={},b}return y.functions=r,y.constants=i,y}const _4=Symbol("vega_selection_getter");function sP(e){return(!e.getter||!e.getter[_4])&&(e.getter=Br(e.field),e.getter[_4]=!0),e.getter}const TM="intersect",w4="union",sfe="vlMulti",ofe="vlPoint",A4="or",ufe="and",Ia="_vgsid_",Op=Br(Ia),lfe="E",cfe="R",ffe="R-E",dfe="R-LE",hfe="R-RE",gfe="E-LT",pfe="E-LTE",mfe="E-GT",yfe="E-GTE",vfe="E-VALID",bfe="E-ONE",mv="index:unit";function C4(e,t){for(var n=t.fields,i=t.values,r=n.length,a=0,s,o;a<r;++a)if(o=n[a],s=sP(o)(e),gu(s)&&(s=ni(s)),gu(i[a])&&(i[a]=ni(i[a])),oe(i[a])&&gu(i[a][0])&&(i[a]=i[a].map(ni)),o.type===lfe){if(oe(i[a])?!i[a].includes(s):s!==i[a])return!1}else if(o.type===cfe){if(!zf(s,i[a]))return!1}else if(o.type===hfe){if(!zf(s,i[a],!0,!1))return!1}else if(o.type===ffe){if(!zf(s,i[a],!1,!1))return!1}else if(o.type===dfe){if(!zf(s,i[a],!1,!0))return!1}else if(o.type===gfe){if(s>=i[a])return!1}else if(o.type===pfe){if(s>i[a])return!1}else if(o.type===mfe){if(s<=i[a])return!1}else if(o.type===yfe){if(s<i[a])return!1}else if(o.type===vfe){if(s===null||isNaN(s))return!1}else if(o.type===bfe&&i[a].indexOf(s)===-1)return!1;return!0}function xfe(e,t,n){for(var i=this.context.data[e],r=i?i.values.value:[],a=i?i[mv]&&i[mv].value:void 0,s=n===TM,o=r.length,l=0,f,d,h,p,y;l<o;++l)if(f=r[l],a&&s){if(d=d||{},h=d[p=f.unit]||0,h===-1)continue;if(y=C4(t,f),d[p]=y?-1:++h,y&&a.size===1)return!0;if(!y&&h===a.get(p).count)return!1}else if(y=C4(t,f),s^y)return y;return o&&s}const oP=Ud(Op),Efe=oP.left,Sfe=oP.right;function _fe(e,t,n){const i=this.context.data[e],r=i?i.values.value:[],a=i?i[mv]&&i[mv].value:void 0,s=n===TM,o=Op(t),l=Efe(r,o);if(l===r.length||Op(r[l])!==o)return!1;if(a&&s){if(a.size===1)return!0;if(Sfe(r,o)-l<a.size)return!1}return!0}function wfe(e,t){return e.map(n=>Ge(t.fields?{values:t.fields.map(i=>sP(i)(n.datum))}:{[Ia]:Op(n.datum)},t))}function Afe(e,t,n,i){for(var r=this.context.data[e],a=r?r.values.value:[],s={},o={},l={},f,d,h,p,y,v,b,E,_,w,A=a.length,M=0,T,R;M<A;++M)if(f=a[M],p=f.unit,d=f.fields,h=f.values,d&&h){for(T=0,R=d.length;T<R;++T)y=d[T],b=s[y.field]||(s[y.field]={}),E=b[p]||(b[p]=[]),l[y.field]=_=y.type.charAt(0),w=t_[`${_}_union`],b[p]=w(E,Se(h[T]));n&&(E=o[p]||(o[p]=[]),E.push(Se(h).reduce((O,k,$)=>(O[d[$].field]=k,O),{})))}else y=Ia,v=Op(f),b=s[y]||(s[y]={}),E=b[p]||(b[p]=[]),E.push(v),n&&(E=o[p]||(o[p]=[]),E.push({[Ia]:v}));if(t=t||w4,s[Ia]?s[Ia]=t_[`${Ia}_${t}`](...Object.values(s[Ia])):Object.keys(s).forEach(O=>{s[O]=Object.keys(s[O]).map(k=>s[O][k]).reduce((k,$)=>k===void 0?$:t_[`${l[O]}_${t}`](k,$))}),a=Object.keys(o),n&&a.length){const O=i?ofe:sfe;s[O]=t===w4?{[A4]:a.reduce((k,$)=>(k.push(...o[$]),k),[])}:{[ufe]:a.map(k=>({[A4]:o[k]}))}}return s}var t_={[`${Ia}_union`]:hW,[`${Ia}_intersect`]:fW,E_union:function(e,t){if(!e.length)return t;for(var n=0,i=t.length;n<i;++n)e.includes(t[n])||e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.includes(n)):t},R_union:function(e,t){var n=ni(t[0]),i=ni(t[1]);return n>i&&(n=t[1],i=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<i&&(e[1]=i),e):[n,i]},R_intersect:function(e,t){var n=ni(t[0]),i=ni(t[1]);return n>i&&(n=t[1],i=t[0]),e.length?i<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>i&&(e[1]=i),e):[n,i]}};const Cfe=":",$fe="@";function MM(e,t,n,i){t[0].type!==sc&&ie("First argument to selection functions must be a string literal.");const r=t[0].value,a=t.length>=2&&st(t).value,s="unit",o=$fe+s,l=Cfe+r;a===TM&&!Ce(i,o)&&(i[o]=n.getData(r).indataRef(n,s)),Ce(i,l)||(i[l]=n.getData(r).tuplesRef())}function uP(e){const t=this.context.data[e];return t?t.values.value:[]}function Tfe(e,t,n){const i=this.context.data[e]["index:"+t],r=i?i.value.get(n):void 0;return r&&r.count}function Mfe(e,t){const n=this.context.dataflow,i=this.context.data[e],r=i.input;return n.pulse(r,n.changeset().remove(jr).insert(t)),1}function kfe(e,t,n){if(e){const i=this.context.dataflow,r=e.mark.source;i.pulse(r,i.changeset().encode(e,t))}return n!==void 0?n:e}const v0=e=>function(t,n){const i=this.context.dataflow.locale();return t===null?"null":i[e](n)(t)},Ofe=v0("format"),lP=v0("timeFormat"),Rfe=v0("utcFormat"),Dfe=v0("timeParse"),Nfe=v0("utcParse"),v1=new Date(2e3,0,1);function jb(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(v1.setYear(2e3),v1.setMonth(e),v1.setDate(t),lP.call(this,v1,n))}function zfe(e){return jb.call(this,e,1,"%B")}function Ffe(e){return jb.call(this,e,1,"%b")}function Lfe(e){return jb.call(this,0,2+e,"%A")}function Ufe(e){return jb.call(this,0,2+e,"%a")}const Bfe=":",jfe="@",yA="%",cP="$";function kM(e,t,n,i){t[0].type!==sc&&ie("First argument to data functions must be a string literal.");const r=t[0].value,a=Bfe+r;if(!Ce(a,i))try{i[a]=n.getData(r).tuplesRef()}catch{}}function Pfe(e,t,n,i){t[0].type!==sc&&ie("First argument to indata must be a string literal."),t[1].type!==sc&&ie("Second argument to indata must be a string literal.");const r=t[0].value,a=t[1].value,s=jfe+a;Ce(s,i)||(i[s]=n.getData(r).indataRef(n,a))}function _i(e,t,n,i){if(t[0].type===sc)$4(n,i,t[0].value);else for(e in n.scales)$4(n,i,e)}function $4(e,t,n){const i=yA+n;if(!Ce(t,i))try{t[i]=e.scaleRef(n)}catch{}}function ps(e,t){if(_e(e)){const n=t.scales[e];return n&&Yee(n.value)?n.value:void 0}}function Ife(e,t,n){t.__bandwidth=r=>r&&r.bandwidth?r.bandwidth():0,n._bandwidth=_i,n._range=_i,n._scale=_i;const i=r=>"_["+(r.type===sc?me(yA+r.value):me(yA)+"+"+e(r))+"]";return{_bandwidth:r=>`this.__bandwidth(${i(r[0])})`,_range:r=>`${i(r[0])}.range()`,_scale:r=>`${i(r[0])}(${e(r[1])})`}}function OM(e,t){return function(n,i,r){if(n){const a=ps(n,(r||this).context);return a&&a.path[e](i)}else return t(i)}}const qfe=OM("area",oae),Hfe=OM("bounds",fae),Gfe=OM("centroid",yae);function Yfe(e,t){const n=ps(e,(t||this).context);return n&&n.scale()}function Xfe(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function RM(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(i){e.warn(i)}return n[n.length-1]}function Vfe(){return RM(this.context.dataflow,"warn",arguments)}function Wfe(){return RM(this.context.dataflow,"info",arguments)}function Qfe(){return RM(this.context.dataflow,"debug",arguments)}function n_(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function vA(e){const t=wu(e),n=n_(t.r),i=n_(t.g),r=n_(t.b);return .2126*n+.7152*i+.0722*r}function Zfe(e,t){const n=vA(e),i=vA(t),r=Math.max(n,i),a=Math.min(n,i);return(r+.05)/(a+.05)}function Kfe(){const e=[].slice.call(arguments);return e.unshift({}),Ge(...e)}function fP(e,t){return e===t||e!==e&&t!==t?!0:oe(e)?oe(t)&&e.length===t.length?Jfe(e,t):!1:Ee(e)&&Ee(t)?dP(e,t):!1}function Jfe(e,t){for(let n=0,i=e.length;n<i;++n)if(!fP(e[n],t[n]))return!1;return!0}function dP(e,t){for(const n in e)if(!fP(e[n],t[n]))return!1;return!0}function T4(e){return t=>dP(e,t)}function ede(e,t,n,i,r,a){const s=this.context.dataflow,o=this.context.data[e],l=o.input,f=s.stamp();let d=o.changes,h,p;if(s._trigger===!1||!(l.value.length||t||i))return 0;if((!d||d.stamp<f)&&(o.changes=d=s.changeset(),d.stamp=f,s.runAfter(()=>{o.modified=!0,s.pulse(l,d).run()},!0,1)),n&&(h=n===!0?jr:oe(n)||Wv(n)?n:T4(n),d.remove(h)),t&&d.insert(t),i&&(h=T4(i),l.value.some(h)?d.remove(h):d.insert(i)),r)for(p in a)d.modify(r,p,a[p]);return 1}function tde(e){const t=e.touches,n=t[0].clientX-t[1].clientX,i=t[0].clientY-t[1].clientY;return Math.hypot(n,i)}function nde(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const M4={};function ide(e,t){const n=M4[t]||(M4[t]=Br(t));return oe(e)?e.map(n):n(e)}function Pb(e){return oe(e)||ArrayBuffer.isView(e)?e:null}function DM(e){return Pb(e)||(_e(e)?e:null)}function rde(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return Pb(e).join(...n)}function ade(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return DM(e).indexOf(...n)}function sde(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return DM(e).lastIndexOf(...n)}function ode(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return DM(e).slice(...n)}function ude(e,t,n){return Xe(n)&&ie("Function argument passed to replace."),String(e).replace(t,n)}function lde(e){return Pb(e).slice().reverse()}function cde(e){return Pb(e).slice().sort(Fd)}function fde(e,t,n){return Y$(e||0,t||0,n||0)}function dde(e,t){const n=ps(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function hde(e,t){const n=ps(e,(t||this).context);return n?n.copy():void 0}function gde(e,t){const n=ps(e,(t||this).context);return n?n.domain():[]}function pde(e,t,n){const i=ps(e,(n||this).context);return i?oe(t)?(i.invertRange||i.invert)(t):(i.invert||i.invertExtent)(t):void 0}function mde(e,t){const n=ps(e,(t||this).context);return n&&n.range?n.range():[]}function yde(e,t,n){const i=ps(e,(n||this).context);return i?i(t):void 0}function vde(e,t,n,i,r){let a=typeof e=="string"?ps(e,(r||this).context):e;const s=nU(t,n);let o=a.domain(),l=o[0],f=st(o),d=ui;return f-l?d=HL(a,l,f):a=(a.interpolator?gt("sequential")().interpolator(a.interpolator()):gt("linear")().interpolate(a.interpolate()).range(a.range())).domain([l=0,f=1]),a.ticks&&(o=a.ticks(+i||15),l!==o[0]&&o.unshift(l),f!==st(o)&&o.push(f)),o.forEach(h=>s.stop(d(h),a(h))),s}function bde(e,t,n){const i=ps(e,(n||this).context);return function(r){return i?i.path.context(r)(t):""}}function xde(e){let t=null;return function(n){return n?Ep(n,t=t||ld(e)):e}}const hP=e=>e.data;function gP(e,t){const n=uP.call(t,e);return n.root&&n.root.lookup||{}}function Ede(e,t,n){const i=gP(e,this),r=i[t],a=i[n];return r&&a?r.path(a).map(hP):void 0}function Sde(e,t){const n=gP(e,this)[t];return n?n.ancestors().map(hP):void 0}const pP=()=>typeof window<"u"&&window||null;function _de(){const e=pP();return e?e.screen:{}}function wde(){const e=pP();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function Ade(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function mP(e,t,n){if(!e)return[];const[i,r]=e,a=new un().set(i[0],i[1],r[0],r[1]),s=n||this.context.dataflow.scenegraph().root;return JU(s,a,Cde(t))}function Cde(e){let t=null;if(e){const n=Se(e.marktype),i=Se(e.markname);t=r=>(!n.length||n.some(a=>r.marktype===a))&&(!i.length||i.some(a=>r.name===a))}return t}function $de(e,t,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=Se(e);const r=e[e.length-1];return r===void 0||Math.hypot(r[0]-t,r[1]-n)>i?[...e,[t,n]]:e}function Tde(e){return Se(e).reduce((t,n,i)=>{let[r,a]=n;return t+=i==0?`M ${r},${a} `:i===e.length-1?" Z":`L ${r},${a} `},"")}function Mde(e,t,n){const{x:i,y:r,mark:a}=n,s=new un().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[l,f]of t)l<s.x1&&(s.x1=l),l>s.x2&&(s.x2=l),f<s.y1&&(s.y1=f),f>s.y2&&(s.y2=f);return s.translate(i,r),mP([[s.x1,s.y1],[s.x2,s.y2]],e,a).filter(l=>kde(l.x,l.y,t))}function kde(e,t,n){let i=0;for(let r=0,a=n.length-1;r<n.length;a=r++){const[s,o]=n[a],[l,f]=n[r];f>t!=o>t&&e<(s-l)*(t-f)/(o-f)+l&&i++}return i&1}const Rp={random(){return Ir()},cumulativeNormal:eb,cumulativeLogNormal:YC,cumulativeUniform:QC,densityNormal:PC,densityLogNormal:GC,densityUniform:WC,quantileNormal:tb,quantileLogNormal:XC,quantileUniform:ZC,sampleNormal:Jv,sampleLogNormal:HC,sampleUniform:VC,isArray:oe,isBoolean:zu,isDate:gu,isDefined(e){return e!==void 0},isNumber:dt,isObject:Ee,isRegExp:_8,isString:_e,isTuple:Wv,isValid(e){return e!=null&&e===e},toBoolean:xC,toDate(e){return EC(e)},toNumber:ni,toString:SC,indexof:ade,join:rde,lastindexof:sde,replace:ude,reverse:lde,sort:cde,slice:ode,flush:E8,lerp:w8,merge:Kfe,pad:$8,peek:st,pluck:ide,span:Gp,inrange:zf,truncate:T8,rgb:wu,lab:_y,hcl:wy,hsl:Ey,luminance:vA,contrast:Zfe,sequence:rr,format:Ofe,utcFormat:Rfe,utcParse:Nfe,utcOffset:o7,utcSequence:c7,timeFormat:lP,timeParse:Dfe,timeOffset:s7,timeSequence:l7,timeUnitSpecifier:W8,monthFormat:zfe,monthAbbrevFormat:Ffe,dayFormat:Lfe,dayAbbrevFormat:Ufe,quarter:y8,utcquarter:v8,week:Z8,utcweek:e7,dayofyear:Q8,utcdayofyear:J8,warn:Vfe,info:Wfe,debug:Qfe,extent(e){return es(e)},inScope:Xfe,intersect:mP,clampRange:b8,pinchDistance:tde,pinchAngle:nde,screen:_de,containerSize:Ade,windowSize:wde,bandspace:fde,setdata:Mfe,pathShape:xde,panLinear:h8,panLog:g8,panPow:p8,panSymlog:m8,zoomLinear:gC,zoomLog:pC,zoomPow:uy,zoomSymlog:mC,encode:kfe,modify:ede,lassoAppend:$de,lassoPath:Tde,intersectLasso:Mde},Ode=["view","item","group","xy","x","y"],Rde="event.vega.",yP="this.",NM={},vP={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${me(cP+e)}]`,functions:Dde,constants:iP,visitors:NM},bA=aP(vP);function Dde(e){const t=rP(e);Ode.forEach(n=>t[n]=Rde+n);for(const n in Rp)t[n]=yP+n;return Ge(t,Ife(e,Rp,NM)),t}function rn(e,t,n){return arguments.length===1?Rp[e]:(Rp[e]=t,n&&(NM[e]=n),bA&&(bA.functions[e]=yP+e),this)}rn("bandwidth",dde,_i);rn("copy",hde,_i);rn("domain",gde,_i);rn("range",mde,_i);rn("invert",pde,_i);rn("scale",yde,_i);rn("gradient",vde,_i);rn("geoArea",qfe,_i);rn("geoBounds",Hfe,_i);rn("geoCentroid",Gfe,_i);rn("geoShape",bde,_i);rn("geoScale",Yfe,_i);rn("indata",Tfe,Pfe);rn("data",uP,kM);rn("treePath",Ede,kM);rn("treeAncestors",Sde,kM);rn("vlSelectionTest",xfe,MM);rn("vlSelectionIdTest",_fe,MM);rn("vlSelectionResolve",Afe,MM);rn("vlSelectionTuples",wfe);function as(e,t){const n={};let i;try{e=_e(e)?e:me(e)+"",i=$M(e)}catch{ie("Expression parse error: "+e)}i.visit(a=>{if(a.type!==Qj)return;const s=a.callee.name,o=vP.visitors[s];o&&o(s,a.arguments,t,n)});const r=bA(i);return r.globals.forEach(a=>{const s=cP+a;!Ce(n,s)&&t.getSignal(a)&&(n[s]=t.signalRef(a))}),{$expr:Ge({code:r.code},t.options.ast?{ast:i}:null),$fields:r.fields,$params:n}}function Nde(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(i=>t.parseOperator(i)),n.forEach(i=>t.parseOperatorParameters(i)),(e.streams||[]).forEach(i=>t.parseStream(i)),(e.updates||[]).forEach(i=>t.parseUpdate(i)),t.resolve()}const zde=pa(["rule"]),k4=pa(["group","image","rect"]);function Fde(e,t){let n="";return zde[t]||(e.x2&&(e.x?(k4[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(k4[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function zM(e){return(e+"").toLowerCase()}function Lde(e){return zM(e)==="operator"}function Ude(e){return zM(e)==="collect"}function bg(e,t,n){n.endsWith(";")||(n="return("+n+");");const i=Function(...t.concat(n));return e&&e.functions?i.bind(e.functions):i}function Bde(e,t,n,i){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${i}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${i} : `}var jde={operator:(e,t)=>bg(e,["_"],t.code),parameter:(e,t)=>bg(e,["datum","_"],t.code),event:(e,t)=>bg(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return bg(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:i}=t;let r="var o=item,datum=o.datum,m=0,$;";for(const a in i){const s="o["+me(a)+"]";r+=`$=${i[a].code};if(${s}!==$)${s}=$,m=1;`}return r+=Fde(i,n),r+="return m;",bg(e,["item","_"],r)},codegen:{get(e){const t=`[${e.map(me).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const i=(a,s)=>{const o=t[s];let l,f;return a.path?(l=`a${a.path}`,f=`b${a.path}`):((n=n||{})["f"+s]=a,l=`this.f${s}(a)`,f=`this.f${s}(b)`),Bde(l,f,-o,o)},r=Function("a","b","var u, v; return "+e.map(i).join("")+"0;");return n?r.bind(n):r}}};function Pde(e){const t=this;Lde(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function Ide(e){const t=this;if(e.params){const n=t.get(e.id);n||ie("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function qde(e,t){t=t||{};const n=this;for(const i in e){const r=e[i];t[i]=oe(r)?r.map(a=>O4(a,n,t)):O4(r,n,t)}return t}function O4(e,t,n){if(!e||!Ee(e))return e;for(let i=0,r=R4.length,a;i<r;++i)if(a=R4[i],Ce(e,a.key))return a.parse(e,t,n);return e}var R4=[{key:"$ref",parse:Hde},{key:"$key",parse:Yde},{key:"$expr",parse:Gde},{key:"$field",parse:Xde},{key:"$encode",parse:Wde},{key:"$compare",parse:Vde},{key:"$context",parse:Qde},{key:"$subflow",parse:Zde},{key:"$tupleid",parse:Kde}];function Hde(e,t){return t.get(e.$ref)||ie("Operator not defined: "+e.$ref)}function Gde(e,t,n){e.$params&&t.parseParameters(e.$params,n);const i="e:"+e.$expr.code;return t.fn[i]||(t.fn[i]=Yi(t.parameterExpression(e.$expr),e.$fields))}function Yde(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=bC(e.$key,e.$flat,t.expr.codegen))}function Xde(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=Br(e.$field,e.$name,t.expr.codegen))}function Vde(e,t){const n="c:"+e.$compare+"_"+e.$order,i=Se(e.$compare).map(r=>r&&r.$tupleid?ze:r);return t.fn[n]||(t.fn[n]=yC(i,e.$order,t.expr.codegen))}function Wde(e,t){const n=e.$encode,i={};for(const r in n){const a=n[r];i[r]=Yi(t.encodeExpression(a.$expr),a.$fields),i[r].output=a.$output}return i}function Qde(e,t){return t}function Zde(e,t){const n=e.$subflow;return function(i,r,a){const s=t.fork().parse(n),o=s.get(n.operators[0].id),l=s.signals.parent;return l&&l.set(a),o.detachSubflow=()=>t.detach(s),o}}function Kde(){return ze}function Jde(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,i=e.stream!=null?t.get(e.stream):void 0,r;e.source?i=t.events(e.source,e.type,n):e.merge&&(r=e.merge.map(a=>t.get(a)),i=r[0].merge.apply(r[0],r.slice(1))),e.between&&(r=e.between.map(a=>t.get(a)),i=i.between(r[0],r[1])),e.filter&&(i=i.filter(n)),e.throttle!=null&&(i=i.throttle(+e.throttle)),e.debounce!=null&&(i=i.debounce(+e.debounce)),i==null&&ie("Invalid stream definition: "+JSON.stringify(e)),e.consume&&i.consume(!0),t.stream(e,i)}function ehe(e){var t=this,n=Ee(n=e.source)?n.$ref:n,i=t.get(n),r=null,a=e.update,s=void 0;i||ie("Source not defined: "+e.source),r=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),a&&a.$expr&&(a.$params&&(s=t.parseParameters(a.$params)),a=t.handlerExpression(a.$expr)),t.update(e,i,r,a,s)}const the={skip:!0};function nhe(e){var t=this,n={};if(e.signals){var i=n.signals={};Object.keys(t.signals).forEach(a=>{const s=t.signals[a];e.signals(a,s)&&(i[a]=s.value)})}if(e.data){var r=n.data={};Object.keys(t.data).forEach(a=>{const s=t.data[a];e.data(a,s)&&(r[a]=s.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(a=>a.getState(e))),n}function ihe(e){var t=this,n=t.dataflow,i=e.data,r=e.signals;Object.keys(r||{}).forEach(a=>{n.update(t.signals[a],r[a],the)}),Object.keys(i||{}).forEach(a=>{n.pulse(t.data[a].input,n.changeset().remove(jr).insert(i[a]))}),(e.subcontext||[]).forEach((a,s)=>{const o=t.subcontext[s];o&&o.setState(a)})}function bP(e,t,n,i){return new xP(e,t,n,i)}function xP(e,t,n,i){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=i||jde,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function D4(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}xP.prototype=D4.prototype={fork(){const e=new D4(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,i=n.dataflow,r=e.value;if(n.set(e.id,t),Ude(e.type)&&r&&(r.$ingest?i.ingest(t,r.$ingest,r.$format):r.$request?i.preload(t,r.$request,r.$format):i.pulse(t,i.changeset().insert(r))),e.root&&(n.root=t),e.parent){let a=n.get(e.parent.$ref);a?(i.connect(a,[t]),t.targets().add(a)):(n.unresolved=n.unresolved||[]).push(()=>{a=n.get(e.parent.$ref),i.connect(a,[t]),t.targets().add(a)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const a in e.data){const s=n.data[a]||(n.data[a]={});e.data[a].forEach(o=>s[o]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[zM(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,i,r){this.dataflow.on(t,n,i,r,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:Nde,parseOperator:Pde,parseOperatorParameters:Ide,parseParameters:qde,parseStream:Jde,parseUpdate:ehe,getState:nhe,setState:ihe};function rhe(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),EP(t,e.description()))}function EP(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function ahe(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const i_="default";function she(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:i_,item:null}));e.on(e.events("view","pointermove"),t,(n,i)=>{const r=t.value,a=r?_e(r)?r:r.user:i_,s=i.item&&i.item.cursor||null;return r&&a===r.user&&s==r.item?r:{user:a,item:s}}),e.add(null,function(n){let i=n.cursor,r=this.value;return _e(i)||(r=i.item,i=i.user),xA(e,i&&i!==i_?i:r||i),r},{cursor:t})}function xA(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function yv(e,t){var n=e._runtime.data;return Ce(n,t)||ie("Unrecognized data set: "+t),n[t]}function ohe(e,t){return arguments.length<2?yv(this,e).values.value:Ib.call(this,e,_c().remove(jr).insert(t))}function Ib(e,t){L7(t)||ie("Second argument to changes must be a changeset.");const n=yv(this,e);return n.modified=!0,this.pulse(n.input,t)}function uhe(e,t){return Ib.call(this,e,_c().insert(t))}function lhe(e,t){return Ib.call(this,e,_c().remove(t))}function SP(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function _P(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function qb(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function che(e){var t=qb(e),n=SP(e),i=_P(e);e._renderer.background(e.background()),e._renderer.resize(n,i,t),e._handler.origin(t),e._resizeListeners.forEach(r=>{try{r(n,i)}catch(a){e.error(a)}})}function fhe(e,t,n){var i=e._renderer,r=i&&i.canvas(),a,s,o;return r&&(o=qb(e),s=t.changedTouches?t.changedTouches[0]:t,a=Tb(s,r),a[0]-=o[0],a[1]-=o[1]),t.dataflow=e,t.item=n,t.vega=dhe(e,n,a),t}function dhe(e,t,n){const i=t?t.mark.marktype==="group"?t:t.mark.group:null;function r(s){var o=i,l;if(s){for(l=t;l;l=l.mark.group)if(l.mark.name===s){o=l;break}}return o&&o.mark&&o.mark.interactive?o:{}}function a(s){if(!s)return n;_e(s)&&(s=r(s));const o=n.slice();for(;s;)o[0]-=s.x||0,o[1]-=s.y||0,s=s.mark&&s.mark.group;return o}return{view:li(e),item:li(t||{}),group:r,xy:a,x:s=>a(s)[0],y:s=>a(s)[1]}}const N4="view",hhe="timer",ghe="window",phe={trap:!1};function mhe(e){const t=Ge({defaults:{}},e),n=(i,r)=>{r.forEach(a=>{oe(i[a])&&(i[a]=pa(i[a]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function wP(e,t,n,i){e._eventListeners.push({type:n,sources:Se(t),handler:i})}function yhe(e,t){var n=e._eventConfig.defaults,i=n.prevent,r=n.allow;return i===!1||r===!0?!1:i===!0||r===!1?!0:i?i[t]:r?!r[t]:e.preventDefault()}function b1(e,t,n){const i=e._eventConfig&&e._eventConfig[t];return i===!1||Ee(i)&&!i[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function vhe(e,t,n){var i=this,r=new Kv(n),a=function(f,d){i.runAsync(null,()=>{e===N4&&yhe(i,t)&&f.preventDefault(),r.receive(fhe(i,f,d))})},s;if(e===hhe)b1(i,"timer",t)&&i.timer(a,t);else if(e===N4)b1(i,"view",t)&&i.addEventListener(t,a,phe);else if(e===ghe?b1(i,"window",t)&&typeof window<"u"&&(s=[window]):typeof document<"u"&&b1(i,"selector",t)&&(s=Array.from(document.querySelectorAll(e))),!s)i.warn("Can not resolve event source: "+e);else{for(var o=0,l=s.length;o<l;++o)s[o].addEventListener(t,a);wP(i,s,t,a)}return r}function z4(e){return e.item}function F4(e){return e.item.mark.source}function L4(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function bhe(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",z4),F4,L4(e)),this.on(this.events("view","pointerout",z4),F4,L4(t)),this}function xhe(){var e=this._tooltip,t=this._timers,n=this._handler.handlers(),i=this._eventListeners,r,a,s,o,l;for(r=t.length;--r>=0;)t[r].stop();for(r=i.length;--r>=0;)for(s=i[r],a=s.sources.length;--a>=0;)s.sources[a].removeEventListener(s.type,s.handler);for(e&&e.call(this,this._handler,null,null,null),r=n.length;--r>=0;)l=n[r].type,o=n[r].handler,this._handler.off(l,o);return this}function ur(e,t,n){const i=document.createElement(e);for(const r in t)i.setAttribute(r,t[r]);return n!=null&&(i.textContent=n),i}const Ehe="vega-bind",She="vega-bind-name",_he="vega-bind-radio";function whe(e,t,n){if(!t)return;const i=n.param;let r=n.state;return r||(r=n.state={elements:null,active:!1,set:null,update:s=>{s!=e.signal(i.signal)&&e.runAsync(null,()=>{r.source=!0,e.signal(i.signal,s)})}},i.debounce&&(r.update=vC(i.debounce,r.update))),(i.input==null&&i.element?Ahe:$he)(r,t,i,e),r.active||(e.on(e._signals[i.signal],null,()=>{r.source?r.source=!1:r.set(e.signal(i.signal))}),r.active=!0),r}function Ahe(e,t,n,i){const r=n.event||"input",a=()=>e.update(t.value);i.signal(n.signal,t.value),t.addEventListener(r,a),wP(i,t,r,a),e.set=s=>{t.value=s,t.dispatchEvent(Che(r))}}function Che(e){return typeof Event<"u"?new Event(e):{type:e}}function $he(e,t,n,i){const r=i.signal(n.signal),a=ur("div",{class:Ehe}),s=n.input==="radio"?a:a.appendChild(ur("label"));s.appendChild(ur("span",{class:She},n.name||n.signal)),t.appendChild(a);let o=The;switch(n.input){case"checkbox":o=Mhe;break;case"select":o=khe;break;case"radio":o=Ohe;break;case"range":o=Rhe;break}o(e,s,n,r)}function The(e,t,n,i){const r=ur("input");for(const a in n)a!=="signal"&&a!=="element"&&r.setAttribute(a==="input"?"type":a,n[a]);r.setAttribute("name",n.signal),r.value=i,t.appendChild(r),r.addEventListener("input",()=>e.update(r.value)),e.elements=[r],e.set=a=>r.value=a}function Mhe(e,t,n,i){const r={type:"checkbox",name:n.signal};i&&(r.checked=!0);const a=ur("input",r);t.appendChild(a),a.addEventListener("change",()=>e.update(a.checked)),e.elements=[a],e.set=s=>a.checked=!!s||null}function khe(e,t,n,i){const r=ur("select",{name:n.signal}),a=n.labels||[];n.options.forEach((s,o)=>{const l={value:s};vv(s,i)&&(l.selected=!0),r.appendChild(ur("option",l,(a[o]||s)+""))}),t.appendChild(r),r.addEventListener("change",()=>{e.update(n.options[r.selectedIndex])}),e.elements=[r],e.set=s=>{for(let o=0,l=n.options.length;o<l;++o)if(vv(n.options[o],s)){r.selectedIndex=o;return}}}function Ohe(e,t,n,i){const r=ur("span",{class:_he}),a=n.labels||[];t.appendChild(r),e.elements=n.options.map((s,o)=>{const l={type:"radio",name:n.signal,value:s};vv(s,i)&&(l.checked=!0);const f=ur("input",l);f.addEventListener("change",()=>e.update(s));const d=ur("label",{},(a[o]||s)+"");return d.prepend(f),r.appendChild(d),f}),e.set=s=>{const o=e.elements,l=o.length;for(let f=0;f<l;++f)vv(o[f].value,s)&&(o[f].checked=!0)}}function Rhe(e,t,n,i){i=i!==void 0?i:(+n.max+ +n.min)/2;const r=n.max!=null?n.max:Math.max(100,+i)||100,a=n.min||Math.min(0,r,+i)||0,s=n.step||Eu(a,r,100),o=ur("input",{type:"range",name:n.signal,min:a,max:r,step:s});o.value=i;const l=ur("span",{},+i);t.appendChild(o),t.appendChild(l);const f=()=>{l.textContent=o.value,e.update(+o.value)};o.addEventListener("input",f),o.addEventListener("change",f),e.elements=[o],e.set=d=>{o.value=d,l.textContent=d}}function vv(e,t){return e===t||e+""==t+""}function AP(e,t,n,i,r,a){return t=t||new i(e.loader()),t.initialize(n,SP(e),_P(e),qb(e),r,a).background(e.background())}function FM(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function Dhe(e,t,n,i){const r=new i(e.loader(),FM(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,qb(e),e);return t&&t.handlers().forEach(a=>{r.on(a.type,a.handler)}),r}function Nhe(e,t){const n=this,i=n._renderType,r=n._eventConfig.bind,a=Mb(i);e=n._el=e?r_(n,e,!0):null,rhe(n),a||n.error("Unrecognized renderer type: "+i);const s=a.handler||c0,o=e?a.renderer:a.headless;return n._renderer=o?AP(n,n._renderer,e,o):null,n._handler=Dhe(n,n._handler,e,s),n._redraw=!0,e&&r!=="none"&&(t=t?n._elBind=r_(n,t,!0):e.appendChild(ur("form",{class:"vega-bindings"})),n._bind.forEach(l=>{l.param.element&&r!=="container"&&(l.element=r_(n,l.param.element,!!l.param.input))}),n._bind.forEach(l=>{whe(n,l.element||t,l)})),n}function r_(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(i){t=null,e.error(i)}return t}const xg=e=>+e||0,zhe=e=>({top:e,bottom:e,left:e,right:e});function U4(e){return Ee(e)?{top:xg(e.top),bottom:xg(e.bottom),left:xg(e.left),right:xg(e.right)}:zhe(xg(e))}async function LM(e,t,n,i){const r=Mb(t),a=r&&r.headless;return a||ie("Unrecognized renderer type: "+t),await e.runAsync(),AP(e,null,null,a,n,i).renderAsync(e._scenegraph.root)}async function Fhe(e,t){e!==uu.Canvas&&e!==uu.SVG&&e!==uu.PNG&&ie("Unrecognized image type: "+e);const n=await LM(this,e,t);return e===uu.SVG?Lhe(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function Lhe(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function Uhe(e,t){return(await LM(this,uu.Canvas,e,t)).canvas()}async function Bhe(e){return(await LM(this,uu.SVG,e)).svg()}function jhe(e,t,n){return bP(e,id,Rp,n).parse(t)}function Phe(e){var t=this._runtime.scales;return Ce(t,e)||ie("Unrecognized scale or projection: "+e),t[e].value}var CP="width",$P="height",UM="padding",B4={skip:!0};function TP(e,t){var n=e.autosize(),i=e.padding();return t-(n&&n.contains===UM?i.left+i.right:0)}function MP(e,t){var n=e.autosize(),i=e.padding();return t-(n&&n.contains===UM?i.top+i.bottom:0)}function Ihe(e){var t=e._signals,n=t[CP],i=t[$P],r=t[UM];function a(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,o=>{e._width=o.size,e._viewWidth=TP(e,o.size),a()},{size:n}),e._resizeHeight=e.add(null,o=>{e._height=o.size,e._viewHeight=MP(e,o.size),a()},{size:i});const s=e.add(null,a,{pad:r});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=i.rank+1,s.rank=r.rank+1}function qhe(e,t,n,i,r,a){this.runAfter(s=>{let o=0;s._autosize=0,s.width()!==n&&(o=1,s.signal(CP,n,B4),s._resizeWidth.skip(!0)),s.height()!==i&&(o=1,s.signal($P,i,B4),s._resizeHeight.skip(!0)),s._viewWidth!==e&&(s._resize=1,s._viewWidth=e),s._viewHeight!==t&&(s._resize=1,s._viewHeight=t),(s._origin[0]!==r[0]||s._origin[1]!==r[1])&&(s._resize=1,s._origin=r),o&&s.run("enter"),a&&s.runAfter(l=>l.resize())},!1,1)}function Hhe(e){return this._runtime.getState(e||{data:Ghe,signals:Yhe,recurse:!0})}function Ghe(e,t){return t.modified&&oe(t.input.value)&&!e.startsWith("_:vega:_")}function Yhe(e,t){return!(e==="parent"||t instanceof id.proxy)}function Xhe(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function Vhe(e,t){function n(i){e({timestamp:Date.now(),elapsed:i})}this._timers.push(voe(n,t))}function Whe(e,t,n,i){const r=e.element();r&&r.setAttribute("title",Qhe(i))}function Qhe(e){return e==null?"":oe(e)?kP(e):Ee(e)&&!gu(e)?Zhe(e):e+""}function Zhe(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(oe(n)?kP(n):OP(n))}).join(`
`)}function kP(e){return"["+e.map(OP).join(", ")+"]"}function OP(e){return oe(e)?"[]":Ee(e)&&!gu(e)?"{}":e}function Khe(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e!=null&&e();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function RP(e,t){const n=this;if(t=t||{},If.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const a=Ge({},e.locale,t.locale);n.locale($7(a.number,a.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||uu.Canvas,n._scenegraph=new CU;const i=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||Whe,n._redraw=!0,n._handler=new c0().scene(i),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=mhe(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const r=jhe(n,e,t.expr);n._runtime=r,n._signals=r.signals,n._bind=(e.bindings||[]).map(a=>({state:null,param:Ge({},a)})),r.root&&r.root.set(i),i.source=r.data.root.input,n.pulse(r.data.root.input,n.changeset().insert(i.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=TP(n,n._width),n._viewHeight=MP(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,Ihe(n),ahe(n),she(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function x1(e,t){return Ce(e._signals,t)?e._signals[t]:ie("Unrecognized signal name: "+me(t))}function DP(e,t){const n=(e._targets||[]).filter(i=>i._update&&i._update.handler===t);return n.length?n[0]:null}function j4(e,t,n,i){let r=DP(n,i);return r||(r=FM(e,()=>i(t,n.value)),r.handler=i,e.on(n,null,r)),e}function P4(e,t,n){const i=DP(t,n);return i&&t._targets.remove(i),e}be(RP,If,{async evaluate(e,t,n){if(await If.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,che(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(i){this.error(i)}return n&&F1(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&EP(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const i=x1(this,e);return arguments.length===1?i.value:this.update(i,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",U4(e)):U4(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(Mb(e)||ie("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(If.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(x1(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:qhe,addEventListener(e,t,n){let i=t;return n&&n.trap===!1||(i=FM(this,t),i.raw=t),this._handler.on(e,i),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),i=n.length,r,a;--i>=0;)if(a=n[i].type,r=n[i].handler,e===a&&(t===r||t===r.raw)){this._handler.off(a,r);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return j4(this,e,x1(this,e),t)},removeSignalListener(e,t){return P4(this,x1(this,e),t)},addDataListener(e,t){return j4(this,e,yv(this,e).values,t)},removeDataListener(e,t){return P4(this,yv(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=xA(this,null);this._globalCursor=!!e,t&&xA(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:Vhe,events:vhe,finalize:xhe,hover:bhe,data:ohe,change:Ib,insert:uhe,remove:lhe,scale:Phe,initialize:Nhe,toImageURL:Fhe,toCanvas:Uhe,toSVG:Bhe,getState:Hhe,setState:Xhe,_watchPixelRatio:Khe});const Jhe="view",bv="[",xv="]",NP="{",zP="}",ege=":",FP=",",tge="@",nge=">",ige=/[[\]{}]/,rge={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let LP,UP;function Pu(e,t,n){return LP=t||Jhe,UP=n||rge,BP(e.trim()).map(EA)}function age(e){return UP[e]}function lp(e,t,n,i,r){const a=e.length;let s=0,o;for(;t<a;++t){if(o=e[t],!s&&o===n)return t;r&&r.indexOf(o)>=0?--s:i&&i.indexOf(o)>=0&&++s}return t}function BP(e){const t=[],n=e.length;let i=0,r=0;for(;r<n;)r=lp(e,r,FP,bv+NP,xv+zP),t.push(e.substring(i,r).trim()),i=++r;if(t.length===0)throw"Empty event selector: "+e;return t}function EA(e){return e[0]==="["?sge(e):oge(e)}function sge(e){const t=e.length;let n=1,i;if(n=lp(e,n,xv,bv,xv),n===t)throw"Empty between selector: "+e;if(i=BP(e.substring(1,n)),i.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==nge)throw"Expected '>' after between selector: "+e;i=i.map(EA);const r=EA(e.slice(1).trim());return r.between?{between:i,stream:r}:(r.between=i,r)}function oge(e){const t={source:LP},n=[];let i=[0,0],r=0,a=0,s=e.length,o=0,l,f;if(e[s-1]===zP){if(o=e.lastIndexOf(NP),o>=0){try{i=uge(e.substring(o+1,s-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,o).trim(),s=e.length}else throw"Unmatched right brace: "+e;o=0}if(!s)throw e;if(e[0]===tge&&(r=++o),l=lp(e,o,ege),l<s&&(n.push(e.substring(a,l).trim()),a=o=++l),o=lp(e,o,bv),o===s)n.push(e.substring(a,s).trim());else if(n.push(e.substring(a,o).trim()),f=[],a=++o,a===s)throw"Unmatched left bracket: "+e;for(;o<s;){if(o=lp(e,o,xv),o===s)throw"Unmatched left bracket: "+e;if(f.push(e.substring(a,o).trim()),o<s-1&&e[++o]!==bv)throw"Expected left bracket: "+e;a=++o}if(!(s=n.length)||ige.test(n[s-1]))throw"Invalid event selector: "+e;return s>1?(t.type=n[1],r?t.markname=n[0].slice(1):age(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),f!=null&&(t.filter=f),i[0]&&(t.throttle=i[0]),i[1]&&(t.debounce=i[1]),t}function uge(e){const t=e.split(FP);if(!e.length||t.length>2)throw e;return t.map(n=>{const i=+n;if(i!==i)throw e;return i})}function lge(e){return Ee(e)?e:{type:e||"pad"}}const Eg=e=>+e||0,cge=e=>({top:e,bottom:e,left:e,right:e});function fge(e){return Ee(e)?e.signal?e:{top:Eg(e.top),bottom:Eg(e.bottom),left:Eg(e.left),right:Eg(e.right)}:cge(Eg(e))}const Cn=e=>Ee(e)&&!oe(e)?Ge({},e):{value:e};function I4(e,t,n,i){return n!=null?(Ee(n)&&!oe(n)||oe(n)&&n.length&&Ee(n[0])?e.update[t]=n:e[i||"enter"][t]={value:n},1):0}function Hn(e,t,n){for(const i in t)I4(e,i,t[i]);for(const i in n)I4(e,i,n[i],"update")}function Vd(e,t,n){for(const i in t)n&&Ce(n,i)||(e[i]=Ge(e[i]||{},t[i]));return e}function Df(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const BM="mark",jM="frame",PM="scope",dge="axis",hge="axis-domain",gge="axis-grid",pge="axis-label",mge="axis-tick",yge="axis-title",vge="legend",bge="legend-band",xge="legend-entry",Ege="legend-gradient",jP="legend-label",Sge="legend-symbol",_ge="legend-title",wge="title",Age="title-text",Cge="title-subtitle";function $ge(e,t,n,i,r){const a={},s={};let o,l,f,d;l="lineBreak",t==="text"&&r[l]!=null&&!Df(l,e)&&a_(a,l,r[l]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),d=n===jM?r.group:n===BM?Ge({},r.mark,r[t]):null;for(l in d)f=Df(l,e)||(l==="fill"||l==="stroke")&&(Df("fill",e)||Df("stroke",e)),f||a_(a,l,d[l]);Se(i).forEach(h=>{const p=r.style&&r.style[h];for(const y in p)Df(y,e)||a_(a,y,p[y])}),e=Ge({},e);for(l in a)d=a[l],d.signal?(o=o||{})[l]=d:s[l]=d;return e.enter=Ge(s,e.enter),o&&(e.update=Ge(o,e.update)),e}function a_(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const PP=e=>_e(e)?me(e):e.signal?`(${e.signal})`:IP(e);function Hb(e){if(e.gradient!=null)return Mge(e);let t=e.signal?`(${e.signal})`:e.color?Tge(e.color):e.field!=null?IP(e.field):e.value!==void 0?me(e.value):void 0;return e.scale!=null&&(t=kge(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${ey(e.exponent)})`),e.mult!=null&&(t+=`*${ey(e.mult)}`),e.offset!=null&&(t+=`+${ey(e.offset)}`),e.round&&(t=`round(${t})`),t}const E1=(e,t,n,i)=>`(${e}(${[t,n,i].map(Hb).join(",")})+'')`;function Tge(e){return e.c?E1("hcl",e.h,e.c,e.l):e.h||e.s?E1("hsl",e.h,e.s,e.l):e.l||e.a?E1("lab",e.l,e.a,e.b):e.r||e.g||e.b?E1("rgb",e.r,e.g,e.b):null}function Mge(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:me(n));for(;t.length&&st(t)==null;)t.pop();return t.unshift(PP(e.gradient)),`gradient(${t.join(",")})`}function ey(e){return Ee(e)?"("+Hb(e)+")":e}function IP(e){return qP(Ee(e)?e:{datum:e})}function qP(e){let t,n,i;if(e.signal)t="datum",i=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(i=e.parent,t+=".datum"):i=e.group}else e.datum?(t="datum",i=e.datum):ie("Invalid field reference: "+me(e));return e.signal||(i=_e(i)?ls(i).map(me).join("]["):qP(i)),t+"["+i+"]"}function kge(e,t){const n=PP(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+ey(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function Oge(e){let t="";return e.forEach(n=>{const i=Hb(n);t+=n.test?`(${n.test})?${i}:`:i}),st(t)===":"&&(t+="null"),t}function HP(e,t,n,i,r,a){const s={};a=a||{},a.encoders={$encode:s},e=$ge(e,t,n,i,r.config);for(const o in e)s[o]=Rge(e[o],t,a,r);return a}function Rge(e,t,n,i){const r={},a={};for(const s in e)e[s]!=null&&(r[s]=Nge(Dge(e[s]),i,n,a));return{$expr:{marktype:t,channels:r},$fields:Object.keys(a),$output:Object.keys(e)}}function Dge(e){return oe(e)?Oge(e):Hb(e)}function Nge(e,t,n,i){const r=as(e,t);return r.$fields.forEach(a=>i[a]=1),Ge(n,r.$params),r.$expr}const zge="outer",Fge=["value","update","init","react","bind"];function q4(e,t){ie(e+' for "outer" push: '+me(t))}function GP(e,t){const n=e.name;if(e.push===zge)t.signals[n]||q4("No prior signal definition",n),Fge.forEach(i=>{e[i]!==void 0&&q4("Invalid property ",i)});else{const i=t.addSignal(n,e.value);e.react===!1&&(i.react=!1),e.bind&&t.addBinding(n,e.bind)}}function SA(e,t,n,i){this.id=-1,this.type=e,this.value=t,this.params=n,i&&(this.parent=i)}function Gb(e,t,n,i){return new SA(e,t,n,i)}function Ev(e,t){return Gb("operator",e,t)}function Ne(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function Dp(e,t){return t?{$field:e,$name:t}:{$field:e}}const _A=Dp("key");function H4(e,t){return{$compare:e,$order:t}}function Lge(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const Uge="ascending",Bge="descending";function jge(e){return Ee(e)?(e.order===Bge?"-":"+")+Yb(e.op,e.field):""}function Yb(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const IM="scope",wA="view";function pn(e){return e&&e.signal}function Pge(e){return e&&e.expr}function ty(e){if(pn(e))return!0;if(Ee(e)){for(const t in e)if(ty(e[t]))return!0}return!1}function ra(e,t){return e??t}function Yl(e){return e&&e.signal||e}const G4="timer";function Np(e,t){return(e.merge?qge:e.stream?Hge:e.type?Gge:ie("Invalid stream specification: "+me(e)))(e,t)}function Ige(e){return e===IM?wA:e||wA}function qge(e,t){const n=e.merge.map(r=>Np(r,t)),i=qM({merge:n},e,t);return t.addStream(i).id}function Hge(e,t){const n=Np(e.stream,t),i=qM({stream:n},e,t);return t.addStream(i).id}function Gge(e,t){let n;e.type===G4?(n=t.event(G4,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(Ige(e.source),e.type);const i=qM({stream:n},e,t);return Object.keys(i).length===1?n:t.addStream(i).id}function qM(e,t,n){let i=t.between;return i&&(i.length!==2&&ie('Stream "between" parameter must have 2 entries: '+me(t)),e.between=[Np(i[0],n),Np(i[1],n)]),i=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&i.push(Yge(t.marktype,t.markname,t.markrole)),t.source===IM&&i.push("inScope(event.item)"),i.length&&(e.filter=as("("+i.join(")&&(")+")",n).$expr),(i=t.throttle)!=null&&(e.throttle=+i),(i=t.debounce)!=null&&(e.debounce=+i),t.consume&&(e.consume=!0),e}function Yge(e,t,n){const i="event.item";return i+(e&&e!=="*"?"&&"+i+".mark.marktype==='"+e+"'":"")+(n?"&&"+i+".mark.role==='"+n+"'":"")+(t?"&&"+i+".mark.name==='"+t+"'":"")}const Xge={code:"_.$value",ast:{type:"Identifier",value:"value"}};function Vge(e,t,n){const i=e.encode,r={target:n};let a=e.events,s=e.update,o=[];a||ie("Signal update missing events specification."),_e(a)&&(a=Pu(a,t.isSubscope()?IM:wA)),a=Se(a).filter(l=>l.signal||l.scale?(o.push(l),0):1),o.length>1&&(o=[Qge(o)]),a.length&&o.push(a.length>1?{merge:a}:a[0]),i!=null&&(s&&ie("Signal encode and update are mutually exclusive."),s="encode(item(),"+me(i)+")"),r.update=_e(s)?as(s,t):s.expr!=null?as(s.expr,t):s.value!=null?s.value:s.signal!=null?{$expr:Xge,$params:{$value:t.signalRef(s.signal)}}:ie("Invalid signal update specification."),e.force&&(r.options={force:!0}),o.forEach(l=>t.addUpdate(Ge(Wge(l,t),r)))}function Wge(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):Np(e,t)}}function Qge(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function Zge(e,t){const n=t.getSignal(e.name);let i=e.update;e.init&&(i?ie("Signals can not include both init and update expressions."):(i=e.init,n.initonly=!0)),i&&(i=as(i,t),n.update=i.$expr,n.params=i.$params),e.on&&e.on.forEach(r=>Vge(r,t,n.id))}const $t=e=>(t,n,i)=>Gb(e,n,t||void 0,i),YP=$t("aggregate"),Kge=$t("axisticks"),XP=$t("bound"),_a=$t("collect"),Y4=$t("compare"),Jge=$t("datajoin"),VP=$t("encode"),epe=$t("expression"),tpe=$t("facet"),npe=$t("field"),ipe=$t("key"),rpe=$t("legendentries"),ape=$t("load"),spe=$t("mark"),ope=$t("multiextent"),upe=$t("multivalues"),lpe=$t("overlap"),cpe=$t("params"),WP=$t("prefacet"),fpe=$t("projection"),dpe=$t("proxy"),hpe=$t("relay"),QP=$t("render"),gpe=$t("scale"),$c=$t("sieve"),ppe=$t("sortitems"),ZP=$t("viewlayout"),mpe=$t("values");let ype=0;const KP={min:"min",max:"max",count:"sum"};function vpe(e,t){const n=e.type||"linear";UL(n)||ie("Unrecognized scale type: "+me(n)),t.addScale(e.name,{type:n,domain:void 0})}function bpe(e,t){const n=t.getScale(e.name).params;let i;n.domain=JP(e.domain,e,t),e.range!=null&&(n.range=tI(e,t,n)),e.interpolate!=null&&Mpe(e.interpolate,n),e.nice!=null&&(n.nice=Tpe(e.nice,t)),e.bins!=null&&(n.bins=$pe(e.bins,t));for(i in e)Ce(n,i)||i==="name"||(n[i]=zr(e[i],t))}function zr(e,t){return Ee(e)?e.signal?t.signalRef(e.signal):ie("Unsupported object: "+me(e)):e}function ny(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>zr(n,t))}function Xb(e){ie("Can not find data set: "+me(e))}function JP(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&ie("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(oe(e)?xpe:e.fields?Spe:Epe)(e,t,n)}function xpe(e,t,n){return e.map(i=>zr(i,n))}function Epe(e,t,n){const i=n.getData(e.data);return i||Xb(e.data),ud(t.type)?i.valuesRef(n,e.field,eI(e.sort,!1)):PL(t.type)?i.domainRef(n,e.field):i.extentRef(n,e.field)}function Spe(e,t,n){const i=e.data,r=e.fields.reduce((a,s)=>(s=_e(s)?{data:i,field:s}:oe(s)||s.signal?_pe(s,n):s,a.push(s),a),[]);return(ud(t.type)?wpe:PL(t.type)?Ape:Cpe)(e,n,r)}function _pe(e,t){const n="_:vega:_"+ype++,i=_a({});if(oe(e))i.value={$ingest:e};else if(e.signal){const r="setdata("+me(n)+","+e.signal+")";i.params.input=t.signalRef(r)}return t.addDataPipeline(n,[i,$c({})]),{data:n,field:"data"}}function wpe(e,t,n){const i=eI(e.sort,!0);let r,a;const s=n.map(f=>{const d=t.getData(f.data);return d||Xb(f.data),d.countsRef(t,f.field,i)}),o={groupby:_A,pulse:s};i&&(r=i.op||"count",a=i.field?Yb(r,i.field):"count",o.ops=[KP[r]],o.fields=[t.fieldRef(a)],o.as=[a]),r=t.add(YP(o));const l=t.add(_a({pulse:Ne(r)}));return a=t.add(mpe({field:_A,sort:t.sortRef(i),pulse:Ne(l)})),Ne(a)}function eI(e,t){return e&&(!e.field&&!e.op?Ee(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?ie("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!KP[e.op]&&ie("Multiple domain scales can not be sorted using "+e.op)),e}function Ape(e,t,n){const i=n.map(r=>{const a=t.getData(r.data);return a||Xb(r.data),a.domainRef(t,r.field)});return Ne(t.add(upe({values:i})))}function Cpe(e,t,n){const i=n.map(r=>{const a=t.getData(r.data);return a||Xb(r.data),a.extentRef(t,r.field)});return Ne(t.add(ope({extents:i})))}function $pe(e,t){return e.signal||oe(e)?ny(e,t):t.objectProperty(e)}function Tpe(e,t){return e.signal?t.signalRef(e.signal):Ee(e)?{interval:zr(e.interval),step:zr(e.step)}:zr(e)}function Mpe(e,t){t.interpolate=zr(e.type||e),e.gamma!=null&&(t.interpolateGamma=zr(e.gamma))}function tI(e,t,n){const i=t.config.range;let r=e.range;if(r.signal)return t.signalRef(r.signal);if(_e(r)){if(i&&Ce(i,r))return e=Ge({},e,{range:i[r]}),tI(e,t,n);r==="width"?r=[0,{signal:"width"}]:r==="height"?r=ud(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:ie("Unrecognized scale range value: "+me(r))}else if(r.scheme){n.scheme=oe(r.scheme)?ny(r.scheme,t):zr(r.scheme,t),r.extent&&(n.schemeExtent=ny(r.extent,t)),r.count&&(n.schemeCount=zr(r.count,t));return}else if(r.step){n.rangeStep=zr(r.step,t);return}else{if(ud(e.type)&&!oe(r))return JP(r,e,t);oe(r)||ie("Unsupported range type: "+me(r))}return r.map(a=>(oe(a)?ny:zr)(a,t))}function kpe(e,t){const n=t.config.projection||{},i={};for(const r in e)r!=="name"&&(i[r]=AA(e[r],r,t));for(const r in n)i[r]==null&&(i[r]=AA(n[r],r,t));t.addProjection(e.name,i)}function AA(e,t,n){return oe(e)?e.map(i=>AA(i,t,n)):Ee(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:ie("Unsupported parameter object: "+me(e)):e}const wa="top",Wd="left",Qd="right",Mu="bottom",nI="center",Ope="vertical",Rpe="start",Dpe="middle",Npe="end",CA="index",HM="label",zpe="offset",yd="perc",Fpe="perc2",Lr="value",b0="guide-label",GM="guide-title",Lpe="group-title",Upe="group-subtitle",X4="symbol",iy="gradient",$A="discrete",TA="size",Bpe="shape",jpe="fill",Ppe="stroke",Ipe="strokeWidth",qpe="strokeDash",Hpe="opacity",YM=[TA,Bpe,jpe,Ppe,Ipe,qpe,Hpe],x0={name:1,style:1,interactive:1},ut={value:0},Ur={value:1},Vb="group",iI="rect",XM="rule",Gpe="symbol",Tc="text";function zp(e){return e.type=Vb,e.interactive=e.interactive||!1,e}function Xi(e,t){const n=(i,r)=>ra(e[i],ra(t[i],r));return n.isVertical=i=>Ope===ra(e.direction,t.direction||(i?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>ra(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>ra(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>ra(e.columns,ra(t.columns,+n.isVertical(!0))),n}function rI(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function Ype(e,t,n){const i=t.config.style[n];return i&&i[e]}function Wb(e,t,n){return`item.anchor === '${Rpe}' ? ${e} : item.anchor === '${Npe}' ? ${t} : ${n}`}const VM=Wb(me(Wd),me(Qd),me(nI));function Xpe(e){const t=e("tickBand");let n=e("tickOffset"),i,r;return t?t.signal?(i={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},r={signal:`(${t.signal}) === 'extent'`},Ee(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(i=1,r=!0,n=0):(i=.5,r=!1):(i=e("bandPosition"),r=e("tickExtra")),{extra:r,band:i,offset:n}}function aI(e,t){return t?e?Ee(e)?Object.assign({},e,{offset:aI(e.offset,t)}):{value:e,offset:t}:t:e}function hr(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=Vd(e.encode,t,x0)):e.interactive=!1,e}function Vpe(e,t,n,i){const r=Xi(e,n),a=r.isVertical(),s=r.gradientThickness(),o=r.gradientLength();let l,f,d,h,p;a?(f=[0,1],d=[0,0],h=s,p=o):(f=[0,0],d=[1,0],h=o,p=s);const y={enter:l={opacity:ut,x:ut,y:ut,width:Cn(h),height:Cn(p)},update:Ge({},l,{opacity:Ur,fill:{gradient:t,start:f,stop:d}}),exit:{opacity:ut}};return Hn(y,{stroke:r("gradientStrokeColor"),strokeWidth:r("gradientStrokeWidth")},{opacity:r("gradientOpacity")}),hr({type:iI,role:Ege,encode:y},i)}function Wpe(e,t,n,i,r){const a=Xi(e,n),s=a.isVertical(),o=a.gradientThickness(),l=a.gradientLength();let f,d,h,p,y="";s?(f="y",h="y2",d="x",p="width",y="1-"):(f="x",h="x2",d="y",p="height");const v={opacity:ut,fill:{scale:t,field:Lr}};v[f]={signal:y+"datum."+yd,mult:l},v[d]=ut,v[h]={signal:y+"datum."+Fpe,mult:l},v[p]=Cn(o);const b={enter:v,update:Ge({},v,{opacity:Ur}),exit:{opacity:ut}};return Hn(b,{stroke:a("gradientStrokeColor"),strokeWidth:a("gradientStrokeWidth")},{opacity:a("gradientOpacity")}),hr({type:iI,role:bge,key:Lr,from:r,encode:b},i)}const Qpe=`datum.${yd}<=0?"${Wd}":datum.${yd}>=1?"${Qd}":"${nI}"`,Zpe=`datum.${yd}<=0?"${Mu}":datum.${yd}>=1?"${wa}":"${Dpe}"`;function V4(e,t,n,i){const r=Xi(e,t),a=r.isVertical(),s=Cn(r.gradientThickness()),o=r.gradientLength();let l=r("labelOverlap"),f,d,h,p,y="";const v={enter:f={opacity:ut},update:d={opacity:Ur,text:{field:HM}},exit:{opacity:ut}};return Hn(v,{fill:r("labelColor"),fillOpacity:r("labelOpacity"),font:r("labelFont"),fontSize:r("labelFontSize"),fontStyle:r("labelFontStyle"),fontWeight:r("labelFontWeight"),limit:ra(e.labelLimit,t.gradientLabelLimit)}),a?(f.align={value:"left"},f.baseline=d.baseline={signal:Zpe},h="y",p="x",y="1-"):(f.align=d.align={signal:Qpe},f.baseline={value:"top"},h="x",p="y"),f[h]=d[h]={signal:y+"datum."+yd,mult:o},f[p]=d[p]=s,s.offset=ra(e.labelOffset,t.gradientLabelOffset)||0,l=l?{separation:r("labelSeparation"),method:l,order:"datum."+CA}:void 0,hr({type:Tc,role:jP,style:b0,key:Lr,from:i,encode:v,overlap:l},n)}function Kpe(e,t,n,i,r){const a=Xi(e,t),s=n.entries,o=!!(s&&s.interactive),l=s?s.name:void 0,f=a("clipHeight"),d=a("symbolOffset"),h={data:"value"},p=`(${r}) ? datum.${zpe} : datum.${TA}`,y=f?Cn(f):{field:TA},v=`datum.${CA}`,b=`max(1, ${r})`;let E,_,w,A,M;y.mult=.5,E={enter:_={opacity:ut,x:{signal:p,mult:.5,offset:d},y},update:w={opacity:Ur,x:_.x,y:_.y},exit:{opacity:ut}};let T=null,R=null;e.fill||(T=t.symbolBaseFillColor,R=t.symbolBaseStrokeColor),Hn(E,{fill:a("symbolFillColor",T),shape:a("symbolType"),size:a("symbolSize"),stroke:a("symbolStrokeColor",R),strokeDash:a("symbolDash"),strokeDashOffset:a("symbolDashOffset"),strokeWidth:a("symbolStrokeWidth")},{opacity:a("symbolOpacity")}),YM.forEach(D=>{e[D]&&(w[D]=_[D]={scale:e[D],field:Lr})});const O=hr({type:Gpe,role:Sge,key:Lr,from:h,clip:f?!0:void 0,encode:E},n.symbols),k=Cn(d);k.offset=a("labelOffset"),E={enter:_={opacity:ut,x:{signal:p,offset:k},y},update:w={opacity:Ur,text:{field:HM},x:_.x,y:_.y},exit:{opacity:ut}},Hn(E,{align:a("labelAlign"),baseline:a("labelBaseline"),fill:a("labelColor"),fillOpacity:a("labelOpacity"),font:a("labelFont"),fontSize:a("labelFontSize"),fontStyle:a("labelFontStyle"),fontWeight:a("labelFontWeight"),limit:a("labelLimit")});const $=hr({type:Tc,role:jP,style:b0,key:Lr,from:h,encode:E},n.labels);return E={enter:{noBound:{value:!f},width:ut,height:f?Cn(f):ut,opacity:ut},exit:{opacity:ut},update:w={opacity:Ur,row:{signal:null},column:{signal:null}}},a.isVertical(!0)?(A=`ceil(item.mark.items.length / ${b})`,w.row.signal=`${v}%${A}`,w.column.signal=`floor(${v} / ${A})`,M={field:["row",v]}):(w.row.signal=`floor(${v} / ${b})`,w.column.signal=`${v} % ${b}`,M={field:v}),w.column.signal=`(${r})?${w.column.signal}:${v}`,i={facet:{data:i,name:"value",groupby:CA}},zp({role:PM,from:i,encode:Vd(E,s,x0),marks:[O,$],name:l,interactive:o,sort:M})}function Jpe(e,t){const n=Xi(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const WM='item.orient === "left"',QM='item.orient === "right"',Qb=`(${WM} || ${QM})`,e0e=`datum.vgrad && ${Qb}`,t0e=Wb('"top"','"bottom"','"middle"'),n0e=Wb('"right"','"left"','"center"'),i0e=`datum.vgrad && ${QM} ? (${n0e}) : (${Qb} && !(datum.vgrad && ${WM})) ? "left" : ${VM}`,r0e=`item._anchor || (${Qb} ? "middle" : "start")`,a0e=`${e0e} ? (${WM} ? -90 : 90) : 0`,s0e=`${Qb} ? (datum.vgrad ? (${QM} ? "bottom" : "top") : ${t0e}) : "top"`;function o0e(e,t,n,i){const r=Xi(e,t),a={enter:{opacity:ut},update:{opacity:Ur,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:ut}};return Hn(a,{orient:r("titleOrient"),_anchor:r("titleAnchor"),anchor:{signal:r0e},angle:{signal:a0e},align:{signal:i0e},baseline:{signal:s0e},text:e.title,fill:r("titleColor"),fillOpacity:r("titleOpacity"),font:r("titleFont"),fontSize:r("titleFontSize"),fontStyle:r("titleFontStyle"),fontWeight:r("titleFontWeight"),limit:r("titleLimit"),lineHeight:r("titleLineHeight")},{align:r("titleAlign"),baseline:r("titleBaseline")}),hr({type:Tc,role:_ge,style:GM,from:i,encode:a},n)}function u0e(e,t){let n;return Ee(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+W4(e.path)+")":e.sphere&&(n="geoShape("+W4(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function W4(e){return Ee(e)&&e.signal?e.signal:me(e)}function sI(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===Vb?PM:t||BM}function l0e(e){return{marktype:e.type,name:e.name||void 0,role:e.role||sI(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function c0e(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function ZM(e,t){const n=j7(e.type);n||ie("Unrecognized transform type: "+me(e.type));const i=Gb(n.type.toLowerCase(),null,oI(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(i)),i.metadata=n.metadata||{},i}function oI(e,t,n){const i={},r=e.params.length;for(let a=0;a<r;++a){const s=e.params[a];i[s.name]=f0e(s,t,n)}return i}function f0e(e,t,n){const i=e.type,r=t[e.name];if(i==="index")return d0e(e,t,n);if(r===void 0){e.required&&ie("Missing required "+me(t.type)+" parameter: "+me(e.name));return}else{if(i==="param")return h0e(e,t,n);if(i==="projection")return n.projectionRef(t[e.name])}return e.array&&!pn(r)?r.map(a=>Q4(e,a,n)):Q4(e,r,n)}function Q4(e,t,n){const i=e.type;if(pn(t))return K4(i)?ie("Expression references can not be signals."):s_(i)?n.fieldRef(t):J4(i)?n.compareRef(t):n.signalRef(t.signal);{const r=e.expr||s_(i);return r&&g0e(t)?n.exprRef(t.expr,t.as):r&&p0e(t)?Dp(t.field,t.as):K4(i)?as(t,n):m0e(i)?Ne(n.getData(t).values):s_(i)?Dp(t):J4(i)?n.compareRef(t):t}}function d0e(e,t,n){return _e(t.from)||ie('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function h0e(e,t,n){const i=t[e.name];return e.array?(oe(i)||ie("Expected an array of sub-parameters. Instead: "+me(i)),i.map(r=>Z4(e,r,n))):Z4(e,i,n)}function Z4(e,t,n){const i=e.params.length;let r;for(let s=0;s<i;++s){r=e.params[s];for(const o in r.key)if(r.key[o]!==t[o]){r=null;break}if(r)break}r||ie("Unsupported parameter: "+me(t));const a=Ge(oI(r,t,n),r.key);return Ne(n.add(cpe(a)))}const g0e=e=>e&&e.expr,p0e=e=>e&&e.field,m0e=e=>e==="data",K4=e=>e==="expr",s_=e=>e==="field",J4=e=>e==="compare";function y0e(e,t,n){let i,r,a,s,o;return e?(i=e.facet)&&(t||ie("Only group marks can be faceted."),i.field!=null?s=o=ry(i,n):(e.data?o=Ne(n.getData(e.data).aggregate):(a=ZM(Ge({type:"aggregate",groupby:Se(i.groupby)},i.aggregate),n),a.params.key=n.keyRef(i.groupby),a.params.pulse=ry(i,n),s=o=Ne(n.add(a))),r=n.keyRef(i.groupby,!0))):s=Ne(n.add(_a(null,[{}]))),s||(s=ry(e,n)),{key:r,pulse:s,parent:o}}function ry(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:Ne(t.getData(e.data).output)}function lc(e,t,n,i,r){this.scope=e,this.input=t,this.output=n,this.values=i,this.aggregate=r,this.index={}}lc.fromEntries=function(e,t){const n=t.length,i=t[n-1],r=t[n-2];let a=t[0],s=null,o=1;for(a&&a.type==="load"&&(a=t[1]),e.add(t[0]);o<n;++o)t[o].params.pulse=Ne(t[o-1]),e.add(t[o]),t[o].type==="aggregate"&&(s=t[o]);return new lc(e,a,r,i,s)};function uI(e){return _e(e)?e:null}function ez(e,t,n){const i=Yb(n.op,n.field);let r;if(t.ops){for(let a=0,s=t.as.length;a<s;++a)if(t.as[a]===i)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((r=n.op.signal)?e.signalRef(r):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(i))}function Sg(e,t,n,i,r,a,s){const o=t[n]||(t[n]={}),l=jge(a);let f=uI(r),d,h;if(f!=null&&(e=t.scope,f=f+(l?"|"+l:""),d=o[f]),!d){const p=a?{field:_A,pulse:t.countsRef(e,r,a)}:{field:e.fieldRef(r),pulse:Ne(t.output)};l&&(p.sort=e.sortRef(a)),h=e.add(Gb(i,void 0,p)),s&&(t.index[r]=h),d=Ne(h),f!=null&&(o[f]=d)}return d}lc.prototype={countsRef(e,t,n){const i=this,r=i.counts||(i.counts={}),a=uI(t);let s,o,l;return a!=null&&(e=i.scope,s=r[a]),s?n&&n.field&&ez(e,s.agg.params,n):(l={groupby:e.fieldRef(t,"key"),pulse:Ne(i.output)},n&&n.field&&ez(e,l,n),o=e.add(YP(l)),s=e.add(_a({pulse:Ne(o)})),s={agg:o,ref:Ne(s)},a!=null&&(r[a]=s)),s.ref},tuplesRef(){return Ne(this.values)},extentRef(e,t){return Sg(e,this,"extent","extent",t,!1)},domainRef(e,t){return Sg(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return Sg(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return Sg(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return Sg(e,this,"indata","tupleindex",t,!0,!0)}};function v0e(e,t,n){const i=e.from.facet,r=i.name,a=ry(i,t);let s;i.name||ie("Facet must have a name: "+me(i)),i.data||ie("Facet must reference a data set: "+me(i)),i.field?s=t.add(WP({field:t.fieldRef(i.field),pulse:a})):i.groupby?s=t.add(tpe({key:t.keyRef(i.groupby),group:Ne(t.proxy(n.parent)),pulse:a})):ie("Facet must specify groupby or field: "+me(i));const o=t.fork(),l=o.add(_a()),f=o.add($c({pulse:Ne(l)}));o.addData(r,new lc(o,l,l,f)),o.addSignal("parent",null),s.params.subflow={$subflow:o.parse(e).toRuntime()}}function b0e(e,t,n){const i=t.add(WP({pulse:n.pulse})),r=t.fork();r.add($c()),r.addSignal("parent",null),i.params.subflow={$subflow:r.parse(e).toRuntime()}}function lI(e,t,n){const i=e.remove,r=e.insert,a=e.toggle,s=e.modify,o=e.values,l=t.add(Ev()),f="if("+e.trigger+',modify("'+n+'",'+[r,i,a,s,o].map(h=>h??"null").join(",")+"),0)",d=as(f,t);l.update=d.$expr,l.params=d.$params}function Zb(e,t){const n=sI(e),i=e.type===Vb,r=e.from&&e.from.facet,a=e.overlap;let s=e.layout||n===PM||n===jM,o,l,f,d,h,p,y;const v=n===BM||s||r,b=y0e(e.from,i,t);l=t.add(Jge({key:b.key||(e.key?Dp(e.key):void 0),pulse:b.pulse,clean:!i}));const E=Ne(l);l=f=t.add(_a({pulse:E})),l=t.add(spe({markdef:l0e(e),interactive:c0e(e.interactive,t),clip:u0e(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:Ne(l)}));const _=Ne(l);l=d=t.add(VP(HP(e.encode,e.type,n,e.style,t,{mod:!1,pulse:_}))),l.params.parent=t.encode(),e.transform&&e.transform.forEach(R=>{const O=ZM(R,t),k=O.metadata;(k.generates||k.changes)&&ie("Mark transforms should not generate new data."),k.nomod||(d.params.mod=!0),O.params.pulse=Ne(l),t.add(l=O)}),e.sort&&(l=t.add(ppe({sort:t.compareRef(e.sort),pulse:Ne(l)})));const w=Ne(l);(r||s)&&(s=t.add(ZP({layout:t.objectProperty(e.layout),legends:t.legends,mark:_,pulse:w})),p=Ne(s));const A=t.add(XP({mark:_,pulse:p||w}));y=Ne(A),i&&(v&&(o=t.operators,o.pop(),s&&o.pop()),t.pushState(w,p||y,E),r?v0e(e,t,b):v?b0e(e,t,b):t.parse(e),t.popState(),v&&(s&&o.push(s),o.push(A))),a&&(y=x0e(a,y,t));const M=t.add(QP({pulse:y})),T=t.add($c({pulse:Ne(M)},void 0,t.parent()));e.name!=null&&(h=e.name,t.addData(h,new lc(t,f,M,T)),e.on&&e.on.forEach(R=>{(R.insert||R.remove||R.toggle)&&ie("Marks only support modify triggers."),lI(R,t,h)}))}function x0e(e,t,n){const i=e.method,r=e.bound,a=e.separation,s={separation:pn(a)?n.signalRef(a.signal):a,method:pn(i)?n.signalRef(i.signal):i,pulse:t};if(e.order&&(s.sort=n.compareRef({field:e.order})),r){const o=r.tolerance;s.boundTolerance=pn(o)?n.signalRef(o.signal):+o,s.boundScale=n.scaleRef(r.scale),s.boundOrient=r.orient}return Ne(n.add(lpe(s)))}function E0e(e,t){const n=t.config.legend,i=e.encode||{},r=Xi(e,n),a=i.legend||{},s=a.name||void 0,o=a.interactive,l=a.style,f={};let d=0,h,p,y;YM.forEach(A=>e[A]?(f[A]=e[A],d=d||e[A]):0),d||ie("Missing valid scale for legend.");const v=S0e(e,t.scaleType(d)),b={title:e.title!=null,scales:f,type:v,vgrad:v!=="symbol"&&r.isVertical()},E=Ne(t.add(_a(null,[b]))),_={enter:{x:{value:0},y:{value:0}}},w=Ne(t.add(rpe(p={type:v,scale:t.scaleRef(d),count:t.objectProperty(r("tickCount")),limit:t.property(r("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return v===iy?(y=[Vpe(e,d,n,i.gradient),V4(e,n,i.labels,w)],p.count=p.count||t.signalRef(`max(2,2*floor((${Yl(r.gradientLength())})/100))`)):v===$A?y=[Wpe(e,d,n,i.gradient,w),V4(e,n,i.labels,w)]:(h=Jpe(e,n),y=[Kpe(e,n,i,w,Yl(h.columns))],p.size=A0e(e,t,y[0].marks)),y=[zp({role:xge,from:E,encode:_,marks:y,layout:h,interactive:o})],b.title&&y.push(o0e(e,n,i.title,E)),Zb(zp({role:vge,from:E,encode:Vd(w0e(r,e,n),a,x0),marks:y,aria:r("aria"),description:r("description"),zindex:r("zindex"),name:s,interactive:o,style:l}),t)}function S0e(e,t){let n=e.type||X4;return!e.type&&_0e(e)===1&&(e.fill||e.stroke)&&(n=Z$(t)?iy:vw(t)?$A:X4),n!==iy?n:vw(t)?$A:iy}function _0e(e){return YM.reduce((t,n)=>t+(e[n]?1:0),0)}function w0e(e,t,n){const i={enter:{},update:{}};return Hn(i,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),i}function A0e(e,t,n){const i=Yl(tz("size",e,n)),r=Yl(tz("strokeWidth",e,n)),a=Yl(C0e(n[1].encode,t,b0));return as(`max(ceil(sqrt(${i})+${r}),${a})`,t)}function tz(e,t,n){return t[e]?`scale("${t[e]}",datum)`:rI(e,n[0].encode)}function C0e(e,t,n){return rI("fontSize",e)||Ype("fontSize",t,n)}const $0e=`item.orient==="${Wd}"?-90:item.orient==="${Qd}"?90:0`;function T0e(e,t){e=_e(e)?{text:e}:e;const n=Xi(e,t.config.title),i=e.encode||{},r=i.group||{},a=r.name||void 0,s=r.interactive,o=r.style,l=[],f={},d=Ne(t.add(_a(null,[f])));return l.push(O0e(e,n,M0e(e),d)),e.subtitle&&l.push(R0e(e,n,i.subtitle,d)),Zb(zp({role:wge,from:d,encode:k0e(n,r),marks:l,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:a,interactive:s,style:o}),t)}function M0e(e){const t=e.encode;return t&&t.title||Ge({name:e.name,interactive:e.interactive,style:e.style},t)}function k0e(e,t){const n={enter:{},update:{}};return Hn(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:VM},angle:{signal:$0e},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),Vd(n,t,x0)}function O0e(e,t,n,i){const r={value:0},a=e.text,s={enter:{opacity:r},update:{opacity:{value:1}},exit:{opacity:r}};return Hn(s,{text:a,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),hr({type:Tc,role:Age,style:Lpe,from:i,encode:s},n)}function R0e(e,t,n,i){const r={value:0},a=e.subtitle,s={enter:{opacity:r},update:{opacity:{value:1}},exit:{opacity:r}};return Hn(s,{text:a,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),hr({type:Tc,role:Cge,style:Upe,from:i,encode:s},n)}function D0e(e,t){const n=[];e.transform&&e.transform.forEach(i=>{n.push(ZM(i,t))}),e.on&&e.on.forEach(i=>{lI(i,t,e.name)}),t.addDataPipeline(e.name,N0e(e,t,n))}function N0e(e,t,n){const i=[];let r=null,a=!1,s=!1,o,l,f,d,h;for(e.values?pn(e.values)||ty(e.format)?(i.push(nz(t,e)),i.push(r=El())):i.push(r=El({$ingest:e.values,$format:e.format})):e.url?ty(e.url)||ty(e.format)?(i.push(nz(t,e)),i.push(r=El())):i.push(r=El({$request:e.url,$format:e.format})):e.source&&(r=o=Se(e.source).map(p=>Ne(t.getData(p).output)),i.push(null)),l=0,f=n.length;l<f;++l)d=n[l],h=d.metadata,!r&&!h.source&&i.push(r=El()),i.push(d),h.generates&&(s=!0),h.modifies&&!s&&(a=!0),h.source?r=d:h.changes&&(r=null);return o&&(f=o.length-1,i[0]=hpe({derive:a,pulse:f?o:o[0]}),(a||f)&&i.splice(1,0,El())),r||i.push(El()),i.push($c({})),i}function El(e){const t=_a({},e);return t.metadata={source:!0},t}function nz(e,t){return ape({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const cI=e=>e===Mu||e===wa,Kb=(e,t,n)=>pn(e)?U0e(e.signal,t,n):e===Wd||e===wa?t:n,$n=(e,t,n)=>pn(e)?F0e(e.signal,t,n):cI(e)?t:n,ha=(e,t,n)=>pn(e)?L0e(e.signal,t,n):cI(e)?n:t,fI=(e,t,n)=>pn(e)?B0e(e.signal,t,n):e===wa?{value:t}:{value:n},z0e=(e,t,n)=>pn(e)?j0e(e.signal,t,n):e===Qd?{value:t}:{value:n},F0e=(e,t,n)=>dI(`${e} === '${wa}' || ${e} === '${Mu}'`,t,n),L0e=(e,t,n)=>dI(`${e} !== '${wa}' && ${e} !== '${Mu}'`,t,n),U0e=(e,t,n)=>KM(`${e} === '${Wd}' || ${e} === '${wa}'`,t,n),B0e=(e,t,n)=>KM(`${e} === '${wa}'`,t,n),j0e=(e,t,n)=>KM(`${e} === '${Qd}'`,t,n),dI=(e,t,n)=>(t=t!=null?Cn(t):t,n=n!=null?Cn(n):n,iz(t)&&iz(n)?(t=t?t.signal||me(t.value):null,n=n?n.signal||me(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[Ge({test:e},t)].concat(n||[])),iz=e=>e==null||Object.keys(e).length===1,KM=(e,t,n)=>({signal:`${e} ? (${jf(t)}) : (${jf(n)})`}),P0e=(e,t,n,i,r)=>({signal:(i!=null?`${e} === '${Wd}' ? (${jf(i)}) : `:"")+(n!=null?`${e} === '${Mu}' ? (${jf(n)}) : `:"")+(r!=null?`${e} === '${Qd}' ? (${jf(r)}) : `:"")+(t!=null?`${e} === '${wa}' ? (${jf(t)}) : `:"")+"(null)"}),jf=e=>pn(e)?e.signal:e==null?null:me(e),I0e=(e,t)=>t===0?0:pn(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},Yf=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function Tf(e,t,n,i){let r;if(t&&Ce(t,e))return t[e];if(Ce(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":r="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":r=e[5].toLowerCase()+e.slice(6)}return i[GM][r]}else if(e.startsWith("label")){switch(e){case"labelColor":r="fill";break;case"labelFont":case"labelFontSize":r=e[5].toLowerCase()+e.slice(6)}return i[b0][r]}return null}function rz(e){const t={};for(const n of e)if(n)for(const i in n)t[i]=1;return Object.keys(t)}function q0e(e,t){var n=t.config,i=n.style,r=n.axis,a=t.scaleType(e.scale)==="band"&&n.axisBand,s=e.orient,o,l,f;if(pn(s)){const h=rz([n.axisX,n.axisY]),p=rz([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);o={};for(f of h)o[f]=$n(s,Tf(f,n.axisX,r,i),Tf(f,n.axisY,r,i));l={};for(f of p)l[f]=P0e(s.signal,Tf(f,n.axisTop,r,i),Tf(f,n.axisBottom,r,i),Tf(f,n.axisLeft,r,i),Tf(f,n.axisRight,r,i))}else o=s===wa||s===Mu?n.axisX:n.axisY,l=n["axis"+s[0].toUpperCase()+s.slice(1)];return o||l||a?Ge({},r,o,l,a):r}function H0e(e,t,n,i){const r=Xi(e,t),a=e.orient;let s,o;const l={enter:s={opacity:ut},update:o={opacity:Ur},exit:{opacity:ut}};Hn(l,{stroke:r("domainColor"),strokeCap:r("domainCap"),strokeDash:r("domainDash"),strokeDashOffset:r("domainDashOffset"),strokeWidth:r("domainWidth"),strokeOpacity:r("domainOpacity")});const f=az(e,0),d=az(e,1);return s.x=o.x=$n(a,f,ut),s.x2=o.x2=$n(a,d),s.y=o.y=ha(a,f,ut),s.y2=o.y2=ha(a,d),hr({type:XM,role:hge,from:i,encode:l},n)}function az(e,t){return{scale:e.scale,range:t}}function G0e(e,t,n,i,r){const a=Xi(e,t),s=e.orient,o=e.gridScale,l=Kb(s,1,-1),f=Y0e(e.offset,l);let d,h,p;const y={enter:d={opacity:ut},update:p={opacity:Ur},exit:h={opacity:ut}};Hn(y,{stroke:a("gridColor"),strokeCap:a("gridCap"),strokeDash:a("gridDash"),strokeDashOffset:a("gridDashOffset"),strokeOpacity:a("gridOpacity"),strokeWidth:a("gridWidth")});const v={scale:e.scale,field:Lr,band:r.band,extra:r.extra,offset:r.offset,round:a("tickRound")},b=$n(s,{signal:"height"},{signal:"width"}),E=o?{scale:o,range:0,mult:l,offset:f}:{value:0,offset:f},_=o?{scale:o,range:1,mult:l,offset:f}:Ge(b,{mult:l,offset:f});return d.x=p.x=$n(s,v,E),d.y=p.y=ha(s,v,E),d.x2=p.x2=ha(s,_),d.y2=p.y2=$n(s,_),h.x=$n(s,v),h.y=ha(s,v),hr({type:XM,role:gge,key:Lr,from:i,encode:y},n)}function Y0e(e,t){if(t!==1)if(!Ee(e))e=pn(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=Ge({},e);for(;n.mult!=null;)if(Ee(n.mult))n=n.mult=Ge({},n.mult);else return n.mult=pn(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function X0e(e,t,n,i,r,a){const s=Xi(e,t),o=e.orient,l=Kb(o,-1,1);let f,d,h;const p={enter:f={opacity:ut},update:h={opacity:Ur},exit:d={opacity:ut}};Hn(p,{stroke:s("tickColor"),strokeCap:s("tickCap"),strokeDash:s("tickDash"),strokeDashOffset:s("tickDashOffset"),strokeOpacity:s("tickOpacity"),strokeWidth:s("tickWidth")});const y=Cn(r);y.mult=l;const v={scale:e.scale,field:Lr,band:a.band,extra:a.extra,offset:a.offset,round:s("tickRound")};return h.y=f.y=$n(o,ut,v),h.y2=f.y2=$n(o,y),d.x=$n(o,v),h.x=f.x=ha(o,ut,v),h.x2=f.x2=ha(o,y),d.y=ha(o,v),hr({type:XM,role:mge,key:Lr,from:i,encode:p},n)}function o_(e,t,n,i,r){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+i+","+r+")"}}function V0e(e,t,n,i,r,a){const s=Xi(e,t),o=e.orient,l=e.scale,f=Kb(o,-1,1),d=Yl(s("labelFlush")),h=Yl(s("labelFlushOffset")),p=s("labelAlign"),y=s("labelBaseline");let v=d===0||!!d,b;const E=Cn(r);E.mult=f,E.offset=Cn(s("labelPadding")||0),E.offset.mult=f;const _={scale:l,field:Lr,band:.5,offset:aI(a.offset,s("labelOffset"))},w=$n(o,v?o_(l,d,'"left"','"right"','"center"'):{value:"center"},z0e(o,"left","right")),A=$n(o,fI(o,"bottom","top"),v?o_(l,d,'"top"','"bottom"','"middle"'):{value:"middle"}),M=o_(l,d,`-(${h})`,h,0);v=v&&h;const T={opacity:ut,x:$n(o,_,E),y:ha(o,_,E)},R={enter:T,update:b={opacity:Ur,text:{field:HM},x:T.x,y:T.y,align:w,baseline:A},exit:{opacity:ut,x:T.x,y:T.y}};Hn(R,{dx:!p&&v?$n(o,M):null,dy:!y&&v?ha(o,M):null}),Hn(R,{angle:s("labelAngle"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontWeight:s("labelFontWeight"),fontStyle:s("labelFontStyle"),limit:s("labelLimit"),lineHeight:s("labelLineHeight")},{align:p,baseline:y});const O=s("labelBound");let k=s("labelOverlap");return k=k||O?{separation:s("labelSeparation"),method:k,order:"datum.index",bound:O?{scale:l,orient:o,tolerance:O}:null}:void 0,b.align!==w&&(b.align=Yf(b.align,w)),b.baseline!==A&&(b.baseline=Yf(b.baseline,A)),hr({type:Tc,role:pge,style:b0,key:Lr,from:i,encode:R,overlap:k},n)}function W0e(e,t,n,i){const r=Xi(e,t),a=e.orient,s=Kb(a,-1,1);let o,l;const f={enter:o={opacity:ut,anchor:Cn(r("titleAnchor",null)),align:{signal:VM}},update:l=Ge({},o,{opacity:Ur,text:Cn(e.title)}),exit:{opacity:ut}},d={signal:`lerp(range("${e.scale}"), ${Wb(0,1,.5)})`};return l.x=$n(a,d),l.y=ha(a,d),o.angle=$n(a,ut,I0e(s,90)),o.baseline=$n(a,fI(a,Mu,wa),{value:Mu}),l.angle=o.angle,l.baseline=o.baseline,Hn(f,{fill:r("titleColor"),fillOpacity:r("titleOpacity"),font:r("titleFont"),fontSize:r("titleFontSize"),fontStyle:r("titleFontStyle"),fontWeight:r("titleFontWeight"),limit:r("titleLimit"),lineHeight:r("titleLineHeight")},{align:r("titleAlign"),angle:r("titleAngle"),baseline:r("titleBaseline")}),Q0e(r,a,f,n),f.update.align=Yf(f.update.align,o.align),f.update.angle=Yf(f.update.angle,o.angle),f.update.baseline=Yf(f.update.baseline,o.baseline),hr({type:Tc,role:yge,style:GM,from:i,encode:f},n)}function Q0e(e,t,n,i){const r=(o,l)=>o!=null?(n.update[l]=Yf(Cn(o),n.update[l]),!1):!Df(l,i),a=r(e("titleX"),"x"),s=r(e("titleY"),"y");n.enter.auto=s===a?Cn(s):$n(t,Cn(s),Cn(a))}function Z0e(e,t){const n=q0e(e,t),i=e.encode||{},r=i.axis||{},a=r.name||void 0,s=r.interactive,o=r.style,l=Xi(e,n),f=Xpe(l),d={scale:e.scale,ticks:!!l("ticks"),labels:!!l("labels"),grid:!!l("grid"),domain:!!l("domain"),title:e.title!=null},h=Ne(t.add(_a({},[d]))),p=Ne(t.add(Kge({scale:t.scaleRef(e.scale),extra:t.property(f.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),y=[];let v;return d.grid&&y.push(G0e(e,n,i.grid,p,f)),d.ticks&&(v=l("tickSize"),y.push(X0e(e,n,i.ticks,p,v,f))),d.labels&&(v=d.ticks?v:0,y.push(V0e(e,n,i.labels,p,v,f))),d.domain&&y.push(H0e(e,n,i.domain,h)),d.title&&y.push(W0e(e,n,i.title,h)),Zb(zp({role:dge,from:h,encode:Vd(K0e(l,e),r,x0),marks:y,aria:l("aria"),description:l("description"),zindex:l("zindex"),name:a,interactive:s,style:o}),t)}function K0e(e,t){const n={enter:{},update:{}};return Hn(n,{orient:e("orient"),offset:e("offset")||0,position:ra(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function hI(e,t,n){const i=Se(e.signals),r=Se(e.scales);return n||i.forEach(a=>GP(a,t)),Se(e.projections).forEach(a=>kpe(a,t)),r.forEach(a=>vpe(a,t)),Se(e.data).forEach(a=>D0e(a,t)),r.forEach(a=>bpe(a,t)),(n||i).forEach(a=>Zge(a,t)),Se(e.axes).forEach(a=>Z0e(a,t)),Se(e.marks).forEach(a=>Zb(a,t)),Se(e.legends).forEach(a=>E0e(a,t)),e.title&&T0e(e.title,t),t.parseLambdas(),t}const J0e=e=>Vd({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function eme(e,t){const n=t.config,i=Ne(t.root=t.add(Ev())),r=tme(e,n);r.forEach(f=>GP(f,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const a=t.add(_a()),s=t.add(VP(HP(J0e(e.encode),Vb,jM,e.style,t,{pulse:Ne(a)}))),o=t.add(ZP({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:i,pulse:Ne(s)}));t.operators.pop(),t.pushState(Ne(s),Ne(o),null),hI(e,t,r),t.operators.push(o);let l=t.add(XP({mark:i,pulse:Ne(o)}));return l=t.add(QP({pulse:Ne(l)})),l=t.add($c({pulse:Ne(l)})),t.addData("root",new lc(t,a,a,l)),t}function _g(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function tme(e,t){const n=s=>ra(e[s],t[s]),i=[_g("background",n("background")),_g("autosize",lge(n("autosize"))),_g("padding",fge(n("padding"))),_g("width",n("width")||0),_g("height",n("height")||0)],r=i.reduce((s,o)=>(s[o.name]=o,s),{}),a={};return Se(e.signals).forEach(s=>{Ce(r,s.name)?s=Ge(r[s.name],s):i.push(s),a[s.name]=s}),Se(t.signals).forEach(s=>{!Ce(a,s.name)&&!Ce(r,s.name)&&i.push(s)}),i}function gI(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function sz(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}gI.prototype=sz.prototype={parse(e){return hI(e,this)},fork(){return new sz(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof SA?Ne(e):e;return this.add(dpe({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(i,r,a){let s,o;i&&(s=i.data||(i.data={}),o=s[r]||(s[r]=[]),o.push(a))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const i in t.index)n(t.index[i],e,"index:"+i)}return this},pushState(e,t,n){this._encode.push(Ne(this.add($c({pulse:e})))),this._parent.push(t),this._lookup.push(n?Ne(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return st(this._parent)},encode(){return st(this._encode)},lookup(){return st(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(_e(e))return Dp(e,t);e.signal||ie("Unsupported field reference: "+me(e));const n=e.signal;let i=this.field[n];if(!i){const r={name:this.signalRef(n)};t&&(r.as=t),this.field[n]=i=Ne(this.add(npe(r)))}return i},compareRef(e){let t=!1;const n=a=>pn(a)?(t=!0,this.signalRef(a.signal)):Pge(a)?(t=!0,this.exprRef(a.expr)):a,i=Se(e.field).map(n),r=Se(e.order).map(n);return t?Ne(this.add(Y4({fields:i,orders:r}))):H4(i,r)},keyRef(e,t){let n=!1;const i=a=>pn(a)?(n=!0,Ne(r[a.signal])):a,r=this.signals;return e=Se(e).map(i),n?Ne(this.add(ipe({fields:e,flat:t}))):Lge(e,t)},sortRef(e){if(!e)return e;const t=Yb(e.op,e.field),n=e.order||Uge;return n.signal?Ne(this.add(Y4({fields:t,orders:this.signalRef(n.signal)}))):H4(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const i=this.id();this.streams.push({id:i,source:e,type:t}),this.events[n]=i}return this.events[n]},hasOwnSignal(e){return Ce(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&ie("Duplicate signal name: "+me(e));const n=t instanceof SA?t:this.add(Ev(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||ie("Unrecognized signal name: "+me(e)),this.signals[e]},signalRef(e){return this.signals[e]?Ne(this.signals[e]):(Ce(this.lambdas,e)||(this.lambdas[e]=this.add(Ev(null))),Ne(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const i=e[t],r=as(i,this),a=this.lambdas[i];a.params=r.$params,a.update=r.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!Ee(e)?e:this.signalRef(e.signal||JM(e))},exprRef(e,t){const n={expr:as(e,this)};return t&&(n.expr.$name=t),Ne(this.add(epe(n)))},addBinding(e,t){this.bindings||ie("Nested signals do not support binding: "+me(e)),this.bindings.push(Ge({signal:e},t))},addScaleProj(e,t){Ce(this.scales,e)&&ie("Duplicate scale or projection name: "+me(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,gpe(t))},addProjection(e,t){this.addScaleProj(e,fpe(t))},getScale(e){return this.scales[e]||ie("Unrecognized scale name: "+me(e)),this.scales[e]},scaleRef(e){return Ne(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return Ce(this.data,e)&&ie("Duplicate data set name: "+me(e)),this.data[e]=t},getData(e){return this.data[e]||ie("Undefined data set name: "+me(e)),this.data[e]},addDataPipeline(e,t){return Ce(this.data,e)&&ie("Duplicate data set name: "+me(e)),this.addData(e,lc.fromEntries(this,t))}};function JM(e){return(oe(e)?nme:ime)(e)}function nme(e){const t=e.length;let n="[";for(let i=0;i<t;++i){const r=e[i];n+=(i>0?",":"")+(Ee(r)?r.signal||JM(r):me(r))}return n+"]"}function ime(e){let t="{",n=0,i,r;for(i in e)r=e[i],t+=(++n>1?",":"")+me(i)+":"+(Ee(r)?r.signal||JM(r):me(r));return t+"}"}function rme(){const e="sans-serif",i="#4c78a8",r="#000",a="#888",s="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:i},area:{fill:i},image:null,line:{stroke:i,strokeWidth:2},path:{stroke:i},rect:{fill:i},rule:{stroke:r},shape:{stroke:i},symbol:{fill:i,size:64},text:{fill:r,font:e,fontSize:11},trail:{fill:i,size:2},style:{"guide-label":{fill:r,font:e,fontSize:10},"guide-title":{fill:r,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:r,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:r,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:s},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:a,grid:!1,gridWidth:1,gridColor:s,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:a,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:s,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:a,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function ame(e,t,n){return Ee(e)||ie("Input Vega specification must be an object."),t=Nd(rme(),t,e.config),eme(e,new gI(t,n)).toRuntime()}var sme="5.31.0";Ge(id,VK,Are,iae,Ise,Foe,lle,Iue,fle,zle,Gle,Kle);const ome=Object.freeze(Object.defineProperty({__proto__:null,Bounds:un,CanvasHandler:c0,CanvasRenderer:Fy,DATE:Pi,DAY:ti,DAYOFYEAR:is,Dataflow:If,Debug:u8,Error:fC,EventStream:Kv,Gradient:nU,GroupItem:Eb,HOURS:cr,Handler:ST,HybridHandler:XU,HybridRenderer:Mw,Info:o8,Item:xb,MILLISECONDS:ma,MINUTES:fr,MONTH:ai,Marks:dr,MultiPulse:FC,None:s8,Operator:kt,Parameters:Zv,Pulse:mu,QUARTER:ji,RenderType:uu,Renderer:l0,ResourceLoader:lU,SECONDS:Pr,SVGHandler:NU,SVGRenderer:TT,SVGStringRenderer:YU,Scenegraph:CU,TIME_UNITS:CC,Transform:ee,View:RP,WEEK:hn,Warn:dC,YEAR:In,accessor:Yi,accessorFields:ri,accessorName:Zt,array:Se,ascending:Fd,bandwidthNRD:jC,bin:q7,bootstrapCI:H7,boundClip:iB,boundContext:a0,boundItem:ww,boundMark:SU,boundStroke:mo,changeset:_c,clampRange:b8,codegenExpression:aP,compare:yC,constant:li,cumulativeLogNormal:YC,cumulativeNormal:eb,cumulativeUniform:QC,dayofyear:Q8,debounce:vC,defaultLocale:OC,definition:j7,densityLogNormal:GC,densityNormal:PC,densityUniform:WC,domChild:dn,domClear:Or,domCreate:su,domFind:ET,dotbin:G7,error:ie,expressionFunction:rn,extend:Ge,extent:es,extentIndex:x8,falsy:Qo,fastmap:Ld,field:Br,flush:E8,font:Cb,fontFamily:u0,fontSize:ds,format:z1,formatLocale:gy,formats:NC,hasOwnProperty:Ce,id:Hp,identity:ui,inferType:M7,inferTypes:k7,ingest:mt,inherits:be,inrange:zf,interpolate:K$,interpolateColors:vb,interpolateRange:IL,intersect:JU,intersectBoxLine:Ff,intersectPath:sT,intersectPoint:oT,intersectRule:fU,isArray:oe,isBoolean:zu,isDate:gu,isFunction:Xe,isIterable:S8,isNumber:dt,isObject:Ee,isRegExp:_8,isString:_e,isTuple:Wv,key:bC,lerp:w8,lineHeight:Cu,loader:Xv,locale:$7,logger:hC,lruCache:A8,markup:$T,merge:C8,mergeConfig:Nd,multiLineOffset:vT,one:Dd,pad:$8,panLinear:h8,panLog:g8,panPow:p8,panSymlog:m8,parse:ame,parseExpression:$M,parseSelector:Pu,path:ab,pathCurves:iT,pathEqual:rB,pathParse:ld,pathRectangle:aU,pathRender:Ep,pathSymbols:rU,pathTrail:sU,peek:st,point:Tb,projection:XT,quantileLogNormal:XC,quantileNormal:tb,quantileUniform:ZC,quantiles:UC,quantizeInterpolator:qL,quarter:y8,quartiles:BC,get random(){return Ir},randomInteger:KZ,randomKDE:qC,randomLCG:ZZ,randomLogNormal:X7,randomMixture:V7,randomNormal:IC,randomUniform:W7,read:D7,regressionConstant:KC,regressionExp:Z7,regressionLinear:JC,regressionLoess:e9,regressionLog:Q7,regressionPoly:J7,regressionPow:K7,regressionQuad:e$,renderModule:Mb,repeat:kg,resetDefaultLocale:VQ,resetSVGClipId:uU,resetSVGDefIds:qie,responseType:R7,runtimeContext:bP,sampleCurve:ib,sampleLogNormal:HC,sampleNormal:Jv,sampleUniform:VC,scale:gt,sceneEqual:MT,sceneFromJSON:wU,scenePickVisit:Ty,sceneToJSON:_U,sceneVisit:ya,sceneZOrder:uT,scheme:J$,serializeXML:IU,setHybridRendererOptions:Bie,setRandom:WZ,span:Gp,splitAccessPath:ls,stringValue:me,textMetrics:or,timeBin:h7,timeFloor:i7,timeFormatLocale:pp,timeInterval:Pd,timeOffset:s7,timeSequence:l7,timeUnitSpecifier:W8,timeUnits:$C,toBoolean:xC,toDate:EC,toNumber:ni,toSet:pa,toString:SC,transform:P7,transforms:id,truncate:T8,truthy:jr,tupleid:ze,typeParsers:sw,utcFloor:r7,utcInterval:Id,utcOffset:o7,utcSequence:c7,utcdayofyear:J8,utcquarter:v8,utcweek:e7,version:sme,visitArray:Jo,week:Z8,writeConfig:zd,zero:ru,zoomLinear:gC,zoomLog:pC,zoomPow:uy,zoomSymlog:mC},Symbol.toStringTag,{value:"Module"}));function ume(e,t,n){let i;t.x2&&(t.x?(n&&e.x>e.x2&&(i=e.x,e.x=e.x2,e.x2=i),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(i=e.y,e.y=e.y2,e.y2=i),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var lme={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},cme={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},fme={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const dme=Array.prototype.slice,Sl=(e,t,n)=>{const i=n?n(t[0]):t[0];return i[e].apply(i,dme.call(t,1))},hme=(e,t,n,i,r,a,s)=>new Date(e,t||0,n??1,i||0,r||0,a||0,s||0);var gme={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:hme,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return Sl("join",arguments)},indexof:function(){return Sl("indexOf",arguments)},lastindexof:function(){return Sl("lastIndexOf",arguments)},slice:function(){return Sl("slice",arguments)},reverse:e=>e.slice().reverse(),sort:e=>e.slice().sort(Fd),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return Sl("substring",arguments,String)},split:function(){return Sl("split",arguments,String)},replace:function(){return Sl("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const pme=["view","item","group","xy","x","y"],MA=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&MA.add(setImmediate);const mme={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:lme[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,i=e(t.object);n&&(e.memberDepth+=1);const r=e(t.property);if(n&&(e.memberDepth-=1),MA.has(i[r])){console.error(`Prevented interpretation of member "${r}" which could lead to insecure code execution`);return}return i[r]},CallExpression:(e,t)=>{const n=t.arguments;let i=t.callee.name;return i.startsWith("_")&&(i=i.slice(1)),i==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[i]||gme[i]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>cme[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>fme[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,i)=>{e.memberDepth+=1;const r=e(i.key);return e.memberDepth-=1,MA.has(e(i.value))?console.error(`Prevented interpretation of property "${r}" which could lead to insecure code execution`):n[r]=e(i.value),n},{})};function wg(e,t,n,i,r,a){const s=o=>mme[o.type](s,o);return s.memberDepth=0,s.fn=Object.create(t),s.params=n,s.datum=i,s.event=r,s.item=a,pme.forEach(o=>s.fn[o]=function(){return r.vega[o](...arguments)}),s(e)}var yme={operator(e,t){const n=t.ast,i=e.functions;return r=>wg(n,i,r)},parameter(e,t){const n=t.ast,i=e.functions;return(r,a)=>wg(n,i,a,r)},event(e,t){const n=t.ast,i=e.functions;return r=>wg(n,i,void 0,void 0,r)},handler(e,t){const n=t.ast,i=e.functions;return(r,a)=>{const s=a.item&&a.item.datum;return wg(n,i,r,s,a)}},encode(e,t){const{marktype:n,channels:i}=t,r=e.functions,a=n==="group"||n==="image"||n==="rect";return(s,o)=>{const l=s.datum;let f=0,d;for(const h in i)d=wg(i[h].ast,r,o,l,void 0,s),s[h]!==d&&(s[h]=d,f=1);return n!=="rule"&&ume(s,i,a),f}}};const vme="5.23.0",bme={version:vme};function ek(e){return he(e,"or")}function tk(e){return he(e,"and")}function nk(e){return he(e,"not")}function ay(e,t){if(nk(e))ay(e.not,t);else if(tk(e))for(const n of e.and)ay(n,t);else if(ek(e))for(const n of e.or)ay(n,t);else t(e)}function Xf(e,t){return nk(e)?{not:Xf(e.not,t)}:tk(e)?{and:e.and.map(n=>Xf(n,t))}:ek(e)?{or:e.or.map(n=>Xf(n,t))}:t(e)}const Pe=structuredClone;function pI(e){throw new Error(e)}function vd(e,t){const n={};for(const i of t)Ce(e,i)&&(n[i]=e[i]);return n}function Ui(e,t){const n={...e};for(const i of t)delete n[i];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>Ct(e)).join(",")})`};function nt(e){if(dt(e))return e;const t=_e(e)?e:Ct(e);if(t.length<250)return t;let n=0;for(let i=0;i<t.length;i++){const r=t.charCodeAt(i);n=(n<<5)-n+r,n=n&n}return n}function kA(e){return e===!1||e===null}function Je(e,t){return e.includes(t)}function bd(e,t){let n=0;for(const[i,r]of e.entries())if(t(r,i,n++))return!0;return!1}function ik(e,t){let n=0;for(const[i,r]of e.entries())if(!t(r,i,n++))return!1;return!0}function mI(e,...t){for(const n of t)xme(e,n??{});return e}function xme(e,t){for(const n of fe(t))zd(e,n,t[n],!0)}function Ya(e,t){const n=[],i={};let r;for(const a of e)r=t(a),!(r in i)&&(i[r]=1,n.push(a));return n}function Eme(e,t){const n=fe(e),i=fe(t);if(n.length!==i.length)return!1;for(const r of n)if(e[r]!==t[r])return!1;return!0}function yI(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function rk(e,t){for(const n of e)if(t.has(n))return!0;return!1}function OA(e){const t=new Set;for(const n of e){const r=ls(n).map((s,o)=>o===0?s:`[${s}]`),a=r.map((s,o)=>r.slice(0,o+1).join(""));for(const s of a)t.add(s)}return t}function ak(e,t){return e===void 0||t===void 0?!0:rk(OA(e),OA(t))}function At(e){return fe(e).length===0}const fe=Object.keys,qn=Object.values,ku=Object.entries;function Fp(e){return e===!0||e===!1}function Lt(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function cp(e,t){return nk(e)?`!(${cp(e.not,t)})`:tk(e)?`(${e.and.map(n=>cp(n,t)).join(") && (")})`:ek(e)?`(${e.or.map(n=>cp(n,t)).join(") || (")})`:t(e)}function Sv(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&Sv(e[n],t)&&delete e[n],At(e)}function E0(e){return e.charAt(0).toUpperCase()+e.substr(1)}function sk(e,t="datum"){const n=ls(e),i=[];for(let r=1;r<=n.length;r++){const a=`[${n.slice(0,r).map(me).join("][")}]`;i.push(`${t}${a}`)}return i.join(" && ")}function vI(e,t="datum"){return`${t}[${me(ls(e).join("."))}]`}function vt(e){return`datum['${e.replaceAll("'","\\'")}']`}function Sme(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function Hr(e){return`${ls(e).map(Sme).join("\\.")}`}function cc(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function Zd(e){return`${ls(e).join(".")}`}function xd(e){return e?ls(e).length:0}function tn(...e){return e.find(t=>t!==void 0)}let bI=42;function xI(e){const t=++bI;return e?String(e)+t:t}function _me(){bI=42}function EI(e){return SI(e)?e:`__${e}`}function SI(e){return e.startsWith("__")}function Lp(e){if(e!==void 0)return(e%360+360)%360}function Jb(e){return dt(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const oz=Object.getPrototypeOf(structuredClone({}));function ar(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,i;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(i=n;i--!==0;)if(!ar(e[i],t[i]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const a of e.entries())if(!t.has(a[0]))return!1;for(const a of e.entries())if(!ar(a[1],t.get(a[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const a of e.entries())if(!t.has(a[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(i=n;i--!==0;)if(e[i]!==t[i])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==oz.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==oz.toString)return e.toString()===t.toString();const r=Object.keys(e);if(n=r.length,n!==Object.keys(t).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(t,r[i]))return!1;for(i=n;i--!==0;){const a=r[i];if(!ar(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}function Ct(e){const t=[];return function n(i){if(i&&i.toJSON&&typeof i.toJSON=="function"&&(i=i.toJSON()),i===void 0)return;if(typeof i=="number")return isFinite(i)?""+i:"null";if(typeof i!="object")return JSON.stringify(i);let r,a;if(Array.isArray(i)){for(a="[",r=0;r<i.length;r++)r&&(a+=","),a+=n(i[r])||"null";return a+"]"}if(i===null)return"null";if(t.includes(i))throw new TypeError("Converting circular structure to JSON");const s=t.push(i)-1,o=Object.keys(i).sort();for(a="",r=0;r<o.length;r++){const l=o[r],f=n(i[l]);f&&(a&&(a+=","),a+=JSON.stringify(l)+":"+f)}return t.splice(s,1),`{${a}}`}(e)}function he(e,t){return Ee(e)&&Ce(e,t)&&e[t]!==void 0}const ro="row",ao="column",ex="facet",Ut="x",On="y",Aa="x2",ms="y2",Iu="xOffset",Kd="yOffset",Ca="radius",vo="radius2",Xr="theta",bo="theta2",$a="latitude",Ta="longitude",Ma="latitude2",Gr="longitude2",qu="time",qi="color",ys="fill",vs="stroke",Hi="shape",xo="size",Mc="angle",Eo="opacity",Hu="fillOpacity",Gu="strokeOpacity",Yu="strokeWidth",Xu="strokeDash",S0="text",Ed="order",_0="detail",tx="key",fc="tooltip",nx="href",ix="url",rx="description",wme={x:1,y:1,x2:1,y2:1},_I={theta:1,theta2:1,radius:1,radius2:1};function wI(e){return Ce(_I,e)}const ok={longitude:1,longitude2:1,latitude:1,latitude2:1};function AI(e){switch(e){case $a:return"y";case Ma:return"y2";case Ta:return"x";case Gr:return"x2"}}function CI(e){return Ce(ok,e)}const Ame=fe(ok),uk={...wme,..._I,...ok,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,time:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function Vf(e){return e===qi||e===ys||e===vs}const $I={row:1,column:1,facet:1},Fr=fe($I),lk={...uk,...$I},Cme=fe(lk),{order:Bwe,detail:jwe,tooltip:Pwe,...$me}=lk,{row:Iwe,column:qwe,facet:Hwe,...Tme}=$me;function Mme(e){return Ce(Tme,e)}function TI(e){return Ce(lk,e)}const kme=[Aa,ms,Ma,Gr,bo,vo];function MI(e){return kc(e)!==e}function kc(e){switch(e){case Aa:return Ut;case ms:return On;case Ma:return $a;case Gr:return Ta;case bo:return Xr;case vo:return Ca}return e}function Ou(e){if(wI(e))switch(e){case Xr:return"startAngle";case bo:return"endAngle";case Ca:return"outerRadius";case vo:return"innerRadius"}return e}function bs(e){switch(e){case Ut:return Aa;case On:return ms;case $a:return Ma;case Ta:return Gr;case Xr:return bo;case Ca:return vo}}function Gi(e){switch(e){case Ut:case Aa:return"width";case On:case ms:return"height"}}function kI(e){switch(e){case Ut:return"xOffset";case On:return"yOffset";case Aa:return"x2Offset";case ms:return"y2Offset";case Xr:return"thetaOffset";case Ca:return"radiusOffset";case bo:return"theta2Offset";case vo:return"radius2Offset"}}function ck(e){switch(e){case Ut:return"xOffset";case On:return"yOffset"}}function Ome(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const Rme=fe(uk),{x:Gwe,y:Ywe,x2:Xwe,y2:Vwe,xOffset:Wwe,yOffset:Qwe,latitude:Zwe,longitude:Kwe,latitude2:Jwe,longitude2:eAe,theta:tAe,theta2:nAe,radius:iAe,radius2:rAe,...fk}=uk,Dme=fe(fk),dk={x:1,y:1},So=fe(dk);function nn(e){return Ce(dk,e)}const hk={theta:1,radius:1},Nme=fe(hk);function ax(e){return e==="width"?Ut:On}const OI={xOffset:1,yOffset:1};function w0(e){return Ce(OI,e)}const zme={time:1};function u_(e){return e in zme}const{text:aAe,tooltip:sAe,href:oAe,url:uAe,description:lAe,detail:cAe,key:fAe,order:dAe,...RI}=fk,Fme=fe(RI);function Lme(e){return Ce(fk,e)}function Ume(e){switch(e){case qi:case ys:case vs:case xo:case Hi:case Eo:case Yu:case Xu:return!0;case Hu:case Gu:case Mc:case qu:return!1}}const DI={...dk,...hk,...OI,...RI},gk=fe(DI);function xs(e){return Ce(DI,e)}function Bme(e,t){return Pme(e)[t]}const NI={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:hAe,...jme}=NI;function Pme(e){switch(e){case qi:case ys:case vs:case rx:case _0:case tx:case fc:case nx:case Ed:case Eo:case Hu:case Gu:case Yu:case ex:case ro:case ao:return NI;case Ut:case On:case Iu:case Kd:case $a:case Ta:case qu:return jme;case Aa:case ms:case Ma:case Gr:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case xo:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case Xu:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case Hi:return{point:"always",geoshape:"always"};case S0:return{text:"always"};case Mc:return{point:"always",square:"always",text:"always"};case ix:return{image:"always"};case Xr:return{text:"always",arc:"always"};case Ca:return{text:"always",arc:"always"};case bo:case vo:return{arc:"always"}}}function l_(e){switch(e){case Ut:case On:case Xr:case Ca:case Iu:case Kd:case xo:case Mc:case Yu:case Eo:case Hu:case Gu:case qu:case Aa:case ms:case bo:case vo:return;case ex:case ro:case ao:case Hi:case Xu:case S0:case fc:case nx:case ix:case rx:return"discrete";case qi:case ys:case vs:return"flexible";case $a:case Ta:case Ma:case Gr:case _0:case tx:case Ed:return}}const Ime={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},qme={count:1,min:1,max:1};function ho(e){return he(e,"argmin")}function Vu(e){return he(e,"argmax")}function pk(e){return _e(e)&&Ce(Ime,e)}const Hme=new Set(["count","valid","missing","distinct"]);function sx(e){return _e(e)&&Hme.has(e)}function Gme(e){return _e(e)&&Je(["min","max"],e)}const Yme=new Set(["count","sum","distinct","valid","missing"]),Xme=new Set(["mean","average","median","q1","q3","min","max"]);function zI(e){return zu(e)&&(e=vx(e,void 0)),"bin"+fe(e).map(t=>ox(e[t])?Lt(`_${t}_${ku(e[t])}`):Lt(`_${t}_${e[t]}`)).join("")}function Dt(e){return e===!0||Oc(e)&&!e.binned}function Fn(e){return e==="binned"||Oc(e)&&e.binned===!0}function Oc(e){return Ee(e)}function ox(e){return he(e,"param")}function uz(e){switch(e){case ro:case ao:case xo:case qi:case ys:case vs:case Yu:case Eo:case Hu:case Gu:case Hi:return 6;case Xu:return 4;default:return 10}}function A0(e){return he(e,"expr")}function Ln(e,{level:t}={level:0}){const n=fe(e||{}),i={};for(const r of n)i[r]=t===0?ir(e[r]):Ln(e[r],{level:t-1});return i}function FI(e){const{anchor:t,frame:n,offset:i,orient:r,angle:a,limit:s,color:o,subtitleColor:l,subtitleFont:f,subtitleFontSize:d,subtitleFontStyle:h,subtitleFontWeight:p,subtitleLineHeight:y,subtitlePadding:v,...b}=e,E={...b,...o?{fill:o}:{}},_={...t?{anchor:t}:{},...n?{frame:n}:{},...i?{offset:i}:{},...r?{orient:r}:{},...a!==void 0?{angle:a}:{},...s!==void 0?{limit:s}:{}},w={...l?{subtitleColor:l}:{},...f?{subtitleFont:f}:{},...d?{subtitleFontSize:d}:{},...h?{subtitleFontStyle:h}:{},...p?{subtitleFontWeight:p}:{},...y?{subtitleLineHeight:y}:{},...v?{subtitlePadding:v}:{}},A=vd(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:E,subtitleMarkConfig:A,nonMarkTitleProperties:_,subtitle:w}}function iu(e){return _e(e)||oe(e)&&_e(e[0])}function ke(e){return he(e,"signal")}function Rc(e){return he(e,"step")}function Vme(e){return oe(e)?!1:he(e,"fields")&&!he(e,"data")}function Wme(e){return oe(e)?!1:he(e,"fields")&&he(e,"data")}function eo(e){return oe(e)?!1:he(e,"field")&&he(e,"data")}const Qme={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},Zme=fe(Qme),Kme={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},RA=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function LI(e){const t=oe(e.condition)?e.condition.map(lz):lz(e.condition);return{...ir(e),condition:t}}function ir(e){if(A0(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function lz(e){if(A0(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function zt(e){if(A0(e)){const{expr:t,...n}=e;return{signal:t,...n}}return ke(e)?e:e!==void 0?{value:e}:void 0}function Jme(e){return ke(e)?e.signal:me(e)}function cz(e){return ke(e)?e.signal:me(e.value)}function fa(e){return ke(e)?e.signal:e==null?null:me(e)}function e1e(e,t,n){for(const i of n){const r=ss(i,t.markDef,t.config);r!==void 0&&(e[i]=zt(r))}return e}function UI(e){return[].concat(e.type,e.style??[])}function wt(e,t,n,i={}){const{vgChannel:r,ignoreVgConfig:a}=i;return r&&he(t,r)?t[r]:t[e]!==void 0?t[e]:a&&(!r||r===e)?void 0:ss(e,t,n,i)}function ss(e,t,n,{vgChannel:i}={}){const r=DA(e,t,n.style);return tn(i?r:void 0,r,i?n[t.type][i]:void 0,n[t.type][e],i?n.mark[i]:n.mark[e])}function DA(e,t,n){return BI(e,UI(t),n)}function BI(e,t,n){t=Se(t);let i;for(const r of t){const a=n[r];he(a,e)&&(i=a[e])}return i}function jI(e,t){return Se(e).reduce((n,i)=>(n.field.push(xe(i,t)),n.order.push(i.sort??"ascending"),n),{field:[],order:[]})}function PI(e,t){const n=[...e];return t.forEach(i=>{for(const r of n)if(ar(r,i))return;n.push(i)}),n}function II(e,t){return ar(e,t)||!t?e:e?[...Se(e),...Se(t)].join(", "):t}function qI(e,t){const n=e.value,i=t.value;if(n==null||i===null)return{explicit:e.explicit,value:null};if((iu(n)||ke(n))&&(iu(i)||ke(i)))return{explicit:e.explicit,value:II(n,i)};if(iu(n)||ke(n))return{explicit:e.explicit,value:n};if(iu(i)||ke(i))return{explicit:e.explicit,value:i};if(!iu(n)&&!ke(n)&&!iu(i)&&!ke(i))return{explicit:e.explicit,value:PI(n,i)};throw new Error("It should never reach here")}function mk(e){return`Invalid specification ${Ct(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const t1e='Autosize "fit" only works for single views and layered views.';function fz(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function dz(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function hz(e){return e?`Dropping "fit-${e}" because spec has discrete ${Gi(e)}.`:'Dropping "fit" because spec has discrete size.'}function yk(e){return`Unknown field for ${e}. Cannot calculate view size.`}function gz(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function n1e(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function i1e(e){return`The "nearest" transform is not supported for ${e} marks.`}function HI(e){return`Selection not supported for ${e} yet.`}function r1e(e){return`Cannot find a selection named "${e}".`}const a1e="Scale bindings are currently only supported for scales with unbinned, continuous domains.",s1e="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",o1e="Legend bindings are only supported for selections over an individual field or encoding channel.";function u1e(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function l1e(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const c1e="The same selection must be used to override scale domains in a layered view.",f1e='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function d1e(e){return`Unknown repeated value "${e}".`}function pz(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const h1e="Multiple timer selections in one unit spec are not supported. Ignoring all but the first.",vk="Animation involving facet, layer, or concat is currently unsupported.";function g1e(e){return`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${me(e)}.`}function p1e(e,t,n,i){return(e.length?"Multiple ":"No ")+`matching ${me(t)} encoding found for selection ${me(n.param)}. Using "field": ${me(i)}.`}const m1e="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function y1e(e){return`Unrecognized parse "${e}".`}function mz(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const v1e="Attempt to add the same child twice.";function b1e(e){return`Ignoring an invalid transform: ${Ct(e)}.`}const x1e='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function yz(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function E1e(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${Ct(t)} is overridden by a child projection ${Ct(n)}.`}const S1e="Arc marks uses theta channel rather than angle, replacing angle with theta.";function _1e(e){return`${e}Offset dropped because ${e} is continuous`}function w1e(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${Ct(n)}}.`}function GI(e){return`Invalid field type "${e}".`}function A1e(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function C1e(e){return`Invalid aggregation operator "${e}".`}function YI(e,t){const{fill:n,stroke:i}=t;return`Dropping color ${e} as the plot also has ${n&&i?"fill and stroke":n?"fill":"stroke"}.`}function $1e(e){return`Position range does not support relative band size for ${e}.`}function NA(e,t){return`Dropping ${Ct(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const T1e="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function ux(e,t,n){return`${e} dropped as it is incompatible with "${t}".`}function M1e(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function k1e(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function O1e(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function R1e(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function c_(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function D1e(e){return`The ${e} for range marks cannot be an expression`}function N1e(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function z1e(e,t){return`Specified orient "${e}" overridden with "${t}".`}function F1e(e){return`Cannot use the scale property "${e}" with non-color channel.`}function L1e(e){return`Cannot use the relative band size with ${e} scale.`}function U1e(e){return`Using unaggregated domain with raw field has no effect (${Ct(e)}).`}function B1e(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function j1e(e){return`Unaggregated domain is currently unsupported for log scale (${Ct(e)}).`}function P1e(e){return`Cannot apply size to non-oriented mark "${e}".`}function I1e(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function q1e(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function XI(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function VI(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function H1e(e,t,n,i){return`Conflicting ${t.toString()} property "${e.toString()}" (${Ct(n)} and ${Ct(i)}). Using ${Ct(n)}.`}function G1e(e,t,n,i){return`Conflicting ${t.toString()} property "${e.toString()}" (${Ct(n)} and ${Ct(i)}). Using the union of the two domains.`}function Y1e(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function X1e(e){return`Dropping sort property ${Ct(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const vz="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",V1e="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",W1e="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",Q1e="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function Z1e(e){return`Cannot stack "${e}" if there is already "${e}2".`}function K1e(e){return`Stack is applied to a non-linear scale (${e}).`}function J1e(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function _v(e,t){return`Invalid ${e}: ${Ct(t)}.`}function eye(e){return`Dropping day from datetime ${Ct(e)} as day cannot be combined with other units.`}function tye(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function nye(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function iye(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function bz(e){return`1D error band does not support ${e}.`}function WI(e){return`Channel ${e} is required for "binned" bin.`}function rye(e){return`Channel ${e} should not be used with "binned" bin.`}function aye(e){return`Domain for ${e} is required for threshold scale.`}const QI=hC(dC);let dc=QI;function sye(e){return dc=e,dc}function oye(){return dc=QI,dc}function bk(...e){dc.error(...e)}function ge(...e){dc.warn(...e)}function uye(...e){dc.debug(...e)}function Dc(e){if(e&&Ee(e)){for(const t of Ek)if(he(e,t))return!0}return!1}const ZI=["january","february","march","april","may","june","july","august","september","october","november","december"],lye=ZI.map(e=>e.substr(0,3)),KI=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],cye=KI.map(e=>e.substr(0,3));function fye(e){if(Jb(e)&&(e=+e),dt(e))return e>4&&ge(_v("quarter",e)),e-1;throw new Error(_v("quarter",e))}function dye(e){if(Jb(e)&&(e=+e),dt(e))return e-1;{const t=e.toLowerCase(),n=ZI.indexOf(t);if(n!==-1)return n;const i=t.substr(0,3),r=lye.indexOf(i);if(r!==-1)return r;throw new Error(_v("month",e))}}function hye(e){if(Jb(e)&&(e=+e),dt(e))return e%7;{const t=e.toLowerCase(),n=KI.indexOf(t);if(n!==-1)return n;const i=t.substr(0,3),r=cye.indexOf(i);if(r!==-1)return r;throw new Error(_v("day",e))}}function xk(e,t){const n=[];if(t&&e.day!==void 0&&fe(e).length>1&&(ge(eye(e)),e=Pe(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const i=t?dye(e.month):e.month;n.push(i)}else if(e.quarter!==void 0){const i=t?fye(e.quarter):e.quarter;n.push(dt(i)?i*3:`${i}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const i=t?hye(e.day):e.day;n.push(dt(i)?i+1:`${i}+1`)}else n.push(1);for(const i of["hours","minutes","seconds","milliseconds"]){const r=e[i];n.push(typeof r>"u"?0:r)}return n}function hc(e){const n=xk(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function gye(e){const n=xk(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function pye(e){const t=xk(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const JI={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},Ek=fe(JI);function mye(e){return Ce(JI,e)}function Nc(e){return Ee(e)?e.binned:eq(e)}function eq(e){return e&&e.startsWith("binned")}function Sk(e){return e.startsWith("utc")}function yye(e){return e.substring(3)}const vye={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function lx(e){return Ek.filter(t=>nq(e,t))}function tq(e){const t=lx(e);return t[t.length-1]}function nq(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function bye(e,t,{end:n}={end:!1}){const i=sk(t),r=Sk(e)?"utc":"";function a(l){return l==="quarter"?`(${r}quarter(${i})-1)`:`${r}${l}(${i})`}let s;const o={};for(const l of Ek)nq(e,l)&&(o[l]=a(l),s=l);return n&&(o[s]+="+1"),gye(o)}function iq(e){if(!e)return;const t=lx(e);return`timeUnitSpecifier(${Ct(t)}, ${Ct(vye)})`}function xye(e,t,n){if(!e)return;const i=iq(e);return`${n||Sk(e)?"utc":"time"}Format(${t}, ${i})`}function Tn(e){if(!e)return;let t;return _e(e)?eq(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:Ee(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),Sk(t.unit)&&(t.utc=!0,t.unit=yye(t.unit)),t}function Eye(e){const{utc:t,...n}=Tn(e);return n.unit?(t?"utc":"")+fe(n).map(i=>Lt(`${i==="unit"?"":`_${i}_`}${n[i]}`)).join(""):(t?"utc":"")+"timeunit"+fe(n).map(i=>Lt(`_${i}_${n[i]}`)).join("")}function rq(e,t=n=>n){const n=Tn(e),i=tq(n.unit);if(i&&i!=="day"){const r={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:a,part:s}=aq(i,n.step),o={...r,[s]:+r[s]+a};return`${t(hc(o))} - ${t(hc(r))}`}}const Sye={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function _ye(e){return Ce(Sye,e)}function aq(e,t=1){if(_ye(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function wye(e){return he(e,"param")}function _k(e){return!!(e!=null&&e.field)&&e.equal!==void 0}function wk(e){return!!(e!=null&&e.field)&&e.lt!==void 0}function Ak(e){return!!(e!=null&&e.field)&&e.lte!==void 0}function Ck(e){return!!(e!=null&&e.field)&&e.gt!==void 0}function $k(e){return!!(e!=null&&e.field)&&e.gte!==void 0}function Tk(e){if(e!=null&&e.field){if(oe(e.range)&&e.range.length===2)return!0;if(ke(e.range))return!0}return!1}function Mk(e){return!!(e!=null&&e.field)&&(oe(e.oneOf)||oe(e.in))}function Aye(e){return!!(e!=null&&e.field)&&e.valid!==void 0}function sq(e){return Mk(e)||_k(e)||Tk(e)||wk(e)||Ck(e)||Ak(e)||$k(e)}function Ua(e,t){return bx(e,{timeUnit:t,wrapTime:!0})}function Cye(e,t){return e.map(n=>Ua(n,t))}function oq(e,t=!0){const{field:n}=e,i=Tn(e.timeUnit),{unit:r,binned:a}=i||{},s=xe(e,{expr:"datum"}),o=r?`time(${a?s:bye(r,n)})`:s;if(_k(e))return`${o}===${Ua(e.equal,r)}`;if(wk(e)){const l=e.lt;return`${o}<${Ua(l,r)}`}else if(Ck(e)){const l=e.gt;return`${o}>${Ua(l,r)}`}else if(Ak(e)){const l=e.lte;return`${o}<=${Ua(l,r)}`}else if($k(e)){const l=e.gte;return`${o}>=${Ua(l,r)}`}else{if(Mk(e))return`indexof([${Cye(e.oneOf,r).join(",")}], ${o}) !== -1`;if(Aye(e))return cx(o,e.valid);if(Tk(e)){const{range:l}=Ln(e),f=ke(l)?{signal:`${l.signal}[0]`}:l[0],d=ke(l)?{signal:`${l.signal}[1]`}:l[1];if(f!==null&&d!==null&&t)return"inrange("+o+", ["+Ua(f,r)+", "+Ua(d,r)+"])";const h=[];return f!==null&&h.push(`${o} >= ${Ua(f,r)}`),d!==null&&h.push(`${o} <= ${Ua(d,r)}`),h.length>0?h.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${Ct(e)}`)}function cx(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function $ye(e){return sq(e)&&e.timeUnit?{...e,timeUnit:Tn(e.timeUnit)}:e}const C0={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function Tye(e){return e==="quantitative"||e==="temporal"}function uq(e){return e==="ordinal"||e==="nominal"}const gc=C0.quantitative,kk=C0.ordinal,Sd=C0.temporal,Ok=C0.nominal,Jd=C0.geojson;function Mye(e){if(e)switch(e=e.toLowerCase(),e){case"q":case gc:return"quantitative";case"t":case Sd:return"temporal";case"o":case kk:return"ordinal";case"n":case Ok:return"nominal";case Jd:return"geojson"}}const Un={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",TIME:"time",UTC:"utc",POINT:"point",BAND:"band"},zA={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function kye(e,t){const n=zA[e],i=zA[t];return n===i||n==="ordinal-position"&&i==="time"||i==="ordinal-position"&&n==="time"}const Oye={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function xz(e){return Oye[e]}const lq=new Set(["linear","log","pow","sqrt","symlog"]),cq=new Set([...lq,"time","utc"]);function fq(e){return lq.has(e)}const dq=new Set(["quantile","quantize","threshold"]),Rye=new Set([...cq,...dq,"sequential","identity"]),Dye=new Set(["ordinal","bin-ordinal","point","band"]);function Mn(e){return Dye.has(e)}function va(e){return Rye.has(e)}function Xa(e){return cq.has(e)}function _d(e){return dq.has(e)}const Nye={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,tickBandPaddingInner:.25,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:4,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0,framesPerSecond:2,animationDuration:5};function zye(e){return!_e(e)&&he(e,"name")}function hq(e){return he(e,"param")}function Fye(e){return he(e,"unionWith")}function Lye(e){return Ee(e)&&"field"in e}const Uye={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:gAe,domain:pAe,range:mAe,rangeMax:yAe,rangeMin:vAe,scheme:bAe,...Bye}=Uye,jye=fe(Bye);function FA(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return Xa(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return Xa(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return Xa(e);case"nice":return Xa(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return va(e)&&!Je(["log","time","utc","threshold","quantile"],e)}}function gq(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return Vf(e)?void 0:F1e(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function Pye(e,t){return Je([kk,Ok],t)?e===void 0||Mn(e):t===Sd?Je([Un.TIME,Un.UTC,void 0],e):t===gc?fq(e)||_d(e)||e===void 0:!0}function Iye(e,t,n=!1){if(!xs(e))return!1;switch(e){case Ut:case On:case Iu:case Kd:case Xr:case Ca:return Xa(t)||t==="band"?!0:t==="point"?!n:!1;case qu:return Je(["linear","band"],t);case xo:case Yu:case Eo:case Hu:case Gu:case Mc:return Xa(t)||_d(t)||Je(["band","point","ordinal"],t);case qi:case ys:case vs:return t!=="band";case Xu:case Hi:return t==="ordinal"||_d(t)}}function qye(e){return Ee(e)&&"value"in e}const Ti={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},pq=Ti.arc,fx=Ti.area,dx=Ti.bar,Hye=Ti.image,hx=Ti.line,gx=Ti.point,Gye=Ti.rect,wv=Ti.rule,mq=Ti.text,Rk=Ti.tick,Yye=Ti.trail,Dk=Ti.circle,Nk=Ti.square,yq=Ti.geoshape;function Wu(e){return["line","area","trail"].includes(e)}function Up(e){return["rect","bar","image","arc","tick"].includes(e)}const Xye=new Set(fe(Ti));function os(e){return he(e,"type")}const Vye=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],Wye=["fill","fillOpacity"],Qye=[...Vye,...Wye],Zye={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},Ez=fe(Zye),f_=["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],Kye={area:["line","point"],bar:f_,rect:f_,line:["point"],tick:["bandSize","thickness",...f_]},Jye={color:"#4c78a8",invalid:"break-paths-show-path-domains",timeUnitBandSize:1},eve={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},vq=fe(eve);function pc(e){return he(e,"band")}const tve={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},nve=5,zk={binSpacing:0,continuousBandSize:nve,minBandSize:.25,timeUnitBandPosition:.5},ive={...zk,binSpacing:1},rve={...zk,thickness:1};function ave(e){return os(e)?e.type:e}function bq(e,{isPath:t}){return e===void 0||e==="break-paths-show-path-domains"?t?"break-paths-show-domains":"filter":e===null?"show":e}function Fk({markDef:e,config:t,scaleChannel:n,scaleType:i,isCountAggregate:r}){var o,l;if(!i||!va(i)||r)return"always-valid";const a=bq(wt("invalid",e,t),{isPath:Wu(e.type)});return((l=(o=t.scale)==null?void 0:o.invalid)==null?void 0:l[n])!==void 0?"show":a}function sve(e){return e==="break-paths-filter-domains"||e==="break-paths-show-domains"}function xq({scaleName:e,scale:t,mode:n}){const i=`domain('${e}')`;if(!t||!e)return;const r=`${i}[0]`,a=`peek(${i})`,s=t.domainHasZero();return s==="definitely"?{scale:e,value:0}:s==="maybe"?{signal:`scale('${e}', inrange(0, ${i}) ? 0 : ${n==="zeroOrMin"?r:a})`}:{signal:`scale('${e}', ${n==="zeroOrMin"?r:a})`}}function Eq({scaleChannel:e,channelDef:t,scale:n,scaleName:i,markDef:r,config:a}){var d;const s=n==null?void 0:n.get("type"),o=xa(t),l=sx(o==null?void 0:o.aggregate),f=Fk({scaleChannel:e,markDef:r,config:a,scaleType:s,isCountAggregate:l});if(o&&f==="show"){const h=((d=a.scale.invalid)==null?void 0:d[e])??"zero-or-min";return{test:cx(xe(o,{expr:"datum"}),!1),...ove(h,n,i)}}}function ove(e,t,n){if(qye(e)){const{value:i}=e;return ke(i)?{signal:i.signal}:{value:i}}return xq({scale:t,scaleName:n,mode:"zeroOrMin"})}function Lk(e){const{channel:t,channelDef:n,markDef:i,scale:r,scaleName:a,config:s}=e,o=kc(t),l=Uk(e),f=Eq({scaleChannel:o,channelDef:n,scale:r,scaleName:a,markDef:i,config:s});return f!==void 0?[f,l]:l}function uve(e){const{datum:t}=e;return Dc(t)?hc(t):`${Ct(t)}`}function Xl(e,t,n,i){const r={};if(t&&(r.scale=t),Es(e)){const{datum:a}=e;Dc(a)?r.signal=hc(a):ke(a)?r.signal=a.signal:A0(a)?r.signal=a.expr:r.value=a}else r.field=xe(e,n);if(i){const{offset:a,band:s}=i;a&&(r.offset=a),s&&(r.band=s)}return r}function Av({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:i,startSuffix:r,endSuffix:a="end",bandPosition:s=.5}){const o=!ke(s)&&0<s&&s<1?"datum":void 0,l=xe(t,{expr:o,suffix:r}),f=n!==void 0?xe(n,{expr:o}):xe(t,{suffix:a,expr:o}),d={};if(s===0||s===1){d.scale=e;const h=s===0?l:f;d.field=h}else{const h=ke(s)?`(1-${s.signal}) * ${l} + ${s.signal} * ${f}`:`${1-s} * ${l} + ${s} * ${f}`;d.signal=`scale("${e}", ${h})`}return i&&(d.offset=i),d}function lve({scaleName:e,fieldDef:t}){const n=xe(t,{expr:"datum"}),i=xe(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${i}) - scale("${e}", ${n}))`}function Uk({channel:e,channelDef:t,channel2Def:n,markDef:i,config:r,scaleName:a,scale:s,stack:o,offset:l,defaultRef:f,bandPosition:d}){if(t){if(qe(t)){const h=s==null?void 0:s.get("type");if(Ci(t)){d??(d=Ru({fieldDef:t,fieldDef2:n,markDef:i,config:r}));const{bin:p,timeUnit:y,type:v}=t;if(Dt(p)||d&&y&&v===Sd)return o!=null&&o.impute?Xl(t,a,{binSuffix:"mid"},{offset:l}):d&&!Mn(h)?Av({scaleName:a,fieldOrDatumDef:t,bandPosition:d,offset:l}):Xl(t,a,O0(t,e)?{binSuffix:"range"}:{},{offset:l});if(Fn(p)){if(pe(n))return Av({scaleName:a,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:d,offset:l});ge(WI(e===Ut?Aa:ms))}}return Xl(t,a,Mn(h)?{binSuffix:"range"}:{},{offset:l,band:h==="band"?d??t.bandPosition??.5:void 0})}else if(ba(t)){const h=t.value,p=l?{offset:l}:{};return{...fp(e,h),...p}}}return Xe(f)&&(f=f()),f&&{...f,...l?{offset:l}:{}}}function fp(e,t){return Je(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:Je(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:zt(t)}function mc(e){return e&&e!=="number"&&e!=="time"}function Sq(e,t,n){return`${e}(${t}${n?`, ${Ct(n)}`:""})`}const cve="  ";function Bk({fieldOrDatumDef:e,format:t,formatType:n,expr:i,normalizeStack:r,config:a}){var l,f;if(mc(n))return da({fieldOrDatumDef:e,format:t,formatType:n,expr:i,config:a});const s=_q(e,i,r),o=wd(e);if(t===void 0&&n===void 0&&a.customFormatTypes){if(o==="quantitative"){if(r&&a.normalizedNumberFormatType)return da({fieldOrDatumDef:e,format:a.normalizedNumberFormat,formatType:a.normalizedNumberFormatType,expr:i,config:a});if(a.numberFormatType)return da({fieldOrDatumDef:e,format:a.numberFormat,formatType:a.numberFormatType,expr:i,config:a})}if(o==="temporal"&&a.timeFormatType&&pe(e)&&e.timeUnit===void 0)return da({fieldOrDatumDef:e,format:a.timeFormat,formatType:a.timeFormatType,expr:i,config:a})}if(Cd(e)){const d=dve({field:s,timeUnit:pe(e)?(l=Tn(e.timeUnit))==null?void 0:l.unit:void 0,format:t,formatType:a.timeFormatType,rawTimeFormat:a.timeFormat,isUTCScale:zc(e)&&((f=e.scale)==null?void 0:f.type)===Un.UTC});return d?{signal:d}:void 0}if(t=LA({type:o,specifiedFormat:t,config:a,normalizeStack:r}),pe(e)&&Dt(e.bin)){const d=xe(e,{expr:i,binSuffix:"end"});return{signal:$0(s,d,t,n,a)}}else return t||wd(e)==="quantitative"?{signal:`${Cq(s,t)}`}:{signal:`isValid(${s}) ? ${s} : ""+${s}`}}function _q(e,t,n){return pe(e)?n?`${xe(e,{expr:t,suffix:"end"})}-${xe(e,{expr:t,suffix:"start"})}`:xe(e,{expr:t}):uve(e)}function da({fieldOrDatumDef:e,format:t,formatType:n,expr:i,normalizeStack:r,config:a,field:s}){if(s??(s=_q(e,i,r)),s!=="datum.value"&&pe(e)&&Dt(e.bin)){const o=xe(e,{expr:i,binSuffix:"end"});return{signal:$0(s,o,t,n,a)}}return{signal:Sq(n,s,t)}}function wq(e,t,n,i,r,a){var s;if(!(_e(i)&&mc(i))&&!(n===void 0&&i===void 0&&r.customFormatTypes&&wd(e)==="quantitative"&&(r.normalizedNumberFormatType&&Ad(e)&&e.stack==="normalize"||r.numberFormatType))){if(Ad(e)&&e.stack==="normalize"&&r.normalizedNumberFormat)return LA({type:"quantitative",config:r,normalizeStack:!0});if(Cd(e)){const o=pe(e)?(s=Tn(e.timeUnit))==null?void 0:s.unit:void 0;return o===void 0&&r.customFormatTypes&&r.timeFormatType?void 0:fve({specifiedFormat:n,timeUnit:o,config:r,omitTimeFormatConfig:a})}return LA({type:t,specifiedFormat:n,config:r})}}function Aq(e,t,n){var i;if(e&&(ke(e)||e==="number"||e==="time"))return e;if(Cd(t)&&n!=="time"&&n!=="utc")return pe(t)&&((i=Tn(t==null?void 0:t.timeUnit))!=null&&i.utc)?"utc":"time"}function LA({type:e,specifiedFormat:t,config:n,normalizeStack:i}){if(_e(t))return t;if(e===gc)return i?n.normalizedNumberFormat:n.numberFormat}function fve({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:i}){return e||(t?{signal:iq(t)}:i?void 0:n.timeFormat)}function Cq(e,t){return`format(${e}, "${t||""}")`}function Sz(e,t,n,i){return mc(n)?Sq(n,e,t):Cq(e,(_e(t)?t:void 0)??i.numberFormat)}function $0(e,t,n,i,r){if(n===void 0&&i===void 0&&r.customFormatTypes&&r.numberFormatType)return $0(e,t,r.numberFormat,r.numberFormatType,r);const a=Sz(e,n,i,r),s=Sz(t,n,i,r);return`${cx(e,!1)} ? "null" : ${a} + "${cve}" + ${s}`}function dve({field:e,timeUnit:t,format:n,formatType:i,rawTimeFormat:r,isUTCScale:a}){return!t||n?!t&&i?`${i}(${e}, '${n}')`:(n=_e(n)?n:r,`${a?"utc":"time"}Format(${e}, '${n}')`):xye(t,e,a)}const px="min",hve={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function _z(e){return Ce(hve,e)}function gve(e){return he(e,"encoding")}function so(e){return e&&(e.op==="count"||he(e,"field"))}function $q(e){return e&&oe(e)}function T0(e){return he(e,"row")||he(e,"column")}function jk(e){return he(e,"header")}function mx(e){return he(e,"facet")}function pve(e){return he(e,"param")}function mve(e){return!_e(e)&&he(e,"repeat")}function wz(e){const{field:t,timeUnit:n,bin:i,aggregate:r}=e;return{...n?{timeUnit:n}:{},...i?{bin:i}:{},...r?{aggregate:r}:{},field:t}}function Pk(e){return he(e,"sort")}function Ru({fieldDef:e,fieldDef2:t,markDef:n,config:i}){if(qe(e)&&e.bandPosition!==void 0)return e.bandPosition;if(pe(e)){const{timeUnit:r,bin:a}=e;if(r&&!t)return ss("timeUnitBandPosition",n,i);if(Dt(a))return .5}}function Tq({channel:e,fieldDef:t,fieldDef2:n,markDef:i,config:r,scaleType:a,useVlSizeChannel:s}){var f,d,h;const o=Gi(e),l=wt(s?"size":o,i,r,{vgChannel:o});if(l!==void 0)return l;if(pe(t)){const{timeUnit:p,bin:y}=t;if(p&&!n)return{band:ss("timeUnitBandSize",i,r)};if(Dt(y)&&!Mn(a))return{band:1}}if(Up(i.type))return a?Mn(a)?((f=r[i.type])==null?void 0:f.discreteBandSize)||{band:1}:(d=r[i.type])==null?void 0:d.continuousBandSize:(h=r[i.type])==null?void 0:h.discreteBandSize}function Mq(e,t,n,i){return Dt(e.bin)||e.timeUnit&&Ci(e)&&e.type==="temporal"?Ru({fieldDef:e,fieldDef2:t,markDef:n,config:i})!==void 0:!1}function kq(e){return he(e,"sort")&&!he(e,"field")}function M0(e){return he(e,"condition")}function yx(e){const t=e==null?void 0:e.condition;return!!t&&!oe(t)&&pe(t)}function k0(e){const t=e==null?void 0:e.condition;return!!t&&!oe(t)&&qe(t)}function yve(e){const t=e==null?void 0:e.condition;return!!t&&(oe(t)||ba(t))}function pe(e){return he(e,"field")||(e==null?void 0:e.aggregate)==="count"}function wd(e){return e==null?void 0:e.type}function Es(e){return he(e,"datum")}function hu(e){return Ci(e)&&!$v(e)||Cv(e)}function Az(e){return Ci(e)&&e.type==="quantitative"&&!e.bin||Cv(e)}function Cv(e){return Es(e)&&dt(e.datum)}function qe(e){return pe(e)||Es(e)}function Ci(e){return e&&(he(e,"field")||e.aggregate==="count")&&he(e,"type")}function ba(e){return he(e,"value")}function zc(e){return he(e,"scale")||he(e,"sort")}function Ad(e){return he(e,"axis")||he(e,"stack")||he(e,"impute")}function Oq(e){return he(e,"legend")}function Rq(e){return he(e,"format")||he(e,"formatType")}function vve(e){return Ui(e,["legend","axis","header","scale"])}function bve(e){return he(e,"op")}function xe(e,t={}){let n=e.field;const i=t.prefix;let r=t.suffix,a="";if(Eve(e))n=EI("count");else{let s;if(!t.nofn)if(bve(e))s=e.op;else{const{bin:o,aggregate:l,timeUnit:f}=e;Dt(o)?(s=zI(o),r=(t.binSuffix??"")+(t.suffix??"")):l?Vu(l)?(a=`["${n}"]`,n=`argmax_${l.argmax}`):ho(l)?(a=`["${n}"]`,n=`argmin_${l.argmin}`):s=String(l):f&&!Nc(f)&&(s=Eye(f),r=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}s&&(n=n?`${s}_${n}`:s)}return r&&(n=`${n}_${r}`),i&&(n=`${i}_${n}`),t.forAs?Zd(n):t.expr?vI(n,t.expr)+a:Hr(n)+a}function $v(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return pe(e)&&!!e.bin;case"temporal":return!1}throw new Error(GI(e.type))}function xve(e){var t;return zc(e)&&_d((t=e.scale)==null?void 0:t.type)}function Eve(e){return e.aggregate==="count"}function Sve(e,t){var s;const{field:n,bin:i,timeUnit:r,aggregate:a}=e;if(a==="count")return t.countTitle;if(Dt(i))return`${n} (binned)`;if(r&&!Nc(r)){const o=(s=Tn(r))==null?void 0:s.unit;if(o)return`${n} (${lx(o).join("-")})`}else if(a)return Vu(a)?`${n} for max ${a.argmax}`:ho(a)?`${n} for min ${a.argmin}`:`${E0(a)} of ${n}`;return n}function _ve(e){const{aggregate:t,bin:n,timeUnit:i,field:r}=e;if(Vu(t))return`${r} for argmax(${t.argmax})`;if(ho(t))return`${r} for argmin(${t.argmin})`;const a=i&&!Nc(i)?Tn(i):void 0,s=t||(a==null?void 0:a.unit)||(a==null?void 0:a.maxbins)&&"timeunit"||Dt(n)&&"bin";return s?`${s.toUpperCase()}(${r})`:r}const Dq=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return _ve(e);default:return Sve(e,t)}};let Nq=Dq;function zq(e){Nq=e}function wve(){zq(Dq)}function Wf(e,t,{allowDisabling:n,includeDefault:i=!0}){var o;const r=(o=Ik(e))==null?void 0:o.title;if(!pe(e))return r??e.title;const a=e,s=i?qk(a,t):void 0;return n?tn(r,a.title,s):r??a.title??s}function Ik(e){if(Ad(e)&&e.axis)return e.axis;if(Oq(e)&&e.legend)return e.legend;if(jk(e)&&e.header)return e.header}function qk(e,t){return Nq(e,t)}function Tv(e){if(Rq(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=Ik(e)??{},{format:n,formatType:i}=t;return{format:n,formatType:i}}}function Ave(e,t){var a;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(Pk(e)&&oe(e.sort))return"ordinal";const{aggregate:n,bin:i,timeUnit:r}=e;if(r)return"temporal";if(i||n&&!Vu(n)&&!ho(n))return"quantitative";if(zc(e)&&((a=e.scale)!=null&&a.type))switch(zA[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function xa(e){if(pe(e))return e;if(yx(e))return e.condition}function gn(e){if(qe(e))return e;if(k0(e))return e.condition}function Fq(e,t,n,i={}){if(_e(e)||dt(e)||zu(e)){const r=_e(e)?"string":dt(e)?"number":"boolean";return ge(w1e(t,r,e)),{value:e}}return qe(e)?Mv(e,t,n,i):k0(e)?{...e,condition:Mv(e.condition,t,n,i)}:e}function Mv(e,t,n,i){if(Rq(e)){const{format:r,formatType:a,...s}=e;if(mc(a)&&!n.customFormatTypes)return ge(yz(t)),Mv(s,t,n,i)}else{const r=Ad(e)?"axis":Oq(e)?"legend":jk(e)?"header":null;if(r&&e[r]){const{format:a,formatType:s,...o}=e[r];if(mc(s)&&!n.customFormatTypes)return ge(yz(t)),Mv({...e,[r]:o},t,n,i)}}return pe(e)?Hk(e,t,i):Cve(e)}function Cve(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=dt(n)?"quantitative":_e(n)?"nominal":Dc(n)?"temporal":void 0,{...e,type:t}}function Hk(e,t,{compositeMark:n=!1}={}){const{aggregate:i,timeUnit:r,bin:a,field:s}=e,o={...e};if(!n&&i&&!pk(i)&&!Vu(i)&&!ho(i)&&(ge(C1e(i)),delete o.aggregate),r&&(o.timeUnit=Tn(r)),s&&(o.field=`${s}`),Dt(a)&&(o.bin=vx(a,t)),Fn(a)&&!nn(t)&&ge(rye(t)),Ci(o)){const{type:l}=o,f=Mye(l);l!==f&&(o.type=f),l!=="quantitative"&&sx(i)&&(ge(A1e(l,i)),o.type="quantitative")}else if(!MI(t)){const l=Ave(o,t);o.type=l}if(Ci(o)){const{compatible:l,warning:f}=$ve(o,t)||{};l===!1&&ge(f)}if(Pk(o)&&_e(o.sort)){const{sort:l}=o;if(_z(l))return{...o,sort:{encoding:l}};const f=l.substring(1);if(l.charAt(0)==="-"&&_z(f))return{...o,sort:{encoding:f,order:"descending"}}}if(jk(o)){const{header:l}=o;if(l){const{orient:f,...d}=l;if(f)return{...o,header:{...d,labelOrient:l.labelOrient||f,titleOrient:l.titleOrient||f}}}}return o}function vx(e,t){return zu(e)?{maxbins:uz(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:uz(t)}:e}const Mf={compatible:!0};function $ve(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case ro:case ao:case ex:return $v(e)?Mf:{compatible:!1,warning:k1e(t)};case Ut:case On:case Iu:case Kd:case qi:case ys:case vs:case S0:case _0:case tx:case fc:case nx:case ix:case Mc:case Xr:case Ca:case rx:return Mf;case Ta:case Gr:case $a:case Ma:return n!==gc?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:Mf;case Eo:case Hu:case Gu:case Yu:case xo:case bo:case vo:case Aa:case ms:case qu:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:Mf;case Hi:case Xu:return!$v(e)&&!xve(e)?{compatible:!1,warning:O1e(t)}:Mf;case Ed:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:Mf}}function Cd(e){const{formatType:t}=Tv(e);return t==="time"||!t&&Tve(e)}function Tve(e){return e&&(e.type==="temporal"||pe(e)&&!!e.timeUnit)}function bx(e,{timeUnit:t,type:n,wrapTime:i,undefinedIfExprNotRequired:r}){var l;const a=t&&((l=Tn(t))==null?void 0:l.unit);let s=a||n==="temporal",o;return A0(e)?o=e.expr:ke(e)?o=e.signal:Dc(e)?(s=!0,o=hc(e)):(_e(e)||dt(e))&&s&&(o=`datetime(${Ct(e)})`,mye(a)&&(dt(e)&&e<1e4||_e(e)&&isNaN(Date.parse(e)))&&(o=hc({[a]:e}))),o?i&&s?`time(${o})`:o:r?void 0:Ct(e)}function Lq(e,t){const{type:n}=e;return t.map(i=>{const r=pe(e)&&!Nc(e.timeUnit)?e.timeUnit:void 0,a=bx(i,{timeUnit:r,type:n,undefinedIfExprNotRequired:!0});return a!==void 0?{signal:a}:i})}function O0(e,t){return Dt(e.bin)?xs(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const Cz={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function R0(e){return e==null?void 0:e.condition}const Uq=["domain","grid","labels","ticks","title"],Mve={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},Bq={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},kve={...Bq,style:1,labelExpr:1,encoding:1};function $z(e){return Ce(kve,e)}const Ove={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},jq=fe(Ove);function _o(e){return he(e,"mark")}class xx{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return _o(t)?ave(t.mark)===this.name:!1}}function Vl(e,t){const n=e&&e[t];return n?oe(n)?bd(n,i=>!!i.field):pe(n)||yx(n):!1}function Pq(e,t){const n=e&&e[t];return n?oe(n)?bd(n,i=>!!i.field):pe(n)||Es(n)||k0(n):!1}function Iq(e,t){if(nn(t)){const n=e[t];if((pe(n)||Es(n))&&(uq(n.type)||pe(n)&&n.timeUnit)){const i=ck(t);return Pq(e,i)}}return!1}function qq(e){return bd(Cme,t=>{if(Vl(e,t)){const n=e[t];if(oe(n))return bd(n,i=>!!i.aggregate);{const i=xa(n);return i&&!!i.aggregate}}return!1})}function Hq(e,t){const n=[],i=[],r=[],a=[],s={};return Gk(e,(o,l)=>{if(pe(o)){const{field:f,aggregate:d,bin:h,timeUnit:p,...y}=o;if(d||p||h){const v=Ik(o),b=v==null?void 0:v.title;let E=xe(o,{forAs:!0});const _={...b?[]:{title:Wf(o,t,{allowDisabling:!0})},...y,field:E};if(d){let w;if(Vu(d)?(w="argmax",E=xe({op:"argmax",field:d.argmax},{forAs:!0}),_.field=`${E}.${f}`):ho(d)?(w="argmin",E=xe({op:"argmin",field:d.argmin},{forAs:!0}),_.field=`${E}.${f}`):d!=="boxplot"&&d!=="errorbar"&&d!=="errorband"&&(w=d),w){const A={op:w,as:E};f&&(A.field=f),a.push(A)}}else if(n.push(E),Ci(o)&&Dt(h)){if(i.push({bin:h,field:f,as:E}),n.push(xe(o,{binSuffix:"end"})),O0(o,l)&&n.push(xe(o,{binSuffix:"range"})),nn(l)){const w={field:`${E}_end`};s[`${l}2`]=w}_.bin="binned",MI(l)||(_.type=gc)}else if(p&&!Nc(p)){r.push({timeUnit:p,field:f,as:E});const w=Ci(o)&&o.type!==Sd&&"time";w&&(l===S0||l===fc?_.formatType=w:Lme(l)?_.legend={formatType:w,..._.legend}:nn(l)&&(_.axis={formatType:w,..._.axis}))}s[l]=_}else n.push(f),s[l]=e[l]}else s[l]=e[l]}),{bins:i,timeUnits:r,aggregate:a,groupby:n,encoding:s}}function Rve(e,t,n){const i=Bme(t,n);if(i){if(i==="binned"){const r=e[t===Aa?Ut:On];return!!(pe(r)&&pe(e[t])&&Fn(r.bin))}}else return!1;return!0}function Dve(e,t,n,i){const r={};for(const a of fe(e))TI(a)||ge(M1e(a));for(let a of Rme){if(!e[a])continue;const s=e[a];if(w0(a)){const o=Ome(a),l=r[o];if(pe(l)&&Tye(l.type)&&pe(s)&&!l.timeUnit){ge(_1e(o));continue}}if(a==="angle"&&t==="arc"&&!e.theta&&(ge(S1e),a=Xr),!Rve(e,a,t)){ge(ux(a,t));continue}if(a===xo&&t==="line"){const o=xa(e[a]);if(o!=null&&o.aggregate){ge(T1e);continue}}if(a===qi&&(n?"fill"in e:"stroke"in e)){ge(YI("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(a===_0||a===Ed&&!oe(s)&&!ba(s)||a===fc&&oe(s)){if(s){if(a===Ed){const o=e[a];if(kq(o)){r[a]=o;continue}}r[a]=Se(s).reduce((o,l)=>(pe(l)?o.push(Hk(l,a)):ge(NA(l,a)),o),[])}}else{if(a===fc&&s===null)r[a]=null;else if(!pe(s)&&!Es(s)&&!ba(s)&&!M0(s)&&!ke(s)){ge(NA(s,a));continue}r[a]=Fq(s,a,i)}}return r}function Ex(e,t){const n={};for(const i of fe(e)){const r=Fq(e[i],i,t,{compositeMark:!0});n[i]=r}return n}function Nve(e){const t=[];for(const n of fe(e))if(Vl(e,n)){const i=e[n],r=Se(i);for(const a of r)pe(a)?t.push(a):yx(a)&&t.push(a.condition)}return t}function Gk(e,t,n){if(e)for(const i of fe(e)){const r=e[i];if(oe(r))for(const a of r)t.call(n,a,i);else t.call(n,r,i)}}function zve(e,t,n,i){return e?fe(e).reduce((r,a)=>{const s=e[a];return oe(s)?s.reduce((o,l)=>t.call(i,o,l,a),r):t.call(i,r,s,a)},n):n}function Gq(e,t){return fe(t).reduce((n,i)=>{switch(i){case Ut:case On:case nx:case rx:case ix:case Aa:case ms:case Iu:case Kd:case Xr:case bo:case Ca:case vo:case qu:case $a:case Ta:case Ma:case Gr:case S0:case Hi:case Mc:case fc:return n;case Ed:if(e==="line"||e==="trail")return n;case _0:case tx:{const r=t[i];if(oe(r)||pe(r))for(const a of Se(r))a.aggregate||n.push(xe(a,{}));return n}case xo:if(e==="trail")return n;case qi:case ys:case vs:case Eo:case Hu:case Gu:case Xu:case Yu:{const r=xa(t[i]);return r&&!r.aggregate&&n.push(xe(r,{})),n}}},[])}function Fve(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let i,r;if(oe(t)){for(const a of t)a.aggregate?(i||(i=[]),i.push(a)):(r||(r=[]),r.push(a));i&&(n.tooltip=i)}else t.aggregate?n.tooltip=t:r=t;return oe(r)&&r.length===1&&(r=r[0]),{customTooltipWithoutAggregatedField:r,filteredEncoding:n}}function UA(e,t,n,i=!0){if("tooltip"in n)return{tooltip:n.tooltip};const r=e.map(({fieldPrefix:s,titlePrefix:o})=>{const l=i?` of ${Yk(t)}`:"";return{field:s+t.field,type:t.type,title:ke(o)?{signal:`${o}"${escape(l)}"`}:o+l}}),a=Nve(n).map(vve);return{tooltip:[...r,...Ya(a,nt)]}}function Yk(e){const{title:t,field:n}=e;return tn(t,n)}function Xk(e,t,n,i,r){const{scale:a,axis:s}=n;return({partName:o,mark:l,positionPrefix:f,endPositionPrefix:d=void 0,extraEncoding:h={}})=>{const p=Yk(n);return Yq(e,o,r,{mark:l,encoding:{[t]:{field:`${f}_${n.field}`,type:n.type,...p!==void 0?{title:p}:{},...a!==void 0?{scale:a}:{},...s!==void 0?{axis:s}:{}},..._e(d)?{[`${t}2`]:{field:`${d}_${n.field}`}}:{},...i,...h}})}}function Yq(e,t,n,i){const{clip:r,color:a,opacity:s}=e,o=e.type;return e[t]||e[t]===void 0&&n[t]?[{...i,mark:{...n[t],...r?{clip:r}:{},...a?{color:a}:{},...s?{opacity:s}:{},...os(i.mark)?i.mark:{type:i.mark},style:`${o}-${String(t)}`,...zu(e[t])?{}:e[t]}}]:[]}function Xq(e,t,n){const{encoding:i}=e,r=t==="vertical"?"y":"x",a=i[r],s=i[`${r}2`],o=i[`${r}Error`],l=i[`${r}Error2`];return{continuousAxisChannelDef:S1(a,n),continuousAxisChannelDef2:S1(s,n),continuousAxisChannelDefError:S1(o,n),continuousAxisChannelDefError2:S1(l,n),continuousAxis:r}}function S1(e,t){if(e!=null&&e.aggregate){const{aggregate:n,...i}=e;return n!==t&&ge(iye(n,t)),i}else return e}function Vq(e,t){const{mark:n,encoding:i}=e,{x:r,y:a}=i;if(os(n)&&n.orient)return n.orient;if(hu(r)){if(hu(a)){const s=pe(r)&&r.aggregate,o=pe(a)&&a.aggregate;if(!s&&o===t)return"vertical";if(!o&&s===t)return"horizontal";if(s===t&&o===t)throw new Error("Both x and y cannot have aggregate");return Cd(a)&&!Cd(r)?"horizontal":"vertical"}return"horizontal"}else{if(hu(a))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const kv="boxplot",Lve=["box","median","outliers","rule","ticks"],Uve=new xx(kv,Qq);function Wq(e){return dt(e)?"tukey":e}function Qq(e,{config:t}){e={...e,encoding:Ex(e.encoding,t)};const{mark:n,encoding:i,params:r,projection:a,...s}=e,o=os(n)?n:{type:n};r&&ge(HI("boxplot"));const l=o.extent??t.boxplot.extent,f=wt("size",o,t),d=o.invalid,h=Wq(l),{bins:p,timeUnits:y,transform:v,continuousAxisChannelDef:b,continuousAxis:E,groupby:_,aggregate:w,encodingWithoutContinuousAxis:A,ticksOrient:M,boxOrient:T,customTooltipWithoutAggregatedField:R}=Bve(e,l,t),O=Zd(b.field),{color:k,size:$,...D}=A,z=Ve=>Xk(o,E,b,Ve,t.boxplot),P=z(D),q=z(A),j=(Ee(t.boxplot.box)?t.boxplot.box.color:t.mark.color)||"#4c78a8",L=z({...D,...$?{size:$}:{},color:{condition:{test:`${vt(`lower_box_${b.field}`)} >= ${vt(`upper_box_${b.field}`)}`,...k||{value:j}}}}),U=UA([{fieldPrefix:h==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:h==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],b,A),I={type:"tick",color:"black",opacity:1,orient:M,invalid:d,aria:!1},V=h==="min-max"?U:UA([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],b,A),G=[...P({partName:"rule",mark:{type:"rule",invalid:d,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:V}),...P({partName:"rule",mark:{type:"rule",invalid:d,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:V}),...P({partName:"ticks",mark:I,positionPrefix:"lower_whisker",extraEncoding:V}),...P({partName:"ticks",mark:I,positionPrefix:"upper_whisker",extraEncoding:V})],F=[...h!=="tukey"?G:[],...q({partName:"box",mark:{type:"bar",...f?{size:f}:{},orient:T,invalid:d,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:U}),...L({partName:"median",mark:{type:"tick",invalid:d,...Ee(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...f?{size:f}:{},orient:M,aria:!1},positionPrefix:"mid_box",extraEncoding:U})];if(h==="min-max")return{...s,transform:(s.transform??[]).concat(v),layer:F};const X=vt(`lower_box_${b.field}`),J=vt(`upper_box_${b.field}`),Z=`(${J} - ${X})`,ue=`${X} - ${l} * ${Z}`,de=`${J} + ${l} * ${Z}`,Ae=vt(b.field),tt={joinaggregate:Zq(b.field),groupby:_},we={transform:[{filter:`(${ue} <= ${Ae}) && (${Ae} <= ${de})`},{aggregate:[{op:"min",field:b.field,as:`lower_whisker_${O}`},{op:"max",field:b.field,as:`upper_whisker_${O}`},{op:"min",field:`lower_box_${b.field}`,as:`lower_box_${O}`},{op:"max",field:`upper_box_${b.field}`,as:`upper_box_${O}`},...w],groupby:_}],layer:G},{tooltip:se,...ye}=D,{scale:ve,axis:re}=b,Ie=Yk(b),Oe=Ui(re,["title"]),Be=Yq(o,"outliers",t.boxplot,{transform:[{filter:`(${Ae} < ${ue}) || (${Ae} > ${de})`}],mark:"point",encoding:{[E]:{field:b.field,type:b.type,...Ie!==void 0?{title:Ie}:{},...ve!==void 0?{scale:ve}:{},...At(Oe)?{}:{axis:Oe}},...ye,...k?{color:k}:{},...R?{tooltip:R}:{}}})[0];let Te;const pt=[...p,...y,tt];return Be?Te={transform:pt,layer:[Be,we]}:(Te=we,Te.transform.unshift(...pt)),{...s,layer:[Te,{transform:v,layer:F}]}}function Zq(e){const t=Zd(e);return[{op:"q1",field:e,as:`lower_box_${t}`},{op:"q3",field:e,as:`upper_box_${t}`}]}function Bve(e,t,n){const i=Vq(e,kv),{continuousAxisChannelDef:r,continuousAxis:a}=Xq(e,i,kv),s=r.field,o=Zd(s),l=Wq(t),f=[...Zq(s),{op:"median",field:s,as:`mid_box_${o}`},{op:"min",field:s,as:(l==="min-max"?"lower_whisker_":"min_")+o},{op:"max",field:s,as:(l==="min-max"?"upper_whisker_":"max_")+o}],d=l==="min-max"||l==="tukey"?[]:[{calculate:`${vt(`upper_box_${o}`)} - ${vt(`lower_box_${o}`)}`,as:`iqr_${o}`},{calculate:`min(${vt(`upper_box_${o}`)} + ${vt(`iqr_${o}`)} * ${t}, ${vt(`max_${o}`)})`,as:`upper_whisker_${o}`},{calculate:`max(${vt(`lower_box_${o}`)} - ${vt(`iqr_${o}`)} * ${t}, ${vt(`min_${o}`)})`,as:`lower_whisker_${o}`}],{[a]:h,...p}=e.encoding,{customTooltipWithoutAggregatedField:y,filteredEncoding:v}=Fve(p),{bins:b,timeUnits:E,aggregate:_,groupby:w,encoding:A}=Hq(v,n),M=i==="vertical"?"horizontal":"vertical",T=i,R=[...b,...E,{aggregate:[..._,...f],groupby:w},...d];return{bins:b,timeUnits:E,transform:R,groupby:w,aggregate:_,continuousAxisChannelDef:r,continuousAxis:a,encodingWithoutContinuousAxis:A,ticksOrient:M,boxOrient:T,customTooltipWithoutAggregatedField:y}}const Vk="errorbar",jve=["ticks","rule"],Pve=new xx(Vk,Kq);function Kq(e,{config:t}){e={...e,encoding:Ex(e.encoding,t)};const{transform:n,continuousAxisChannelDef:i,continuousAxis:r,encodingWithoutContinuousAxis:a,ticksOrient:s,markDef:o,outerSpec:l,tooltipEncoding:f}=Jq(e,Vk,t);delete a.size;const d=Xk(o,r,i,a,t.errorbar),h=o.thickness,p=o.size,y={type:"tick",orient:s,aria:!1,...h!==void 0?{thickness:h}:{},...p!==void 0?{size:p}:{}},v=[...d({partName:"ticks",mark:y,positionPrefix:"lower",extraEncoding:f}),...d({partName:"ticks",mark:y,positionPrefix:"upper",extraEncoding:f}),...d({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...h!==void 0?{size:h}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:f})];return{...l,transform:n,...v.length>1?{layer:v}:{...v[0]}}}function Ive(e,t){const{encoding:n}=e;if(qve(n))return{orient:Vq(e,t),inputType:"raw"};const i=Hve(n),r=Gve(n),a=n.x,s=n.y;if(i){if(r)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const o=n.x2,l=n.y2;if(qe(o)&&qe(l))throw new Error(`${t} cannot have both x2 and y2`);if(qe(o)){if(hu(a))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(qe(l)){if(hu(s))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const o=n.xError,l=n.xError2,f=n.yError,d=n.yError2;if(qe(l)&&!qe(o))throw new Error(`${t} cannot have xError2 without xError`);if(qe(d)&&!qe(f))throw new Error(`${t} cannot have yError2 without yError`);if(qe(o)&&qe(f))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(qe(o)){if(hu(a))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(qe(f)){if(hu(s))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function qve(e){return(qe(e.x)||qe(e.y))&&!qe(e.x2)&&!qe(e.y2)&&!qe(e.xError)&&!qe(e.xError2)&&!qe(e.yError)&&!qe(e.yError2)}function Hve(e){return qe(e.x2)||qe(e.y2)}function Gve(e){return qe(e.xError)||qe(e.xError2)||qe(e.yError)||qe(e.yError2)}function Jq(e,t,n){const{mark:i,encoding:r,params:a,projection:s,...o}=e,l=os(i)?i:{type:i};a&&ge(HI(t));const{orient:f,inputType:d}=Ive(e,t),{continuousAxisChannelDef:h,continuousAxisChannelDef2:p,continuousAxisChannelDefError:y,continuousAxisChannelDefError2:v,continuousAxis:b}=Xq(e,f,t),{errorBarSpecificAggregate:E,postAggregateCalculates:_,tooltipSummary:w,tooltipTitleWithFieldName:A}=Yve(l,h,p,y,v,d,t,n),{[b]:M,[b==="x"?"x2":"y2"]:T,[b==="x"?"xError":"yError"]:R,[b==="x"?"xError2":"yError2"]:O,...k}=r,{bins:$,timeUnits:D,aggregate:z,groupby:P,encoding:q}=Hq(k,n),j=[...z,...E],L=d!=="raw"?[]:P,U=UA(w,h,q,A);return{transform:[...o.transform??[],...$,...D,...j.length===0?[]:[{aggregate:j,groupby:L}],..._],groupby:L,continuousAxisChannelDef:h,continuousAxis:b,encodingWithoutContinuousAxis:q,ticksOrient:f==="vertical"?"horizontal":"vertical",markDef:l,outerSpec:o,tooltipEncoding:U}}function Yve(e,t,n,i,r,a,s,o){let l=[],f=[];const d=t.field;let h,p=!1;if(a==="raw"){const y=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":o.errorbar.center,v=e.extent?e.extent:y==="mean"?"stderr":"iqr";if(y==="median"!=(v==="iqr")&&ge(nye(y,v,s)),v==="stderr"||v==="stdev")l=[{op:v,field:d,as:`extent_${d}`},{op:y,field:d,as:`center_${d}`}],f=[{calculate:`${vt(`center_${d}`)} + ${vt(`extent_${d}`)}`,as:`upper_${d}`},{calculate:`${vt(`center_${d}`)} - ${vt(`extent_${d}`)}`,as:`lower_${d}`}],h=[{fieldPrefix:"center_",titlePrefix:E0(y)},{fieldPrefix:"upper_",titlePrefix:Tz(y,v,"+")},{fieldPrefix:"lower_",titlePrefix:Tz(y,v,"-")}],p=!0;else{let b,E,_;v==="ci"?(b="mean",E="ci0",_="ci1"):(b="median",E="q1",_="q3"),l=[{op:E,field:d,as:`lower_${d}`},{op:_,field:d,as:`upper_${d}`},{op:b,field:d,as:`center_${d}`}],h=[{fieldPrefix:"upper_",titlePrefix:Wf({field:d,aggregate:_,type:"quantitative"},o,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:Wf({field:d,aggregate:E,type:"quantitative"},o,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:Wf({field:d,aggregate:b,type:"quantitative"},o,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&ge(tye(e.center,e.extent)),a==="aggregated-upper-lower"?(h=[],f=[{calculate:vt(n.field),as:`upper_${d}`},{calculate:vt(d),as:`lower_${d}`}]):a==="aggregated-error"&&(h=[{fieldPrefix:"",titlePrefix:d}],f=[{calculate:`${vt(d)} + ${vt(i.field)}`,as:`upper_${d}`}],r?f.push({calculate:`${vt(d)} + ${vt(r.field)}`,as:`lower_${d}`}):f.push({calculate:`${vt(d)} - ${vt(i.field)}`,as:`lower_${d}`}));for(const y of f)h.push({fieldPrefix:y.as.substring(0,6),titlePrefix:cc(cc(y.calculate,"datum['",""),"']","")})}return{postAggregateCalculates:f,errorBarSpecificAggregate:l,tooltipSummary:h,tooltipTitleWithFieldName:p}}function Tz(e,t,n){return`${E0(e)} ${n} ${t}`}const Wk="errorband",Xve=["band","borders"],Vve=new xx(Wk,eH);function eH(e,{config:t}){e={...e,encoding:Ex(e.encoding,t)};const{transform:n,continuousAxisChannelDef:i,continuousAxis:r,encodingWithoutContinuousAxis:a,markDef:s,outerSpec:o,tooltipEncoding:l}=Jq(e,Wk,t),f=s,d=Xk(f,r,i,a,t.errorband),h=e.encoding.x!==void 0&&e.encoding.y!==void 0;let p={type:h?"area":"rect"},y={type:h?"line":"rule"};const v={...f.interpolate?{interpolate:f.interpolate}:{},...f.tension&&f.interpolate?{tension:f.tension}:{}};return h?(p={...p,...v,ariaRoleDescription:"errorband"},y={...y,...v,aria:!1}):f.interpolate?ge(bz("interpolate")):f.tension&&ge(bz("tension")),{...o,transform:n,layer:[...d({partName:"band",mark:p,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l}),...d({partName:"borders",mark:y,positionPrefix:"lower",extraEncoding:l}),...d({partName:"borders",mark:y,positionPrefix:"upper",extraEncoding:l})]}}const tH={};function Qk(e,t,n){const i=new xx(e,t);tH[e]={normalizer:i,parts:n}}function Wve(){return fe(tH)}Qk(kv,Qq,Lve);Qk(Vk,Kq,jve);Qk(Wk,eH,Xve);const Qve=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],nH={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},iH={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},Zve=fe(nH),Kve=fe(iH),Jve={header:1,headerRow:1,headerColumn:1,headerFacet:1},rH=fe(Jve),aH=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],ebe={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},tbe={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},Ea="_vgsid_",nbe={point:{on:"click",fields:[Ea],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function Zk(e){return e==="legend"||!!(e!=null&&e.legend)}function d_(e){return Zk(e)&&Ee(e)}function Kk(e){return!!(e!=null&&e.select)}function sH(e){const t=[];for(const n of e||[]){if(Kk(n))continue;const{expr:i,bind:r,...a}=n;if(r&&i){const s={...a,bind:r,init:i};t.push(s)}else{const s={...a,...i?{update:i}:{},...r?{bind:r}:{}};t.push(s)}}return t}function ibe(e){return Sx(e)||e3(e)||Jk(e)}function Jk(e){return he(e,"concat")}function Sx(e){return he(e,"vconcat")}function e3(e){return he(e,"hconcat")}function oH({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function us(e){return he(e,"step")}function Mz(e){return he(e,"view")||he(e,"width")||he(e,"height")}const kz=20,rbe={align:1,bounds:1,center:1,columns:1,spacing:1},abe=fe(rbe);function sbe(e,t,n){const i=n[t],r={},{spacing:a,columns:s}=i;a!==void 0&&(r.spacing=a),s!==void 0&&(mx(e)&&!T0(e.facet)||Jk(e))&&(r.columns=s),Sx(e)&&(r.columns=1);for(const o of abe)if(e[o]!==void 0)if(o==="spacing"){const l=e[o];r[o]=dt(l)?l:{row:l.row??a,column:l.column??a}}else r[o]=e[o];return r}function BA(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function jA(e,t){const n=Ov(e,t);return us(n)?n.step:uH}function Ov(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return tn(n,{step:e.step})}const uH=20,obe={continuousWidth:200,continuousHeight:200,step:uH},ube={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:obe,mark:Jye,arc:{},area:{},bar:ive,circle:{},geoshape:{},image:{},line:{},point:{},rect:zk,rule:{color:"black"},square:{},text:{color:"black"},tick:rve,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:Nye,projection:{},legend:ebe,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:nbe,style:{},title:{},facet:{spacing:kz},concat:{spacing:kz},normalizedNumberFormat:".0%"},Is=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],Oz={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},Rz={blue:Is[0],orange:Is[1],red:Is[2],teal:Is[3],green:Is[4],yellow:Is[5],purple:Is[6],pink:Is[7],brown:Is[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function lbe(e={}){return{signals:[{name:"color",value:Ee(e)?{...Rz,...e}:Rz}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function cbe(e){return{signals:[{name:"fontSize",value:Ee(e)?{...Oz,...e}:Oz}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function fbe(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function lH(e){const t=fe(e||{}),n={};for(const i of t){const r=e[i];n[i]=R0(r)?LI(r):ir(r)}return n}function dbe(e){const t=fe(e),n={};for(const i of t)n[i]=lH(e[i]);return n}const hbe=[...vq,...jq,...rH,"background","padding","legend","lineBreak","scale","style","title","view"];function cH(e={}){const{color:t,font:n,fontSize:i,selection:r,...a}=e,s=Nd({},Pe(ube),n?fbe(n):{},t?lbe(t):{},i?cbe(i):{},a||{});r&&zd(s,"selection",r,!0);const o=Ui(s,hbe);for(const l of["background","lineBreak","padding"])s[l]&&(o[l]=ir(s[l]));for(const l of vq)s[l]&&(o[l]=Ln(s[l]));for(const l of jq)s[l]&&(o[l]=lH(s[l]));for(const l of rH)s[l]&&(o[l]=Ln(s[l]));if(s.legend&&(o.legend=Ln(s.legend)),s.scale){const{invalid:l,...f}=s.scale,d=Ln(l,{level:1});o.scale={...Ln(f),...fe(d).length>0?{invalid:d}:{}}}return s.style&&(o.style=dbe(s.style)),s.title&&(o.title=Ln(s.title)),s.view&&(o.view=Ln(s.view)),o}const gbe=new Set(["view",...Xye]),pbe=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],mbe={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...Kye};function ybe(e){e=Pe(e);for(const t of pbe)delete e[t];if(e.axis)for(const t in e.axis)R0(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of Qve)delete e.legend[t];if(e.mark){for(const t of Ez)delete e.mark[t];e.mark.tooltip&&Ee(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(sH(e.params)),delete e.params);for(const t of gbe){for(const i of Ez)delete e[t][i];const n=mbe[t];if(n)for(const i of n)delete e[t][i];bbe(e,t)}for(const t of Wve())delete e[t];vbe(e);for(const t in e)Ee(e[t])&&At(e[t])&&delete e[t];return At(e)?void 0:e}function vbe(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:i}=FI(e.title);At(t)||(e.style["group-title"]={...e.style["group-title"],...t}),At(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),At(i)?delete e.title:e.title=i}function bbe(e,t,n,i){const r=e[t];t==="view"&&(n="cell");const a={...r,...e.style[n??t]};At(a)||(e.style[n??t]=a),delete e[t]}function _x(e){return he(e,"layer")}function xbe(e){return he(e,"repeat")}function Ebe(e){return!oe(e.repeat)&&he(e.repeat,"layer")}class t3{map(t,n){return mx(t)?this.mapFacet(t,n):xbe(t)?this.mapRepeat(t,n):e3(t)?this.mapHConcat(t,n):Sx(t)?this.mapVConcat(t,n):Jk(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(_x(t))return this.mapLayer(t,n);if(_o(t))return this.mapUnit(t,n);throw new Error(mk(t))}mapLayer(t,n){return{...t,layer:t.layer.map(i=>this.mapLayerOrUnit(i,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(i=>this.map(i,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(i=>this.map(i,n))}}mapConcat(t,n){const{concat:i,...r}=t;return{...r,concat:i.map(a=>this.map(a,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const Sbe={zero:1,center:1,normalize:1};function _be(e){return Ce(Sbe,e)}const wbe=new Set([pq,dx,fx,wv,gx,Dk,Nk,hx,mq,Rk]),Abe=new Set([dx,fx,pq]);function kf(e){return pe(e)&&wd(e)==="quantitative"&&!e.bin}function Dz(e,t,{orient:n,type:i}){const r=t==="x"?"y":"radius",a=t==="x"&&["bar","area"].includes(i),s=e[t],o=e[r];if(pe(s)&&pe(o))if(kf(s)&&kf(o)){if(s.stack)return t;if(o.stack)return r;const l=pe(s)&&!!s.aggregate,f=pe(o)&&!!o.aggregate;if(l!==f)return l?t:r;if(a){if(n==="vertical")return r;if(n==="horizontal")return t}}else{if(kf(s))return t;if(kf(o))return r}else{if(kf(s))return a&&n==="vertical"?void 0:t;if(kf(o))return a&&n==="horizontal"?void 0:r}}function Cbe(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function fH(e,t){var b,E;const n=os(e)?e:{type:e},i=n.type;if(!wbe.has(i))return null;const r=Dz(t,"x",n)||Dz(t,"theta",n);if(!r)return null;const a=t[r],s=pe(a)?xe(a,{}):void 0,o=Cbe(r),l=[],f=new Set;if(t[o]){const _=t[o],w=pe(_)?xe(_,{}):void 0;w&&w!==s&&(l.push(o),f.add(w))}const d=o==="x"?"xOffset":"yOffset",h=t[d],p=pe(h)?xe(h,{}):void 0;p&&p!==s&&(l.push(d),f.add(p));const y=Dme.reduce((_,w)=>{if(w!=="tooltip"&&Vl(t,w)){const A=t[w];for(const M of Se(A)){const T=xa(M);if(T.aggregate)continue;const R=xe(T,{});(!R||!f.has(R))&&_.push({channel:w,fieldDef:T})}}return _},[]);let v;return a.stack!==void 0?zu(a.stack)?v=a.stack?"zero":null:v=a.stack:Abe.has(i)&&(v="zero"),!v||!_be(v)||qq(t)&&y.length===0?null:((b=a==null?void 0:a.scale)!=null&&b.type&&((E=a==null?void 0:a.scale)==null?void 0:E.type)!==Un.LINEAR&&a!=null&&a.stack&&ge(K1e(a.scale.type)),qe(t[bs(r)])?(a.stack!==void 0&&ge(Z1e(r)),null):(pe(a)&&a.aggregate&&!Yme.has(a.aggregate)&&ge(J1e(a.aggregate)),{groupbyChannels:l,groupbyFields:f,fieldChannel:r,impute:a.impute===null?!1:Wu(i),stackBy:y,offset:v}))}function dH(e,t,n){const i=Ln(e),r=wt("orient",i,n);if(i.orient=kbe(i.type,t,r),r!==void 0&&r!==i.orient&&ge(z1e(i.orient,r)),i.type==="bar"&&i.orient){const l=wt("cornerRadiusEnd",i,n);if(l!==void 0){const f=i.orient==="horizontal"&&t.x2||i.orient==="vertical"&&t.y2?["cornerRadius"]:tve[i.orient];for(const d of f)i[d]=l;i.cornerRadiusEnd!==void 0&&delete i.cornerRadiusEnd}}const a=wt("opacity",i,n),s=wt("fillOpacity",i,n);return a===void 0&&s===void 0&&(i.opacity=Tbe(i.type,t)),wt("cursor",i,n)===void 0&&(i.cursor=$be(i,t,n)),i}function $be(e,t,n){return t.href||e.href||wt("href",e,n)?"pointer":e.cursor}function Tbe(e,t){if(Je([gx,Rk,Dk,Nk],e)&&!qq(t))return .7}function Mbe(e,t,{graticule:n}){if(n)return!1;const i=ss("filled",e,t),r=e.type;return tn(i,r!==gx&&r!==hx&&r!==wv)}function kbe(e,t,n){switch(e){case gx:case Dk:case Nk:case mq:case Gye:case Hye:return}const{x:i,y:r,x2:a,y2:s}=t;switch(e){case dx:if(pe(i)&&(Fn(i.bin)||pe(r)&&r.aggregate&&!i.aggregate))return"vertical";if(pe(r)&&(Fn(r.bin)||pe(i)&&i.aggregate&&!r.aggregate))return"horizontal";if(s||a){if(n)return n;if(!a)return(pe(i)&&i.type===gc&&!Dt(i.bin)||Cv(i))&&pe(r)&&Fn(r.bin)?"horizontal":"vertical";if(!s)return(pe(r)&&r.type===gc&&!Dt(r.bin)||Cv(r))&&pe(i)&&Fn(i.bin)?"vertical":"horizontal"}case wv:if(a&&!(pe(i)&&Fn(i.bin))&&s&&!(pe(r)&&Fn(r.bin)))return;case fx:if(s)return pe(r)&&Fn(r.bin)?"horizontal":"vertical";if(a)return pe(i)&&Fn(i.bin)?"vertical":"horizontal";if(e===wv){if(i&&!r)return"vertical";if(r&&!i)return"horizontal"}case hx:case Rk:{const o=Az(i),l=Az(r);if(n)return n;if(o&&!l)return e!=="tick"?"horizontal":"vertical";if(!o&&l)return e!=="tick"?"vertical":"horizontal";if(o&&l)return"vertical";{const f=Ci(i)&&i.type===Sd,d=Ci(r)&&r.type===Sd;if(f&&!d)return"vertical";if(!f&&d)return"horizontal"}return}}return"vertical"}function Obe(e){const{point:t,line:n,...i}=e;return fe(i).length>1?i:i.type}function Rbe(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:Ui(e[t],["point","line"])});return e}function h_(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?Ee(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?Ee(t.point)?t.point:{}:void 0}function Nz(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class Dbe{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(_o(t)){const{mark:i,encoding:r}=t,a=os(i)?i:{type:i};switch(a.type){case"line":case"rule":case"trail":return!!h_(a,n[a.type],r);case"area":return!!h_(a,n[a.type],r)||!!Nz(a,n[a.type])}}return!1}run(t,n,i){const{config:r}=n,{params:a,projection:s,mark:o,name:l,encoding:f,...d}=t,h=Ex(f,r),p=os(o)?o:{type:o},y=h_(p,r[p.type],h),v=p.type==="area"&&Nz(p,r[p.type]),b=[{name:l,...a?{params:a}:{},mark:Obe({...p.type==="area"&&p.opacity===void 0&&p.fillOpacity===void 0?{opacity:.7}:{},...p}),encoding:Ui(h,["shape"])}],E=fH(dH(p,h,r),h);let _=h;if(E){const{fieldChannel:w,offset:A}=E;_={...h,[w]:{...h[w],...A?{stack:A}:{}}}}return _=Ui(_,["y2","x2"]),v&&b.push({...s?{projection:s}:{},mark:{type:"line",...vd(p,["clip","interpolate","tension","tooltip"]),...v},encoding:_}),y&&b.push({...s?{projection:s}:{},mark:{type:"point",opacity:1,filled:!0,...vd(p,["clip","tooltip"]),...y},encoding:_}),i({...d,layer:b},{...n,config:Rbe(r)})}}function Nbe(e,t){return t?T0(e)?gH(e,t):hH(e,t):e}function g_(e,t){return t?gH(e,t):e}function PA(e,t,n){const i=t[e];if(mve(i)){if(i.repeat in n)return{...t,[e]:n[i.repeat]};ge(d1e(i.repeat));return}return t}function hH(e,t){if(e=PA("field",e,t),e!==void 0){if(e===null)return null;if(Pk(e)&&so(e.sort)){const n=PA("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function zz(e,t){if(pe(e))return hH(e,t);{const n=PA("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function Fz(e,t){if(qe(e)){const n=zz(e,t);if(n)return n;if(M0(e))return{condition:e.condition}}else{if(k0(e)){const n=zz(e.condition,t);if(n)return{...e,condition:n};{const{condition:i,...r}=e;return r}}return e}}function gH(e,t){const n={};for(const i in e)if(he(e,i)){const r=e[i];if(oe(r))n[i]=r.map(a=>Fz(a,t)).filter(a=>a);else{const a=Fz(r,t);a!==void 0&&(n[i]=a)}}return n}class zbe{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(_o(t)){const{encoding:n,mark:i}=t;if(i==="line"||os(i)&&i.type==="line")for(const r of kme){const a=kc(r),s=n[a];if(n[r]&&(pe(s)&&!Fn(s.bin)||Es(s)))return!0}}return!1}run(t,n,i){const{encoding:r,mark:a}=t;return ge(N1e(!!r.x2,!!r.y2)),i({...t,mark:Ee(a)?{...a,type:"rule"}:"rule"},n)}}class Fbe extends t3{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[Uve,Pve,Vve,new Dbe,new zbe]}map(t,n){if(_o(t)){const i=Vl(t.encoding,ro),r=Vl(t.encoding,ao),a=Vl(t.encoding,ex);if(i||r||a)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:i,parentProjection:r}=n,a=g_(t.encoding,n.repeater),s={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(l=>l).join("_")}:{},...a?{encoding:a}:{}};if(i||r)return this.mapUnitWithParentEncodingOrProjection(s,n);const o=this.mapLayerOrUnit.bind(this);for(const l of this.nonFacetUnitNormalizers)if(l.hasMatchingType(s,n.config))return l.run(s,n,o);return s}mapRepeat(t,n){return Ebe(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:i,spec:r,...a}=t,{row:s,column:o,layer:l}=i,{repeater:f={},repeaterPrefix:d=""}=n;return s||o?this.mapRepeat({...t,repeat:{...s?{row:s}:{},...o?{column:o}:{}},spec:{repeat:{layer:l},spec:r}},n):{...a,layer:l.map(h=>{const p={...f,layer:h},y=`${(r.name?`${r.name}_`:"")+d}child__layer_${Lt(h)}`,v=this.mapLayerOrUnit(r,{...n,repeater:p,repeaterPrefix:y});return v.name=y,v})}}mapNonLayerRepeat(t,n){const{repeat:i,spec:r,data:a,...s}=t;!oe(i)&&t.columns&&(t=Ui(t,["columns"]),ge(pz("repeat")));const o=[],{repeater:l={},repeaterPrefix:f=""}=n,d=!oe(i)&&i.row||[l?l.row:null],h=!oe(i)&&i.column||[l?l.column:null],p=oe(i)&&i||[l?l.repeat:null];for(const v of p)for(const b of d)for(const E of h){const _={repeat:v,row:b,column:E,layer:l.layer},w=(r.name?`${r.name}_`:"")+f+"child__"+(oe(i)?`${Lt(v)}`:(i.row?`row_${Lt(b)}`:"")+(i.column?`column_${Lt(E)}`:"")),A=this.map(r,{...n,repeater:_,repeaterPrefix:w});A.name=w,o.push(Ui(A,["data"]))}const y=oe(i)?t.columns:i.column?i.column.length:1;return{data:r.data??a,align:"all",...s,columns:y,concat:o}}mapFacet(t,n){const{facet:i}=t;return T0(i)&&t.columns&&(t=Ui(t,["columns"]),ge(pz("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:i,projection:r}=t,{parentEncoding:a,parentProjection:s,config:o}=n,l=Uz({parentProjection:s,projection:r}),f=Lz({parentEncoding:a,encoding:g_(i,n.repeater)});return this.mapUnit({...t,...l?{projection:l}:{},...f?{encoding:f}:{}},{config:o})}mapFacetedUnit(t,n){const{row:i,column:r,facet:a,...s}=t.encoding,{mark:o,width:l,projection:f,height:d,view:h,params:p,encoding:y,...v}=t,{facetMapping:b,layout:E}=this.getFacetMappingAndLayout({row:i,column:r,facet:a},n),_=g_(s,n.repeater);return this.mapFacet({...v,...E,facet:b,spec:{...l?{width:l}:{},...d?{height:d}:{},...h?{view:h}:{},...f?{projection:f}:{},mark:o,encoding:_,...p?{params:p}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:i,column:r,facet:a}=t;if(i||r){a&&ge(R1e([...i?[ro]:[],...r?[ao]:[]]));const s={},o={};for(const l of[ro,ao]){const f=t[l];if(f){const{align:d,center:h,spacing:p,columns:y,...v}=f;s[l]=v;for(const b of["align","center","spacing"])f[b]!==void 0&&(o[b]??(o[b]={}),o[b][l]=f[b])}}return{facetMapping:s,layout:o}}else{const{align:s,center:o,spacing:l,columns:f,...d}=a;return{facetMapping:Nbe(d,n.repeater),layout:{...s?{align:s}:{},...o?{center:o}:{},...l?{spacing:l}:{},...f?{columns:f}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:i,...r}){const{encoding:a,projection:s,...o}=t,l={...r,parentEncoding:Lz({parentEncoding:n,encoding:a,layer:!0}),parentProjection:Uz({parentProjection:i,projection:s})};return super.mapLayer({...o,...t.name?{name:[l.repeaterPrefix,t.name].filter(f=>f).join("_")}:{}},l)}}function Lz({parentEncoding:e,encoding:t={},layer:n}){let i={};if(e){const r=new Set([...fe(e),...fe(t)]);for(const a of r){const s=t[a],o=e[a];if(qe(s)){const l={...o,...s};i[a]=l}else k0(s)?i[a]={...s,condition:{...o,...s.condition}}:s||s===null?i[a]=s:(n||ba(o)||ke(o)||qe(o)||oe(o))&&(i[a]=o)}}else i=t;return!i||At(i)?void 0:i}function Uz(e){const{parentProjection:t,projection:n}=e;return t&&n&&ge(E1e({parentProjection:t,projection:n})),n??t}function n3(e){return he(e,"filter")}function Lbe(e){return he(e,"stop")}function pH(e){return he(e,"lookup")}function Ube(e){return he(e,"data")}function Bbe(e){return he(e,"param")}function jbe(e){return he(e,"pivot")}function Pbe(e){return he(e,"density")}function Ibe(e){return he(e,"quantile")}function qbe(e){return he(e,"regression")}function Hbe(e){return he(e,"loess")}function Gbe(e){return he(e,"sample")}function Ybe(e){return he(e,"window")}function Xbe(e){return he(e,"joinaggregate")}function Vbe(e){return he(e,"flatten")}function Wbe(e){return he(e,"calculate")}function mH(e){return he(e,"bin")}function Qbe(e){return he(e,"impute")}function Zbe(e){return he(e,"timeUnit")}function Kbe(e){return he(e,"aggregate")}function Jbe(e){return he(e,"stack")}function exe(e){return he(e,"fold")}function txe(e){return he(e,"extent")&&!he(e,"density")&&!he(e,"regression")}function nxe(e){return e.map(t=>n3(t)?{filter:Xf(t.filter,$ye)}:t)}class ixe extends t3{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=Bz(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=Bz(t,n),t.encoding){const i={};for(const[r,a]of ku(t.encoding))i[r]=yH(a,n);t={...t,encoding:i}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:i,...r}=t;return i?{...r,params:ku(i).map(([a,s])=>{const{init:o,bind:l,empty:f,...d}=s;d.type==="single"?(d.type="point",d.toggle=!1):d.type==="multi"&&(d.type="point"),n.emptySelections[a]=f!=="none";for(const h of qn(n.selectionPredicates[a]??{}))h.empty=f!=="none";return{name:a,value:o,select:d,bind:l}})}:t}}function Bz(e,t){const{transform:n,...i}=e;if(n){const r=n.map(a=>{if(n3(a))return{filter:IA(a,t)};if(mH(a)&&Oc(a.bin))return{...a,bin:vH(a.bin)};if(pH(a)){const{selection:s,...o}=a.from;return s?{...a,from:{param:s,...o}}:a}return a});return{...i,transform:r}}return e}function yH(e,t){var i,r;const n=Pe(e);if(pe(n)&&Oc(n.bin)&&(n.bin=vH(n.bin)),zc(n)&&((r=(i=n.scale)==null?void 0:i.domain)!=null&&r.selection)){const{selection:a,...s}=n.scale.domain;n.scale.domain={...s,...a?{param:a}:{}}}if(M0(n))if(oe(n.condition))n.condition=n.condition.map(a=>{const{selection:s,param:o,test:l,...f}=a;return o?a:{...f,test:IA(a,t)}});else{const{selection:a,param:s,test:o,...l}=yH(n.condition,t);n.condition=s?n.condition:{...l,test:IA(n.condition,t)}}return n}function vH(e){const t=e.extent;if(t!=null&&t.selection){const{selection:n,...i}=t;return{...e,extent:{...i,param:n}}}return e}function IA(e,t){const n=i=>Xf(i,r=>{var a;const s=t.emptySelections[r]??!0,o={param:r,empty:s};return(a=t.selectionPredicates)[r]??(a[r]=[]),t.selectionPredicates[r].push(o),o});return e.selection?n(e.selection):Xf(e.test||e.filter,i=>i.selection?n(i.selection):i)}class qA extends t3{map(t,n){const i=n.selections??[];if(t.params&&!_o(t)){const r=[];for(const a of t.params)Kk(a)?i.push(a):r.push(a);t.params=r}return n.selections=i,super.map(t,n)}mapUnit(t,n){const i=n.selections;if(!i||!i.length)return t;const r=(n.path??[]).concat(t.name),a=[];for(const s of i)if(!s.views||!s.views.length)a.push(s);else for(const o of s.views)(_e(o)&&(o===t.name||r.includes(o))||oe(o)&&o.map(l=>r.indexOf(l)).every((l,f,d)=>l!==-1&&(f===0||l>d[f-1])))&&a.push(s);return a.length&&(t.params=a),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=qA.prototype[e];qA.prototype[e]=function(n,i){return t.call(this,n,rxe(n,i))}}function rxe(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function bH(e,t){t===void 0&&(t=cH(e.config));const n=uxe(e,t),{width:i,height:r}=e,a=lxe(n,{width:i,height:r,autosize:e.autosize},t);return{...n,...a?{autosize:a}:{}}}const axe=new Fbe,sxe=new ixe,oxe=new qA;function uxe(e,t={}){const n={config:t};return oxe.map(axe.map(sxe.map(e,n),n),n)}function jz(e){return _e(e)?{type:e}:e??{}}function lxe(e,t,n){let{width:i,height:r}=t;const a=_o(e)||_x(e),s={};a?i=="container"&&r=="container"?(s.type="fit",s.contains="padding"):i=="container"?(s.type="fit-x",s.contains="padding"):r=="container"&&(s.type="fit-y",s.contains="padding"):(i=="container"&&(ge(fz("width")),i=void 0),r=="container"&&(ge(fz("height")),r=void 0));const o={type:"pad",...s,...n?jz(n.autosize):{},...jz(e.autosize)};if(o.type==="fit"&&!a&&(ge(t1e),o.type="pad"),i=="container"&&!(o.type=="fit"||o.type=="fit-x")&&ge(dz("width")),r=="container"&&!(o.type=="fit"||o.type=="fit-y")&&ge(dz("height")),!ar(o,{type:"pad"}))return o}function cxe(e){return["fit","fit-x","fit-y"].includes(e)}function fxe(e){return e?`fit-${ax(e)}`:"fit"}const dxe=["background","padding"];function Pz(e,t){const n={};for(const i of dxe)e&&e[i]!==void 0&&(n[i]=ir(e[i]));return t&&(n.params=e.params),n}class wo{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new wo(Pe(this.explicit),Pe(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return tn(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:i}){n!==void 0&&this.set(t,n,i)}set(t,n,i){return delete this[i?"implicit":"explicit"][t],this[i?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:i}){n[t]!==void 0?this.set(t,n[t],!0):i[t]!==void 0&&this.set(t,i[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of fe(t.combine())){const i=t.getWithExplicit(n);this.setWithExplicit(n,i)}}}function Pa(e){return{explicit:!0,value:e}}function er(e){return{explicit:!1,value:e}}function xH(e){return(t,n,i,r)=>{const a=e(t.value,n.value);return a>0?t:a<0?n:wx(t,n,i,r)}}function wx(e,t,n,i){return e.explicit&&t.explicit&&ge(H1e(n,i,e.value,t.value)),e}function Du(e,t,n,i,r=wx){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:ar(e.value,t.value)?e:r(e,t,n,i)}class hxe extends wo{constructor(t={},n={},i=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=i}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function $d(e){return he(e,"url")}function Bp(e){return he(e,"values")}function EH(e){return he(e,"name")&&!$d(e)&&!Bp(e)&&!bu(e)}function bu(e){return e&&(SH(e)||_H(e)||i3(e))}function SH(e){return he(e,"sequence")}function _H(e){return he(e,"sphere")}function i3(e){return he(e,"graticule")}var Ht;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup",e[e.PreFilterInvalid=5]="PreFilterInvalid",e[e.PostFilterInvalid=6]="PostFilterInvalid"})(Ht||(Ht={}));function wH({invalid:e,isPath:t}){switch(bq(e,{isPath:t})){case"filter":return{marks:"exclude-invalid-values",scales:"exclude-invalid-values"};case"break-paths-show-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"include-invalid-values"};case"break-paths-filter-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"exclude-invalid-values"};case"show":return{marks:"include-invalid-values",scales:"include-invalid-values"}}}function gxe(e){const{marks:t,scales:n}=wH(e);return t===n?Ht.Main:n==="include-invalid-values"?Ht.PreFilterInvalid:Ht.PostFilterInvalid}class xt{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){ge(v1e);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const r of this._children)r.parent=t;this._children=[],t.removeChild(this);const i=t.parent.removeChild(t);this._parent=n,n.addChild(this,i),t.parent=this}}class Bi extends xt{clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,i,r){super(t,n),this.type=i,this.refCounts=r,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${xI()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function p_(e){return e.as!==void 0}function Iz(e){return`${e}_end`}class Za extends xt{clone(){return new Za(null,Pe(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){const i=n.reduceFieldDef((r,a,s)=>{const{field:o,timeUnit:l}=a;if(l){let f;if(Nc(l)){if(qt(n)){const{mark:d,markDef:h,config:p}=n,y=Ru({fieldDef:a,markDef:h,config:p});(Up(d)||y)&&(f={timeUnit:Tn(l),field:o})}}else f={as:xe(a,{forAs:!0}),field:o,timeUnit:l};if(qt(n)){const{mark:d,markDef:h,config:p}=n,y=Ru({fieldDef:a,markDef:h,config:p});Up(d)&&nn(s)&&y!==.5&&(f.rectBandPosition=y)}f&&(r[nt(f)]=f)}return r},{});return At(i)?null:new Za(t,i)}static makeFromTransform(t,n){const{timeUnit:i,...r}={...n},a=Tn(i),s={...r,timeUnit:a};return new Za(t,{[nt(s)]:s})}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[i,r]of ku(this.timeUnits)){const a=p_(r)?r.as:`${r.field}_end`;t.has(a)||(n[i]=r)}this.timeUnits=n}producedFields(){return new Set(qn(this.timeUnits).map(t=>p_(t)?t.as:Iz(t.field)))}dependentFields(){return new Set(qn(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${nt(this.timeUnits)}`}assemble(){const t=[];for(const n of qn(this.timeUnits)){const{rectBandPosition:i}=n,r=Tn(n.timeUnit);if(p_(n)){const{field:a,as:s}=n,{unit:o,utc:l,...f}=r,d=[s,`${s}_end`];t.push({field:Hr(a),type:"timeunit",...o?{units:lx(o)}:{},...l?{timezone:"utc"}:{},...f,as:d}),t.push(...qz(d,i,r))}else if(n){const{field:a}=n,s=a.replaceAll("\\.","."),o=AH({timeUnit:r,field:s}),l=Iz(s);t.push({type:"formula",expr:o,as:l}),t.push(...qz([s,l],i,r))}}return t}}const Ax="offsetted_rect_start",Cx="offsetted_rect_end";function AH({timeUnit:e,field:t,reverse:n}){const{unit:i,utc:r}=e,a=tq(i),{part:s,step:o}=aq(a,e.step);return`${r?"utcOffset":"timeOffset"}('${s}', ${vt(t)}, ${n?-o:o})`}function qz([e,t],n,i){if(n!==void 0&&n!==.5){const r=vt(e),a=vt(t);return[{type:"formula",expr:Hz([AH({timeUnit:i,field:e,reverse:!0}),r],n+.5),as:`${e}_${Ax}`},{type:"formula",expr:Hz([r,a],n+.5),as:`${e}_${Cx}`}]}return[]}function Hz([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const D0="_tuple_fields";class pxe{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const mxe={defined:()=>!0,parse:(e,t,n)=>{const i=t.name,r=t.project??(t.project=new pxe),a={},s={},o=new Set,l=(v,b)=>{const E=b==="visual"?v.channel:v.field;let _=Lt(`${i}_${E}`);for(let w=1;o.has(_);w++)_=Lt(`${i}_${E}_${w}`);return o.add(_),{[b]:_}},f=t.type,d=e.config.selection[f],h=n.value!==void 0?Se(n.value):null;let{fields:p,encodings:y}=Ee(n.select)?n.select:{};if(!p&&!y&&h){for(const v of h)if(Ee(v))for(const b of fe(v))Mme(b)?(y||(y=[])).push(b):f==="interval"?(ge(f1e),y=d.encodings):(p??(p=[])).push(b)}!p&&!y&&(y=d.encodings,"fields"in d&&(p=d.fields));for(const v of y??[]){const b=e.fieldDef(v);if(b){let E=b.field;if(b.aggregate){ge(n1e(v,b.aggregate));continue}else if(!E){ge(gz(v));continue}if(b.timeUnit&&!Nc(b.timeUnit)){E=e.vgField(v);const _={timeUnit:b.timeUnit,as:E,field:b.field};s[nt(_)]=_}if(!a[E]){const _=f==="interval"&&xs(v)&&va(e.getScaleComponent(v).get("type"))?"R":b.bin?"R-RE":"E",w={field:E,channel:v,type:_,index:r.items.length};w.signals={...l(w,"data"),...l(w,"visual")},r.items.push(a[E]=w),r.hasField[E]=a[E],r.hasSelectionId=r.hasSelectionId||E===Ea,CI(v)?(w.geoChannel=v,w.channel=AI(v),r.hasChannel[w.channel]=a[E]):r.hasChannel[v]=a[E]}}else ge(gz(v))}for(const v of p??[]){if(r.hasField[v])continue;const b={type:"E",field:v,index:r.items.length};b.signals={...l(b,"data")},r.items.push(b),r.hasField[v]=b,r.hasSelectionId=r.hasSelectionId||v===Ea}h&&(t.init=h.map(v=>r.items.map(b=>Ee(v)?v[b.geoChannel||b.channel]!==void 0?v[b.geoChannel||b.channel]:v[b.field]:v))),At(s)||(r.timeUnit=new Za(null,s))},signals:(e,t,n)=>{const i=t.name+D0;return n.filter(a=>a.name===i).length>0||t.project.hasSelectionId?n:n.concat({name:i,value:t.project.items.map(MH)})}},CH="_curr",sy="anim_value",Nf="anim_clock",HA="eased_anim_clock",$H="min_extent",TH="max_range_extent",m_="last_tick_at",y_="is_playing",yxe=1/60*1e3,vxe=(e,t)=>[{name:HA,update:Nf},{name:`${e}_domain`,init:`domain('${t}')`},{name:$H,init:`extent(${e}_domain)[0]`},{name:TH,init:`extent(range('${t}'))[1]`},{name:sy,update:`invert('${t}', ${HA})`}],bxe={defined:e=>e.type==="point",topLevelSignals:(e,t,n)=>(Ka(t)&&(n=n.concat([{name:Nf,init:"0",on:[{events:{type:"timer",throttle:yxe},update:`${y_} ? (${Nf} + (now() - ${m_}) > ${TH} ? 0 : ${Nf} + (now() - ${m_})) : ${Nf}`}]},{name:m_,init:"now()",on:[{events:[{signal:Nf},{signal:y_}],update:"now()"}]},{name:y_,init:"true"}])),n),signals:(e,t,n)=>{const i=t.name,r=i+D0,a=t.project,s="(item().isVoronoi ? datum.datum : datum)",o=qn(e.component.selection??{}).reduce((d,h)=>h.type==="interval"?d.concat(h.name+Qf):d,[]).map(d=>`indexof(item().mark.name, '${d}') < 0`).join(" && "),l=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${o?` && ${o}`:""}`;let f=`unit: ${Wl(e)}, `;if(t.project.hasSelectionId)f+=`${Ea}: ${s}[${me(Ea)}]`;else if(Ka(t))f+=`fields: ${r}, values: [${sy} ? ${sy} : ${$H}]`;else{const d=a.items.map(h=>{const p=e.fieldDef(h.channel);return p!=null&&p.bin?`[${s}[${me(e.vgField(h.channel,{}))}], ${s}[${me(e.vgField(h.channel,{binSuffix:"end"}))}]]`:`${s}[${me(h.field)}]`}).join(", ");f+=`fields: ${r}, values: [${d}]`}if(Ka(t))return n.concat(vxe(t.name,e.scaleName(qu)),[{name:i+po,on:[{events:[{signal:HA},{signal:sy}],update:`{${f}}`,force:!0}]}]);{const d=t.events;return n.concat([{name:i+po,on:d?[{events:d,update:`${l} ? {${f}} : null`,force:!0}]:[]}])}}};function MH(e){const{signals:t,hasLegend:n,index:i,...r}=e;return r.field=Hr(r.field),r}function yc(e,t=!0,n=ui){if(oe(e)){const i=e.map(r=>yc(r,t,n));return t?`[${i.join(", ")}]`:i}else if(Dc(e))return n(t?hc(e):pye(e));return t?n(Ct(e)):e}function xxe(e,t){for(const n of qn(e.component.selection??{})){const i=n.name;let r=`${i}${po}, ${n.resolve==="global"?"true":`{unit: ${Wl(e)}}`}`;for(const a of Tx)a.defined(n)&&(a.signals&&(t=a.signals(e,n,t)),a.modifyExpr&&(r=a.modifyExpr(e,n,r)));t.push({name:i+Xxe,on:[{events:{signal:n.name+po},update:`modify(${me(n.name+vc)}, ${r})`}]})}return r3(t)}function Exe(e,t){if(e.component.selection&&fe(e.component.selection).length){const n=me(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:Pu("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return r3(t)}function Sxe(e,t){let n=!1;for(const i of qn(e.component.selection??{})){const r=i.name,a=me(r+vc);if(t.filter(o=>o.name===r).length===0){const o=i.resolve==="global"?"union":i.resolve,l=i.type==="point"?", true, true)":")";t.push({name:i.name,update:`${YH}(${a}, ${me(o)}${l}`})}n=!0;for(const o of Tx)o.defined(i)&&o.topLevelSignals&&(t=o.topLevelSignals(e,i,t))}return n&&t.filter(r=>r.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),r3(t)}function _xe(e,t){const n=[],i=[],r=Wl(e,{escape:!1});for(const a of qn(e.component.selection??{})){const s={name:a.name+vc};if(a.project.hasSelectionId&&(s.transform=[{type:"collect",sort:{field:Ea}}]),a.init){const l=a.project.items.map(MH);s.values=a.project.hasSelectionId?a.init.map(f=>({unit:r,[Ea]:yc(f,!1)[0]})):a.init.map(f=>({unit:r,fields:l,values:yc(f,!1)}))}if([...n,...t].filter(l=>l.name===a.name+vc).length||n.push(s),Ka(a)&&t.length){const l=e.lookupDataSource(e.getDataName(Ht.Main)),f=t.find(h=>h.name===l),d=f.transform.find(h=>h.type==="filter"&&h.expr.includes("vlSelectionTest"));if(d){f.transform=f.transform.filter(p=>p!==d);const h={name:f.name+CH,source:f.name,transform:[d]};i.push(h)}}}return n.concat(t,i)}function kH(e,t){for(const n of qn(e.component.selection??{}))for(const i of Tx)i.defined(n)&&i.marks&&(t=i.marks(e,n,t));return t}function wxe(e,t){for(const n of e.children)qt(n)&&(t=kH(n,t));return t}function Axe(e,t,n,i){const r=ZH(e,t.param,t);return{signal:va(n.get("type"))&&oe(i)&&i[0]>i[1]?`isValid(${r}) && reverse(${r})`:r}}function r3(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}const oo={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const i of t.project.items){const r=i.channel;if(!xs(r))continue;const a=e.getScaleComponent(r),s=a?a.get("type"):void 0;if(s=="sequential"&&ge(s1e),!a||!va(s)){ge(a1e);continue}a.set("selectionExtent",{param:t.name,field:i.field},!0),n.push(i)}},topLevelSignals:(e,t,n)=>{const i=t.scales.filter(s=>n.filter(o=>o.name===s.signals.data).length===0);if(!e.parent||YA(e)||i.length===0)return n;const r=n.find(s=>s.name===t.name);let a=r.update;if(a.includes(YH))r.update=`{${i.map(s=>`${me(Hr(s.field))}: ${s.signals.data}`).join(", ")}}`;else{for(const s of i){const o=`${me(Hr(s.field))}: ${s.signals.data}`;a.includes(o)||(a=`${a.substring(0,a.length-1)}, ${o}}`)}r.update=a}return n.concat(i.map(s=>({name:s.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!YA(e))for(const i of t.scales){const r=n.find(a=>a.name===i.signals.data);r.push="outer",delete r.value,delete r.update}return n}};function GA(e,t){return`domain(${me(e.scaleName(t))})`}function YA(e){return e.parent&&rh(e.parent)&&(!e.parent.parent||YA(e.parent.parent))}const Qf="_brush",OH="_scale_trigger",Ag="geo_interval_init_tick",RH="_init",Cxe="_center",$xe={defined:e=>e.type==="interval",parse:(e,t,n)=>{var i;if(e.hasProjection){const r={...Ee(n.select)?n.select:{}};r.fields=[Ea],r.encodings||(r.encodings=n.value?fe(n.value):[Ta,$a]),n.select={type:"interval",...r}}if(t.translate&&!oo.defined(t)){const r=`!event.item || event.item.mark.name !== ${me(t.name+Qf)}`;for(const a of t.events){if(!a.between){ge(`${a} is not an ordered event stream for interval selections.`);continue}const s=Se((i=a.between[0]).filter??(i.filter=[]));s.includes(r)||s.push(r)}}},signals:(e,t,n)=>{const i=t.name,r=i+po,a=qn(t.project.hasChannel).filter(o=>o.channel===Ut||o.channel===On),s=t.init?t.init[0]:null;if(n.push(...a.reduce((o,l)=>o.concat(Txe(e,t,l,s&&s[l.index])),[])),e.hasProjection){const o=me(e.projectionName()),l=e.projectionName()+Cxe,{x:f,y:d}=t.project.hasChannel,h=f&&f.signals.visual,p=d&&d.signals.visual,y=f?s&&s[f.index]:`${l}[0]`,v=d?s&&s[d.index]:`${l}[1]`,b=T=>e.getSizeSignalRef(T).signal,E=`[[${h?h+"[0]":"0"}, ${p?p+"[0]":"0"}],[${h?h+"[1]":b("width")}, ${p?p+"[1]":b("height")}]]`;s&&(n.unshift({name:i+RH,init:`[scale(${o}, [${f?y[0]:y}, ${d?v[0]:v}]), scale(${o}, [${f?y[1]:y}, ${d?v[1]:v}])]`}),(!f||!d)&&(n.find(R=>R.name===l)||n.unshift({name:l,update:`invert(${o}, [${b("width")}/2, ${b("height")}/2])`})));const _=`intersect(${E}, {markname: ${me(e.getName("marks"))}}, unit.mark)`,w=`{unit: ${Wl(e)}}`,A=`vlSelectionTuples(${_}, ${w})`,M=a.map(T=>T.signals.visual);return n.concat({name:r,on:[{events:[...M.length?[{signal:M.join(" || ")}]:[],...s?[{signal:Ag}]:[]],update:A}]})}else{if(!oo.defined(t)){const f=i+OH,d=a.map(h=>{const p=h.channel,{data:y,visual:v}=h.signals,b=me(e.scaleName(p)),E=e.getScaleComponent(p).get("type"),_=va(E)?"+":"";return`(!isArray(${y}) || (${_}invert(${b}, ${v})[0] === ${_}${y}[0] && ${_}invert(${b}, ${v})[1] === ${_}${y}[1]))`});d.length&&n.push({name:f,value:{},on:[{events:a.map(h=>({scale:e.scaleName(h.channel)})),update:d.join(" && ")+` ? ${f} : {}`}]})}const o=a.map(f=>f.signals.data),l=`unit: ${Wl(e)}, fields: ${i+D0}, values`;return n.concat({name:r,...s?{init:`{${l}: ${yc(s)}}`}:{},...o.length?{on:[{events:[{signal:o.join(" || ")}],update:`${o.join(" && ")} ? {${l}: [${o}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(qt(e)&&e.hasProjection&&t.init&&(n.filter(r=>r.name===Ag).length||n.unshift({name:Ag,value:null,on:[{events:"timer{1}",update:`${Ag} === null ? {} : ${Ag}`}]})),n),marks:(e,t,n)=>{const i=t.name,{x:r,y:a}=t.project.hasChannel,s=r==null?void 0:r.signals.visual,o=a==null?void 0:a.signals.visual,l=`data(${me(t.name+vc)})`;if(oo.defined(t)||!r&&!a)return n;const f={x:r!==void 0?{signal:`${s}[0]`}:{value:0},y:a!==void 0?{signal:`${o}[0]`}:{value:0},x2:r!==void 0?{signal:`${s}[1]`}:{field:{group:"width"}},y2:a!==void 0?{signal:`${o}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const E of fe(f))f[E]=[{test:`${l}.length && ${l}[0].unit === ${Wl(e)}`,...f[E]},{value:0}];const{fill:d,fillOpacity:h,cursor:p,...y}=t.mark,v=fe(y).reduce((E,_)=>(E[_]=[{test:[r!==void 0&&`${s}[0] !== ${s}[1]`,a!==void 0&&`${o}[0] !== ${o}[1]`].filter(w=>w).join(" && "),value:y[_]},{value:null}],E),{}),b=p??(t.translate?"move":null);return[{name:`${i+Qf}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:d},fillOpacity:{value:h}},update:f}},...n,{name:i+Qf,type:"rect",clip:!0,encode:{enter:{...b?{cursor:{value:b}}:{},fill:{value:"transparent"}},update:{...f,...v}}}]}};function Txe(e,t,n,i){const r=!e.hasProjection,a=n.channel,s=n.signals.visual,o=me(r?e.scaleName(a):e.projectionName()),l=p=>`scale(${o}, ${p})`,f=e.getSizeSignalRef(a===Ut?"width":"height").signal,d=`${a}(unit)`,h=t.events.reduce((p,y)=>[...p,{events:y.between[0],update:`[${d}, ${d}]`},{events:y,update:`[${s}[0], clamp(${d}, 0, ${f})]`}],[]);if(r){const p=n.signals.data,y=oo.defined(t),v=e.getScaleComponent(a),b=v?v.get("type"):void 0,E=i?{init:yc(i,!0,l)}:{value:[]};return h.push({events:{signal:t.name+OH},update:va(b)?`[${l(`${p}[0]`)}, ${l(`${p}[1]`)}]`:"[0, 0]"}),y?[{name:p,on:[]}]:[{name:s,...E,on:h},{name:p,...i?{init:yc(i)}:{},on:[{events:{signal:s},update:`${s}[0] === ${s}[1] ? null : invert(${o}, ${s})`}]}]}else{const p=a===Ut?0:1,y=t.name+RH,v=i?{init:`[${y}[0][${p}], ${y}[1][${p}]]`}:{value:[]};return[{name:s,...v,on:h}]}}function eh({model:e,channelDef:t,vgChannel:n,invalidValueRef:i,mainRefFn:r}){const a=M0(t)&&t.condition;let s=[];a&&(s=Se(a).map(f=>{const d=r(f);if(pve(f)){const{param:h,empty:p}=f;return{test:QH(e,{param:h,empty:p}),...d}}else return{test:Nv(e,f.test),...d}})),i!==void 0&&s.push(i);const o=r(t);return o!==void 0&&s.push(o),s.length>1||s.length===1&&s[0].test?{[n]:s}:s.length===1?{[n]:s[0]}:{}}function a3(e,t="text"){const n=e.encoding[t];return eh({model:e,channelDef:n,vgChannel:t,mainRefFn:i=>$x(i,e.config),invalidValueRef:void 0})}function $x(e,t,n="datum"){if(e){if(ba(e))return zt(e.value);if(qe(e)){const{format:i,formatType:r}=Tv(e);return Bk({fieldOrDatumDef:e,format:i,formatType:r,expr:n,config:t})}}}function DH(e,t={}){const{encoding:n,markDef:i,config:r,stack:a}=e,s=n.tooltip;if(oe(s))return{tooltip:Gz({tooltip:s},a,r,t)};{const o=t.reactiveGeom?"datum.datum":"datum";return eh({model:e,channelDef:s,vgChannel:"tooltip",mainRefFn:f=>{const d=$x(f,r,o);if(d)return d;if(f===null)return;let h=wt("tooltip",i,r);if(h===!0&&(h={content:"encoding"}),_e(h))return{value:h};if(Ee(h))return ke(h)?h:h.content==="encoding"?Gz(n,a,r,t):{signal:o}},invalidValueRef:void 0})}}function NH(e,t,n,{reactiveGeom:i}={}){const r={...n,...n.tooltipFormat},a=new Set,s=i?"datum.datum":"datum",o=[];function l(d,h){const p=kc(h),y=Ci(d)?d:{...d,type:e[p].type},v=y.title||qk(y,r),b=Se(v).join(", ").replaceAll(/"/g,'\\"');let E;if(nn(h)){const _=h==="x"?"x2":"y2",w=xa(e[_]);if(Fn(y.bin)&&w){const A=xe(y,{expr:s}),M=xe(w,{expr:s}),{format:T,formatType:R}=Tv(y);E=$0(A,M,T,R,r),a.add(_)}}if((nn(h)||h===Xr||h===Ca)&&t&&t.fieldChannel===h&&t.offset==="normalize"){const{format:_,formatType:w}=Tv(y);E=Bk({fieldOrDatumDef:y,format:_,formatType:w,expr:s,config:r,normalizeStack:!0}).signal}E??(E=$x(y,r,s).signal),o.push({channel:h,key:b,value:E})}Gk(e,(d,h)=>{pe(d)?l(d,h):yx(d)&&l(d.condition,h)});const f={};for(const{channel:d,key:h,value:p}of o)!a.has(d)&&!f[h]&&(f[h]=p);return f}function Gz(e,t,n,{reactiveGeom:i}={}){const r=NH(e,t,n,{reactiveGeom:i}),a=ku(r).map(([s,o])=>`"${s}": ${o}`);return a.length>0?{signal:`{${a.join(", ")}}`}:void 0}function Mxe(e){const{markDef:t,config:n}=e,i=wt("aria",t,n);return i===!1?{}:{...i?{aria:i}:{},...kxe(e),...Oxe(e)}}function kxe(e){const{mark:t,markDef:n,config:i}=e;if(i.aria===!1)return{};const r=wt("ariaRoleDescription",n,i);return r!=null?{ariaRoleDescription:{value:r}}:Ce(Kme,t)?{}:{ariaRoleDescription:{value:t}}}function Oxe(e){const{encoding:t,markDef:n,config:i,stack:r}=e,a=t.description;if(a)return eh({model:e,channelDef:a,vgChannel:"description",mainRefFn:l=>$x(l,e.config),invalidValueRef:void 0});const s=wt("description",n,i);if(s!=null)return{description:zt(s)};if(i.aria===!1)return{};const o=NH(t,r,i);if(!At(o))return{description:{signal:ku(o).map(([l,f],d)=>`"${d>0?"; ":""}${l}: " + (${f})`).join(" + ")}}}function Bn(e,t,n={}){const{markDef:i,encoding:r,config:a}=t,{vgChannel:s}=n;let{defaultRef:o,defaultValue:l}=n;const f=r[e];o===void 0&&(l??(l=wt(e,i,a,{vgChannel:s,ignoreVgConfig:!M0(f)})),l!==void 0&&(o=zt(l)));const d={markDef:i,config:a,scaleName:t.scaleName(e),scale:t.getScaleComponent(e)},h=Eq({...d,scaleChannel:e,channelDef:f});return eh({model:t,channelDef:f,vgChannel:s??e,invalidValueRef:h,mainRefFn:y=>Uk({...d,channel:e,channelDef:y,stack:null,defaultRef:o})})}function zH(e,t={filled:void 0}){const{markDef:n,encoding:i,config:r}=e,{type:a}=n,s=t.filled??wt("filled",n,r),o=Je(["bar","point","circle","square","geoshape"],a)?"transparent":void 0,l=wt(s===!0?"color":void 0,n,r,{vgChannel:"fill"})??r.mark[s===!0&&"color"]??o,f=wt(s===!1?"color":void 0,n,r,{vgChannel:"stroke"})??r.mark[s===!1&&"color"],d=s?"fill":"stroke",h={...l?{fill:zt(l)}:{},...f?{stroke:zt(f)}:{}};return n.color&&(s?n.fill:n.stroke)&&ge(YI("property",{fill:"fill"in n,stroke:"stroke"in n})),{...h,...Bn("color",e,{vgChannel:d,defaultValue:s?l:f}),...Bn("fill",e,{defaultValue:i.fill?l:void 0}),...Bn("stroke",e,{defaultValue:i.stroke?f:void 0})}}function Rxe(e){const{encoding:t,mark:n}=e,i=t.order;return!Wu(n)&&ba(i)?eh({model:e,channelDef:i,vgChannel:"zindex",mainRefFn:r=>zt(r.value),invalidValueRef:void 0}):{}}function Td({channel:e,markDef:t,encoding:n={},model:i,bandPosition:r}){const a=`${e}Offset`,s=t[a],o=n[a];if((a==="xOffset"||a==="yOffset")&&o)return{offsetType:"encoding",offset:Uk({channel:a,channelDef:o,markDef:t,config:i==null?void 0:i.config,scaleName:i.scaleName(a),scale:i.getScaleComponent(a),stack:null,defaultRef:zt(s),bandPosition:r})};const l=t[a];return l?{offsetType:"visual",offset:l}:{}}function Ei(e,t,{defaultPos:n,vgChannel:i}){const{encoding:r,markDef:a,config:s,stack:o}=t,l=r[e],f=r[bs(e)],d=t.scaleName(e),h=t.getScaleComponent(e),{offset:p,offsetType:y}=Td({channel:e,markDef:a,encoding:r,model:t,bandPosition:.5}),v=s3({model:t,defaultPos:n,channel:e,scaleName:d,scale:h}),b=!l&&nn(e)&&(r.latitude||r.longitude)?{field:t.getName(e)}:Dxe({channel:e,channelDef:l,channel2Def:f,markDef:a,config:s,scaleName:d,scale:h,stack:o,offset:p,defaultRef:v,bandPosition:y==="encoding"?0:void 0});return b?{[i||e]:b}:void 0}function Dxe(e){const{channel:t,channelDef:n,scaleName:i,stack:r,offset:a,markDef:s}=e;if(qe(n)&&r&&t===r.fieldChannel){if(pe(n)){let o=n.bandPosition;if(o===void 0&&s.type==="text"&&(t==="radius"||t==="theta")&&(o=.5),o!==void 0)return Av({scaleName:i,fieldOrDatumDef:n,startSuffix:"start",bandPosition:o,offset:a})}return Xl(n,i,{suffix:"end"},{offset:a})}return Lk(e)}function s3({model:e,defaultPos:t,channel:n,scaleName:i,scale:r}){const{markDef:a,config:s}=e;return()=>{const o=kc(n),l=Ou(n),f=wt(n,a,s,{vgChannel:l});if(f!==void 0)return fp(n,f);switch(t){case"zeroOrMin":return Yz({scaleName:i,scale:r,mode:"zeroOrMin",mainChannel:o,config:s});case"zeroOrMax":return Yz({scaleName:i,scale:r,mode:{zeroOrMax:{widthSignal:e.width.signal,heightSignal:e.height.signal}},mainChannel:o,config:s});case"mid":return{...e[Gi(n)],mult:.5}}}}function Yz({mainChannel:e,config:t,...n}){const i=xq(n),{mode:r}=n;if(i)return i;switch(e){case"radius":{if(r==="zeroOrMin")return{value:0};const{widthSignal:a,heightSignal:s}=r.zeroOrMax;return{signal:`min(${a},${s})/2`}}case"theta":return r==="zeroOrMin"?{value:0}:{signal:"2*PI"};case"x":return r==="zeroOrMin"?{value:0}:{field:{group:"width"}};case"y":return r==="zeroOrMin"?{field:{group:"height"}}:{value:0}}}const Nxe={left:"x",center:"xc",right:"x2"},zxe={top:"y",middle:"yc",bottom:"y2"};function FH(e,t,n,i="middle"){if(e==="radius"||e==="theta")return Ou(e);const r=e==="x"?"align":"baseline",a=wt(r,t,n);let s;return ke(a)?(ge(D1e(r)),s=void 0):s=a,e==="x"?Nxe[s||(i==="top"?"left":"center")]:zxe[s||i]}function Rv(e,t,{defaultPos:n,defaultPos2:i,range:r}){return r?LH(e,t,{defaultPos:n,defaultPos2:i}):Ei(e,t,{defaultPos:n})}function LH(e,t,{defaultPos:n,defaultPos2:i}){const{markDef:r,config:a}=t,s=bs(e),o=Gi(e),l=Fxe(t,i,s),f=l[o]?FH(e,r,a):Ou(e);return{...Ei(e,t,{defaultPos:n,vgChannel:f}),...l}}function Fxe(e,t,n){const{encoding:i,mark:r,markDef:a,stack:s,config:o}=e,l=kc(n),f=Gi(n),d=Ou(n),h=i[l],p=e.scaleName(l),y=e.getScaleComponent(l),{offset:v}=n in i||n in a?Td({channel:n,markDef:a,encoding:i,model:e}):Td({channel:l,markDef:a,encoding:i,model:e});if(!h&&(n==="x2"||n==="y2")&&(i.latitude||i.longitude)){const E=Gi(n),_=e.markDef[E];return _!=null?{[E]:{value:_}}:{[d]:{field:e.getName(n)}}}const b=Lxe({channel:n,channelDef:h,channel2Def:i[n],markDef:a,config:o,scaleName:p,scale:y,stack:s,offset:v,defaultRef:void 0});return b!==void 0?{[d]:b}:_1(n,a)||_1(n,{[n]:DA(n,a,o.style),[f]:DA(f,a,o.style)})||_1(n,o[r])||_1(n,o.mark)||{[d]:s3({model:e,defaultPos:t,channel:n,scaleName:p,scale:y})()}}function Lxe({channel:e,channelDef:t,channel2Def:n,markDef:i,config:r,scaleName:a,scale:s,stack:o,offset:l,defaultRef:f}){return qe(t)&&o&&e.charAt(0)===o.fieldChannel.charAt(0)?Xl(t,a,{suffix:"start"},{offset:l}):Lk({channel:e,channelDef:n,scaleName:a,scale:s,stack:o,markDef:i,config:r,offset:l,defaultRef:f})}function _1(e,t){const n=Gi(e),i=Ou(e);if(t[i]!==void 0)return{[i]:fp(e,t[i])};if(t[e]!==void 0)return{[i]:fp(e,t[e])};if(t[n]){const r=t[n];if(pc(r))ge($1e(n));else return{[n]:fp(e,r)}}}function go(e,t){const{config:n,encoding:i,markDef:r}=e,a=r.type,s=bs(t),o=Gi(t),l=i[t],f=i[s],d=e.getScaleComponent(t),h=d?d.get("type"):void 0,p=r.orient,y=i[o]??i.size??wt("size",r,n,{vgChannel:o}),v=kI(t),b=a==="bar"&&(t==="x"?p==="vertical":p==="horizontal")||a==="tick"&&(t==="y"?p==="vertical":p==="horizontal");return pe(l)&&(Dt(l.bin)||Fn(l.bin)||l.timeUnit&&!f)&&!(y&&!pc(y))&&!i[v]&&!Mn(h)?jxe({fieldDef:l,fieldDef2:f,channel:t,model:e}):(qe(l)&&Mn(h)||b)&&!f?Bxe(l,t,e):LH(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function Uxe(e,t,n,i,r,a,s){if(pc(r))if(n){const l=n.get("type");if(l==="band"){let f=`bandwidth('${t}')`;r.band!==1&&(f=`${r.band} * ${f}`);const d=ss("minBandSize",{type:s},i);return{signal:d?`max(${fa(d)}, ${f})`:f}}else r.band!==1&&(ge(L1e(l)),r=void 0)}else return{mult:r.band,field:{group:e}};else{if(ke(r))return r;if(r)return{value:r}}if(n){const l=n.get("range");if(Rc(l)&&dt(l.step))return{value:l.step-2}}if(!a){const{bandPaddingInner:l,barBandPaddingInner:f,rectBandPaddingInner:d,tickBandPaddingInner:h}=i.scale,p=tn(l,s==="tick"?h:s==="bar"?f:d);if(ke(p))return{signal:`(1 - (${p.signal})) * ${e}`};if(dt(p))return{signal:`${1-p} * ${e}`}}return{value:jA(i.view,e)-2}}function Bxe(e,t,n){var $,D;const{markDef:i,encoding:r,config:a,stack:s}=n,o=i.orient,l=n.scaleName(t),f=n.getScaleComponent(t),d=Gi(t),h=bs(t),p=kI(t),y=n.scaleName(p),v=n.getScaleComponent(ck(t)),b=i.type==="tick"||o==="horizontal"&&t==="y"||o==="vertical"&&t==="x";let E;(r.size||i.size)&&(b?E=Bn("size",n,{vgChannel:d,defaultRef:zt(i.size)}):ge(P1e(i.type)));const _=!!E,w=Tq({channel:t,fieldDef:e,markDef:i,config:a,scaleType:($=f||v)==null?void 0:$.get("type"),useVlSizeChannel:b});E=E||{[d]:Uxe(d,y||l,v||f,a,w,!!e,i.type)};const A=((D=f||v)==null?void 0:D.get("type"))==="band"&&pc(w)&&!_?"top":"middle",M=FH(t,i,a,A),T=M==="xc"||M==="yc",{offset:R,offsetType:O}=Td({channel:t,markDef:i,encoding:r,model:n,bandPosition:T?.5:0}),k=Lk({channel:t,channelDef:e,markDef:i,config:a,scaleName:l,scale:f,stack:s,offset:R,defaultRef:s3({model:n,defaultPos:"mid",channel:t,scaleName:l,scale:f}),bandPosition:T?O==="encoding"?0:.5:ke(w)?{signal:`(1-${w})/2`}:pc(w)?(1-w.band)/2:0});if(d)return{[M]:k,...E};{const z=Ou(h),P=E[d],q=R?{...P,offset:R}:P;return{[M]:k,[z]:oe(k)?[k[0],{...k[1],offset:q}]:{...k,offset:q}}}}function Xz(e,t,n,i,r,a,s){if(wI(e))return 0;const o=e==="x"||e==="y2",l=o?-t/2:t/2;if(ke(n)||ke(r)||ke(i)||a){const f=fa(n),d=fa(r),h=fa(i),p=fa(a),v=a?`(${s} < ${p} ? ${o?"":"-"}0.5 * (${p} - (${s})) : ${l})`:l,b=h?`${h} + `:"",E=f?`(${f} ? -1 : 1) * `:"",_=d?`(${d} + ${v})`:v;return{signal:b+E+_}}else return r=r||0,i+(n?-r-l:+r+l)}function jxe({fieldDef:e,fieldDef2:t,channel:n,model:i}){var D;const{config:r,markDef:a,encoding:s}=i,o=i.getScaleComponent(n),l=i.scaleName(n),f=o?o.get("type"):void 0,d=o.get("reverse"),h=Tq({channel:n,fieldDef:e,markDef:a,config:r,scaleType:f}),p=(D=i.component.axes[n])==null?void 0:D[0],y=(p==null?void 0:p.get("translate"))??.5,v=nn(n)?wt("binSpacing",a,r)??0:0,b=bs(n),E=Ou(n),_=Ou(b),w=ss("minBandSize",a,r),{offset:A}=Td({channel:n,markDef:a,encoding:s,model:i,bandPosition:0}),{offset:M}=Td({channel:b,markDef:a,encoding:s,model:i,bandPosition:0}),T=lve({fieldDef:e,scaleName:l}),R=Xz(n,v,d,y,A,w,T),O=Xz(b,v,d,y,M??A,w,T),k=ke(h)?{signal:`(1-${h.signal})/2`}:pc(h)?(1-h.band)/2:.5,$=Ru({fieldDef:e,fieldDef2:t,markDef:a,config:r});if(Dt(e.bin)||e.timeUnit){const z=e.timeUnit&&$!==.5;return{[_]:Vz({fieldDef:e,scaleName:l,bandPosition:k,offset:O,useRectOffsetField:z}),[E]:Vz({fieldDef:e,scaleName:l,bandPosition:ke(k)?{signal:`1-${k.signal}`}:1-k,offset:R,useRectOffsetField:z})}}else if(Fn(e.bin)){const z=Xl(e,l,{},{offset:O});if(pe(t))return{[_]:z,[E]:Xl(t,l,{},{offset:R})};if(Oc(e.bin)&&e.bin.step)return{[_]:z,[E]:{signal:`scale("${l}", ${xe(e,{expr:"datum"})} + ${e.bin.step})`,offset:R}}}ge(WI(b))}function Vz({fieldDef:e,scaleName:t,bandPosition:n,offset:i,useRectOffsetField:r}){return Av({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:i,...r?{startSuffix:Ax,endSuffix:Cx}:{}})}const Pxe=new Set(["aria","width","height"]);function Vr(e,t){const{fill:n=void 0,stroke:i=void 0}=t.color==="include"?zH(e):{};return{...Ixe(e.markDef,t),...Wz("fill",n),...Wz("stroke",i),...Bn("opacity",e),...Bn("fillOpacity",e),...Bn("strokeOpacity",e),...Bn("strokeWidth",e),...Bn("strokeDash",e),...Rxe(e),...DH(e),...a3(e,"href"),...Mxe(e)}}function Wz(e,t){return t?{[e]:t}:{}}function Ixe(e,t){return Zme.reduce((n,i)=>(!Pxe.has(i)&&he(e,i)&&t[i]!=="ignore"&&(n[i]=zt(e[i])),n),{})}function o3(e){const{config:t,markDef:n}=e,i=new Set;if(e.forEachFieldDef((r,a)=>{var f;let s;if(!xs(a)||!(s=e.getScaleType(a)))return;const o=sx(r.aggregate),l=Fk({scaleChannel:a,markDef:n,config:t,scaleType:s,isCountAggregate:o});if(sve(l)){const d=e.vgField(a,{expr:"datum",binSuffix:(f=e.stack)!=null&&f.impute?"mid":void 0});d&&i.add(d)}}),i.size>0)return{defined:{signal:[...i].map(a=>cx(a,!0)).join(" && ")}}}function Qz(e,t){if(t!==void 0)return{[e]:zt(t)}}const v_="voronoi",UH={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(v_)},marks:(e,t,n)=>{const{x:i,y:r}=t.project.hasChannel,a=e.mark;if(Wu(a))return ge(i1e(a)),n;const s={name:e.getName(v_),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...DH(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:i||!r?"datum.datum.x || 0":"0"},y:{expr:r||!i?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let o=0,l=!1;return n.forEach((f,d)=>{const h=f.name??"";h===e.component.mark[0].name?o=d:h.includes(v_)&&(l=!0)}),l||n.splice(o+1,0,s),n}},BH={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!Zk(e.bind),parse:(e,t,n)=>XH(t,n),topLevelSignals:(e,t,n)=>{const i=t.name,r=t.project,a=t.bind,s=t.init&&t.init[0],o=UH.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return r.items.forEach((l,f)=>{const d=Lt(`${i}_${l.field}`);n.filter(p=>p.name===d).length||n.unshift({name:d,...s?{init:yc(s[f])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${o}[${me(l.field)}] : null`}]:[],bind:a[l.field]??a[l.channel]??a})}),n},signals:(e,t,n)=>{const i=t.name,r=t.project,a=n.find(f=>f.name===i+po),s=i+D0,o=r.items.map(f=>Lt(`${i}_${f.field}`)),l=o.map(f=>`${f} !== null`).join(" && ");return o.length&&(a.update=`${l} ? {fields: ${s}, values: [${o.join(", ")}]} : null`),delete a.value,delete a.on,n}},Dv="_toggle",jH={defined:e=>e.type==="point"&&!Ka(e)&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+Dv,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+po,i=t.name+Dv;return`${i} ? null : ${n}, `+(t.resolve==="global"?`${i} ? null : true, `:`${i} ? null : {unit: ${Wl(e)}}, `)+`${i} ? ${n} : null`}},qxe={defined:e=>e.clear!==void 0&&e.clear!==!1&&!Ka(e),parse:(e,t)=>{t.clear&&(t.clear=_e(t.clear)?Pu(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(BH.defined(t))for(const i of t.project.items){const r=n.findIndex(a=>a.name===Lt(`${t.name}_${i.field}`));r!==-1&&n[r].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function i(r,a){r!==-1&&n[r].on&&n[r].on.push({events:t.clear,update:a})}if(t.type==="interval")for(const r of t.project.items){const a=n.findIndex(s=>s.name===r.signals.visual);if(i(a,"[0, 0]"),a===-1){const s=n.findIndex(o=>o.name===r.signals.data);i(s,"null")}}else{let r=n.findIndex(a=>a.name===t.name+po);i(r,"null"),jH.defined(t)&&(r=n.findIndex(a=>a.name===t.name+Dv),i(r,"false"))}return n}},PH={defined:e=>{const t=e.resolve==="global"&&e.bind&&Zk(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==Ea;return t&&!n&&ge(o1e),t&&n},parse:(e,t,n)=>{const i=Pe(n);if(i.select=_e(i.select)?{type:i.select,toggle:t.toggle}:{...i.select,toggle:t.toggle},XH(t,i),Ee(n.select)&&(n.select.on||n.select.clear)){const s='event.item && indexof(event.item.mark.role, "legend") < 0';for(const o of t.events)o.filter=Se(o.filter??[]),o.filter.includes(s)||o.filter.push(s)}const r=d_(t.bind)?t.bind.legend:"click",a=_e(r)?Pu(r,"view"):Se(r);t.bind={legend:{merge:a}}},topLevelSignals:(e,t,n)=>{const i=t.name,r=d_(t.bind)&&t.bind.legend,a=s=>o=>{const l=Pe(o);return l.markname=s,l};for(const s of t.project.items){if(!s.hasLegend)continue;const o=`${Lt(s.field)}_legend`,l=`${i}_${o}`;if(n.filter(d=>d.name===l).length===0){const d=r.merge.map(a(`${o}_symbols`)).concat(r.merge.map(a(`${o}_labels`))).concat(r.merge.map(a(`${o}_entries`)));n.unshift({name:l,...t.init?{}:{value:null},on:[{events:d,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:r.merge,update:`!event.item || !datum ? null : ${l}`,force:!0}]})}}return n},signals:(e,t,n)=>{const i=t.name,r=t.project,a=n.find(p=>p.name===i+po),s=i+D0,o=r.items.filter(p=>p.hasLegend).map(p=>Lt(`${i}_${Lt(p.field)}_legend`)),f=`${o.map(p=>`${p} !== null`).join(" && ")} ? {fields: ${s}, values: [${o.join(", ")}]} : null`;t.events&&o.length>0?a.on.push({events:o.map(p=>({signal:p})),update:f}):o.length>0&&(a.update=f,delete a.value,delete a.on);const d=n.find(p=>p.name===i+Dv),h=d_(t.bind)&&t.bind.legend;return d&&(t.events?d.on.push({...d.on[0],events:h}):d.on[0].events=h),n}};function Hxe(e,t,n){var r;const i=(r=e.fieldDef(t))==null?void 0:r.field;for(const a of qn(e.component.selection??{})){const s=a.project.hasField[i]??a.project.hasChannel[t];if(s&&PH.defined(a)){const o=n.get("selections")??[];o.push(a.name),n.set("selections",o,!1),s.hasLegend=!0}}}const IH="_translate_anchor",qH="_translate_delta",Gxe={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const i=t.name,r=oo.defined(t),a=i+IH,{x:s,y:o}=t.project.hasChannel;let l=Pu(t.translate,"scope");return r||(l=l.map(f=>(f.between[0].markname=i+Qf,f))),n.push({name:a,value:{},on:[{events:l.map(f=>f.between[0]),update:"{x: x(unit), y: y(unit)"+(s!==void 0?`, extent_x: ${r?GA(e,Ut):`slice(${s.signals.visual})`}`:"")+(o!==void 0?`, extent_y: ${r?GA(e,On):`slice(${o.signals.visual})`}`:"")+"}"}]},{name:i+qH,value:{},on:[{events:l,update:`{x: ${a}.x - x(unit), y: ${a}.y - y(unit)}`}]}),s!==void 0&&Zz(e,t,s,"width",n),o!==void 0&&Zz(e,t,o,"height",n),n}};function Zz(e,t,n,i,r){const a=t.name,s=a+IH,o=a+qH,l=n.channel,f=oo.defined(t),d=r.find(T=>T.name===n.signals[f?"data":"visual"]),h=e.getSizeSignalRef(i).signal,p=e.getScaleComponent(l),y=p&&p.get("type"),v=p&&p.get("reverse"),b=f?l===Ut?v?"":"-":v?"-":"":"",E=`${s}.extent_${l}`,_=`${b}${o}.${l} / ${f?`${h}`:`span(${E})`}`,w=!f||!p?"panLinear":y==="log"?"panLog":y==="symlog"?"panSymlog":y==="pow"?"panPow":"panLinear",A=f?y==="pow"?`, ${p.get("exponent")??1}`:y==="symlog"?`, ${p.get("constant")??1}`:"":"",M=`${w}(${E}, ${_}${A})`;d.on.push({events:{signal:o},update:f?M:`clampRange(${M}, 0, ${h})`})}const HH="_zoom_anchor",GH="_zoom_delta",Yxe={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const i=t.name,r=oo.defined(t),a=i+GH,{x:s,y:o}=t.project.hasChannel,l=me(e.scaleName(Ut)),f=me(e.scaleName(On));let d=Pu(t.zoom,"scope");return r||(d=d.map(h=>(h.markname=i+Qf,h))),n.push({name:i+HH,on:[{events:d,update:r?"{"+[l?`x: invert(${l}, x(unit))`:"",f?`y: invert(${f}, y(unit))`:""].filter(h=>h).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:a,on:[{events:d,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),s!==void 0&&Kz(e,t,s,"width",n),o!==void 0&&Kz(e,t,o,"height",n),n}};function Kz(e,t,n,i,r){const a=t.name,s=n.channel,o=oo.defined(t),l=r.find(w=>w.name===n.signals[o?"data":"visual"]),f=e.getSizeSignalRef(i).signal,d=e.getScaleComponent(s),h=d&&d.get("type"),p=o?GA(e,s):l.name,y=a+GH,v=`${a}${HH}.${s}`,b=!o||!d?"zoomLinear":h==="log"?"zoomLog":h==="symlog"?"zoomSymlog":h==="pow"?"zoomPow":"zoomLinear",E=o?h==="pow"?`, ${d.get("exponent")??1}`:h==="symlog"?`, ${d.get("constant")??1}`:"":"",_=`${b}(${p}, ${v}, ${y}${E})`;l.on.push({events:{signal:y},update:o?_:`clampRange(${_}, 0, ${f})`})}const vc="_store",po="_tuple",Xxe="_modify",YH="vlSelectionResolve",Tx=[bxe,$xe,mxe,jH,BH,oo,PH,qxe,Gxe,Yxe,UH];function Vxe(e){let t=e.parent;for(;t&&!lr(t);)t=t.parent;return t}function Wl(e,{escape:t}={escape:!0}){let n=t?me(e.name):e.name;const i=Vxe(e);if(i){const{facet:r}=i;for(const a of Fr)r[a]&&(n+=` + '__facet_${a}_' + (facet[${me(i.vgField(a))}])`)}return n}function u3(e){return qn(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function XH(e,t){(_e(t.select)||!t.select.on)&&delete e.events,(_e(t.select)||!t.select.clear)&&delete e.clear,(_e(t.select)||!t.select.toggle)&&delete e.toggle}function Ka(e){var t;return(t=e.events)==null?void 0:t.find(n=>"type"in n&&n.type==="timer")}function XA(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...XA(e.object)),t.push(...XA(e.property))),t)}function VH(e){return e.object.type==="MemberExpression"?VH(e.object):e.object.name==="datum"}function WH(e){const t=$M(e),n=new Set;return t.visit(i=>{i.type==="MemberExpression"&&VH(i)&&n.add(XA(i).slice(1).join("."))}),n}class th extends xt{clone(){return new th(null,this.model,Pe(this.filter))}constructor(t,n,i){super(t),this.model=n,this.filter=i,this.expr=Nv(this.model,this.filter,this),this._dependentFields=WH(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function Wxe(e,t){const n={},i=e.config.selection;if(!t||!t.length)return n;let r=0;for(const a of t){const s=Lt(a.name),o=a.select,l=_e(o)?o:o.type,f=Ee(o)?Pe(o):{type:l},d=i[l];for(const y in d)y==="fields"||y==="encodings"||(y==="mark"&&(f.mark={...d.mark,...f.mark}),(f[y]===void 0||f[y]===!0)&&(f[y]=Pe(d[y]??f[y])));const h=n[s]={...f,name:s,type:l,init:a.value,bind:a.bind,events:_e(f.on)?Pu(f.on,"scope"):Se(Pe(f.on))};if(Ka(h)&&(r++,r>1)){delete n[s];continue}const p=Pe(a);for(const y of Tx)y.defined(h)&&y.parse&&y.parse(e,h,p)}return r>1&&ge(h1e),n}function QH(e,t,n,i="datum"){const r=_e(t)?t:t.param,a=Lt(r),s=me(a+vc);let o;try{o=e.getSelectionComponent(a,r)}catch{return`!!${a}`}if(o.project.timeUnit){const p=n??e.component.data.raw,y=o.project.timeUnit.clone();p.parent?y.insertAsParentOf(p):p.parent=y}const l=o.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",f=o.resolve==="global"?")":`, ${me(o.resolve)})`,d=`${l}${s}, ${i}${f}`,h=`length(data(${s}))`;return t.empty===!1?`${h} && ${d}`:`!${h} || ${d}`}function ZH(e,t,n){const i=Lt(t),r=n.encoding;let a=n.field,s;try{s=e.getSelectionComponent(i,t)}catch{return i}if(!r&&!a)a=s.project.items[0].field,s.project.items.length>1&&ge(g1e(a));else if(r&&!a){const o=s.project.items.filter(l=>l.channel===r);!o.length||o.length>1?(a=s.project.items[0].field,ge(p1e(o,r,n,a))):a=o[0].field}return`${s.name}[${me(Hr(a))}]`}function Qxe(e,t){for(const[n,i]of ku(e.component.selection??{})){const r=e.getName(`lookup_${n}`);e.component.data.outputNodes[r]=i.materialized=new Bi(new th(t,e,{param:n}),r,Ht.Lookup,e.component.data.outputNodeRefCounts)}}function Nv(e,t,n){return cp(t,i=>_e(i)?i:wye(i)?QH(e,i,n):oq(i))}function Zxe(e,t){if(e)return oe(e)&&!iu(e)?e.map(n=>qk(n,t)).join(", "):e}function b_(e,t,n,i){var r,a;e.encode??(e.encode={}),(r=e.encode)[t]??(r[t]={}),(a=e.encode[t]).update??(a.update={}),e.encode[t].update[n]=i}function Qg(e,t,n,i={header:!1}){var h,p;const{disable:r,orient:a,scale:s,labelExpr:o,title:l,zindex:f,...d}=e.combine();if(!r){for(const y in d){const v=y,b=Mve[v],E=d[v];if(b&&b!==t&&b!=="both")delete d[v];else if(R0(E)){const{condition:_,...w}=E,A=Se(_),M=Cz[v];if(M){const{vgProp:T,part:R}=M,O=[...A.map(k=>{const{test:$,...D}=k;return{test:Nv(null,$),...D}}),w];b_(d,R,T,O),delete d[v]}else if(M===null){const T={signal:A.map(R=>{const{test:O,...k}=R;return`${Nv(null,O)} ? ${cz(k)} : `}).join("")+cz(w)};d[v]=T}}else if(ke(E)){const _=Cz[v];if(_){const{vgProp:w,part:A}=_;b_(d,A,w,E),delete d[v]}}Je(["labelAlign","labelBaseline"],v)&&d[v]===null&&delete d[v]}if(t==="grid"){if(!d.grid)return;if(d.encode){const{grid:y}=d.encode;d.encode={...y?{grid:y}:{}},At(d.encode)&&delete d.encode}return{scale:s,orient:a,...d,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:tn(f,0)}}else{if(!i.header&&e.mainExtracted)return;if(o!==void 0){let v=o;(p=(h=d.encode)==null?void 0:h.labels)!=null&&p.update&&ke(d.encode.labels.update.text)&&(v=cc(o,"datum.label",d.encode.labels.update.text.signal)),b_(d,"labels","text",{signal:v})}if(d.labelAlign===null&&delete d.labelAlign,d.encode){for(const v of Uq)e.hasAxisPart(v)||delete d.encode[v];At(d.encode)&&delete d.encode}const y=Zxe(l,n);return{scale:s,orient:a,grid:!1,...y?{title:y}:{},...d,...n.aria===!1?{aria:!1}:{},zindex:tn(f,0)}}}}function KH(e){const{axes:t}=e.component,n=[];for(const i of So)if(t[i]){for(const r of t[i])if(!r.get("disable")&&!r.get("gridScale")){const a=i==="x"?"height":"width",s=e.getSizeSignalRef(a).signal;a!==s&&n.push({name:a,update:s})}}return n}function Kxe(e,t){const{x:n=[],y:i=[]}=e;return[...n.map(r=>Qg(r,"grid",t)),...i.map(r=>Qg(r,"grid",t)),...n.map(r=>Qg(r,"main",t)),...i.map(r=>Qg(r,"main",t))].filter(r=>r)}function Jz(e,t,n,i){return Object.assign.apply(null,[{},...e.map(r=>{if(r==="axisOrient"){const a=n==="x"?"bottom":"left",s=t[n==="x"?"axisBottom":"axisLeft"]||{},o=t[n==="x"?"axisTop":"axisRight"]||{},l=new Set([...fe(s),...fe(o)]),f={};for(const d of l.values())f[d]={signal:`${i.signal} === "${a}" ? ${fa(s[d])} : ${fa(o[d])}`};return f}return t[r]})])}function Jxe(e,t,n,i){const r=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:fq(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],a=e==="x"?"axisX":"axisY",s=ke(n)?"axisOrient":`axis${E0(n)}`,o=[...r,...r.map(f=>a+f.substr(4))],l=["axis",s,a];return{vlOnlyAxisConfig:Jz(o,i,e,n),vgAxisConfig:Jz(l,i,e,n),axisConfigStyle:e2e([...l,...o],i)}}function e2e(e,t){var i;const n=[{}];for(const r of e){let a=(i=t[r])==null?void 0:i.style;if(a){a=Se(a);for(const s of a)n.push(t.style[s])}}return Object.assign.apply(null,n)}function VA(e,t,n,i={}){var a;const r=BI(e,n,t);if(r!==void 0)return{configFrom:"style",configValue:r};for(const s of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((a=i[s])==null?void 0:a[e])!==void 0)return{configFrom:s,configValue:i[s][e]};return{}}const eF={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??t2e(n,e),gridScale:({model:e,channel:t})=>n2e(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:i})=>e.labelAlign||eG(t,n,i),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:i})=>e.labelBaseline||JH(t,n,i),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??r2e(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??a2e(t.type,n,pe(t)&&!!t.timeUnit,pe(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:i,scaleType:r})=>{const a=e==="x"?"width":e==="y"?"height":void 0,s=a?t.getSizeSignalRef(a):void 0;return n.tickCount??o2e({fieldOrDatumDef:i,scaleType:r,size:s,values:n.values})},tickMinStep:u2e,title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const i=tG(t,n);if(i!==void 0)return i;const r=t.typedFieldDef(n),a=n==="x"?"x2":"y2",s=t.fieldDef(a);return PI(r?[wz(r)]:[],pe(s)?[wz(s)]:[])},values:({axis:e,fieldOrDatumDef:t})=>l2e(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??c2e(n,t)};function t2e(e,t){return!Mn(e)&&pe(t)&&!Dt(t==null?void 0:t.bin)&&!Fn(t==null?void 0:t.bin)}function n2e(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function i2e(e,t,n,i,r){const a=t==null?void 0:t.labelAngle;if(a!==void 0)return ke(a)?a:Lp(a);{const{configValue:s}=VA("labelAngle",i,t==null?void 0:t.style,r);return s!==void 0?Lp(s):n===Ut&&Je([Ok,kk],e.type)&&!(pe(e)&&e.timeUnit)?270:void 0}}function WA(e){return`(((${e.signal} % 360) + 360) % 360)`}function JH(e,t,n,i){if(e!==void 0)if(n==="x"){if(ke(e)){const r=WA(e),a=ke(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${r} && ${r} < 135) || (225 < ${r} && ${r} < 315) ? "middle" :(${r} <= 45 || 315 <= ${r}) === ${a} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(ke(t)){const r=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${r} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(ke(e)){const r=WA(e),a=ke(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${r} <= 45 || 315 <= ${r} || (135 <= ${r} && ${r} <= 225) ? ${i?'"middle"':"null"} : (45 <= ${r} && ${r} <= 135) === ${a} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return i?"middle":null;if(ke(t)){const r=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${r} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function eG(e,t,n){if(e===void 0)return;const i=n==="x",r=i?0:90,a=i?"bottom":"left";if(ke(e)){const s=WA(e),o=ke(t)?`(${t.signal} === "${a}")`:t===a;return{signal:`(${r?`(${s} + 90)`:s} % 180 === 0) ? ${i?null:'"center"'} :(${r} < ${s} && ${s} < ${180+r}) === ${o} ? "left" : "right"`}}if((e+r)%180===0)return i?null:"center";if(ke(t)){const s=r<e&&e<180+r?"===":"!==";return{signal:`${`${t.signal} ${s} "${a}"`} ? "left" : "right"`}}return(r<e&&e<180+r)==(t===a)?"left":"right"}function r2e(e,t){if(t==="x"&&Je(["quantitative","temporal"],e))return!0}function a2e(e,t,n,i){if(n&&!Ee(i)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function s2e(e){return e==="x"?"bottom":"left"}function o2e({fieldOrDatumDef:e,scaleType:t,size:n,values:i}){var r;if(!i&&!Mn(t)&&t!=="log"){if(pe(e)){if(Dt(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&Je(["month","hours","day","quarter"],(r=Tn(e.timeUnit))==null?void 0:r.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function u2e({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(pe(t)){const{timeUnit:n}=t;if(n){const i=rq(n);if(i)return{signal:i}}}}function tG(e,t){const n=t==="x"?"x2":"y2",i=e.fieldDef(t),r=e.fieldDef(n),a=i?i.title:void 0,s=r?r.title:void 0;if(a&&s)return II(a,s);if(a)return a;if(s)return s;if(a!==void 0)return a;if(s!==void 0)return s}function l2e(e,t){const n=e.values;if(oe(n))return Lq(t,n);if(ke(n))return n}function c2e(e,t){return e==="rect"&&$v(t)?1:0}class Md extends xt{clone(){return new Md(null,Pe(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=WH(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((i,r)=>{if(zc(i)&&$q(i.sort)){const{field:a,timeUnit:s}=i,o=i.sort,l=o.map((f,d)=>`${oq({field:a,timeUnit:s,equal:f})} ? ${d} : `).join("")+o.length;t=new Md(t,{calculate:l,as:kd(i,r,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${nt(this.transform)}`}}function kd(e,t,n){return xe(e,{prefix:t,suffix:"sort_index",...n})}function Mx(e,t){return Je(["top","bottom"],t)?"column":Je(["left","right"],t)||e==="row"?"row":"column"}function Od(e,t,n,i){const r=i==="row"?n.headerRow:i==="column"?n.headerColumn:n.headerFacet;return tn((t||{})[e],r[e],n.header[e])}function kx(e,t,n,i){const r={};for(const a of e){const s=Od(a,t||{},n,i);s!==void 0&&(r[a]=s)}return r}const l3=["row","column"],c3=["header","footer"];function f2e(e,t){const n=e.component.layoutHeaders[t].title,i=e.config?e.config:void 0,r=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:a,titleAngle:s,titleOrient:o}=kx(["titleAnchor","titleAngle","titleOrient"],r.header,i,t),l=Mx(t,o),f=Lp(s);return{name:`${t}-title`,type:"group",role:`${l}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...iG(f,l),...nG(l,f,a),...rG(i,r,t,Zve,nH)}}}function nG(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const i=eG(t,e==="row"?"left":"top",e==="row"?"y":"x");return i?{align:i}:{}}function iG(e,t){const n=JH(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function d2e(e,t){const n=e.component.layoutHeaders[t],i=[];for(const r of c3)if(n[r])for(const a of n[r]){const s=g2e(e,t,r,n,a);s!=null&&i.push(s)}return i}function h2e(e,t){const{sort:n}=e;return so(n)?{field:xe(n,{expr:"datum"}),order:n.order??"ascending"}:oe(n)?{field:kd(e,t,{expr:"datum"}),order:"ascending"}:{field:xe(e,{expr:"datum"}),order:n??"ascending"}}function QA(e,t,n){const{format:i,formatType:r,labelAngle:a,labelAnchor:s,labelOrient:o,labelExpr:l}=kx(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),f=Bk({fieldOrDatumDef:e,format:i,formatType:r,expr:"parent",config:n}).signal,d=Mx(t,o);return{text:{signal:l?cc(cc(l,"datum.label",f),"datum.value",xe(e,{expr:"parent"})):f},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...iG(a,d),...nG(d,a,s),...rG(n,e,t,Kve,iH)}}function g2e(e,t,n,i,r){if(r){let a=null;const{facetFieldDef:s}=i,o=e.config?e.config:void 0;if(s&&r.labels){const{labelOrient:h}=kx(["labelOrient"],s.header,o,t);(t==="row"&&!Je(["top","bottom"],h)||t==="column"&&!Je(["left","right"],h))&&(a=QA(s,t,o))}const l=lr(e)&&!T0(e.facet),f=r.axes,d=(f==null?void 0:f.length)>0;if(a||d){const h=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...i.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:h2e(s,t)}:{},...d&&l?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...a?{title:a}:{},...r.sizeSignal?{encode:{update:{[h]:r.sizeSignal}}}:{},...d?{axes:f}:{}}}}return null}const p2e={column:{start:0,end:1},row:{start:1,end:0}};function m2e(e,t){return p2e[t][e]}function y2e(e,t){const n={};for(const i of Fr){const r=e[i];if(r!=null&&r.facetFieldDef){const{titleAnchor:a,titleOrient:s}=kx(["titleAnchor","titleOrient"],r.facetFieldDef.header,t,i),o=Mx(i,s),l=m2e(a,o);l!==void 0&&(n[o]=l)}}return At(n)?void 0:n}function rG(e,t,n,i,r){const a={};for(const s of i){if(!r[s])continue;const o=Od(s,t==null?void 0:t.header,e,n);o!==void 0&&(a[r[s]]=o)}return a}function f3(e){return[...w1(e,"width"),...w1(e,"height"),...w1(e,"childWidth"),...w1(e,"childHeight")]}function w1(e,t){const n=t==="width"?"x":"y",i=e.component.layoutSize.get(t);if(!i||i==="merged")return[];const r=e.getSizeSignalRef(t).signal;if(i==="step"){const a=e.getScaleComponent(n);if(a){const s=a.get("type"),o=a.get("range");if(Mn(s)&&Rc(o)){const l=e.scaleName(n);return lr(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[tF(l,o)]:[tF(l,o),{name:r,update:aG(l,a,`domain('${l}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(i=="container"){const a=r.endsWith("width"),s=a?"containerSize()[0]":"containerSize()[1]",o=BA(e.config.view,a?"width":"height"),l=`isFinite(${s}) ? ${s} : ${o}`;return[{name:r,init:l,on:[{update:l,events:"window:resize"}]}]}else return[{name:r,value:i}]}function tF(e,t){const n=`${e}_step`;return ke(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function aG(e,t,n){const i=t.get("type"),r=t.get("padding"),a=tn(t.get("paddingOuter"),r);let s=t.get("paddingInner");return s=i==="band"?s!==void 0?s:r:1,`bandspace(${n}, ${fa(s)}, ${fa(a)}) * ${e}_step`}function sG(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function oG(e,t){return fe(e).reduce((n,i)=>({...n,...eh({model:t,channelDef:e[i],vgChannel:i,mainRefFn:r=>zt(r.value),invalidValueRef:void 0})}),{})}function uG(e,t){if(lr(t))return e==="theta"?"independent":"shared";if(rh(t))return"shared";if(v3(t))return nn(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function d3(e,t){const n=e.scale[t],i=nn(t)?"axis":"legend";return n==="independent"?(e[i][t]==="shared"&&ge(Y1e(t)),"independent"):e[i][t]||"shared"}const v2e={...tbe,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},lG=fe(v2e);class b2e extends wo{}const nF={symbols:x2e,gradient:E2e,labels:S2e,entries:_2e};function x2e(e,{fieldOrDatumDef:t,model:n,channel:i,legendCmpt:r,legendType:a}){if(a!=="symbol")return;const{markDef:s,encoding:o,config:l,mark:f}=n,d=s.filled&&f!=="trail";let h={...e1e({},n,Qye),...zH(n,{filled:d})};const p=r.get("symbolOpacity")??l.legend.symbolOpacity,y=r.get("symbolFillColor")??l.legend.symbolFillColor,v=r.get("symbolStrokeColor")??l.legend.symbolStrokeColor,b=p===void 0?cG(o.opacity)??s.opacity:void 0;if(h.fill){if(i==="fill"||d&&i===qi)delete h.fill;else if(he(h.fill,"field"))y?delete h.fill:(h.fill=zt(l.legend.symbolBaseFillColor??"black"),h.fillOpacity=zt(b??1));else if(oe(h.fill)){const E=ZA(o.fill??o.color)??s.fill??(d&&s.color);E&&(h.fill=zt(E))}}if(h.stroke){if(i==="stroke"||!d&&i===qi)delete h.stroke;else if(he(h.stroke,"field")||v)delete h.stroke;else if(oe(h.stroke)){const E=tn(ZA(o.stroke||o.color),s.stroke,d?s.color:void 0);E&&(h.stroke={value:E})}}if(i!==Eo){const E=pe(t)&&dG(n,r,t);E?h.opacity=[{test:E,...zt(b??1)},zt(l.legend.unselectedOpacity)]:b&&(h.opacity=zt(b))}return h={...h,...e},At(h)?void 0:h}function E2e(e,{model:t,legendType:n,legendCmpt:i}){if(n!=="gradient")return;const{config:r,markDef:a,encoding:s}=t;let o={};const f=(i.get("gradientOpacity")??r.legend.gradientOpacity)===void 0?cG(s.opacity)||a.opacity:void 0;return f&&(o.opacity=zt(f)),o={...o,...e},At(o)?void 0:o}function S2e(e,{fieldOrDatumDef:t,model:n,channel:i,legendCmpt:r}){const a=n.legend(i)||{},s=n.config,o=pe(t)?dG(n,r,t):void 0,l=o?[{test:o,value:1},{value:s.legend.unselectedOpacity}]:void 0,{format:f,formatType:d}=a;let h;mc(d)?h=da({fieldOrDatumDef:t,field:"datum.value",format:f,formatType:d,config:s}):f===void 0&&d===void 0&&s.customFormatTypes&&(t.type==="quantitative"&&s.numberFormatType?h=da({fieldOrDatumDef:t,field:"datum.value",format:s.numberFormat,formatType:s.numberFormatType,config:s}):t.type==="temporal"&&s.timeFormatType&&pe(t)&&t.timeUnit===void 0&&(h=da({fieldOrDatumDef:t,field:"datum.value",format:s.timeFormat,formatType:s.timeFormatType,config:s})));const p={...l?{opacity:l}:{},...h?{text:h}:{},...e};return At(p)?void 0:p}function _2e(e,{legendCmpt:t}){const n=t.get("selections");return n!=null&&n.length?{...e,fill:{value:"transparent"}}:e}function cG(e){return fG(e,(t,n)=>Math.max(t,n.value))}function ZA(e){return fG(e,(t,n)=>tn(t,n.value))}function fG(e,t){if(yve(e))return Se(e.condition).reduce(t,e.value);if(ba(e))return e.value}function dG(e,t,n){const i=t.get("selections");if(!(i!=null&&i.length))return;const r=me(n.field);return i.map(a=>`(!length(data(${me(Lt(a)+vc)})) || (${a}[${r}] && indexof(${a}[${r}], datum.value) >= 0))`).join(" || ")}const iF={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:i,formatType:r}=t;return wq(e,e.type,i,r,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:i}=e;return Aq(i,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??k2e(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??O2e(n),symbolType:({legend:e,markDef:t,channel:n,encoding:i})=>e.symbolType??A2e(t.type,n,i.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>Wf(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(Vf(n)&&Xa(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>w2e(t,e)};function w2e(e,t){const n=e.values;if(oe(n))return Lq(t,n);if(ke(n))return n}function A2e(e,t,n,i){if(t!=="shape"){const r=ZA(n)??i;if(r)return r}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function C2e(e){const{legend:t}=e;return tn(t.type,$2e(e))}function $2e({channel:e,timeUnit:t,scaleType:n}){if(Vf(e)){if(Je(["quarter","month","day"],t))return"symbol";if(Xa(n))return"gradient"}return"symbol"}function T2e({legendConfig:e,legendType:t,orient:n,legend:i}){return i.direction??e[t?"gradientDirection":"symbolDirection"]??M2e(n,t)}function M2e(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function k2e({legendConfig:e,model:t,direction:n,orient:i,scaleType:r}){const{gradientHorizontalMaxLength:a,gradientHorizontalMinLength:s,gradientVerticalMaxLength:o,gradientVerticalMinLength:l}=e;if(Xa(r))return n==="horizontal"?i==="top"||i==="bottom"?rF(t,"width",s,a):s:rF(t,"height",l,o)}function rF(e,t,n,i){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${i})`}}function O2e(e){if(Je(["quantile","threshold","log","symlog"],e))return"greedy"}function hG(e){const t=qt(e)?R2e(e):F2e(e);return e.component.legends=t,t}function R2e(e){const{encoding:t}=e,n={};for(const i of[qi,...aH]){const r=gn(t[i]);!r||!e.getScaleComponent(i)||i===Hi&&pe(r)&&r.type===Jd||(n[i]=z2e(e,i))}return n}function D2e(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function N2e(e,t,n,i){switch(t){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(t==="title"&&e===(i==null?void 0:i.title))return!0}return e===(n||{})[t]}function z2e(e,t){var M;let n=e.legend(t);const{markDef:i,encoding:r,config:a}=e,s=a.legend,o=new b2e({},D2e(e,t));Hxe(e,t,o);const l=n!==void 0?!n:s.disable;if(o.set("disable",l,n!==void 0),l)return o;n=n||{};const f=e.getScaleComponent(t).get("type"),d=gn(r[t]),h=pe(d)?(M=Tn(d.timeUnit))==null?void 0:M.unit:void 0,p=n.orient||a.legend.orient||"right",y=C2e({legend:n,channel:t,timeUnit:h,scaleType:f}),v=T2e({legend:n,legendType:y,orient:p,legendConfig:s}),b={legend:n,channel:t,model:e,markDef:i,encoding:r,fieldOrDatumDef:d,legendConfig:s,config:a,scaleType:f,orient:p,legendType:y,direction:v};for(const T of lG){if(y==="gradient"&&T.startsWith("symbol")||y==="symbol"&&T.startsWith("gradient"))continue;const R=T in iF?iF[T](b):n[T];if(R!==void 0){const O=N2e(R,T,n,e.fieldDef(t));(O||a.legend[T]===void 0)&&o.set(T,R,O)}}const E=(n==null?void 0:n.encoding)??{},_=o.get("selections"),w={},A={fieldOrDatumDef:d,model:e,channel:t,legendCmpt:o,legendType:y};for(const T of["labels","legend","title","symbols","gradient","entries"]){const R=oG(E[T]??{},e),O=T in nF?nF[T](R,A):R;O!==void 0&&!At(O)&&(w[T]={..._!=null&&_.length&&pe(d)?{name:`${Lt(d.field)}_legend_${T}`}:{},..._!=null&&_.length?{interactive:!!_}:{},update:O})}return At(w)||o.set("encode",w,!!(n!=null&&n.encoding)),o}function F2e(e){const{legends:t,resolve:n}=e.component;for(const i of e.children){hG(i);for(const r of fe(i.component.legends))n.legend[r]=d3(e.component.resolve,r),n.legend[r]==="shared"&&(t[r]=gG(t[r],i.component.legends[r]),t[r]||(n.legend[r]="independent",delete t[r]))}for(const i of fe(t))for(const r of e.children)r.component.legends[i]&&n.legend[i]==="shared"&&delete r.component.legends[i];return t}function gG(e,t){var a,s,o,l;if(!e)return t.clone();const n=e.getWithExplicit("orient"),i=t.getWithExplicit("orient");if(n.explicit&&i.explicit&&n.value!==i.value)return;let r=!1;for(const f of lG){const d=Du(e.getWithExplicit(f),t.getWithExplicit(f),f,"legend",(h,p)=>{switch(f){case"symbolType":return L2e(h,p);case"title":return qI(h,p);case"type":return r=!0,er("symbol")}return wx(h,p,f,"legend")});e.setWithExplicit(f,d)}return r&&((s=(a=e.implicit)==null?void 0:a.encode)!=null&&s.gradient&&Sv(e.implicit,["encode","gradient"]),(l=(o=e.explicit)==null?void 0:o.encode)!=null&&l.gradient&&Sv(e.explicit,["encode","gradient"])),e}function L2e(e,t){return t.value==="circle"?t:e}function U2e(e,t,n,i){var r,a;e.encode??(e.encode={}),(r=e.encode)[t]??(r[t]={}),(a=e.encode[t]).update??(a.update={}),e.encode[t].update[n]=i}function pG(e){const t=e.component.legends,n={};for(const r of fe(t)){const a=e.getScaleComponent(r),s=Ct(a.get("domains"));if(n[s])for(const o of n[s])gG(o,t[r])||n[s].push(t[r]);else n[s]=[t[r].clone()]}return qn(n).flat().map(r=>B2e(r,e.config)).filter(r=>r!==void 0)}function B2e(e,t){var s,o,l;const{disable:n,labelExpr:i,selections:r,...a}=e.combine();if(!n){if(t.aria===!1&&a.aria==null&&(a.aria=!1),(s=a.encode)!=null&&s.symbols){const f=a.encode.symbols.update;f.fill&&f.fill.value!=="transparent"&&!f.stroke&&!a.stroke&&(f.stroke={value:"transparent"});for(const d of aH)a[d]&&delete f[d]}if(a.title||delete a.title,i!==void 0){let f=i;(l=(o=a.encode)==null?void 0:o.labels)!=null&&l.update&&ke(a.encode.labels.update.text)&&(f=cc(i,"datum.label",a.encode.labels.update.text.signal)),U2e(a,"labels","text",{signal:f})}return a}}function j2e(e){return rh(e)||v3(e)?P2e(e):mG(e)}function P2e(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),mG(e))}function mG(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:i}=n;if(t.data){const r={signal:`[${t.size.map(s=>s.signal).join(", ")}]`},a=t.data.reduce((s,o)=>{const l=ke(o)?o.signal:`data('${e.lookupDataSource(o)}')`;return Je(s,l)||s.push(l),s},[]);if(a.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:i,size:r,fit:{signal:a.length>1?`[${a.join(", ")}]`:a[0]},...n}]}else return[{name:i,translate:{signal:"[width / 2, height / 2]"},...n}]}const I2e=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class yG extends wo{constructor(t,n,i,r){super({...n},{name:t}),this.specifiedProjection=n,this.size=i,this.data=r,this.merged=!1}get isFit(){return!!this.data}}function vG(e){e.component.projection=qt(e)?q2e(e):Y2e(e)}function q2e(e){if(e.hasProjection){const t=Ln(e.specifiedProjection),n=!(t&&(t.scale!=null||t.translate!=null)),i=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,r=n?H2e(e):void 0,a=new yG(e.projectionName(!0),{...Ln(e.config.projection),...t},i,r);return a.get("type")||a.set("type","equalEarth",!1),a}}function H2e(e){const t=[],{encoding:n}=e;for(const i of[[Ta,$a],[Gr,Ma]])(gn(n[i[0]])||gn(n[i[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(Hi)&&e.typedFieldDef(Hi).type===Jd&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(Ht.Main)),t}function G2e(e,t){const n=ik(I2e,r=>!!(!Ce(e.explicit,r)&&!Ce(t.explicit,r)||Ce(e.explicit,r)&&Ce(t.explicit,r)&&ar(e.get(r),t.get(r))));if(ar(e.size,t.size)){if(n)return e;if(ar(e.explicit,{}))return t;if(ar(t.explicit,{}))return e}return null}function Y2e(e){if(e.children.length===0)return;let t;for(const i of e.children)vG(i);const n=ik(e.children,i=>{const r=i.component.projection;if(r)if(t){const a=G2e(t,r);return a&&(t=a),!!a}else return t=r,!0;else return!0});if(t&&n){const i=e.projectionName(!0),r=new yG(i,t.specifiedProjection,t.size,Pe(t.data));for(const a of e.children){const s=a.component.projection;s&&(s.isFit&&r.data.push(...a.component.projection.data),a.renameProjection(s.get("name"),i),s.merged=!0)}return r}}function X2e(e,t,n,i){if(O0(t,n)){const r=qt(e)?e.axis(n)??e.legend(n)??{}:{},a=xe(t,{expr:"datum"}),s=xe(t,{expr:"datum",binSuffix:"end"});return{formulaAs:xe(t,{binSuffix:"range",forAs:!0}),formula:$0(a,s,r.format,r.formatType,i)}}return{}}function bG(e,t){return`${zI(e)}_${t}`}function V2e(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function h3(e,t,n){const i=vx(n,void 0)??{},r=bG(i,t);return e.getName(`${r}_bins`)}function W2e(e){return"as"in e}function aF(e,t,n){let i,r;W2e(e)?i=_e(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:i=[xe(e,{forAs:!0}),xe(e,{binSuffix:"end",forAs:!0})];const a={...vx(t,void 0)},s=bG(a,e.field),{signal:o,extentSignal:l}=V2e(n,s);if(ox(a.extent)){const d=a.extent;r=ZH(n,d.param,d),delete a.extent}const f={bin:a,field:e.field,as:[i],...o?{signal:o}:{},...l?{extentSignal:l}:{},...r?{span:r}:{}};return{key:s,binComponent:f}}class Ja extends xt{clone(){return new Ja(null,Pe(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const i=n.reduceFieldDef((r,a,s)=>{if(Ci(a)&&Dt(a.bin)){const{key:o,binComponent:l}=aF(a,a.bin,n);r[o]={...l,...r[o],...X2e(n,a,s,n.config)}}return r},{});return At(i)?null:new Ja(t,i)}static makeFromTransform(t,n,i){const{key:r,binComponent:a}=aF(n,n.bin,i);return new Ja(t,{[r]:a})}merge(t,n){for(const i of fe(t.bins))i in this.bins?(n(t.bins[i].signal,this.bins[i].signal),this.bins[i].as=Ya([...this.bins[i].as,...t.bins[i].as],nt)):this.bins[i]=t.bins[i];for(const i of t.children)t.removeChild(i),i.parent=this;t.remove()}producedFields(){return new Set(qn(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(qn(this.bins).map(t=>t.field))}hash(){return`Bin ${nt(this.bins)}`}assemble(){return qn(this.bins).flatMap(t=>{const n=[],[i,...r]=t.as,{extent:a,...s}=t.bin,o={type:"bin",field:Hr(t.field),as:i,signal:t.signal,...ox(a)?{extent:null}:{extent:a},...t.span?{span:{signal:`span(${t.span})`}}:{},...s};!a&&t.extentSignal&&(n.push({type:"extent",field:Hr(t.field),signal:t.extentSignal}),o.extent={signal:t.extentSignal}),n.push(o);for(const l of r)for(let f=0;f<2;f++)n.push({type:"formula",expr:xe({field:i[f]},{expr:"datum"}),as:l[f]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function Q2e(e,t,n,i){var a;const r=qt(i)?i.encoding[bs(t)]:void 0;if(Ci(n)&&qt(i)&&Mq(n,r,i.markDef,i.config)){e.add(xe(n,{})),e.add(xe(n,{suffix:"end"}));const{mark:s,markDef:o,config:l}=i,f=Ru({fieldDef:n,markDef:o,config:l});Up(s)&&f!==.5&&nn(t)&&(e.add(xe(n,{suffix:Ax})),e.add(xe(n,{suffix:Cx}))),n.bin&&O0(n,t)&&e.add(xe(n,{binSuffix:"range"}))}else if(CI(t)){const s=AI(t);e.add(i.getName(s))}else e.add(xe(n));return zc(n)&&Lye((a=n.scale)==null?void 0:a.range)&&e.add(n.scale.range.field),e}function Z2e(e,t){for(const n of fe(t)){const i=t[n];for(const r of fe(i))n in e?e[n][r]=new Set([...e[n][r]??[],...i[r]]):e[n]={[r]:i[r]}}}class ga extends xt{clone(){return new ga(null,new Set(this.dimensions),Pe(this.measures))}constructor(t,n,i){super(t),this.dimensions=n,this.measures=i}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let i=!1;n.forEachFieldDef(s=>{s.aggregate&&(i=!0)});const r={},a=new Set;return!i||(n.forEachFieldDef((s,o)=>{const{aggregate:l,field:f}=s;if(l)if(l==="count")r["*"]??(r["*"]={}),r["*"].count=new Set([xe(s,{forAs:!0})]);else{if(ho(l)||Vu(l)){const d=ho(l)?"argmin":"argmax",h=l[d];r[h]??(r[h]={}),r[h][d]=new Set([xe({op:d,field:h},{forAs:!0})])}else r[f]??(r[f]={}),r[f][l]=new Set([xe(s,{forAs:!0})]);xs(o)&&n.scaleDomain(o)==="unaggregated"&&(r[f]??(r[f]={}),r[f].min=new Set([xe({field:f,aggregate:"min"},{forAs:!0})]),r[f].max=new Set([xe({field:f,aggregate:"max"},{forAs:!0})]))}else Q2e(a,o,s,n)}),a.size+fe(r).length===0)?null:new ga(t,a,r)}static makeFromTransform(t,n){var i;const r=new Set,a={};for(const s of n.aggregate){const{op:o,field:l,as:f}=s;o&&(o==="count"?(a["*"]??(a["*"]={}),a["*"].count=new Set([f||xe(s,{forAs:!0})])):(a[l]??(a[l]={}),(i=a[l])[o]??(i[o]=new Set),a[l][o].add(f||xe(s,{forAs:!0}))))}for(const s of n.groupby??[])r.add(s);return r.size+fe(a).length===0?null:new ga(t,r,a)}merge(t){return yI(this.dimensions,t.dimensions)?(Z2e(this.measures,t.measures),!0):(uye("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...fe(this.measures)])}producedFields(){const t=new Set;for(const n of fe(this.measures))for(const i of fe(this.measures[n])){const r=this.measures[n][i];r.size===0?t.add(`${i}_${n}`):r.forEach(t.add,t)}return t}hash(){return`Aggregate ${nt({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],i=[];for(const a of fe(this.measures))for(const s of fe(this.measures[a]))for(const o of this.measures[a][s])i.push(o),t.push(s),n.push(a==="*"?null:Hr(a));return{type:"aggregate",groupby:[...this.dimensions].map(Hr),ops:t,fields:n,as:i}}}class nh extends xt{constructor(t,n,i,r){super(t),this.model=n,this.name=i,this.data=r;for(const a of Fr){const s=n.facet[a];if(s){const{bin:o,sort:l}=s;this[a]={name:n.getName(`${a}_domain`),fields:[xe(s),...Dt(o)?[xe(s,{binSuffix:"end"})]:[]],...so(l)?{sortField:l}:oe(l)?{sortIndexField:kd(s,a)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of Fr)this[n]&&(t+=` ${n.charAt(0)}:${nt(this[n])}`);return t}get fields(){var n;const t=[];for(const i of Fr)(n=this[i])!=null&&n.fields&&t.push(...this[i].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of Fr)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of So){const i=this.childModel.component.scales[n];if(i&&!i.merged){const r=i.get("type"),a=i.get("range");if(Mn(r)&&Rc(a)){const s=Ox(this.childModel,n),o=y3(s);o?t[n]=o:ge(yk(n))}}}return t}assembleRowColumnHeaderData(t,n,i){const r={row:"y",column:"x",facet:void 0}[t],a=[],s=[],o=[];r&&i&&i[r]&&(n?(a.push(`distinct_${i[r]}`),s.push("max")):(a.push(i[r]),s.push("distinct")),o.push(`distinct_${i[r]}`));const{sortField:l,sortIndexField:f}=this[t];if(l){const{op:d=px,field:h}=l;a.push(h),s.push(d),o.push(xe(l,{forAs:!0}))}else f&&(a.push(f),s.push("max"),o.push(f));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...a.length?{fields:a,ops:s,as:o}:{}}]}}assembleFacetHeaderData(t){var l;const{columns:n}=this.model.layout,{layoutHeaders:i}=this.model.component,r=[],a={};for(const f of l3){for(const d of c3){const h=(i[f]&&i[f][d])??[];for(const p of h)if(((l=p.axes)==null?void 0:l.length)>0){a[f]=!0;break}}if(a[f]){const d=`length(data("${this.facet.name}"))`,h=f==="row"?n?{signal:`ceil(${d} / ${n})`}:1:n?{signal:`min(${d}, ${n})`}:{signal:d};r.push({name:`${this.facet.name}_${f}`,transform:[{type:"sequence",start:0,stop:h}]})}}const{row:s,column:o}=a;return(s||o)&&r.unshift(this.assembleRowColumnHeaderData("facet",null,t)),r}assemble(){const t=[];let n=null;const i=this.getChildIndependentFieldsWithStep(),{column:r,row:a,facet:s}=this;if(r&&a&&(i.x||i.y)){n=`cross_${this.column.name}_${this.row.name}`;const o=[].concat(i.x??[],i.y??[]),l=o.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:o,ops:l}]})}for(const o of[ao,ro])this[o]&&t.push(this.assembleRowColumnHeaderData(o,n,i));if(s){const o=this.assembleFacetHeaderData(i);o&&t.push(...o)}return t}}function sF(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function K2e(e,t){const n=sk(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const i=sF(t.slice(5,t.length));return`timeParse(${n},'${i}')`}else if(t.startsWith("utc:")){const i=sF(t.slice(4,t.length));return`utcParse(${n},'${i}')`}else return ge(y1e(t)),null}function J2e(e){const t={};return ay(e.filter,n=>{if(sq(n)){let i=null;_k(n)?i=ir(n.equal):Ak(n)?i=ir(n.lte):wk(n)?i=ir(n.lt):Ck(n)?i=ir(n.gt):$k(n)?i=ir(n.gte):Tk(n)?i=n.range[0]:Mk(n)&&(i=(n.oneOf??n.in)[0]),i&&(Dc(i)?t[n.field]="date":dt(i)?t[n.field]="number":_e(i)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function eEe(e){const t={};function n(i){Cd(i)?t[i.field]="date":i.type==="quantitative"&&Gme(i.aggregate)?t[i.field]="number":xd(i.field)>1?i.field in t||(t[i.field]="flatten"):zc(i)&&so(i.sort)&&xd(i.sort.field)>1&&(i.sort.field in t||(t[i.sort.field]="flatten"))}if((qt(e)||lr(e))&&e.forEachFieldDef((i,r)=>{if(Ci(i))n(i);else{const a=kc(r),s=e.fieldDef(a);n({...i,type:s.type})}}),qt(e)){const{mark:i,markDef:r,encoding:a}=e;if(Wu(i)&&!e.encoding.order){const s=r.orient==="horizontal"?"y":"x",o=a[s];pe(o)&&o.type==="quantitative"&&!(o.field in t)&&(t[o.field]="number")}}return t}function tEe(e){const t={};if(qt(e)&&e.component.selection)for(const n of fe(e.component.selection)){const i=e.component.selection[n];for(const r of i.project.items)!r.channel&&xd(r.field)>1&&(t[r.field]="flatten")}return t}class ii extends xt{clone(){return new ii(null,Pe(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${nt(this._parse)}`}static makeExplicit(t,n,i){var s;let r={};const a=n.data;return!bu(a)&&((s=a==null?void 0:a.format)!=null&&s.parse)&&(r=a.format.parse),this.makeWithAncestors(t,r,{},i)}static makeWithAncestors(t,n,i,r){for(const o of fe(i)){const l=r.getWithExplicit(o);l.value!==void 0&&(l.explicit||l.value===i[o]||l.value==="derived"||i[o]==="flatten"?delete i[o]:ge(mz(o,i[o],l.value)))}for(const o of fe(n)){const l=r.get(o);l!==void 0&&(l===n[o]?delete n[o]:ge(mz(o,n[o],l)))}const a=new wo(n,i);r.copyAll(a);const s={};for(const o of fe(a.combine())){const l=a.get(o);l!==null&&(s[o]=l)}return fe(s).length===0||r.parseNothing?null:new ii(t,s)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of fe(this._parse)){const i=this._parse[n];xd(n)===1&&(t[n]=i)}return t}producedFields(){return new Set(fe(this._parse))}dependentFields(){return new Set(fe(this._parse))}assembleTransforms(t=!1){return fe(this._parse).filter(n=>t?xd(n)>1:!0).map(n=>{const i=K2e(n,this._parse[n]);return i?{type:"formula",expr:i,as:Zd(n)}:null}).filter(n=>n!==null)}}class Nu extends xt{clone(){return new Nu(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([Ea])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:Ea}}}class N0 extends xt{clone(){return new N0(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${nt(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class z0 extends xt{clone(){return new z0(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${nt(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class bc extends xt{constructor(t){super(null),t??(t={name:"source"});let n;if(bu(t)||(n=t.format?{...Ui(t.format,["parse"])}:{}),Bp(t))this._data={values:t.values};else if($d(t)){if(this._data={url:t.url},!n.type){let i=/(?:\.([^.]+))?$/.exec(t.url)[1];Je(["json","csv","tsv","dsv","topojson"],i)||(i="json"),n.type=i}}else _H(t)?this._data={values:[{type:"Sphere"}]}:(EH(t)||bu(t))&&(this._data={});this._generator=bu(t),t.name&&(this._name=t.name),n&&!At(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var oF=function(e,t,n,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(e,n):r?r.value=n:t.set(e,n),n},nEe=function(e,t,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(e):i?i.value:t.get(e)},Zg;function g3(e){return e instanceof bc||e instanceof N0||e instanceof z0}class p3{constructor(){Zg.set(this,void 0),oF(this,Zg,!1,"f")}setModified(){oF(this,Zg,!0,"f")}get modifiedFlag(){return nEe(this,Zg,"f")}}Zg=new WeakMap;class Fc extends p3{getNodeDepths(t,n,i){i.set(t,n);for(const r of t.children)this.getNodeDepths(r,n+1,i);return i}optimize(t){const i=[...this.getNodeDepths(t,0,new Map).entries()].sort((r,a)=>a[1]-r[1]);for(const r of i)this.run(r[0]);return this.modifiedFlag}}class m3 extends p3{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class iEe extends m3{mergeNodes(t,n){const i=n.shift();for(const r of n)t.removeChild(r),r.parent=i,r.remove()}run(t){const n=t.children.map(r=>r.hash()),i={};for(let r=0;r<n.length;r++)i[n[r]]===void 0?i[n[r]]=[t.children[r]]:i[n[r]].push(t.children[r]);for(const r of fe(i))i[r].length>1&&(this.setModified(),this.mergeNodes(t,i[r]))}}class rEe extends m3{constructor(t){super(),this.requiresSelectionId=t&&u3(t)}run(t){t instanceof Nu&&(this.requiresSelectionId&&(g3(t.parent)||t.parent instanceof ga||t.parent instanceof ii)||(this.setModified(),t.remove()))}}class aEe extends p3{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let i=new Set;t instanceof Za&&(i=t.producedFields(),rk(i,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const r of t.children)this.run(r,new Set([...n,...i]))}}class sEe extends m3{constructor(){super()}run(t){t instanceof Bi&&!t.isRequired()&&(this.setModified(),t.remove())}}class oEe extends Fc{run(t){if(!g3(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof ii)if(t instanceof ii)this.setModified(),t.merge(n);else{if(ak(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class uEe extends Fc{run(t){const n=[...t.children],i=t.children.filter(r=>r instanceof ii);if(t.numChildren()>1&&i.length>=1){const r={},a=new Set;for(const s of i){const o=s.parse;for(const l of fe(o))l in r?r[l]!==o[l]&&a.add(l):r[l]=o[l]}for(const s of a)delete r[s];if(!At(r)){this.setModified();const s=new ii(t,r);for(const o of n){if(o instanceof ii)for(const l of fe(r))delete o.parse[l];t.removeChild(o),o.parent=s,o instanceof ii&&fe(o.parse).length===0&&o.remove()}}}}}class lEe extends Fc{run(t){t instanceof Bi||t.numChildren()>0||t instanceof nh||t instanceof bc||(this.setModified(),t.remove())}}class cEe extends Fc{run(t){const n=t.children.filter(r=>r instanceof Za),i=n.pop();for(const r of n)this.setModified(),i.merge(r)}}class fEe extends Fc{run(t){const n=t.children.filter(r=>r instanceof ga),i={};for(const r of n){const a=nt(r.groupBy);a in i||(i[a]=[]),i[a].push(r)}for(const r of fe(i)){const a=i[r];if(a.length>1){const s=a.pop();for(const o of a)s.merge(o)&&(t.removeChild(o),o.parent=s,o.remove(),this.setModified())}}}}class dEe extends Fc{constructor(t){super(),this.model=t}run(t){const n=!(g3(t)||t instanceof th||t instanceof ii||t instanceof Nu),i=[],r=[];for(const a of t.children)a instanceof Ja&&(n&&!ak(t.producedFields(),a.dependentFields())?i.push(a):r.push(a));if(i.length>0){const a=i.pop();for(const s of i)a.merge(s,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof Ja?t.merge(a,this.model.renameSignal.bind(this.model)):a.swapWithParent()}if(r.length>1){const a=r.pop();for(const s of r)a.merge(s,this.model.renameSignal.bind(this.model));this.setModified()}}}class hEe extends Fc{run(t){const n=[...t.children];if(!bd(n,s=>s instanceof Bi)||t.numChildren()<=1)return;const r=[];let a;for(const s of n)if(s instanceof Bi){let o=s;for(;o.numChildren()===1;){const[l]=o.children;if(l instanceof Bi)o=l;else break}r.push(...o.children),a?(t.removeChild(s),s.parent=a.parent,a.parent.removeChild(a),a.parent=o,this.setModified()):a=o}else r.push(s);if(r.length){this.setModified();for(const s of r)s.parent.removeChild(s),s.parent=a}}}class Lc extends xt{clone(){return new Lc(null,Pe(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Ya(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??xe(t)}hash(){return`JoinAggregateTransform ${nt(this.transform)}`}assemble(){const t=[],n=[],i=[];for(const a of this.transform.joinaggregate)n.push(a.op),i.push(this.getDefaultName(a)),t.push(a.field===void 0?null:a.field);const r=this.transform.groupby;return{type:"joinaggregate",as:i,ops:n,fields:t,...r!==void 0?{groupby:r}:{}}}}class Rd extends xt{clone(){return new Rd(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n,i){const{config:r,markDef:a}=n,{marks:s,scales:o}=i;if(s==="include-invalid-values"&&o==="include-invalid-values")return null;const l=n.reduceFieldDef((f,d,h)=>{const p=xs(h)&&n.getScaleComponent(h);if(p){const y=p.get("type"),{aggregate:v}=d,b=Fk({scaleChannel:h,markDef:a,config:r,scaleType:y,isCountAggregate:sx(v)});b!=="show"&&b!=="always-valid"&&(f[d.field]=d)}return f},{});return fe(l).length?new Rd(t,l):null}dependentFields(){return new Set(fe(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${nt(this.filter)}`}assemble(){const t=fe(this.filter).reduce((n,i)=>{const r=this.filter[i],a=xe(r,{expr:"datum"});return r!==null&&(r.type==="temporal"?n.push(`(isDate(${a}) || (${KA(a)}))`):r.type==="quantitative"&&n.push(KA(a))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}function KA(e){return`isValid(${e}) && isFinite(+${e})`}function gEe(e){return e.stack.stackBy.reduce((t,n)=>{const i=n.fieldDef,r=xe(i);return r&&t.push(r),t},[])}function pEe(e){return oe(e)&&e.every(t=>_e(t))&&e.length>1}class uo extends xt{clone(){return new uo(null,Pe(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:i,groupby:r,as:a,offset:s="zero"}=n,o=[],l=[];if(n.sort!==void 0)for(const h of n.sort)o.push(h.field),l.push(tn(h.order,"ascending"));const f={field:o,order:l};let d;return pEe(a)?d=a:_e(a)?d=[a,`${a}_end`]:d=[`${n.stack}_start`,`${n.stack}_end`],new uo(t,{dimensionFieldDefs:[],stackField:i,groupby:r,offset:s,sort:f,facetby:[],as:d})}static makeFromEncoding(t,n){const i=n.stack,{encoding:r}=n;if(!i)return null;const{groupbyChannels:a,fieldChannel:s,offset:o,impute:l}=i,f=a.map(y=>{const v=r[y];return xa(v)}).filter(y=>!!y),d=gEe(n),h=n.encoding.order;let p;if(oe(h)||pe(h))p=jI(h);else{const y=kq(h)?h.sort:s==="y"?"descending":"ascending";p=d.reduce((v,b)=>(v.field.includes(b)||(v.field.push(b),v.order.push(y)),v),{field:[],order:[]})}return new uo(t,{dimensionFieldDefs:f,stackField:n.vgField(s),facetby:[],stackby:d,sort:p,offset:o,impute:l,as:[n.vgField(s,{suffix:"start",forAs:!0}),n.vgField(s,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${nt(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:i}=this._stack;return t.length>0?t.map(r=>r.bin?n?[xe(r,{binSuffix:"mid"})]:[xe(r,{}),xe(r,{binSuffix:"end"})]:[xe(r)]).flat():i??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:i,stackField:r,stackby:a,sort:s,offset:o,impute:l,as:f}=this._stack;if(l)for(const d of i){const{bandPosition:h=.5,bin:p}=d;if(p){const y=xe(d,{expr:"datum"}),v=xe(d,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${KA(y)} ? ${h}*${y}+${1-h}*${v} : ${y}`,as:xe(d,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:r,groupby:[...a,...n],key:xe(d,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:r,sort:s,as:f,offset:o}),t}}class ih extends xt{clone(){return new ih(null,Pe(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Ya(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??xe(t)}hash(){return`WindowTransform ${nt(this.transform)}`}assemble(){const t=[],n=[],i=[],r=[];for(const h of this.transform.window)n.push(h.op),i.push(this.getDefaultName(h)),r.push(h.param===void 0?null:h.param),t.push(h.field===void 0?null:h.field);const a=this.transform.frame,s=this.transform.groupby;if(a&&a[0]===null&&a[1]===null&&n.every(h=>pk(h)))return{type:"joinaggregate",as:i,ops:n,fields:t,...s!==void 0?{groupby:s}:{}};const o=[],l=[];if(this.transform.sort!==void 0)for(const h of this.transform.sort)o.push(h.field),l.push(h.order??"ascending");const f={field:o,order:l},d=this.transform.ignorePeers;return{type:"window",params:r,as:i,ops:n,fields:t,sort:f,...d!==void 0?{ignorePeers:d}:{},...s!==void 0?{groupby:s}:{},...a!==void 0?{frame:a}:{}}}}function mEe(e){function t(n){if(!(n instanceof nh)){const i=n.clone();if(i instanceof Bi){const r=eC+i.getSource();i.setSource(r),e.model.component.data.outputNodes[r]=i}else(i instanceof ga||i instanceof uo||i instanceof ih||i instanceof Lc)&&i.addDimensions(e.fields);for(const r of n.children.flatMap(t))r.parent=i;return[i]}return n.children.flatMap(t)}return t}function JA(e){if(e instanceof nh)if(e.numChildren()===1&&!(e.children[0]instanceof Bi)){const t=e.children[0];(t instanceof ga||t instanceof uo||t instanceof ih||t instanceof Lc)&&t.addDimensions(e.fields),t.swapWithParent(),JA(e)}else{const t=e.model.component.data.main;xG(t);const n=mEe(e),i=e.children.map(n).flat();for(const r of i)r.parent=t}else e.children.map(JA)}function xG(e){if(e instanceof Bi&&e.type===Ht.Main&&e.numChildren()===1){const t=e.children[0];t instanceof nh||(t.swapWithParent(),xG(e))}}const eC="scale_",A1=5;function tC(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!tC(t.children))return!1}return!0}function ea(e,t){let n=!1;for(const i of t)n=e.optimize(i)||n;return n}function uF(e,t,n){let i=e.sources,r=!1;return r=ea(new sEe,i)||r,r=ea(new rEe(t),i)||r,i=i.filter(a=>a.numChildren()>0),r=ea(new lEe,i)||r,i=i.filter(a=>a.numChildren()>0),n||(r=ea(new oEe,i)||r,r=ea(new dEe(t),i)||r,r=ea(new aEe,i)||r,r=ea(new uEe,i)||r,r=ea(new fEe,i)||r,r=ea(new cEe,i)||r,r=ea(new iEe,i)||r,r=ea(new hEe,i)||r),e.sources=i,r}function yEe(e,t){tC(e.sources);let n=0,i=0;for(let r=0;r<A1&&uF(e,t,!0);r++)n++;e.sources.map(JA);for(let r=0;r<A1&&uF(e,t,!1);r++)i++;tC(e.sources),Math.max(n,i)===A1&&ge(`Maximum optimization runs(${A1}) reached.`)}class Sn{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new Sn(()=>t(n))}}function EG(e){qt(e)?vEe(e):bEe(e)}function vEe(e){const t=e.component.scales;for(const n of fe(t)){const i=EEe(e,n);if(t[n].setWithExplicit("domains",i),_Ee(e,n),e.component.data.isFaceted){let a=e;for(;!lr(a)&&a.parent;)a=a.parent;if(a.component.resolve.scale[n]==="shared")for(const o of i.value)eo(o)&&(o.data=eC+o.data.replace(eC,""))}}}function bEe(e){for(const n of e.children)EG(n);const t=e.component.scales;for(const n of fe(t)){let i,r=null;for(const a of e.children){const s=a.component.scales[n];if(s){i===void 0?i=s.getWithExplicit("domains"):i=Du(i,s.getWithExplicit("domains"),"domains","scale",nC);const o=s.get("selectionExtent");r&&o&&r.param!==o.param&&ge(c1e),r=o}}t[n].setWithExplicit("domains",i),r&&t[n].set("selectionExtent",r,!0)}}function xEe(e,t,n,i){if(e==="unaggregated"){const{valid:r,reason:a}=lF(t,n);if(!r){ge(a);return}}else if(e===void 0&&i.useUnaggregatedDomain){const{valid:r}=lF(t,n);if(r)return"unaggregated"}return e}function EEe(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:i}=e,r=xEe(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return r!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:r}),t==="x"&&gn(i.x2)?gn(i.x)?Du(Ko(n,r,e,"x"),Ko(n,r,e,"x2"),"domain","scale",nC):Ko(n,r,e,"x2"):t==="y"&&gn(i.y2)?gn(i.y)?Du(Ko(n,r,e,"y"),Ko(n,r,e,"y2"),"domain","scale",nC):Ko(n,r,e,"y2"):Ko(n,r,e,t)}function SEe(e,t,n){return e.map(i=>({signal:`{data: ${bx(i,{timeUnit:n,type:t})}}`}))}function x_(e,t,n){var r;const i=(r=Tn(n))==null?void 0:r.unit;return t==="temporal"||i?SEe(e,t,i):[e]}function Ko(e,t,n,i){const{encoding:r,markDef:a,mark:s,config:o,stack:l}=n,f=gn(r[i]),{type:d}=f,h=f.timeUnit,p=gxe({invalid:ss("invalid",a,o),isPath:Wu(s)});if(Fye(t)){const b=Ko(e,void 0,n,i),E=x_(t.unionWith,d,h);return Pa([...E,...b.value])}else{if(ke(t))return Pa([t]);if(t&&t!=="unaggregated"&&!hq(t))return Pa(x_(t,d,h))}if(l&&i===l.fieldChannel){if(l.offset==="normalize")return er([[0,1]]);const b=n.requestDataName(p);return er([{data:b,field:n.vgField(i,{suffix:"start"})},{data:b,field:n.vgField(i,{suffix:"end"})}])}const y=xs(i)&&pe(f)?wEe(n,i,e):void 0;if(Es(f)){const b=x_([f.datum],d,h);return er(b)}const v=f;if(t==="unaggregated"){const{field:b}=f;return er([{data:n.requestDataName(p),field:xe({field:b,aggregate:"min"})},{data:n.requestDataName(p),field:xe({field:b,aggregate:"max"})}])}else if(Dt(v.bin)){if(Mn(e))return er(e==="bin-ordinal"?[]:[{data:Fp(y)?n.requestDataName(p):n.requestDataName(Ht.Raw),field:n.vgField(i,O0(v,i)?{binSuffix:"range"}:{}),sort:y===!0||!Ee(y)?{field:n.vgField(i,{}),op:"min"}:y}]);{const{bin:b}=v;if(Dt(b)){const E=h3(n,v.field,b);return er([new Sn(()=>{const _=n.getSignalName(E);return`[${_}.start, ${_}.stop]`})])}else return er([{data:n.requestDataName(p),field:n.vgField(i,{})}])}}else if(v.timeUnit&&Je(["time","utc"],e)){const b=r[bs(i)];if(Mq(v,b,a,o)){const E=n.requestDataName(p),_=Ru({fieldDef:v,fieldDef2:b,markDef:a,config:o}),w=Up(s)&&_!==.5&&nn(i);return er([{data:E,field:n.vgField(i,w?{suffix:Ax}:{})},{data:E,field:n.vgField(i,{suffix:w?Cx:"end"})}])}}return er(y?[{data:Fp(y)?n.requestDataName(p):n.requestDataName(Ht.Raw),field:n.vgField(i),sort:y}]:[{data:n.requestDataName(p),field:n.vgField(i)}])}function E_(e,t){const{op:n,field:i,order:r}=e;return{op:n??(t?"sum":px),...i?{field:Hr(i)}:{},...r?{order:r}:{}}}function _Ee(e,t){var o;const n=e.component.scales[t],i=e.specifiedScales[t].domain,r=(o=e.fieldDef(t))==null?void 0:o.bin,a=hq(i)?i:void 0,s=Oc(r)&&ox(r.extent)?r.extent:void 0;(a||s)&&n.set("selectionExtent",a??s,!0)}function wEe(e,t,n){if(!Mn(n))return;const i=e.fieldDef(t),r=i.sort;if($q(r))return{op:"min",field:kd(i,t),order:"ascending"};const{stack:a}=e,s=a?new Set([...a.groupbyFields,...a.stackBy.map(o=>o.fieldDef.field)]):void 0;if(so(r)){const o=a&&!s.has(r.field);return E_(r,o)}else if(gve(r)){const{encoding:o,order:l}=r,f=e.fieldDef(o),{aggregate:d,field:h}=f,p=a&&!s.has(h);if(ho(d)||Vu(d))return E_({field:xe(f),order:l},p);if(pk(d)||!d)return E_({op:d,field:h,order:l},p)}else{if(r==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(Je(["ascending",void 0],r))return!0}}function lF(e,t){const{aggregate:n,type:i}=e;return n?_e(n)&&!Xme.has(n)?{valid:!1,reason:B1e(n)}:i==="quantitative"&&t==="log"?{valid:!1,reason:j1e(e)}:{valid:!0}:{valid:!1,reason:U1e(e)}}function nC(e,t,n,i){return e.explicit&&t.explicit&&ge(G1e(n,i,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function AEe(e){const t=Ya(e.map(s=>{if(eo(s)){const{sort:o,...l}=s;return l}return s}),nt),n=Ya(e.map(s=>{if(eo(s)){const o=s.sort;return o!==void 0&&!Fp(o)&&("op"in o&&o.op==="count"&&delete o.field,o.order==="ascending"&&delete o.order),o}}).filter(s=>s!==void 0),nt);if(t.length===0)return;if(t.length===1){const s=e[0];if(eo(s)&&n.length>0){let o=n[0];if(n.length>1){ge(vz);const l=n.filter(f=>Ee(f)&&"op"in f&&f.op!=="min");n.every(f=>Ee(f)&&"op"in f)&&l.length===1?o=l[0]:o=!0}else if(Ee(o)&&"field"in o){const l=o.field;s.field===l&&(o=o.order?{order:o.order}:!0)}return{...s,sort:o}}return s}const i=Ya(n.map(s=>Fp(s)||!("op"in s)||_e(s.op)&&Ce(qme,s.op)?s:(ge(X1e(s)),!0)),nt);let r;i.length===1?r=i[0]:i.length>1&&(ge(vz),r=!0);const a=Ya(e.map(s=>eo(s)?s.data:null),s=>s);return a.length===1&&a[0]!==null?{data:a[0],fields:t.map(o=>o.field),...r?{sort:r}:{}}:{fields:t,...r?{sort:r}:{}}}function y3(e){if(eo(e)&&_e(e.field))return e.field;if(Vme(e)){let t;for(const n of e.fields)if(eo(n)&&_e(n.field)){if(!t)t=n.field;else if(t!==n.field)return ge(V1e),t}return ge(W1e),t}else if(Wme(e)){ge(Q1e);const t=e.fields[0];return _e(t)?t:void 0}}function Ox(e,t){const i=e.component.scales[t].get("domains").map(r=>(eo(r)&&(r.data=e.lookupDataSource(r.data)),r));return AEe(i)}function SG(e){return rh(e)||v3(e)?e.children.reduce((t,n)=>t.concat(SG(n)),cF(e)):cF(e)}function cF(e){return fe(e.component.scales).reduce((t,n)=>{const i=e.component.scales[n];if(i.merged)return t;const r=i.combine(),{name:a,type:s,selectionExtent:o,domains:l,range:f,reverse:d,...h}=r,p=CEe(r.range,a,n,e),y=Ox(e,n),v=o?Axe(e,o,i,y):null;return t.push({name:a,type:s,...y?{domain:y}:{},...v?{domainRaw:v}:{},range:p,...d!==void 0?{reverse:d}:{},...h}),t},[])}function CEe(e,t,n,i){if(nn(n)){if(Rc(e))return{step:{signal:`${t}_step`}}}else if(Ee(e)&&eo(e))return{...e,data:i.lookupDataSource(e.data)};return e}class _G extends wo{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainHasZero(){const t=this.get("type");if(Je([Un.LOG,Un.TIME,Un.UTC],t))return"definitely-not";const n=this.get("zero");if(n===!0||n===void 0&&Je([Un.LINEAR,Un.SQRT,Un.POW],t))return"definitely";const i=this.get("domains");if(i.length>0){let r=!1,a=!1,s=!1;for(const o of i){if(oe(o)){const l=o[0],f=o[o.length-1];if(dt(l)&&dt(f))if(l<=0&&f>=0){r=!0;continue}else{a=!0;continue}}s=!0}if(r)return"definitely";if(a&&!s)return"definitely-not"}return"maybe"}}const $Ee=["range","scheme"];function TEe(e){const t=e.component.scales;for(const n of gk){const i=t[n];if(!i)continue;const r=MEe(n,e);i.setWithExplicit("range",r)}}function fF(e,t){const n=e.fieldDef(t);if(n!=null&&n.bin){const{bin:i,field:r}=n,a=Gi(t),s=e.getName(a);if(Ee(i)&&i.binned&&i.step!==void 0)return new Sn(()=>{const o=e.scaleName(t),l=`(domain("${o}")[1] - domain("${o}")[0]) / ${i.step}`;return`${e.getSignalName(s)} / (${l})`});if(Dt(i)){const o=h3(e,r,i);return new Sn(()=>{const l=e.getSignalName(o),f=`(${l}.stop - ${l}.start) / ${l}.step`;return`${e.getSignalName(s)} / (${f})`})}}}function MEe(e,t){const n=t.specifiedScales[e],{size:i}=t,a=t.getScaleComponent(e).get("type");for(const h of $Ee)if(n[h]!==void 0){const p=FA(a,h),y=gq(e,h);if(!p)ge(XI(a,h,e));else if(y)ge(y);else switch(h){case"range":{const v=n.range;if(oe(v)){if(nn(e))return Pa(v.map(b=>{if(b==="width"||b==="height"){const E=t.getName(b),_=t.getSignalName.bind(t);return Sn.fromName(_,E)}return b}))}else if(Ee(v))return Pa({data:t.requestDataName(Ht.Main),field:v.field,sort:{op:"min",field:t.vgField(e)}});return Pa(v)}case"scheme":return Pa(kEe(n[h]))}}const s=e===Ut||e==="xOffset"?"width":"height",o=i[s];if(us(o)){if(nn(e))if(Mn(a)){const h=AG(o,t,e);if(h)return Pa({step:h})}else ge(VI(s));else if(w0(e)){const h=e===Iu?"x":"y";if(t.getScaleComponent(h).get("type")==="band"){const v=CG(o,a);if(v)return Pa(v)}}}const{rangeMin:l,rangeMax:f}=n,d=OEe(e,t);return(l!==void 0||f!==void 0)&&FA(a,"rangeMin")&&oe(d)&&d.length===2?Pa([l??d[0],f??d[1]]):er(d)}function kEe(e){return zye(e)?{scheme:e.name,...Ui(e,["name"])}:{scheme:e}}function wG(e,t,n,{center:i}={}){const r=Gi(e),a=t.getName(r),s=t.getSignalName.bind(t);return e===On&&va(n)?i?[Sn.fromName(o=>`${s(o)}/2`,a),Sn.fromName(o=>`-${s(o)}/2`,a)]:[Sn.fromName(s,a),0]:i?[Sn.fromName(o=>`-${s(o)}/2`,a),Sn.fromName(o=>`${s(o)}/2`,a)]:[0,Sn.fromName(s,a)]}function OEe(e,t){const{size:n,config:i,mark:r,encoding:a}=t,{type:s}=gn(a[e]),l=t.getScaleComponent(e).get("type"),{domain:f,domainMid:d}=t.specifiedScales[e];switch(e){case Ut:case On:{if(Je(["point","band"],l)){const h=$G(e,n,i.view);if(us(h))return{step:AG(h,t,e)}}return wG(e,t,l)}case Iu:case Kd:return REe(e,t,l);case xo:{const h=zEe(r,i),p=FEe(r,n,t,i);return _d(l)?NEe(h,p,DEe(l,i,f,e)):[h,p]}case Xr:return[0,Math.PI*2];case Mc:return[0,360];case Ca:return[0,new Sn(()=>{const h=t.getSignalName(lr(t.parent)?"child_width":"width"),p=t.getSignalName(lr(t.parent)?"child_height":"height");return`min(${h},${p})/2`})];case qu:return{step:1e3/i.scale.framesPerSecond};case Yu:return[i.scale.minStrokeWidth,i.scale.maxStrokeWidth];case Xu:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case Hi:return"symbol";case qi:case ys:case vs:return l==="ordinal"?s==="nominal"?"category":"ordinal":d!==void 0?"diverging":r==="rect"||r==="geoshape"?"heatmap":"ramp";case Eo:case Hu:case Gu:return[i.scale.minOpacity,i.scale.maxOpacity]}}function AG(e,t,n){const{encoding:i}=t,r=t.getScaleComponent(n),a=ck(n),s=i[a];if(oH({step:e,offsetIsDiscrete:qe(s)&&uq(s.type)})==="offset"&&Pq(i,a)){const l=t.getScaleComponent(a);let d=`domain('${t.scaleName(a)}').length`;if(l.get("type")==="band"){const p=l.get("paddingInner")??l.get("padding")??0,y=l.get("paddingOuter")??l.get("padding")??0;d=`bandspace(${d}, ${p}, ${y})`}const h=r.get("paddingInner")??r.get("padding");return{signal:`${e.step} * ${d} / (1-${Jme(h)})`}}else return e.step}function CG(e,t){if(oH({step:e,offsetIsDiscrete:Mn(t)})==="offset")return{step:e.step}}function REe(e,t,n){const i=e===Iu?"x":"y",r=t.getScaleComponent(i);if(!r)return wG(i,t,n,{center:!0});const a=r.get("type"),s=t.scaleName(i),{markDef:o,config:l}=t;if(a==="band"){const f=$G(i,t.size,t.config.view);if(us(f)){const d=CG(f,n);if(d)return d}return[0,{signal:`bandwidth('${s}')`}]}else{const f=t.encoding[i];if(pe(f)&&f.timeUnit){const d=rq(f.timeUnit,v=>`scale('${s}', ${v})`),h=t.config.scale.bandWithNestedOffsetPaddingInner,p=Ru({fieldDef:f,markDef:o,config:l})-.5,y=p!==0?` + ${p}`:"";if(h){const v=ke(h)?`${h.signal}/2`+y:`${h/2+p}`,b=ke(h)?`(1 - ${h.signal}/2)`+y:`${1-h/2+p}`;return[{signal:`${v} * (${d})`},{signal:`${b} * (${d})`}]}return[0,{signal:d}]}return pI(`Cannot use ${e} scale if ${i} scale is not discrete.`)}}function $G(e,t,n){const i=e===Ut?"width":"height",r=t[i];return r||Ov(n,i)}function DEe(e,t,n,i){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&oe(n)?n.length+1:(ge(aye(i)),3)}}function NEe(e,t,n){const i=()=>{const r=fa(t),a=fa(e),s=`(${r} - ${a}) / (${n} - 1)`;return`sequence(${a}, ${r} + ${s}, ${s})`};return ke(t)?new Sn(i):{signal:i()}}function zEe(e,t){switch(e){case"bar":case"tick":return t.scale.minBandSize;case"line":case"trail":case"rule":return t.scale.minStrokeWidth;case"text":return t.scale.minFontSize;case"point":case"square":case"circle":return t.scale.minSize}throw new Error(ux("size",e))}const dF=.95;function FEe(e,t,n,i){const r={x:fF(n,"x"),y:fF(n,"y")};switch(e){case"bar":case"tick":{if(i.scale.maxBandSize!==void 0)return i.scale.maxBandSize;const a=hF(t,r,i.view);return dt(a)?a-1:new Sn(()=>`${a.signal} - 1`)}case"line":case"trail":case"rule":return i.scale.maxStrokeWidth;case"text":return i.scale.maxFontSize;case"point":case"square":case"circle":{if(i.scale.maxSize)return i.scale.maxSize;const a=hF(t,r,i.view);return dt(a)?Math.pow(dF*a,2):new Sn(()=>`pow(${dF} * ${a.signal}, 2)`)}}throw new Error(ux("size",e))}function hF(e,t,n){const i=us(e.width)?e.width.step:jA(n,"width"),r=us(e.height)?e.height.step:jA(n,"height");return t.x||t.y?new Sn(()=>`min(${[t.x?t.x.signal:i,t.y?t.y.signal:r].join(", ")})`):Math.min(i,r)}function TG(e,t){qt(e)?LEe(e,t):kG(e,t)}function LEe(e,t){const n=e.component.scales,{config:i,encoding:r,markDef:a,specifiedScales:s}=e;for(const o of fe(n)){const l=s[o],f=n[o],d=e.getScaleComponent(o),h=gn(r[o]),p=l[t],y=d.get("type"),v=d.get("padding"),b=d.get("paddingInner"),E=FA(y,t),_=gq(o,t);if(p!==void 0&&(E?_&&ge(_):ge(XI(y,t,o))),E&&_===void 0)if(p!==void 0){const w=h.timeUnit,A=h.type;switch(t){case"domainMax":case"domainMin":Dc(l[t])||A==="temporal"||w?f.set(t,{signal:bx(l[t],{type:A,timeUnit:w})},!0):f.set(t,l[t],!0);break;default:f.copyKeyFromObject(t,l)}}else{const w=he(gF,t)?gF[t]({model:e,channel:o,fieldOrDatumDef:h,scaleType:y,scalePadding:v,scalePaddingInner:b,domain:l.domain,domainMin:l.domainMin,domainMax:l.domainMax,markDef:a,config:i,hasNestedOffsetScale:Iq(r,o),hasSecondaryRangeChannel:!!r[bs(o)]}):i.scale[t];w!==void 0&&f.set(t,w,!1)}}}const gF={bins:({model:e,fieldOrDatumDef:t})=>pe(t)?UEe(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>BEe(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:i,domainMax:r,fieldOrDatumDef:a})=>jEe(e,t,n,i,r,a),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:i,config:r})=>PEe(e,t,r.scale,n,i,r.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:i,config:r,hasNestedOffsetScale:a})=>IEe(e,t,n.type,i,r.scale,a),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:i,config:r,hasNestedOffsetScale:a})=>qEe(e,t,n,i,r.scale,a),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:i})=>{const r=pe(e)?e.sort:void 0;return HEe(t,r,n,i.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:i,scaleType:r,config:a,hasSecondaryRangeChannel:s})=>GEe(e,t,n,i,r,a.scale,s)};function MG(e){qt(e)?TEe(e):kG(e,"range")}function kG(e,t){const n=e.component.scales;for(const i of e.children)t==="range"?MG(i):TG(i,t);for(const i of fe(n)){let r;for(const a of e.children){const s=a.component.scales[i];if(s){const o=s.getWithExplicit(t);r=Du(r,o,t,"scale",xH((l,f)=>{switch(t){case"range":return l.step&&f.step?l.step-f.step:0}return 0}))}}n[i].setWithExplicit(t,r)}}function UEe(e,t){const n=t.bin;if(Dt(n)){const i=h3(e,t.field,n);return new Sn(()=>e.getSignalName(i))}else if(Fn(n)&&Oc(n)&&n.step!==void 0)return{step:n.step}}function BEe(e,t){if(Je([qi,ys,vs],e)&&t!=="nominal")return"hcl"}function jEe(e,t,n,i,r,a){var s;if(!((s=xa(a))!=null&&s.bin||oe(n)||r!=null||i!=null||Je([Un.TIME,Un.UTC],e)))return nn(t)?!0:void 0}function PEe(e,t,n,i,r,a){if(nn(e)){if(Xa(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:s,orient:o}=r;if(s==="bar"&&!(pe(i)&&(i.bin||i.timeUnit))&&(o==="vertical"&&e==="x"||o==="horizontal"&&e==="y"))return a.continuousBandSize}if(t===Un.POINT)return n.pointPadding}}function IEe(e,t,n,i,r,a=!1){if(e===void 0){if(nn(t)){const{bandPaddingInner:s,barBandPaddingInner:o,rectBandPaddingInner:l,tickBandPaddingInner:f,bandWithNestedOffsetPaddingInner:d}=r;return a?d:tn(s,n==="bar"?o:n==="tick"?f:l)}else if(w0(t)&&i===Un.BAND)return r.offsetBandPaddingInner}}function qEe(e,t,n,i,r,a=!1){if(e===void 0){if(nn(t)){const{bandPaddingOuter:s,bandWithNestedOffsetPaddingOuter:o}=r;if(a)return o;if(n===Un.BAND)return tn(s,ke(i)?{signal:`${i.signal}/2`}:i/2)}else if(w0(t)){if(n===Un.POINT)return .5;if(n===Un.BAND)return r.offsetBandPaddingOuter}}}function HEe(e,t,n,i){if(n==="x"&&i.xReverse!==void 0)return va(e)&&t==="descending"?ke(i.xReverse)?{signal:`!${i.xReverse.signal}`}:!i.xReverse:i.xReverse;if(va(e)&&t==="descending")return!0}function GEe(e,t,n,i,r,a,s){if(!!n&&n!=="unaggregated"&&va(r)){if(oe(n)){const l=n[0],f=n[n.length-1];if(dt(l)&&l<=0&&dt(f)&&f>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!_d(r))return!0;if(!(pe(t)&&t.bin)&&Je([...So,...Nme],e)){const{orient:l,type:f}=i;return Je(["bar","area","line","trail"],f)&&(l==="horizontal"&&e==="y"||l==="vertical"&&e==="x")?!1:Je(["bar","area"],f)&&!s?!0:a==null?void 0:a.zero}return!1}function YEe(e,t,n,i,r=!1){const a=XEe(t,n,i,r),{type:s}=e;return xs(t)?s!==void 0?Iye(t,s)?pe(n)&&!Pye(s,n.type)?(ge(q1e(s,a)),a):s:(ge(I1e(t,s,a)),a):a:null}function XEe(e,t,n,i){var r;switch(t.type){case"nominal":case"ordinal":{if(Vf(e)||l_(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&ge(c_(e,"ordinal")),"ordinal";if(u_(e))return"band";if(nn(e)||w0(e)){if(Je(["rect","bar","image","rule","tick"],n.type)||i)return"band"}else if(n.type==="arc"&&e in hk)return"band";const a=n[Gi(e)];return pc(a)||Ad(t)&&((r=t.axis)!=null&&r.tickBand)?"band":"point"}case"temporal":return Vf(e)?"time":l_(e)==="discrete"?(ge(c_(e,"temporal")),"ordinal"):pe(t)&&t.timeUnit&&Tn(t.timeUnit).utc?"utc":u_(e)?"band":"time";case"quantitative":return Vf(e)?pe(t)&&Dt(t.bin)?"bin-ordinal":"linear":l_(e)==="discrete"?(ge(c_(e,"quantitative")),"ordinal"):u_(e)?"band":"linear";case"geojson":return}throw new Error(GI(t.type))}function VEe(e,{ignoreRange:t}={}){OG(e),EG(e);for(const n of jye)TG(e,n);t||MG(e)}function OG(e){qt(e)?e.component.scales=WEe(e):e.component.scales=ZEe(e)}function WEe(e){const{encoding:t,mark:n,markDef:i}=e,r={};for(const a of gk){const s=gn(t[a]);if(s&&n===yq&&a===Hi&&s.type===Jd)continue;let o=s&&s.scale;if(s&&o!==null&&o!==!1){o??(o={});const l=Iq(t,a),f=YEe(o,a,s,i,l);r[a]=new _G(e.scaleName(`${a}`,!0),{value:f,explicit:o.type===f})}}return r}const QEe=xH((e,t)=>xz(e)-xz(t));function ZEe(e){var t;const n=e.component.scales={},i={},r=e.component.resolve;for(const a of e.children){OG(a);for(const s of fe(a.component.scales))if((t=r.scale)[s]??(t[s]=uG(s,e)),r.scale[s]==="shared"){const o=i[s],l=a.component.scales[s].getWithExplicit("type");o?kye(o.value,l.value)?i[s]=Du(o,l,"type","scale",QEe):(r.scale[s]="independent",delete i[s]):i[s]=l}}for(const a of fe(i)){const s=e.scaleName(a,!0),o=i[a];n[a]=new _G(s,o);for(const l of e.children){const f=l.component.scales[a];f&&(l.renameScale(f.get("name"),s),f.merged=!0)}}return n}class S_{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function qt(e){return(e==null?void 0:e.type)==="unit"}function lr(e){return(e==null?void 0:e.type)==="facet"}function v3(e){return(e==null?void 0:e.type)==="concat"}function rh(e){return(e==null?void 0:e.type)==="layer"}class b3{constructor(t,n,i,r,a,s,o){this.type=n,this.parent=i,this.config=a,this.parent=i,this.config=a,this.view=Ln(o),this.name=t.name??r,this.title=iu(t.title)?{text:t.title}:t.title?Ln(t.title):void 0,this.scaleNameMap=i?i.scaleNameMap:new S_,this.projectionNameMap=i?i.projectionNameMap:new S_,this.signalNameMap=i?i.signalNameMap:new S_,this.data=t.data,this.description=t.description,this.transforms=nxe(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:sbe(t,n,a),this.component={data:{sources:i?i.component.data.sources:[],outputNodes:i?i.component.data.outputNodes:{},outputNodeRefCounts:i?i.component.data.outputNodeRefCounts:{},isFaceted:mx(t)||(i==null?void 0:i.component.data.isFaceted)&&t.data===void 0},layoutSize:new wo,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...s?Pe(s):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){VEe(this)}parseProjection(){vG(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){hG(this)}assembleEncodeFromView(t){const{style:n,...i}=t,r={};for(const a of fe(i)){const s=i[a];s!==void 0&&(r[a]=zt(s))}return r}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=zt(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:At(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:i,config:r}=this,a=y2e(i.layoutHeaders,r);return{padding:t,...this.assembleDefaultLayout(),...n,...a?{titleBand:a}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const i of Fr)t[i].title&&n.push(f2e(this,i));for(const i of l3)n=n.concat(d2e(this,i));return n}assembleAxes(){return Kxe(this.component.axes,this.config)}assembleLegends(){return pG(this)}assembleProjections(){return j2e(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},i={...FI(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(i.text)return Je(["unit","layer"],this.type)?Je(["middle",void 0],i.anchor)&&(i.frame??(i.frame="group")):i.anchor??(i.anchor="start"),At(i)?void 0:i}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const i=this.assembleLayout();i&&(n.layout=i),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const r=!this.parent||lr(this.parent)?SG(this):[];r.length>0&&(n.scales=r);const a=this.assembleAxes();a.length>0&&(n.axes=a);const s=this.assembleLegends();return s.length>0&&(n.legends=s),n}getName(t){return Lt((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(Ht[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),i=this.component.data.outputNodeRefCounts;return i[n]=(i[n]||0)+1,n}getSizeSignalRef(t){if(lr(this.parent)){const n=sG(t),i=ax(n),r=this.component.scales[i];if(r&&!r.merged){const a=r.get("type"),s=r.get("range");if(Mn(a)&&Rc(s)){const o=r.get("name"),l=Ox(this,i),f=y3(l);if(f){const d=xe({aggregate:"distinct",field:f},{expr:"datum"});return{signal:aG(o,r,d)}}else return ge(yk(i)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(TI(t)&&xs(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getScaleType(t){const n=this.getScaleComponent(t);return n?n.get("type"):void 0}getSelectionComponent(t,n){let i=this.component.selection[t];if(!i&&this.parent&&(i=this.parent.getSelectionComponent(t,n)),!i)throw new Error(r1e(n));return i}hasAxisOrientSignalRef(){var t,n;return((t=this.component.axes.x)==null?void 0:t.some(i=>i.hasOrientSignalRef()))||((n=this.component.axes.y)==null?void 0:n.some(i=>i.hasOrientSignalRef()))}}class RG extends b3{vgField(t,n={}){const i=this.fieldDef(t);if(i)return xe(i,n)}reduceFieldDef(t,n){return zve(this.getMapping(),(i,r,a)=>{const s=xa(r);return s?t(i,s,a):i},n)}forEachFieldDef(t,n){Gk(this.getMapping(),(i,r)=>{const a=xa(i);a&&t(a,r)},n)}}class Rx extends xt{clone(){return new Rx(null,Pe(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Pe(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"value",i[1]??"density"];const r=this.transform.resolve??"shared";this.transform.resolve=r}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${nt(this.transform)}`}assemble(){const{density:t,...n}=this.transform,i={type:"kde",field:t,...n};return i.resolve=this.transform.resolve,i}}class Dx extends xt{clone(){return new Dx(null,Pe(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Pe(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${nt(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class Nx extends xt{clone(){return new Nx(this.parent,Pe(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Pe(n);const{flatten:i,as:r=[]}=this.transform;this.transform.as=i.map((a,s)=>r[s]??a)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${nt(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class zx extends xt{clone(){return new zx(null,Pe(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Pe(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"key",i[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${nt(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class Zf extends xt{clone(){return new Zf(null,Pe(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let i=0;for(const r of[[Ta,$a],[Gr,Ma]]){const a=r.map(s=>{const o=gn(n.encoding[s]);return pe(o)?o.field:Es(o)?{expr:`${o.datum}`}:ba(o)?{expr:`${o.value}`}:void 0});(a[0]||a[1])&&(t=new Zf(t,a,null,n.getName(`geojson_${i++}`)))}if(n.channelHasField(Hi)){const r=n.typedFieldDef(Hi);r.type===Jd&&(t=new Zf(t,null,r.field,n.getName(`geojson_${i++}`)))}return t}constructor(t,n,i,r){super(t),this.fields=n,this.geojson=i,this.signal=r}dependentFields(){const t=(this.fields??[]).filter(_e);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${nt(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class jp extends xt{clone(){return new jp(null,this.projection,Pe(this.fields),Pe(this.as))}constructor(t,n,i,r){super(t),this.projection=n,this.fields=i,this.as=r}static parseAll(t,n){if(!n.projectionName())return t;for(const i of[[Ta,$a],[Gr,Ma]]){const r=i.map(s=>{const o=gn(n.encoding[s]);return pe(o)?o.field:Es(o)?{expr:`${o.datum}`}:ba(o)?{expr:`${o.value}`}:void 0}),a=i[0]===Gr?"2":"";(r[0]||r[1])&&(t=new jp(t,n.projectionName(),r,[n.getName(`x${a}`),n.getName(`y${a}`)]))}return t}dependentFields(){return new Set(this.fields.filter(_e))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${nt(this.fields)} ${nt(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class Ql extends xt{clone(){return new Ql(null,Pe(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:i,step:r}=t;return{signal:`sequence(${[n,i,...r?[r]:[]].join(",")})`}}static makeFromTransform(t,n){return new Ql(t,n)}static makeFromEncoding(t,n){const i=n.encoding,r=i.x,a=i.y;if(pe(r)&&pe(a)){const s=r.impute?r:a.impute?a:void 0;if(s===void 0)return;const o=r.impute?a:a.impute?r:void 0,{method:l,value:f,frame:d,keyvals:h}=s.impute,p=Gq(n.mark,i);return new Ql(t,{impute:s.field,key:o.field,...l?{method:l}:{},...f!==void 0?{value:f}:{},...d?{frame:d}:{},...h!==void 0?{keyvals:h}:{},...p.length?{groupby:p}:{}})}return null}hash(){return`Impute ${nt(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:i,method:r,groupby:a,value:s,frame:o=[null,null]}=this.transform,l={type:"impute",field:t,key:n,...i?{keyvals:Lbe(i)?this.processSequence(i):i}:{},method:"value",...a?{groupby:a}:{},value:!r||r==="value"?s:null};if(r&&r!=="value"){const f={type:"window",as:[`imputed_${t}_value`],ops:[r],fields:[t],frame:o,ignorePeers:!1,...a?{groupby:a}:{}},d={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[l,f,d]}else return[l]}}class Fx extends xt{clone(){return new Fx(null,Pe(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Pe(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??n.on,i[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${nt(this.transform)}`}assemble(){const{loess:t,on:n,...i}=this.transform;return{type:"loess",x:n,y:t,...i}}}class Pp extends xt{clone(){return new Pp(null,Pe(this.transform),this.secondary)}constructor(t,n,i){super(t),this.transform=n,this.secondary=i}static make(t,n,i,r){const a=n.component.data.sources,{from:s}=i;let o=null;if(Ube(s)){let l=zG(s.data,a);l||(l=new bc(s.data),a.push(l));const f=n.getName(`lookup_${r}`);o=new Bi(l,f,Ht.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[f]=o}else if(Bbe(s)){const l=s.param;i={as:l,...i};let f;try{f=n.getSelectionComponent(Lt(l),l)}catch{throw new Error(u1e(l))}if(o=f.materialized,!o)throw new Error(l1e(l))}return new Pp(t,i,o.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?Se(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${nt({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:Se(this.transform.as)}:{}};else{let n=this.transform.as;_e(n)||(ge(x1e),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class Lx extends xt{clone(){return new Lx(null,Pe(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Pe(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"prob",i[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${nt(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class Ux extends xt{clone(){return new Ux(null,Pe(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Pe(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??n.on,i[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${nt(this.transform)}`}assemble(){const{regression:t,on:n,...i}=this.transform;return{type:"regression",x:n,y:t,...i}}}class Bx extends xt{clone(){return new Bx(null,Pe(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Ya((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${nt(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:i,limit:r,op:a}=this.transform;return{type:"pivot",field:t,value:n,...r!==void 0?{limit:r}:{},...a!==void 0?{op:a}:{},...i!==void 0?{groupby:i}:{}}}}class jx extends xt{clone(){return new jx(null,Pe(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${nt(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function DG(e){let t=0;function n(i,r){if(i instanceof bc&&!i.isGenerator&&!$d(i.data)&&(e.push(r),r={name:null,source:r.name,transform:[]}),i instanceof ii&&(i.parent instanceof bc&&!r.source?(r.format={...r.format,parse:i.assembleFormatParse()},r.transform.push(...i.assembleTransforms(!0))):r.transform.push(...i.assembleTransforms())),i instanceof nh){r.name||(r.name=`data_${t++}`),!r.source||r.transform.length>0?(e.push(r),i.data=r.name):i.data=r.source,e.push(...i.assemble());return}switch((i instanceof N0||i instanceof z0||i instanceof Rd||i instanceof th||i instanceof Md||i instanceof jp||i instanceof ga||i instanceof Pp||i instanceof ih||i instanceof Lc||i instanceof zx||i instanceof Nx||i instanceof Rx||i instanceof Fx||i instanceof Lx||i instanceof Ux||i instanceof Nu||i instanceof jx||i instanceof Bx||i instanceof Dx)&&r.transform.push(i.assemble()),(i instanceof Ja||i instanceof Za||i instanceof Ql||i instanceof uo||i instanceof Zf)&&r.transform.push(...i.assemble()),i instanceof Bi&&(r.source&&r.transform.length===0?i.setSource(r.source):i.parent instanceof Bi?i.setSource(r.name):(r.name||(r.name=`data_${t++}`),i.setSource(r.name),i.numChildren()===1&&(e.push(r),r={name:null,source:r.name,transform:[]}))),i.numChildren()){case 0:i instanceof Bi&&(!r.source||r.transform.length>0)&&e.push(r);break;case 1:n(i.children[0],r);break;default:{r.name||(r.name=`data_${t++}`);let a=r.name;!r.source||r.transform.length>0?e.push(r):a=r.source;for(const s of i.children)n(s,{name:null,source:a,transform:[]});break}}}return n}function KEe(e){const t=[],n=DG(t);for(const i of e.children)n(i,{source:e.name,name:null,transform:[]});return t}function JEe(e,t){const n=[],i=DG(n);let r=0;for(const s of e.sources){s.hasName()||(s.dataName=`source_${r++}`);const o=s.assemble();i(s,o)}for(const s of n)s.transform.length===0&&delete s.transform;let a=0;for(const[s,o]of n.entries())(o.transform??[]).length===0&&!o.source&&n.splice(a++,0,n.splice(s,1)[0]);for(const s of n)for(const o of s.transform??[])o.type==="lookup"&&(o.from=e.outputNodes[o.from].getSource());for(const s of n)s.name in t&&(s.values=t[s.name]);return n}function eSe(e){return e==="top"||e==="left"||ke(e)?"header":"footer"}function tSe(e){for(const t of Fr)nSe(e,t);pF(e,"x"),pF(e,"y")}function nSe(e,t){var s;const{facet:n,config:i,child:r,component:a}=e;if(e.channelHasField(t)){const o=n[t],l=Od("title",null,i,t);let f=Wf(o,i,{allowDisabling:!0,includeDefault:l===void 0||!!l});r.component.layoutHeaders[t].title&&(f=oe(f)?f.join(", "):f,f+=` / ${r.component.layoutHeaders[t].title}`,r.component.layoutHeaders[t].title=null);const d=Od("labelOrient",o.header,i,t),h=o.header!==null?tn((s=o.header)==null?void 0:s.labels,i.header.labels,!0):!1,p=Je(["bottom","right"],d)?"footer":"header";a.layoutHeaders[t]={title:o.header!==null?f:null,facetFieldDef:o,[p]:t==="facet"?[]:[NG(e,t,h)]}}}function NG(e,t,n){const i=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(i)?e.child.getSizeSignalRef(i):void 0,axes:[]}}function pF(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:i,resolve:r}=e.component;if(r.axis[t]=d3(r,t),r.axis[t]==="shared"){const a=t==="x"?"column":"row",s=i[a];for(const o of n.component.axes[t]){const l=eSe(o.get("orient"));s[l]??(s[l]=[NG(e,a,!1)]);const f=Qg(o,"main",e.config,{header:!0});f&&s[l][0].axes.push(f),o.mainExtracted=!0}}}}function iSe(e){x3(e),zv(e,"width"),zv(e,"height")}function rSe(e){x3(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";zv(e,t),zv(e,n)}function x3(e){for(const t of e.children)t.parseLayoutSize()}function zv(e,t){const n=sG(t),i=ax(n),r=e.component.resolve,a=e.component.layoutSize;let s;for(const o of e.children){const l=o.component.layoutSize.getWithExplicit(n),f=r.scale[i]??uG(i,e);if(f==="independent"&&l.value==="step"){s=void 0;break}if(s){if(f==="independent"&&s.value!==l.value){s=void 0;break}s=Du(s,l,n,"")}else s=l}if(s){for(const o of e.children)e.renameSignal(o.getName(n),e.getName(t)),o.component.layoutSize.set(n,"merged",!1);a.setWithExplicit(t,s)}else a.setWithExplicit(t,{explicit:!1,value:void 0})}function aSe(e){const{size:t,component:n}=e;for(const i of So){const r=Gi(i);if(t[r]){const a=t[r];n.layoutSize.set(r,us(a)?"step":a,!0)}else{const a=sSe(e,r);n.layoutSize.set(r,a,!1)}}}function sSe(e,t){const n=t==="width"?"x":"y",i=e.config,r=e.getScaleComponent(n);if(r){const a=r.get("type"),s=r.get("range");if(Mn(a)){const o=Ov(i.view,t);return Rc(s)||us(o)?"step":o}else return BA(i.view,t)}else{if(e.hasProjection||e.mark==="arc")return BA(i.view,t);{const a=Ov(i.view,t);return us(a)?a.step:a}}}function iC(e,t,n){return xe(t,{suffix:`by_${xe(e)}`,...n})}class dp extends RG{constructor(t,n,i,r){super(t,"facet",n,i,r,t.resolve),this.child=A3(t.spec,this,this.getName("child"),void 0,r),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!T0(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=fe(t),i={};for(const r of n){if(![ro,ao].includes(r)){ge(ux(r,"facet"));break}const a=t[r];if(a.field===void 0){ge(NA(a,r));break}i[r]=this.initFacetFieldDef(a,r)}return i}initFacetFieldDef(t,n){const i=Hk(t,n);return i.header?i.header=Ln(i.header):i.header===null&&(i.header=null),i}channelHasField(t){return he(this.facet,t)}fieldDef(t){return this.facet[t]}parseData(){this.component.data=Px(this),this.child.parseData()}parseLayoutSize(){x3(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection,Object.values(this.component.selection).some(t=>Ka(t))&&bk(vk)}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),tSe(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of Fr)for(const i of c3){const r=this.component.layoutHeaders[n],a=r[i],{facetFieldDef:s}=r;if(s){const o=Od("titleOrient",s.header,this.config,n);if(["right","bottom"].includes(o)){const l=Mx(n,o);t.titleAnchor??(t.titleAnchor={}),t.titleAnchor[l]="end"}}if(a!=null&&a[0]){const o=n==="row"?"height":"width",l=i==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(o)&&(t[l]??(t[l]={}),t[l][n]=.5),r.title&&(t.offset??(t.offset={}),t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,i=t?this.columnDistinctSignal():n?1:void 0;let r="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(r="none"),{...this.getHeaderLayoutMixins(),...i?{columns:i}:{},bounds:"full",align:r}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof dp))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof dp?{...this.channelHasField("column")?{encode:{update:{columns:{field:xe(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],i=[];if(this.child instanceof dp){if(this.child.channelHasField("column")){const r=xe(this.child.facet.column);t.push(r),n.push("distinct"),i.push(`distinct_${r}`)}}else for(const r of So){const a=this.child.component.scales[r];if(a&&!a.merged){const s=a.get("type"),o=a.get("range");if(Mn(s)&&Rc(o)){const l=Ox(this.child,r),f=y3(l);f?(t.push(f),n.push("distinct"),i.push(`distinct_${f}`)):ge(yk(r))}}}return{fields:t,ops:n,as:i}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:i,column:r}=this.facet,{fields:a,ops:s,as:o}=this.getCardinalityAggregateForChild(),l=[];for(const d of Fr){const h=this.facet[d];if(h){l.push(xe(h));const{bin:p,sort:y}=h;if(Dt(p)&&l.push(xe(h,{binSuffix:"end"})),so(y)){const{field:v,op:b=px}=y,E=iC(h,y);i&&r?(a.push(E),s.push("max"),o.push(E)):(a.push(v),s.push(b),o.push(E))}else if(oe(y)){const v=kd(h,d);a.push(v),s.push("max"),o.push(v)}}}const f=!!i&&!!r;return{name:t,data:n,groupby:l,...f||a.length>0?{aggregate:{...f?{cross:f}:{},...a.length?{fields:a,ops:s,as:o}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,i=n[t];return i?so(i.sort)?[iC(i,i.sort,{expr:"datum"})]:oe(i.sort)?[kd(i,t,{expr:"datum"})]:[xe(i,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,i=n[t];if(i){const{sort:r}=i;return[(so(r)?r.order:!oe(r)&&r)||"ascending"]}return[]}assembleLabelTitle(){var r;const{facet:t,config:n}=this;if(t.facet)return QA(t.facet,"facet",n);const i={row:["top","bottom"],column:["left","right"]};for(const a of l3)if(t[a]){const s=Od("labelOrient",(r=t[a])==null?void 0:r.header,n,a);if(i[a].includes(s))return QA(t[a],a,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,i=KEe(n),r=t.assembleGroupEncodeEntry(!1),a=this.assembleLabelTitle()||t.assembleTitle(),s=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...a?{title:a}:{},...s?{style:s}:{},from:{facet:this.assembleFacet()},sort:{field:Fr.map(l=>this.facetSortFields(l)).flat(),order:Fr.map(l=>this.facetSortOrder(l)).flat()},...i.length>0?{data:i}:{},...r?{encode:{update:r}}:{},...t.assembleGroup(Exe(this,[]))}]}getMapping(){return this.facet}}function oSe(e,t){const{row:n,column:i}=t;if(n&&i){let r=null;for(const a of[n,i])if(so(a.sort)){const{field:s,op:o=px}=a.sort;e=r=new Lc(e,{joinaggregate:[{op:o,field:s,as:iC(a,a.sort,{forAs:!0})}],groupby:[xe(a)]})}return r}return null}function zG(e,t){var n,i,r,a;for(const s of t){const o=s.data;if(e.name&&s.hasName()&&e.name!==s.dataName)continue;const l=(n=e.format)==null?void 0:n.mesh,f=(i=o.format)==null?void 0:i.feature;if(l&&f)continue;const d=(r=e.format)==null?void 0:r.feature;if((d||f)&&d!==f)continue;const h=(a=o.format)==null?void 0:a.mesh;if(!((l||h)&&l!==h)){if(Bp(e)&&Bp(o)){if(ar(e.values,o.values))return s}else if($d(e)&&$d(o)){if(e.url===o.url)return s}else if(EH(e)&&e.name===s.dataName)return s}}return null}function uSe(e,t){if(e.data||!e.parent){if(e.data===null){const i=new bc({values:[]});return t.push(i),i}const n=zG(e.data,t);if(n)return bu(e.data)||(n.data.format=mI({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const i=new bc(e.data);return t.push(i),i}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function lSe(e,t,n){let i=0;for(const r of t.transforms){let a,s;if(Wbe(r))s=e=new Md(e,r),a="derived";else if(n3(r)){const o=J2e(r);s=e=ii.makeWithAncestors(e,{},o,n)??e,e=new th(e,t,r.filter)}else if(mH(r))s=e=Ja.makeFromTransform(e,r,t),a="number";else if(Zbe(r))a="date",n.getWithExplicit(r.field).value===void 0&&(e=new ii(e,{[r.field]:a}),n.set(r.field,a,!1)),s=e=Za.makeFromTransform(e,r);else if(Kbe(r))s=e=ga.makeFromTransform(e,r),a="number",u3(t)&&(e=new Nu(e));else if(pH(r))s=e=Pp.make(e,t,r,i++),a="derived";else if(Ybe(r))s=e=new ih(e,r),a="number";else if(Xbe(r))s=e=new Lc(e,r),a="number";else if(Jbe(r))s=e=uo.makeFromTransform(e,r),a="derived";else if(exe(r))s=e=new zx(e,r),a="derived";else if(txe(r))s=e=new Dx(e,r),a="derived";else if(Vbe(r))s=e=new Nx(e,r),a="derived";else if(jbe(r))s=e=new Bx(e,r),a="derived";else if(Gbe(r))e=new jx(e,r);else if(Qbe(r))s=e=Ql.makeFromTransform(e,r),a="derived";else if(Pbe(r))s=e=new Rx(e,r),a="derived";else if(Ibe(r))s=e=new Lx(e,r),a="derived";else if(qbe(r))s=e=new Ux(e,r),a="derived";else if(Hbe(r))s=e=new Fx(e,r),a="derived";else{ge(b1e(r));continue}if(s&&a!==void 0)for(const o of s.producedFields()??[])n.set(o,a,!1)}return e}function Px(e){var E;let t=uSe(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:i}=e.component.data,r=e.data,s=!(r&&(bu(r)||$d(r)||Bp(r)))&&e.parent?e.parent.component.data.ancestorParse.clone():new hxe;bu(r)?(SH(r)?t=new z0(t,r.sequence):i3(r)&&(t=new N0(t,r.graticule)),s.parseNothing=!0):((E=r==null?void 0:r.format)==null?void 0:E.parse)===null&&(s.parseNothing=!0),t=ii.makeExplicit(t,e,s)??t,t=new Nu(t);const o=e.parent&&rh(e.parent);(qt(e)||lr(e))&&o&&(t=Ja.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=lSe(t,e,s));const l=tEe(e),f=eEe(e);t=ii.makeWithAncestors(t,{},{...l,...f},s)??t,qt(e)&&(t=Zf.parseAll(t,e),t=jp.parseAll(t,e)),(qt(e)||lr(e))&&(o||(t=Ja.makeFromEncoding(t,e)??t),t=Za.makeFromEncoding(t,e)??t,t=Md.parseAllForSortIndex(t,e));const d=t=C1(Ht.Raw,e,t);if(qt(e)){const _=ga.makeFromEncoding(t,e);_&&(t=_,u3(e)&&(t=new Nu(t))),t=Ql.makeFromEncoding(t,e)??t,t=uo.makeFromEncoding(t,e)??t}let h,p;if(qt(e)){const{markDef:_,mark:w,config:A}=e,M=wt("invalid",_,A),{marks:T,scales:R}=p=wH({invalid:M,isPath:Wu(w)});T!==R&&R==="include-invalid-values"&&(h=t=C1(Ht.PreFilterInvalid,e,t)),T==="exclude-invalid-values"&&(t=Rd.make(t,e,p)??t)}const y=t=C1(Ht.Main,e,t);let v;if(qt(e)&&p){const{marks:_,scales:w}=p;_==="include-invalid-values"&&w==="exclude-invalid-values"&&(t=Rd.make(t,e,p)??t,v=t=C1(Ht.PostFilterInvalid,e,t))}qt(e)&&Qxe(e,y);let b=null;if(lr(e)){const _=e.getName("facet");t=oSe(t,e.facet)??t,b=new nh(t,e,_,y.getSource()),n[_]=b}return{...e.component.data,outputNodes:n,outputNodeRefCounts:i,raw:d,main:y,facetRoot:b,ancestorParse:s,preFilterInvalid:h,postFilterInvalid:v}}function C1(e,t,n){const{outputNodes:i,outputNodeRefCounts:r}=t.component.data,a=t.getDataName(e),s=new Bi(n,a,e,r);return i[a]=s,s}class cSe extends b3{constructor(t,n,i,r){var a,s,o,l;super(t,"concat",n,i,r,t.resolve),(((s=(a=t.resolve)==null?void 0:a.axis)==null?void 0:s.x)==="shared"||((l=(o=t.resolve)==null?void 0:o.axis)==null?void 0:l.y)==="shared")&&ge(m1e),this.children=this.getChildren(t).map((f,d)=>A3(f,this,this.getName(`concat_${d}`),void 0,r))}parseData(){this.component.data=Px(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of fe(t.component.selection))this.component.selection[n]=t.component.selection[n]}Object.values(this.component.selection).some(t=>Ka(t))&&bk(vk)}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return Sx(t)?t.vconcat:e3(t)?t.hconcat:t.concat}parseLayoutSize(){rSe(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,i)=>i.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=f3(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,i)=>i.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),i=t.assembleGroupStyle(),r=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...i?{style:i}:{},...r?{encode:{update:r}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"}}}function fSe(e){return e===!1||e===null}const dSe={disable:1,gridScale:1,scale:1,...Bq,labelExpr:1,encode:1},FG=fe(dSe);class E3 extends wo{constructor(t={},n={},i=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=i}clone(){return new E3(Pe(this.explicit),Pe(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!fSe(this.get(t))}hasOrientSignalRef(){return ke(this.explicit.orient)}}function hSe(e,t,n){const{encoding:i,config:r}=e,a=gn(i[t])??gn(i[bs(t)]),s=e.axis(t)||{},{format:o,formatType:l}=s;if(mc(l))return{text:da({fieldOrDatumDef:a,field:"datum.value",format:o,formatType:l,config:r}),...n};if(o===void 0&&l===void 0&&r.customFormatTypes){if(wd(a)==="quantitative"){if(Ad(a)&&a.stack==="normalize"&&r.normalizedNumberFormatType)return{text:da({fieldOrDatumDef:a,field:"datum.value",format:r.normalizedNumberFormat,formatType:r.normalizedNumberFormatType,config:r}),...n};if(r.numberFormatType)return{text:da({fieldOrDatumDef:a,field:"datum.value",format:r.numberFormat,formatType:r.numberFormatType,config:r}),...n}}if(wd(a)==="temporal"&&r.timeFormatType&&pe(a)&&!a.timeUnit)return{text:da({fieldOrDatumDef:a,field:"datum.value",format:r.timeFormat,formatType:r.timeFormatType,config:r}),...n}}return n}function gSe(e){return So.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[ESe(n,e)]),t),{})}const pSe={bottom:"top",top:"bottom",left:"right",right:"left"};function mSe(e){const{axes:t,resolve:n}=e.component,i={top:0,bottom:0,right:0,left:0};for(const r of e.children){r.parseAxesAndHeaders();for(const a of fe(r.component.axes))n.axis[a]=d3(e.component.resolve,a),n.axis[a]==="shared"&&(t[a]=ySe(t[a],r.component.axes[a]),t[a]||(n.axis[a]="independent",delete t[a]))}for(const r of So){for(const a of e.children)if(a.component.axes[r]){if(n.axis[r]==="independent"){t[r]=(t[r]??[]).concat(a.component.axes[r]);for(const s of a.component.axes[r]){const{value:o,explicit:l}=s.getWithExplicit("orient");if(!ke(o)){if(i[o]>0&&!l){const f=pSe[o];i[o]>i[f]&&s.set("orient",f,!1)}i[o]++}}}delete a.component.axes[r]}if(n.axis[r]==="independent"&&t[r]&&t[r].length>1)for(const[a,s]of(t[r]||[]).entries())a>0&&s.get("grid")&&!s.explicit.grid&&(s.implicit.grid=!1)}}function ySe(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let i=0;i<n;i++){const r=e[i],a=t[i];if(!!r!=!!a)return;if(r&&a){const s=r.getWithExplicit("orient"),o=a.getWithExplicit("orient");if(s.explicit&&o.explicit&&s.value!==o.value)return;e[i]=vSe(r,a)}}}else return t.map(n=>n.clone());return e}function vSe(e,t){for(const n of FG){const i=Du(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(r,a)=>{switch(n){case"title":return qI(r,a);case"gridScale":return{explicit:r.explicit,value:tn(r.value,a.value)}}return wx(r,a,n,"axis")});e.setWithExplicit(n,i)}return e}function bSe(e,t,n,i,r){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(ke(n.labelAngle)?n.labelAngle:Lp(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===tG(i,r))return!0}return e===n[t]}const xSe=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function ESe(e,t){var _,w;let n=t.axis(e);const i=new E3,r=gn(t.encoding[e]),{mark:a,config:s}=t,o=(n==null?void 0:n.orient)||((_=s[e==="x"?"axisX":"axisY"])==null?void 0:_.orient)||((w=s.axis)==null?void 0:w.orient)||s2e(e),l=t.getScaleComponent(e).get("type"),f=Jxe(e,l,o,t.config),d=n!==void 0?!n:VA("disable",s.style,n==null?void 0:n.style,f).configValue;if(i.set("disable",d,n!==void 0),d)return i;n=n||{};const h=i2e(r,n,e,s.style,f),p=Aq(n.formatType,r,l),y=wq(r,r.type,n.format,n.formatType,s,!0),v={fieldOrDatumDef:r,axis:n,channel:e,model:t,scaleType:l,orient:o,labelAngle:h,format:y,formatType:p,mark:a,config:s};for(const A of FG){const M=A in eF?eF[A](v):$z(A)?n[A]:void 0,T=M!==void 0,R=bSe(M,A,n,t,e);if(T&&R)i.set(A,M,R);else{const{configValue:O=void 0,configFrom:k=void 0}=$z(A)&&A!=="values"?VA(A,s.style,n.style,f):{},$=O!==void 0;T&&!$?i.set(A,M,R):(k!=="vgAxisConfig"||xSe.has(A)&&$||R0(O)||ke(O))&&i.set(A,O,!1)}}const b=n.encoding??{},E=Uq.reduce((A,M)=>{if(!i.hasAxisPart(M))return A;const T=oG(b[M]??{},t),R=M==="labels"?hSe(t,e,T):T;return R!==void 0&&!At(R)&&(A[M]={update:R}),A},{});return At(E)||i.set("encode",E,!!n.encoding||n.labelAngle!==void 0),i}function SSe({encoding:e,size:t}){for(const n of So){const i=Gi(n);us(t[i])&&hu(e[n])&&(delete t[i],ge(VI(i)))}return t}const _Se={vgMark:"arc",encodeEntry:e=>({...Vr(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...Ei("x",e,{defaultPos:"mid"}),...Ei("y",e,{defaultPos:"mid"}),...go(e,"radius"),...go(e,"theta")})},wSe={vgMark:"area",encodeEntry:e=>({...Vr(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...Rv("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...Rv("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...o3(e)})},ASe={vgMark:"rect",encodeEntry:e=>({...Vr(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...go(e,"x"),...go(e,"y")})},CSe={vgMark:"shape",encodeEntry:e=>({...Vr(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&pe(n)&&n.type===Jd?{field:xe(n,{expr:"datum"})}:{}}]}},$Se={vgMark:"image",encodeEntry:e=>({...Vr(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...go(e,"x"),...go(e,"y"),...a3(e,"url")})},TSe={vgMark:"line",encodeEntry:e=>({...Vr(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...Ei("x",e,{defaultPos:"mid"}),...Ei("y",e,{defaultPos:"mid"}),...Bn("size",e,{vgChannel:"strokeWidth"}),...o3(e)})},MSe={vgMark:"trail",encodeEntry:e=>({...Vr(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...Ei("x",e,{defaultPos:"mid"}),...Ei("y",e,{defaultPos:"mid"}),...Bn("size",e),...o3(e)})};function S3(e,t){const{config:n}=e;return{...Vr(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...Ei("x",e,{defaultPos:"mid"}),...Ei("y",e,{defaultPos:"mid"}),...Bn("size",e),...Bn("angle",e),...kSe(e,n,t)}}function kSe(e,t,n){return n?{shape:{value:n}}:Bn("shape",e)}const OSe={vgMark:"symbol",encodeEntry:e=>S3(e)},RSe={vgMark:"symbol",encodeEntry:e=>S3(e,"circle")},DSe={vgMark:"symbol",encodeEntry:e=>S3(e,"square")},NSe={vgMark:"rect",encodeEntry:e=>({...Vr(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...go(e,"x"),...go(e,"y")})},zSe={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...Vr(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Rv("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...Rv("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...Bn("size",e,{vgChannel:"strokeWidth"})}}},FSe={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...Vr(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...Ei("x",e,{defaultPos:"mid"}),...Ei("y",e,{defaultPos:"mid"}),...a3(e),...Bn("size",e,{vgChannel:"fontSize"}),...Bn("angle",e),...Qz("align",LSe(e.markDef,n,t)),...Qz("baseline",USe(e.markDef,n,t)),...Ei("radius",e,{defaultPos:null}),...Ei("theta",e,{defaultPos:null})}}};function LSe(e,t,n){if(wt("align",e,n)===void 0)return"center"}function USe(e,t,n){if(wt("baseline",e,n)===void 0)return"middle"}const BSe={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,i=n.orient,r=i==="horizontal"?"x":"y",a=i==="horizontal"?"y":"x",s=i==="horizontal"?"height":"width";return{...Vr(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...go(e,r),...Ei(a,e,{defaultPos:"mid",vgChannel:a==="y"?"yc":"xc"}),[s]:zt(wt("thickness",n,t))}}},$1={arc:_Se,area:wSe,bar:ASe,circle:RSe,geoshape:CSe,image:$Se,line:TSe,point:OSe,rect:NSe,rule:zSe,square:DSe,text:FSe,tick:BSe,trail:MSe};function jSe(e){if(Je([hx,fx,Yye],e.mark)){const t=Gq(e.mark,e.encoding);if(t.length>0)return PSe(e,t)}else if(e.mark===dx){const t=RA.some(n=>wt(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return ISe(e)}return _3(e)}const mF="faceted_path_";function PSe(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:mF+e.requestDataName(Ht.Main),data:e.requestDataName(Ht.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:_3(e,{fromPrefix:mF})}]}const yF="stack_group_";function ISe(e){var f;const[t]=_3(e,{fromPrefix:yF}),n=e.scaleName(e.stack.fieldChannel),i=(d={})=>e.vgField(e.stack.fieldChannel,d),r=(d,h)=>{const p=[i({prefix:"min",suffix:"start",expr:h}),i({prefix:"max",suffix:"start",expr:h}),i({prefix:"min",suffix:"end",expr:h}),i({prefix:"max",suffix:"end",expr:h})];return`${d}(${p.map(y=>`scale('${n}',${y})`).join(",")})`};let a,s;e.stack.fieldChannel==="x"?(a={...vd(t.encode.update,["y","yc","y2","height",...RA]),x:{signal:r("min","datum")},x2:{signal:r("max","datum")},clip:{value:!0}},s={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...Ui(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(a={...vd(t.encode.update,["x","xc","x2","width"]),y:{signal:r("min","datum")},y2:{signal:r("max","datum")},clip:{value:!0}},s={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...Ui(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const d of RA){const h=ss(d,e.markDef,e.config);t.encode.update[d]?(a[d]=t.encode.update[d],delete t.encode.update[d]):h&&(a[d]=zt(h)),h&&(t.encode.update[d]={value:0})}const o=[];if(((f=e.stack.groupbyChannels)==null?void 0:f.length)>0)for(const d of e.stack.groupbyChannels){const h=e.fieldDef(d),p=xe(h);p&&o.push(p),(h!=null&&h.bin||h!=null&&h.timeUnit)&&o.push(xe(h,{binSuffix:"end"}))}return a=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((d,h)=>{if(t.encode.update[h])return{...d,[h]:t.encode.update[h]};{const p=ss(h,e.markDef,e.config);return p!==void 0?{...d,[h]:zt(p)}:d}},a),a.stroke&&(a.strokeForeground={value:!0},a.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(Ht.Main),name:yF+e.requestDataName(Ht.Main),groupby:o,aggregate:{fields:[i({suffix:"start"}),i({suffix:"start"}),i({suffix:"end"}),i({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:a},marks:[{type:"group",encode:{update:s},marks:[t]}]}]}function qSe(e){const{encoding:t,stack:n,mark:i,markDef:r,config:a}=e,s=t.order;if(!(!oe(s)&&ba(s)&&kA(s.value)||!s&&kA(wt("order",r,a)))){if((oe(s)||pe(s))&&!n)return jI(s,{expr:"datum"});if(Wu(i)){const o=r.orient==="horizontal"?"y":"x",l=t[o];if(pe(l))return{field:o}}}}function _3(e,t={fromPrefix:""}){const{mark:n,markDef:i,encoding:r,config:a}=e,s=tn(i.clip,HSe(e),GSe(e)),o=UI(i),l=r.key,f=qSe(e),d=YSe(e),h=wt("aria",i,a),p=$1[n].postEncodingTransform?$1[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:$1[n].vgMark,...s?{clip:s}:{},...o?{style:o}:{},...l?{key:l.field}:{},...f?{sort:f}:{},...d||{},...h===!1?{aria:h}:{},from:{data:t.fromPrefix+e.requestDataName(Ht.Main)},encode:{update:$1[n].encodeEntry(e)},...p?{transform:p}:{}}]}function HSe(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t!=null&&t.get("selectionExtent")||n!=null&&n.get("selectionExtent")?!0:void 0}function GSe(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function YSe(e){if(!e.component.selection)return null;const t=fe(e.component.selection).length;let n=t,i=e.parent;for(;i&&n===0;)n=fe(i.component.selection).length,i=i.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}class LG extends RG{constructor(t,n,i,r={},a){super(t,"unit",n,i,a,void 0,Mz(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[],this.correctDataNames=f=>{var d,h,p;return(d=f.from)!=null&&d.data&&(f.from.data=this.lookupDataSource(f.from.data),"time"in this.encoding&&(f.from.data=f.from.data+CH)),(p=(h=f.from)==null?void 0:h.facet)!=null&&p.data&&(f.from.facet.data=this.lookupDataSource(f.from.facet.data)),f};const s=os(t.mark)?{...t.mark}:{type:t.mark},o=s.type;s.filled===void 0&&(s.filled=Mbe(s,a,{graticule:t.data&&i3(t.data)}));const l=this.encoding=Dve(t.encoding||{},o,s.filled,a);this.markDef=dH(s,l,a),this.size=SSe({encoding:l,size:Mz(t)?{...r,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:r}),this.stack=fH(this.markDef,l),this.specifiedScales=this.initScales(o,l),this.specifiedAxes=this.initAxes(l),this.specifiedLegends=this.initLegends(l),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(f=>Kk(f))}get hasProjection(){const{encoding:t}=this,n=this.mark===yq,i=t&&Ame.some(r=>qe(t[r]));return n||i}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return gk.reduce((i,r)=>{const a=gn(n[r]);return a&&(i[r]=this.initScale(a.scale??{})),i},{})}initScale(t){const{domain:n,range:i}=t,r=Ln(t);return oe(n)&&(r.domain=n.map(ir)),oe(i)&&(r.range=i.map(ir)),r}initAxes(t){return So.reduce((n,i)=>{const r=t[i];if(qe(r)||i===Ut&&qe(t.x2)||i===On&&qe(t.y2)){const a=qe(r)?r.axis:void 0;n[i]=a&&this.initAxis({...a})}return n},{})}initAxis(t){const n=fe(t),i={};for(const r of n){const a=t[r];i[r]=R0(a)?LI(a):ir(a)}return i}initLegends(t){return Fme.reduce((n,i)=>{const r=gn(t[i]);if(r&&Ume(i)){const a=r.legend;n[i]=a&&Ln(a)}return n},{})}parseData(){this.component.data=Px(this)}parseLayoutSize(){aSe(this)}parseSelections(){this.component.selection=Wxe(this,this.selection)}parseMarkGroup(){this.component.mark=jSe(this)}parseAxesAndHeaders(){this.component.axes=gSe(this)}assembleSelectionTopLevelSignals(t){return Sxe(this,t)}assembleSignals(){return[...KH(this),...xxe(this,[])]}assembleSelectionData(t){return _xe(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return f3(this)}assembleMarks(){let t=this.component.mark??[];return(!this.parent||!rh(this.parent))&&(t=kH(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return Vl(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return xa(n)}typedFieldDef(t){const n=this.fieldDef(t);return Ci(n)?n:null}}class w3 extends b3{constructor(t,n,i,r,a){super(t,"layer",n,i,a,t.resolve,t.view);const s={...r,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((o,l)=>{if(_x(o))return new w3(o,this,this.getName(`layer_${l}`),s,a);if(_o(o))return new LG(o,this,this.getName(`layer_${l}`),s,a);throw new Error(mk(o))})}parseData(){this.component.data=Px(this);for(const t of this.children)t.parseData()}parseLayoutSize(){iSe(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of fe(t.component.selection))this.component.selection[n]=t.component.selection[n]}Object.values(this.component.selection).some(t=>Ka(t))&&bk(vk)}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){mSe(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,i)=>i.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),KH(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),f3(this))}assembleSelectionData(t){return this.children.reduce((n,i)=>i.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const i of this.children)for(const r of Se(i.assembleGroupStyle()))t.add(r);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return wxe(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),pG(this))}}function A3(e,t,n,i,r){if(mx(e))return new dp(e,t,n,r);if(_x(e))return new w3(e,t,n,i,r);if(_o(e))return new LG(e,t,n,i,r);if(ibe(e))return new cSe(e,t,n,r);throw new Error(mk(e))}function XSe(e,t={}){t.logger&&sye(t.logger),t.fieldTitle&&zq(t.fieldTitle);try{const n=cH(Nd(t.config,e.config)),i=bH(e,n),r=A3(i,null,"",void 0,n);return r.parse(),yEe(r.component.data,r),{spec:WSe(r,VSe(e,i.autosize,n,r),e.datasets,e.usermeta),normalized:i}}finally{t.logger&&oye(),t.fieldTitle&&wve()}}function VSe(e,t,n,i){const r=i.component.layoutSize.get("width"),a=i.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},i.hasAxisOrientSignalRef()&&(t.resize=!0)):_e(t)&&(t={type:t}),r&&a&&cxe(t.type)){if(r==="step"&&a==="step")ge(hz()),t.type="pad";else if(r==="step"||a==="step"){const s=r==="step"?"width":"height";ge(hz(ax(s)));const o=s==="width"?"height":"width";t.type=fxe(o)}}return{...fe(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...Pz(n,!1),...Pz(e,!0)}}function WSe(e,t,n={},i){const r=e.config?ybe(e.config):void 0,a=JEe(e.component.data,n),s=e.assembleSelectionData(a),o=e.assembleProjections(),l=e.assembleTitle(),f=e.assembleGroupStyle(),d=e.assembleGroupEncodeEntry(!0);let h=e.assembleLayoutSignals();h=h.filter(v=>(v.name==="width"||v.name==="height")&&v.value!==void 0?(t[v.name]=+v.value,!1):!0);const{params:p,...y}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...y,...l?{title:l}:{},...f?{style:f}:{},...d?{encode:{update:d}}:{},data:s,...o.length>0?{projections:o}:{},...e.assembleGroup([...h,...e.assembleSelectionTopLevelSignals([]),...sH(p)]),...r?{config:r}:{},...i?{usermeta:i}:{}}}const QSe=bme.version,ZSe=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:xd,accessPathWithDatum:sk,accessWithDatumToUnescapedPath:vt,compile:XSe,contains:Je,deepEqual:ar,deleteNestedProperty:Sv,duplicate:Pe,entries:ku,every:ik,fieldIntersection:ak,flatAccessWithDatum:vI,getFirstDefined:tn,hasIntersection:rk,hasProperty:he,hash:nt,internalField:EI,isBoolean:Fp,isEmpty:At,isEqual:Eme,isInternalField:SI,isNullOrFalse:kA,isNumeric:Jb,keys:fe,logicalExpr:cp,mergeDeep:mI,never:pI,normalize:bH,normalizeAngle:Lp,omit:Ui,pick:vd,prefixGenerator:OA,removePathFromField:Zd,replaceAll:cc,replacePathInField:Hr,resetIdCounter:_me,setEqual:yI,some:bd,stringify:Ct,titleCase:E0,unique:Ya,uniqueId:xI,vals:qn,varName:Lt,version:QSe},Symbol.toStringTag,{value:"Module"}));function UG(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var KSe="2.15.0",JSe={version:KSe};const Of="#fff",vF="#888",e_e={background:"#333",view:{stroke:vF},title:{color:Of,subtitleColor:Of},style:{"guide-label":{fill:Of},"guide-title":{fill:Of}},axis:{domainColor:Of,gridColor:vF,tickColor:Of}},_l="#4572a7",t_e={background:"#fff",arc:{fill:_l},area:{fill:_l},line:{stroke:_l,strokeWidth:2},path:{stroke:_l},rect:{fill:_l},shape:{stroke:_l},symbol:{fill:_l,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},wl="#30a2da",__="#cbcbcb",n_e="#999",i_e="#333",bF="#f0f0f0",xF="#333",r_e={arc:{fill:wl},area:{fill:wl},axis:{domainColor:__,grid:!0,gridColor:__,gridWidth:1,labelColor:n_e,labelFontSize:10,titleColor:i_e,tickColor:__,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:bF,group:{fill:bF},legend:{labelColor:xF,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:xF,titleFontSize:14,titlePadding:10},line:{stroke:wl,strokeWidth:2},path:{stroke:wl,strokeWidth:.5},rect:{fill:wl},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:wl},bar:{binSpacing:2,fill:wl,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},Al="#000",a_e={group:{fill:"#e5e5e5"},arc:{fill:Al},area:{fill:Al},line:{stroke:Al},path:{stroke:Al},rect:{fill:Al},shape:{stroke:Al},symbol:{fill:Al,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},s_e=22,o_e="normal",EF="Benton Gothic, sans-serif",SF=11.5,u_e="normal",Cl="#82c6df",w_="Benton Gothic Bold, sans-serif",_F="normal",wF=13,Cg={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"]},l_e={background:"#ffffff",title:{anchor:"start",color:"#000000",font:w_,fontSize:s_e,fontWeight:o_e},arc:{fill:Cl},area:{fill:Cl},line:{stroke:Cl,strokeWidth:2},path:{stroke:Cl},rect:{fill:Cl},shape:{stroke:Cl},symbol:{fill:Cl,size:30},axis:{labelFont:EF,labelFontSize:SF,labelFontWeight:u_e,titleFont:w_,titleFontSize:wF,titleFontWeight:_F},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:EF,labelFontSize:SF,symbolType:"square",titleFont:w_,titleFontSize:wF,titleFontWeight:_F},range:{category:Cg["category-6"],diverging:Cg["fireandice-6"],heatmap:Cg["fire-7"],ordinal:Cg["fire-7"],ramp:Cg["fire-7"]}},$l="#ab5787",T1="#979797",c_e={background:"#f9f9f9",arc:{fill:$l},area:{fill:$l},line:{stroke:$l},path:{stroke:$l},rect:{fill:$l},shape:{stroke:$l},symbol:{fill:$l,size:30},axis:{domainColor:T1,domainWidth:.5,gridWidth:.2,labelColor:T1,tickColor:T1,tickWidth:.2,titleColor:T1},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},Tl="#3e5c69",f_e={background:"#fff",arc:{fill:Tl},area:{fill:Tl},line:{stroke:Tl},path:{stroke:Tl},rect:{fill:Tl},shape:{stroke:Tl},symbol:{fill:Tl},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},kr="#1696d2",AF="#000000",d_e="#FFFFFF",M1="Lato",A_="Lato",h_e="Lato",g_e="#DEDDDD",p_e=18,$g={"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},m_e={background:d_e,title:{anchor:"start",fontSize:p_e,font:M1},axisX:{domain:!0,domainColor:AF,domainWidth:1,grid:!1,labelFontSize:12,labelFont:A_,labelAngle:0,tickColor:AF,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:M1},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:g_e,gridWidth:1,labelFontSize:12,labelFont:A_,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:M1,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:A_,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:M1,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:$g["six-groups-cat-1"],diverging:$g["diverging-colors"],heatmap:$g["diverging-colors"],ordinal:$g["six-groups-seq"],ramp:$g["shades-blue"]},area:{fill:kr},rect:{fill:kr},line:{color:kr,stroke:kr,strokeWidth:5},trail:{color:kr,stroke:kr,strokeWidth:0,size:1},path:{stroke:kr,strokeWidth:.5},point:{filled:!0},text:{font:h_e,color:kr,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:kr,stroke:null}},arc:{fill:kr},shape:{stroke:kr},symbol:{fill:kr,size:30}},Ml="#3366CC",CF="#ccc",k1="Arial, sans-serif",y_e={arc:{fill:Ml},area:{fill:Ml},path:{stroke:Ml},rect:{fill:Ml},shape:{stroke:Ml},symbol:{stroke:Ml},circle:{fill:Ml},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:k1,fontSize:12},"guide-title":{font:k1,fontSize:12},"group-title":{font:k1,fontSize:12}},title:{font:k1,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:CF,tickColor:CF,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},C3=e=>e*(1/3+1),$F=C3(9),TF=C3(10),MF=C3(12),Tg="Segoe UI",kF="wf_standard-font, helvetica, arial, sans-serif",OF="#252423",Mg="#605E5C",RF="transparent",v_e="#C8C6C4",na="#118DFF",b_e="#12239E",x_e="#E66C37",E_e="#6B007B",S_e="#E044A7",__e="#744EC2",w_e="#D9B300",A_e="#D64550",BG=na,jG="#DEEFFF",DF=[jG,BG],C_e=[jG,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",BG],$_e={view:{stroke:RF},background:RF,font:Tg,header:{titleFont:kF,titleFontSize:MF,titleColor:OF,labelFont:Tg,labelFontSize:TF,labelColor:Mg},axis:{ticks:!1,grid:!1,domain:!1,labelColor:Mg,labelFontSize:$F,titleFont:kF,titleColor:OF,titleFontSize:MF,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:v_e,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:na},line:{stroke:na,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:Tg,fontSize:$F,fill:Mg},arc:{fill:na},area:{fill:na,line:!0,opacity:.6},path:{stroke:na},rect:{fill:na},point:{fill:na,filled:!0,size:75},shape:{stroke:na},symbol:{fill:na,strokeWidth:1.5,size:50},legend:{titleFont:Tg,titleFontWeight:"bold",titleColor:Mg,labelFont:Tg,labelFontSize:TF,labelColor:Mg,symbolType:"circle",symbolSize:75},range:{category:[na,b_e,x_e,E_e,S_e,__e,w_e,A_e],diverging:DF,heatmap:DF,ordinal:C_e}},C_='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',T_e='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',$_=400,O1={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},M_e=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],k_e=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function Ix({theme:e,background:t}){const n=["white","g10"].includes(e)?"light":"dark",i=O1.gridBg[e],r=O1.textPrimary[e],a=O1.textSecondary[e],s=n==="dark"?M_e:k_e,o=n==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:o},area:{fill:o},path:{stroke:o},rect:{fill:o},shape:{stroke:o},symbol:{stroke:o},circle:{fill:o},view:{fill:i,stroke:i},group:{fill:i},title:{color:r,anchor:"start",dy:-15,fontSize:16,font:C_,fontWeight:600},axis:{labelColor:a,labelFontSize:12,labelFont:T_e,labelFontWeight:$_,titleColor:r,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:O1.layerAccent01[e],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:C_,fill:a,fontWeight:$_},"guide-title":{font:C_,fill:a,fontWeight:$_}},range:{category:s,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const O_e=Ix({theme:"white",background:"#ffffff"}),R_e=Ix({theme:"g10",background:"#f4f4f4"}),D_e=Ix({theme:"g90",background:"#262626"}),N_e=Ix({theme:"g100",background:"#161616"}),z_e=JSe.version,F_e=Object.freeze(Object.defineProperty({__proto__:null,carbong10:R_e,carbong100:N_e,carbong90:D_e,carbonwhite:O_e,dark:e_e,excel:t_e,fivethirtyeight:r_e,ggplot2:a_e,googlecharts:y_e,latimes:l_e,powerbi:$_e,quartz:c_e,urbaninstitute:m_e,version:z_e,vox:f_e},Symbol.toStringTag,{value:"Module"}));function L_e(e,t,n,i){if(oe(e))return`[${e.map(r=>t(_e(r)?r:NF(r,n))).join(", ")}]`;if(Ee(e)){let r="";const{title:a,image:s,...o}=e;a&&(r+=`<h2>${t(a)}</h2>`),s&&(r+=`<img src="${new URL(t(s),i||location.href).href}">`);const l=Object.keys(o);if(l.length>0){r+="<table>";for(const f of l){let d=o[f];d!==void 0&&(Ee(d)&&(d=NF(d,n)),r+=`<tr><td class="key">${t(f)}</td><td class="value">${t(d)}</td></tr>`)}r+="</table>"}return r||"{}"}return t(e)}function U_e(e){const t=[];return function(n,i){if(typeof i!="object"||i===null)return i;const r=t.indexOf(this)+1;return t.length=r,t.length>e?"[Object]":t.indexOf(i)>=0?"[Circular]":(t.push(i),i)}}function NF(e,t){return JSON.stringify(e,U_e(t))}var B_e=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const PG="vg-tooltip-element",j_e={offsetX:10,offsetY:10,id:PG,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:P_e,maxDepth:2,formatTooltip:L_e,baseURL:"",anchor:"cursor",position:["top","bottom","left","right","top-left","top-right","bottom-left","bottom-right"]};function P_e(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function I_e(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return B_e.toString().replace(PG,e)}function IG(e,t,{offsetX:n,offsetY:i}){const r=qG({x1:e.clientX,x2:e.clientX,y1:e.clientY,y2:e.clientY},t,n,i),a=["bottom-right","bottom-left","top-right","top-left"];for(const s of a)if(HG(r[s],t))return r[s];return r["top-left"]}function q_e(e,t,n,i,r){const{position:a,offsetX:s,offsetY:o}=r,l=e._el.getBoundingClientRect(),f=e._origin,d=H_e(l,f,n),h=qG(d,i,s,o),p=Array.isArray(a)?a:[a];for(const y of p)if(HG(h[y],i)&&!G_e(t,h[y],i))return h[y];return IG(t,i,r)}function H_e(e,t,n){const i=n.isVoronoi?n.datum.bounds:n.bounds;let r=e.left+t[0]+i.x1,a=e.top+t[1]+i.y1,s=n;for(;s.mark.group;)s=s.mark.group,r+=s.x??0,a+=s.y??0;const o=i.x2-i.x1,l=i.y2-i.y1;return{x1:r,x2:r+o,y1:a,y2:a+l}}function qG(e,t,n,i){const r=(e.x1+e.x2)/2,a=(e.y1+e.y2)/2,s=e.x1-t.width-n,o=r-t.width/2,l=e.x2+n,f=e.y1-t.height-i,d=a-t.height/2,h=e.y2+i;return{top:{x:o,y:f},bottom:{x:o,y:h},left:{x:s,y:d},right:{x:l,y:d},"top-left":{x:s,y:f},"top-right":{x:l,y:f},"bottom-left":{x:s,y:h},"bottom-right":{x:l,y:h}}}function HG(e,t){return e.x>=0&&e.y>=0&&e.x+t.width<=window.innerWidth&&e.y+t.height<=window.innerHeight}function G_e(e,t,n){return e.clientX>=t.x&&e.clientX<=t.x+n.width&&e.clientY>=t.y&&e.clientY<=t.y+n.height}class Y_e{constructor(t){this.options={...j_e,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const i=document.createElement("style");i.setAttribute("id",this.options.styleId),i.innerHTML=I_e(n);const r=document.head;r.childNodes.length>0?r.insertBefore(i,r.childNodes[0]):r.appendChild(i)}}tooltipHandler(t,n,i,r){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),r==null||r===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(r,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:a,y:s}=this.options.anchor==="mark"?q_e(t,n,i,this.el.getBoundingClientRect(),this.options):IG(n,this.el.getBoundingClientRect(),this.options);this.el.style.top=`${s}px`,this.el.style.left=`${a}px`}}var T_={};/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var X_e=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)r.hasOwnProperty(a)&&(i[a]=r[a])},e(t,n)};return function(t,n){e(t,n);function i(){this.constructor=t}t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),V_e=Object.prototype.hasOwnProperty;function rC(e,t){return V_e.call(e,t)}function aC(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var i=[];for(var r in e)rC(e,r)&&i.push(r);return i}function sr(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function sC(e){for(var t=0,n=e.length,i;t<n;){if(i=e.charCodeAt(t),i>=48&&i<=57){t++;continue}return!1}return!0}function Rl(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function GG(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function oC(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(oC(e[t]))return!0}else if(typeof e=="object"){for(var i=aC(e),r=i.length,a=0;a<r;a++)if(oC(e[i[a]]))return!0}}return!1}function zF(e,t){var n=[e];for(var i in t){var r=typeof t[i]=="object"?JSON.stringify(t[i],null,2):t[i];typeof r<"u"&&n.push(i+": "+r)}return n.join(`
`)}var YG=function(e){X_e(t,e);function t(n,i,r,a,s){var o=this.constructor,l=e.call(this,zF(n,{name:i,index:r,operation:a,tree:s}))||this;return l.name=i,l.index=r,l.operation=a,l.tree=s,Object.setPrototypeOf(l,o.prototype),l.message=zF(n,{name:i,index:r,operation:a,tree:s}),l}return t}(Error),Wt=YG,W_e=sr,Pf={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var i=e[t];return delete e[t],{newDocument:n,removed:i}},replace:function(e,t,n){var i=e[t];return e[t]=this.value,{newDocument:n,removed:i}},move:function(e,t,n){var i=Fv(n,this.path);i&&(i=sr(i));var r=Zl(n,{op:"remove",path:this.from}).removed;return Zl(n,{op:"add",path:this.path,value:r}),{newDocument:n,removed:i}},copy:function(e,t,n){var i=Fv(n,this.from);return Zl(n,{op:"add",path:this.path,value:sr(i)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:Ip(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},Q_e={add:function(e,t,n){return sC(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var i=e.splice(t,1);return{newDocument:n,removed:i[0]}},replace:function(e,t,n){var i=e[t];return e[t]=this.value,{newDocument:n,removed:i}},move:Pf.move,copy:Pf.copy,test:Pf.test,_get:Pf._get};function Fv(e,t){if(t=="")return e;var n={op:"_get",path:t};return Zl(e,n),n.value}function Zl(e,t,n,i,r,a){if(n===void 0&&(n=!1),i===void 0&&(i=!0),r===void 0&&(r=!0),a===void 0&&(a=0),n&&(typeof n=="function"?n(t,0,e,t.path):Lv(t,0)),t.path===""){var s={newDocument:e};if(t.op==="add")return s.newDocument=t.value,s;if(t.op==="replace")return s.newDocument=t.value,s.removed=e,s;if(t.op==="move"||t.op==="copy")return s.newDocument=Fv(e,t.from),t.op==="move"&&(s.removed=e),s;if(t.op==="test"){if(s.test=Ip(e,t.value),s.test===!1)throw new Wt("Test operation failed","TEST_OPERATION_FAILED",a,t,e);return s.newDocument=e,s}else{if(t.op==="remove")return s.removed=e,s.newDocument=null,s;if(t.op==="_get")return t.value=e,s;if(n)throw new Wt("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",a,t,e);return s}}else{i||(e=sr(e));var o=t.path||"",l=o.split("/"),f=e,d=1,h=l.length,p=void 0,y=void 0,v=void 0;for(typeof n=="function"?v=n:v=Lv;;){if(y=l[d],y&&y.indexOf("~")!=-1&&(y=GG(y)),r&&(y=="__proto__"||y=="prototype"&&d>0&&l[d-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&p===void 0&&(f[y]===void 0?p=l.slice(0,d).join("/"):d==h-1&&(p=t.path),p!==void 0&&v(t,0,e,p)),d++,Array.isArray(f)){if(y==="-")y=f.length;else{if(n&&!sC(y))throw new Wt("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",a,t,e);sC(y)&&(y=~~y)}if(d>=h){if(n&&t.op==="add"&&y>f.length)throw new Wt("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",a,t,e);var s=Q_e[t.op].call(t,f,y,e);if(s.test===!1)throw new Wt("Test operation failed","TEST_OPERATION_FAILED",a,t,e);return s}}else if(d>=h){var s=Pf[t.op].call(t,f,y,e);if(s.test===!1)throw new Wt("Test operation failed","TEST_OPERATION_FAILED",a,t,e);return s}if(f=f[y],n&&d<h&&(!f||typeof f!="object"))throw new Wt("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",a,t,e)}}}function qx(e,t,n,i,r){if(i===void 0&&(i=!0),r===void 0&&(r=!0),n&&!Array.isArray(t))throw new Wt("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");i||(e=sr(e));for(var a=new Array(t.length),s=0,o=t.length;s<o;s++)a[s]=Zl(e,t[s],n,!0,r,s),e=a[s].newDocument;return a.newDocument=e,a}function Z_e(e,t,n){var i=Zl(e,t);if(i.test===!1)throw new Wt("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return i.newDocument}function Lv(e,t,n,i){if(typeof e!="object"||e===null||Array.isArray(e))throw new Wt("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(Pf[e.op]){if(typeof e.path!="string")throw new Wt("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Wt('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Wt("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Wt("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&oC(e.value))throw new Wt("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var r=e.path.split("/").length,a=i.split("/").length;if(r!==a+1&&r!==a)throw new Wt("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==i)throw new Wt("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var s={op:"_get",path:e.from,value:void 0},o=XG([s],n);if(o&&o.name==="OPERATION_PATH_UNRESOLVABLE")throw new Wt("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Wt("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function XG(e,t,n){try{if(!Array.isArray(e))throw new Wt("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)qx(sr(t),sr(e),n||!0);else{n=n||Lv;for(var i=0;i<e.length;i++)n(e[i],i,t,void 0)}}catch(r){if(r instanceof Wt)return r;throw r}}function Ip(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),i=Array.isArray(t),r,a,s;if(n&&i){if(a=e.length,a!=t.length)return!1;for(r=a;r--!==0;)if(!Ip(e[r],t[r]))return!1;return!0}if(n!=i)return!1;var o=Object.keys(e);if(a=o.length,a!==Object.keys(t).length)return!1;for(r=a;r--!==0;)if(!t.hasOwnProperty(o[r]))return!1;for(r=a;r--!==0;)if(s=o[r],!Ip(e[s],t[s]))return!1;return!0}return e!==e&&t!==t}var K_e=Object.freeze({__proto__:null,JsonPatchError:Wt,_areEquals:Ip,applyOperation:Zl,applyPatch:qx,applyReducer:Z_e,deepClone:W_e,getValueByPointer:Fv,validate:XG,validator:Lv});/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var $3=new WeakMap,J_e=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),ewe=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function twe(e){return $3.get(e)}function nwe(e,t){return e.observers.get(t)}function iwe(e,t){e.observers.delete(t.callback)}function rwe(e,t){t.unobserve()}function awe(e,t){var n=[],i,r=twe(e);if(!r)r=new J_e(e),$3.set(e,r);else{var a=nwe(r,t);i=a&&a.observer}if(i)return i;if(i={},r.value=sr(e),t){i.callback=t,i.next=null;var s=function(){uC(i)},o=function(){clearTimeout(i.next),i.next=setTimeout(s)};typeof window<"u"&&(window.addEventListener("mouseup",o),window.addEventListener("keyup",o),window.addEventListener("mousedown",o),window.addEventListener("keydown",o),window.addEventListener("change",o))}return i.patches=n,i.object=e,i.unobserve=function(){uC(i),clearTimeout(i.next),iwe(r,i),typeof window<"u"&&(window.removeEventListener("mouseup",o),window.removeEventListener("keyup",o),window.removeEventListener("mousedown",o),window.removeEventListener("keydown",o),window.removeEventListener("change",o))},r.observers.set(t,new ewe(t,i)),i}function uC(e,t){t===void 0&&(t=!1);var n=$3.get(e.object);T3(n.value,e.object,e.patches,"",t),e.patches.length&&qx(n.value,e.patches);var i=e.patches;return i.length>0&&(e.patches=[],e.callback&&e.callback(i)),i}function T3(e,t,n,i,r){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var a=aC(t),s=aC(e),o=!1,l=s.length-1;l>=0;l--){var f=s[l],d=e[f];if(rC(t,f)&&!(t[f]===void 0&&d!==void 0&&Array.isArray(t)===!1)){var h=t[f];typeof d=="object"&&d!=null&&typeof h=="object"&&h!=null&&Array.isArray(d)===Array.isArray(h)?T3(d,h,n,i+"/"+Rl(f),r):d!==h&&(r&&n.push({op:"test",path:i+"/"+Rl(f),value:sr(d)}),n.push({op:"replace",path:i+"/"+Rl(f),value:sr(h)}))}else Array.isArray(e)===Array.isArray(t)?(r&&n.push({op:"test",path:i+"/"+Rl(f),value:sr(d)}),n.push({op:"remove",path:i+"/"+Rl(f)}),o=!0):(r&&n.push({op:"test",path:i,value:e}),n.push({op:"replace",path:i,value:t}))}if(!(!o&&a.length==s.length))for(var l=0;l<a.length;l++){var f=a[l];!rC(e,f)&&t[f]!==void 0&&n.push({op:"add",path:i+"/"+Rl(f),value:sr(t[f])})}}}function swe(e,t,n){n===void 0&&(n=!1);var i=[];return T3(e,t,i,"",n),i}var owe=Object.freeze({__proto__:null,compare:swe,generate:uC,observe:awe,unobserve:rwe});Object.assign({},K_e,owe,{JsonPatchError:YG,deepClone:sr,escapePathComponent:Rl,unescapePathComponent:GG});function uwe(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var M_,FF;function lwe(){if(FF)return M_;FF=1;class e{constructor(){this.max=1e3,this.map=new Map}get(n){const i=this.map.get(n);if(i!==void 0)return this.map.delete(n),this.map.set(n,i),i}delete(n){return this.map.delete(n)}set(n,i){if(!this.delete(n)&&i!==void 0){if(this.map.size>=this.max){const a=this.map.keys().next().value;this.delete(a)}this.map.set(n,i)}return this}}return M_=e,M_}var k_,LF;function M3(){if(LF)return k_;LF=1;const e=Object.freeze({loose:!0}),t=Object.freeze({});return k_=i=>i?typeof i!="object"?e:i:t,k_}var R1={exports:{}},O_,UF;function k3(){if(UF)return O_;UF=1;const e="2.0.0",t=256,n=Number.MAX_SAFE_INTEGER||9007199254740991,i=16,r=t-6;return O_={MAX_LENGTH:t,MAX_SAFE_COMPONENT_LENGTH:i,MAX_SAFE_BUILD_LENGTH:r,MAX_SAFE_INTEGER:n,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:e,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},O_}var R_,BF;function Hx(){return BF||(BF=1,R_=typeof process=="object"&&T_&&T_.NODE_DEBUG&&/\bsemver\b/i.test(T_.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{}),R_}var jF;function O3(){return jF||(jF=1,function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:i,MAX_LENGTH:r}=k3(),a=Hx();t=e.exports={};const s=t.re=[],o=t.safeRe=[],l=t.src=[],f=t.t={};let d=0;const h="[a-zA-Z0-9-]",p=[["\\s",1],["\\d",r],[h,i]],y=b=>{for(const[E,_]of p)b=b.split(`${E}*`).join(`${E}{0,${_}}`).split(`${E}+`).join(`${E}{1,${_}}`);return b},v=(b,E,_)=>{const w=y(E),A=d++;a(b,A,E),f[b]=A,l[A]=E,s[A]=new RegExp(E,_?"g":void 0),o[A]=new RegExp(w,_?"g":void 0)};v("NUMERICIDENTIFIER","0|[1-9]\\d*"),v("NUMERICIDENTIFIERLOOSE","\\d+"),v("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${h}*`),v("MAINVERSION",`(${l[f.NUMERICIDENTIFIER]})\\.(${l[f.NUMERICIDENTIFIER]})\\.(${l[f.NUMERICIDENTIFIER]})`),v("MAINVERSIONLOOSE",`(${l[f.NUMERICIDENTIFIERLOOSE]})\\.(${l[f.NUMERICIDENTIFIERLOOSE]})\\.(${l[f.NUMERICIDENTIFIERLOOSE]})`),v("PRERELEASEIDENTIFIER",`(?:${l[f.NUMERICIDENTIFIER]}|${l[f.NONNUMERICIDENTIFIER]})`),v("PRERELEASEIDENTIFIERLOOSE",`(?:${l[f.NUMERICIDENTIFIERLOOSE]}|${l[f.NONNUMERICIDENTIFIER]})`),v("PRERELEASE",`(?:-(${l[f.PRERELEASEIDENTIFIER]}(?:\\.${l[f.PRERELEASEIDENTIFIER]})*))`),v("PRERELEASELOOSE",`(?:-?(${l[f.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[f.PRERELEASEIDENTIFIERLOOSE]})*))`),v("BUILDIDENTIFIER",`${h}+`),v("BUILD",`(?:\\+(${l[f.BUILDIDENTIFIER]}(?:\\.${l[f.BUILDIDENTIFIER]})*))`),v("FULLPLAIN",`v?${l[f.MAINVERSION]}${l[f.PRERELEASE]}?${l[f.BUILD]}?`),v("FULL",`^${l[f.FULLPLAIN]}$`),v("LOOSEPLAIN",`[v=\\s]*${l[f.MAINVERSIONLOOSE]}${l[f.PRERELEASELOOSE]}?${l[f.BUILD]}?`),v("LOOSE",`^${l[f.LOOSEPLAIN]}$`),v("GTLT","((?:<|>)?=?)"),v("XRANGEIDENTIFIERLOOSE",`${l[f.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),v("XRANGEIDENTIFIER",`${l[f.NUMERICIDENTIFIER]}|x|X|\\*`),v("XRANGEPLAIN",`[v=\\s]*(${l[f.XRANGEIDENTIFIER]})(?:\\.(${l[f.XRANGEIDENTIFIER]})(?:\\.(${l[f.XRANGEIDENTIFIER]})(?:${l[f.PRERELEASE]})?${l[f.BUILD]}?)?)?`),v("XRANGEPLAINLOOSE",`[v=\\s]*(${l[f.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[f.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[f.XRANGEIDENTIFIERLOOSE]})(?:${l[f.PRERELEASELOOSE]})?${l[f.BUILD]}?)?)?`),v("XRANGE",`^${l[f.GTLT]}\\s*${l[f.XRANGEPLAIN]}$`),v("XRANGELOOSE",`^${l[f.GTLT]}\\s*${l[f.XRANGEPLAINLOOSE]}$`),v("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),v("COERCE",`${l[f.COERCEPLAIN]}(?:$|[^\\d])`),v("COERCEFULL",l[f.COERCEPLAIN]+`(?:${l[f.PRERELEASE]})?(?:${l[f.BUILD]})?(?:$|[^\\d])`),v("COERCERTL",l[f.COERCE],!0),v("COERCERTLFULL",l[f.COERCEFULL],!0),v("LONETILDE","(?:~>?)"),v("TILDETRIM",`(\\s*)${l[f.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",v("TILDE",`^${l[f.LONETILDE]}${l[f.XRANGEPLAIN]}$`),v("TILDELOOSE",`^${l[f.LONETILDE]}${l[f.XRANGEPLAINLOOSE]}$`),v("LONECARET","(?:\\^)"),v("CARETTRIM",`(\\s*)${l[f.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",v("CARET",`^${l[f.LONECARET]}${l[f.XRANGEPLAIN]}$`),v("CARETLOOSE",`^${l[f.LONECARET]}${l[f.XRANGEPLAINLOOSE]}$`),v("COMPARATORLOOSE",`^${l[f.GTLT]}\\s*(${l[f.LOOSEPLAIN]})$|^$`),v("COMPARATOR",`^${l[f.GTLT]}\\s*(${l[f.FULLPLAIN]})$|^$`),v("COMPARATORTRIM",`(\\s*)${l[f.GTLT]}\\s*(${l[f.LOOSEPLAIN]}|${l[f.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",v("HYPHENRANGE",`^\\s*(${l[f.XRANGEPLAIN]})\\s+-\\s+(${l[f.XRANGEPLAIN]})\\s*$`),v("HYPHENRANGELOOSE",`^\\s*(${l[f.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[f.XRANGEPLAINLOOSE]})\\s*$`),v("STAR","(<|>)?=?\\s*\\*"),v("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),v("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(R1,R1.exports)),R1.exports}var D_,PF;function cwe(){if(PF)return D_;PF=1;const e=/^[0-9]+$/,t=(i,r)=>{const a=e.test(i),s=e.test(r);return a&&s&&(i=+i,r=+r),i===r?0:a&&!s?-1:s&&!a?1:i<r?-1:1};return D_={compareIdentifiers:t,rcompareIdentifiers:(i,r)=>t(r,i)},D_}var N_,IF;function R3(){if(IF)return N_;IF=1;const e=Hx(),{MAX_LENGTH:t,MAX_SAFE_INTEGER:n}=k3(),{safeRe:i,t:r}=O3(),a=M3(),{compareIdentifiers:s}=cwe();class o{constructor(f,d){if(d=a(d),f instanceof o){if(f.loose===!!d.loose&&f.includePrerelease===!!d.includePrerelease)return f;f=f.version}else if(typeof f!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof f}".`);if(f.length>t)throw new TypeError(`version is longer than ${t} characters`);e("SemVer",f,d),this.options=d,this.loose=!!d.loose,this.includePrerelease=!!d.includePrerelease;const h=f.trim().match(d.loose?i[r.LOOSE]:i[r.FULL]);if(!h)throw new TypeError(`Invalid Version: ${f}`);if(this.raw=f,this.major=+h[1],this.minor=+h[2],this.patch=+h[3],this.major>n||this.major<0)throw new TypeError("Invalid major version");if(this.minor>n||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>n||this.patch<0)throw new TypeError("Invalid patch version");h[4]?this.prerelease=h[4].split(".").map(p=>{if(/^[0-9]+$/.test(p)){const y=+p;if(y>=0&&y<n)return y}return p}):this.prerelease=[],this.build=h[5]?h[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(f){if(e("SemVer.compare",this.version,this.options,f),!(f instanceof o)){if(typeof f=="string"&&f===this.version)return 0;f=new o(f,this.options)}return f.version===this.version?0:this.compareMain(f)||this.comparePre(f)}compareMain(f){return f instanceof o||(f=new o(f,this.options)),s(this.major,f.major)||s(this.minor,f.minor)||s(this.patch,f.patch)}comparePre(f){if(f instanceof o||(f=new o(f,this.options)),this.prerelease.length&&!f.prerelease.length)return-1;if(!this.prerelease.length&&f.prerelease.length)return 1;if(!this.prerelease.length&&!f.prerelease.length)return 0;let d=0;do{const h=this.prerelease[d],p=f.prerelease[d];if(e("prerelease compare",d,h,p),h===void 0&&p===void 0)return 0;if(p===void 0)return 1;if(h===void 0)return-1;if(h===p)continue;return s(h,p)}while(++d)}compareBuild(f){f instanceof o||(f=new o(f,this.options));let d=0;do{const h=this.build[d],p=f.build[d];if(e("build compare",d,h,p),h===void 0&&p===void 0)return 0;if(p===void 0)return 1;if(h===void 0)return-1;if(h===p)continue;return s(h,p)}while(++d)}inc(f,d,h){switch(f){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",d,h);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",d,h);break;case"prepatch":this.prerelease.length=0,this.inc("patch",d,h),this.inc("pre",d,h);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",d,h),this.inc("pre",d,h);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const p=Number(h)?1:0;if(!d&&h===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[p];else{let y=this.prerelease.length;for(;--y>=0;)typeof this.prerelease[y]=="number"&&(this.prerelease[y]++,y=-2);if(y===-1){if(d===this.prerelease.join(".")&&h===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(p)}}if(d){let y=[d,p];h===!1&&(y=[d]),s(this.prerelease[0],d)===0?isNaN(this.prerelease[1])&&(this.prerelease=y):this.prerelease=y}break}default:throw new Error(`invalid increment argument: ${f}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return N_=o,N_}var z_,qF;function ah(){if(qF)return z_;qF=1;const e=R3();return z_=(n,i,r)=>new e(n,r).compare(new e(i,r)),z_}var F_,HF;function fwe(){if(HF)return F_;HF=1;const e=ah();return F_=(n,i,r)=>e(n,i,r)===0,F_}var L_,GF;function dwe(){if(GF)return L_;GF=1;const e=ah();return L_=(n,i,r)=>e(n,i,r)!==0,L_}var U_,YF;function hwe(){if(YF)return U_;YF=1;const e=ah();return U_=(n,i,r)=>e(n,i,r)>0,U_}var B_,XF;function gwe(){if(XF)return B_;XF=1;const e=ah();return B_=(n,i,r)=>e(n,i,r)>=0,B_}var j_,VF;function pwe(){if(VF)return j_;VF=1;const e=ah();return j_=(n,i,r)=>e(n,i,r)<0,j_}var P_,WF;function mwe(){if(WF)return P_;WF=1;const e=ah();return P_=(n,i,r)=>e(n,i,r)<=0,P_}var I_,QF;function ywe(){if(QF)return I_;QF=1;const e=fwe(),t=dwe(),n=hwe(),i=gwe(),r=pwe(),a=mwe();return I_=(o,l,f,d)=>{switch(l){case"===":return typeof o=="object"&&(o=o.version),typeof f=="object"&&(f=f.version),o===f;case"!==":return typeof o=="object"&&(o=o.version),typeof f=="object"&&(f=f.version),o!==f;case"":case"=":case"==":return e(o,f,d);case"!=":return t(o,f,d);case">":return n(o,f,d);case">=":return i(o,f,d);case"<":return r(o,f,d);case"<=":return a(o,f,d);default:throw new TypeError(`Invalid operator: ${l}`)}},I_}var q_,ZF;function vwe(){if(ZF)return q_;ZF=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(d,h){if(h=n(h),d instanceof t){if(d.loose===!!h.loose)return d;d=d.value}d=d.trim().split(/\s+/).join(" "),s("comparator",d,h),this.options=h,this.loose=!!h.loose,this.parse(d),this.semver===e?this.value="":this.value=this.operator+this.semver.version,s("comp",this)}parse(d){const h=this.options.loose?i[r.COMPARATORLOOSE]:i[r.COMPARATOR],p=d.match(h);if(!p)throw new TypeError(`Invalid comparator: ${d}`);this.operator=p[1]!==void 0?p[1]:"",this.operator==="="&&(this.operator=""),p[2]?this.semver=new o(p[2],this.options.loose):this.semver=e}toString(){return this.value}test(d){if(s("Comparator.test",d,this.options.loose),this.semver===e||d===e)return!0;if(typeof d=="string")try{d=new o(d,this.options)}catch{return!1}return a(d,this.operator,this.semver,this.options)}intersects(d,h){if(!(d instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new l(d.value,h).test(this.value):d.operator===""?d.value===""?!0:new l(this.value,h).test(d.semver):(h=n(h),h.includePrerelease&&(this.value==="<0.0.0-0"||d.value==="<0.0.0-0")||!h.includePrerelease&&(this.value.startsWith("<0.0.0")||d.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&d.operator.startsWith(">")||this.operator.startsWith("<")&&d.operator.startsWith("<")||this.semver.version===d.semver.version&&this.operator.includes("=")&&d.operator.includes("=")||a(this.semver,"<",d.semver,h)&&this.operator.startsWith(">")&&d.operator.startsWith("<")||a(this.semver,">",d.semver,h)&&this.operator.startsWith("<")&&d.operator.startsWith(">")))}}q_=t;const n=M3(),{safeRe:i,t:r}=O3(),a=ywe(),s=Hx(),o=R3(),l=VG();return q_}var H_,KF;function VG(){if(KF)return H_;KF=1;const e=/\s+/g;class t{constructor(L,U){if(U=r(U),L instanceof t)return L.loose===!!U.loose&&L.includePrerelease===!!U.includePrerelease?L:new t(L.raw,U);if(L instanceof a)return this.raw=L.value,this.set=[[L]],this.formatted=void 0,this;if(this.options=U,this.loose=!!U.loose,this.includePrerelease=!!U.includePrerelease,this.raw=L.trim().replace(e," "),this.set=this.raw.split("||").map(I=>this.parseRange(I.trim())).filter(I=>I.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const I=this.set[0];if(this.set=this.set.filter(V=>!b(V[0])),this.set.length===0)this.set=[I];else if(this.set.length>1){for(const V of this.set)if(V.length===1&&E(V[0])){this.set=[V];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let L=0;L<this.set.length;L++){L>0&&(this.formatted+="||");const U=this.set[L];for(let I=0;I<U.length;I++)I>0&&(this.formatted+=" "),this.formatted+=U[I].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(L){const I=((this.options.includePrerelease&&y)|(this.options.loose&&v))+":"+L,V=i.get(I);if(V)return V;const G=this.options.loose,F=G?l[f.HYPHENRANGELOOSE]:l[f.HYPHENRANGE];L=L.replace(F,P(this.options.includePrerelease)),s("hyphen replace",L),L=L.replace(l[f.COMPARATORTRIM],d),s("comparator trim",L),L=L.replace(l[f.TILDETRIM],h),s("tilde trim",L),L=L.replace(l[f.CARETTRIM],p),s("caret trim",L);let X=L.split(" ").map(de=>w(de,this.options)).join(" ").split(/\s+/).map(de=>z(de,this.options));G&&(X=X.filter(de=>(s("loose invalid filter",de,this.options),!!de.match(l[f.COMPARATORLOOSE])))),s("range list",X);const J=new Map,Z=X.map(de=>new a(de,this.options));for(const de of Z){if(b(de))return[de];J.set(de.value,de)}J.size>1&&J.has("")&&J.delete("");const ue=[...J.values()];return i.set(I,ue),ue}intersects(L,U){if(!(L instanceof t))throw new TypeError("a Range is required");return this.set.some(I=>_(I,U)&&L.set.some(V=>_(V,U)&&I.every(G=>V.every(F=>G.intersects(F,U)))))}test(L){if(!L)return!1;if(typeof L=="string")try{L=new o(L,this.options)}catch{return!1}for(let U=0;U<this.set.length;U++)if(q(this.set[U],L,this.options))return!0;return!1}}H_=t;const n=lwe(),i=new n,r=M3(),a=vwe(),s=Hx(),o=R3(),{safeRe:l,t:f,comparatorTrimReplace:d,tildeTrimReplace:h,caretTrimReplace:p}=O3(),{FLAG_INCLUDE_PRERELEASE:y,FLAG_LOOSE:v}=k3(),b=j=>j.value==="<0.0.0-0",E=j=>j.value==="",_=(j,L)=>{let U=!0;const I=j.slice();let V=I.pop();for(;U&&I.length;)U=I.every(G=>V.intersects(G,L)),V=I.pop();return U},w=(j,L)=>(s("comp",j,L),j=R(j,L),s("caret",j),j=M(j,L),s("tildes",j),j=k(j,L),s("xrange",j),j=D(j,L),s("stars",j),j),A=j=>!j||j.toLowerCase()==="x"||j==="*",M=(j,L)=>j.trim().split(/\s+/).map(U=>T(U,L)).join(" "),T=(j,L)=>{const U=L.loose?l[f.TILDELOOSE]:l[f.TILDE];return j.replace(U,(I,V,G,F,X)=>{s("tilde",j,I,V,G,F,X);let J;return A(V)?J="":A(G)?J=`>=${V}.0.0 <${+V+1}.0.0-0`:A(F)?J=`>=${V}.${G}.0 <${V}.${+G+1}.0-0`:X?(s("replaceTilde pr",X),J=`>=${V}.${G}.${F}-${X} <${V}.${+G+1}.0-0`):J=`>=${V}.${G}.${F} <${V}.${+G+1}.0-0`,s("tilde return",J),J})},R=(j,L)=>j.trim().split(/\s+/).map(U=>O(U,L)).join(" "),O=(j,L)=>{s("caret",j,L);const U=L.loose?l[f.CARETLOOSE]:l[f.CARET],I=L.includePrerelease?"-0":"";return j.replace(U,(V,G,F,X,J)=>{s("caret",j,V,G,F,X,J);let Z;return A(G)?Z="":A(F)?Z=`>=${G}.0.0${I} <${+G+1}.0.0-0`:A(X)?G==="0"?Z=`>=${G}.${F}.0${I} <${G}.${+F+1}.0-0`:Z=`>=${G}.${F}.0${I} <${+G+1}.0.0-0`:J?(s("replaceCaret pr",J),G==="0"?F==="0"?Z=`>=${G}.${F}.${X}-${J} <${G}.${F}.${+X+1}-0`:Z=`>=${G}.${F}.${X}-${J} <${G}.${+F+1}.0-0`:Z=`>=${G}.${F}.${X}-${J} <${+G+1}.0.0-0`):(s("no pr"),G==="0"?F==="0"?Z=`>=${G}.${F}.${X}${I} <${G}.${F}.${+X+1}-0`:Z=`>=${G}.${F}.${X}${I} <${G}.${+F+1}.0-0`:Z=`>=${G}.${F}.${X} <${+G+1}.0.0-0`),s("caret return",Z),Z})},k=(j,L)=>(s("replaceXRanges",j,L),j.split(/\s+/).map(U=>$(U,L)).join(" ")),$=(j,L)=>{j=j.trim();const U=L.loose?l[f.XRANGELOOSE]:l[f.XRANGE];return j.replace(U,(I,V,G,F,X,J)=>{s("xRange",j,I,V,G,F,X,J);const Z=A(G),ue=Z||A(F),de=ue||A(X),Ae=de;return V==="="&&Ae&&(V=""),J=L.includePrerelease?"-0":"",Z?V===">"||V==="<"?I="<0.0.0-0":I="*":V&&Ae?(ue&&(F=0),X=0,V===">"?(V=">=",ue?(G=+G+1,F=0,X=0):(F=+F+1,X=0)):V==="<="&&(V="<",ue?G=+G+1:F=+F+1),V==="<"&&(J="-0"),I=`${V+G}.${F}.${X}${J}`):ue?I=`>=${G}.0.0${J} <${+G+1}.0.0-0`:de&&(I=`>=${G}.${F}.0${J} <${G}.${+F+1}.0-0`),s("xRange return",I),I})},D=(j,L)=>(s("replaceStars",j,L),j.trim().replace(l[f.STAR],"")),z=(j,L)=>(s("replaceGTE0",j,L),j.trim().replace(l[L.includePrerelease?f.GTE0PRE:f.GTE0],"")),P=j=>(L,U,I,V,G,F,X,J,Z,ue,de,Ae)=>(A(I)?U="":A(V)?U=`>=${I}.0.0${j?"-0":""}`:A(G)?U=`>=${I}.${V}.0${j?"-0":""}`:F?U=`>=${U}`:U=`>=${U}${j?"-0":""}`,A(Z)?J="":A(ue)?J=`<${+Z+1}.0.0-0`:A(de)?J=`<${Z}.${+ue+1}.0-0`:Ae?J=`<=${Z}.${ue}.${de}-${Ae}`:j?J=`<${Z}.${ue}.${+de+1}-0`:J=`<=${J}`,`${U} ${J}`.trim()),q=(j,L,U)=>{for(let I=0;I<j.length;I++)if(!j[I].test(L))return!1;if(L.prerelease.length&&!U.includePrerelease){for(let I=0;I<j.length;I++)if(s(j[I].semver),j[I].semver!==a.ANY&&j[I].semver.prerelease.length>0){const V=j[I].semver;if(V.major===L.major&&V.minor===L.minor&&V.patch===L.patch)return!0}return!1}return!0};return H_}var G_,JF;function bwe(){if(JF)return G_;JF=1;const e=VG();return G_=(n,i,r)=>{try{i=new e(i,r)}catch{return!1}return i.test(n)},G_}var xwe=bwe(),WG=uwe(xwe);function Ewe(e,t,n){const i=e.open(t),r=250,{origin:a}=new URL(t);let s=40;function o(f){f.source===i&&(s=0,e.removeEventListener("message",o,!1))}e.addEventListener("message",o,!1);function l(){s<=0||(i.postMessage(n,a),setTimeout(l,r),s-=1)}setTimeout(l,r)}var Swe=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function QG(e,...t){for(const n of t)_we(e,n);return e}function _we(e,t){for(const n of Object.keys(t))zd(e,n,t[n],!0)}const Ba=ome;let qp=ZSe;const D1=typeof window<"u"?window:void 0;var r8;qp===void 0&&((r8=D1==null?void 0:D1.vl)!=null&&r8.compile)&&(qp=D1.vl);const wwe={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},Awe={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},Kg={vega:"Vega","vega-lite":"Vega-Lite"},Uv={vega:Ba.version,"vega-lite":qp?qp.version:"not available"},Cwe={vega:e=>e,"vega-lite":(e,t)=>qp.compile(e,{config:t}).spec},$we=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,Twe="chart-wrapper";function Mwe(e){return typeof e=="function"}function e8(e,t,n,i){const r=`<html><head>${t}</head><body><pre><code class="json">`,a=`</code></pre>${n}</body></html>`,s=window.open("");s.document.write(r+e+a),s.document.title=`${Kg[i]} JSON Source`}function kwe(e,t){if(e.$schema){const n=UG(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${Kg[n.library]}, but mode argument sets ${Kg[t]??t}.`);const i=n.library;return WG(Uv[i],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${Kg[i]} ${n.version}, but the current version of ${Kg[i]} is v${Uv[i]}.`),i}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function ZG(e){return!!(e&&"load"in e)}function t8(e){return ZG(e)?e:Ba.loader(e)}function Owe(e){var n;const t=((n=e.usermeta)==null?void 0:n.embedOptions)??{};return _e(t.defaultStyle)&&(t.defaultStyle=!1),t}async function n8(e,t,n={}){let i,r;_e(t)?(r=t8(n.loader),i=JSON.parse(await r.load(t))):i=t;const a=Owe(i),s=a.loader;(!r||s)&&(r=t8(n.loader??s));const o=await i8(a,r),l=await i8(n,r),f={...QG(l,o),config:Nd(l.config??{},o.config??{})};return await Dwe(e,i,f,r)}async function i8(e,t){const n=_e(e.config)?JSON.parse(await t.load(e.config)):e.config??{},i=_e(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...i?{patch:i}:{},...n?{config:n}:{}}}function Rwe(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function Dwe(e,t,n={},i){const r=n.theme?Nd(F_e[n.theme],n.config??{}):n.config,a=zu(n.actions)?n.actions:QG({},wwe,n.actions??{}),s={...Awe,...n.i18n},o=n.renderer??"canvas",l=n.logLevel??Ba.Warn,f=n.downloadFileName??"visualization",d=typeof e=="string"?document.querySelector(e):e;if(!d)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const T="vega-embed-style",{root:R,rootContainer:O}=Rwe(d);if(!R.getElementById(T)){const k=document.createElement("style");k.id=T,k.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?Swe.toString():n.defaultStyle,O.appendChild(k)}}const h=kwe(t,n.mode);let p=Cwe[h](t,r);if(h==="vega-lite"&&p.$schema){const T=UG(p.$schema);WG(Uv.vega,`^${T.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${T.version}, but current version is v${Uv.vega}.`)}d.classList.add("vega-embed"),a&&d.classList.add("has-actions"),d.innerHTML="";let y=d;if(a){const T=document.createElement("div");T.classList.add(Twe),d.appendChild(T),y=T}const v=n.patch;if(v&&(p=v instanceof Function?v(p):qx(p,v,!0,!1).newDocument),n.formatLocale&&Ba.formatLocale(n.formatLocale),n.timeFormatLocale&&Ba.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const T in n.expressionFunctions){const R=n.expressionFunctions[T];"fn"in R?Ba.expressionFunction(T,R.fn,R.visitor):R instanceof Function&&Ba.expressionFunction(T,R)}const{ast:b}=n,E=Ba.parse(p,h==="vega-lite"?{}:r,{ast:b}),_=new(n.viewClass||Ba.View)(E,{loader:i,logLevel:l,renderer:o,...b?{expr:Ba.expressionInterpreter??n.expr??yme}:{}});if(_.addSignalListener("autosize",(T,R)=>{const{type:O}=R;O=="fit-x"?(y.classList.add("fit-x"),y.classList.remove("fit-y")):O=="fit-y"?(y.classList.remove("fit-x"),y.classList.add("fit-y")):O=="fit"?y.classList.add("fit-x","fit-y"):y.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const{loader:T,tooltip:R}=n,O=T&&!ZG(T)?T==null?void 0:T.baseURL:void 0,k=Mwe(R)?R:new Y_e({baseURL:O,...R===!0?{}:R}).call;_.tooltip(k)}let{hover:w}=n;if(w===void 0&&(w=h==="vega"),w){const{hoverSet:T,updateSet:R}=typeof w=="boolean"?{}:w;_.hover(T,R)}n&&(n.width!=null&&_.width(n.width),n.height!=null&&_.height(n.height),n.padding!=null&&_.padding(n.padding)),await _.initialize(y,n.bind).runAsync();let A;if(a!==!1){let T=d;if(n.defaultStyle!==!1||n.forceActionsMenu){const O=document.createElement("details");O.title=s.CLICK_TO_VIEW_ACTIONS,d.append(O),T=O;const k=document.createElement("summary");k.innerHTML=$we,O.append(k),A=$=>{O.contains($.target)||O.removeAttribute("open")},document.addEventListener("click",A)}const R=document.createElement("div");if(T.append(R),R.classList.add("vega-actions"),a===!0||a.export!==!1){for(const O of["svg","png"])if(a===!0||a.export===!0||a.export[O]){const k=s[`${O.toUpperCase()}_ACTION`],$=document.createElement("a"),D=Ee(n.scaleFactor)?n.scaleFactor[O]:n.scaleFactor;$.text=k,$.href="#",$.target="_blank",$.download=`${f}.${O}`,$.addEventListener("mousedown",async function(z){z.preventDefault();const P=await _.toImageURL(O,D);this.href=P}),R.append($)}}if(a===!0||a.source!==!1){const O=document.createElement("a");O.text=s.SOURCE_ACTION,O.href="#",O.addEventListener("click",function(k){e8(nS(t),n.sourceHeader??"",n.sourceFooter??"",h),k.preventDefault()}),R.append(O)}if(h==="vega-lite"&&(a===!0||a.compiled!==!1)){const O=document.createElement("a");O.text=s.COMPILED_ACTION,O.href="#",O.addEventListener("click",function(k){e8(nS(p),n.sourceHeader??"",n.sourceFooter??"","vega"),k.preventDefault()}),R.append(O)}if(a===!0||a.editor!==!1){const O=n.editorUrl??"https://vega.github.io/editor/",k=document.createElement("a");k.text=s.EDITOR_ACTION,k.href="#",k.addEventListener("click",function($){Ewe(window,O,{config:r,mode:v?"vega":h,renderer:o,spec:nS(v?p:t)}),$.preventDefault()}),R.append(k)}}function M(){A&&document.removeEventListener("click",A),_.finalize()}return{view:_,spec:t,vgSpec:p,finalize:M,embedOptions:n}}const Nwe=({data:e,selectedStudio:t,selectedFranchise:n})=>{const i=Ys.useRef(null),r=Ys.useRef(null);return Ys.useEffect(()=>{if(!e||e.length===0)return;const a=e.map(b=>{const E=new Date(b["Release Date"]),_=parseFloat(b["Adjusted Budget"].replace(/[$,]/g,""))||0,w=parseFloat(b["Adjusted International Box Office"].replace(/[$,]/g,""))||0,A=_>0?w/(_*2.5)*100-100:-100;return{date:E,dateStr:E.toISOString(),year:E.getFullYear(),roi:A,studio:b.Studio||"Unknown",franchise:b.Franchise||"Independent",title:b["Movie Title"],budget:_,boxOffice:w}});a.sort((b,E)=>b.date-E.date);const s=a.map(b=>b.year),o=Math.min(...s),l=Math.max(...s),f=Math.floor(o/5)*5,d=Math.ceil(l/5)*5,h={$schema:"https://vega.github.io/schema/vega-lite/v5.json",description:"ROI over time",width:"container",height:300,data:{values:a},mark:{type:"point",size:100,opacity:.6},encoding:{x:{field:"dateStr",type:"temporal",title:"Release Date",axis:{format:"%Y",labelAngle:0},scale:{domain:[`${f}-01-01`,`${d}-12-31`]}},y:{field:"roi",type:"quantitative",title:"ROI (%)"},color:{field:n?"franchise":"studio",type:"nominal"},tooltip:[{field:"title",type:"nominal",title:"Movie"},{field:"date",type:"temporal",title:"Release Date",format:"%B %d, %Y"},{field:"roi",type:"quantitative",title:"ROI",format:".0f"},{field:"budget",type:"quantitative",title:"Adjusted Budget",format:"$,.0f"},{field:"boxOffice",type:"quantitative",title:"Adjusted Box Office",format:"$,.0f"},{field:"studio",type:"nominal",title:"Studio"},{field:"franchise",type:"nominal",title:"Franchise"}]}};let p;t?p=a.filter(b=>b.studio===t):p=a;const y={$schema:"https://vega.github.io/schema/vega-lite/v5.json",description:"ROI distribution",width:"container",height:300,data:{values:p},mark:{type:"boxplot",extent:1.5,median:{color:"white"}},encoding:{x:{field:t?"franchise":"studio",type:"nominal",title:t?"Franchise":"Studio",axis:{labelAngle:-45,labelLimit:200}},y:{field:"roi",type:"quantitative",title:"ROI (%)",scale:{zero:!1}},color:{field:t?"franchise":"studio",type:"nominal"}}};(async()=>{try{i.current&&await n8(i.current,h,{actions:!1,renderer:"svg"}),r.current&&await n8(r.current,y,{actions:!1,renderer:"svg"})}catch(b){console.error("Error rendering charts:",b)}})()},[e,t,n]),rt.jsxs("div",{className:"charts-container",children:[rt.jsxs("div",{className:"chart-card",children:[rt.jsx("h3",{children:"ROI Over Time"}),rt.jsx("div",{ref:i,className:"chart"})]}),rt.jsxs("div",{className:"chart-card",children:[rt.jsx("h3",{children:t?`${t} Franchise Performance`:"Studio Performance"}),rt.jsx("div",{ref:r,className:"chart"})]})]})},zwe=()=>{const[e,t]=Ys.useState([]),[n,i]=Ys.useState(!0),[r,a]=Ys.useState(null),[s,o]=Ys.useState({studio:"",franchise:""}),l=y=>y&&parseFloat(y.replace(/[$,]/g,""))||0,f=y=>y?y.replace(/^"|"$/g,"").split(",").map(v=>v.trim()):[];Ys.useEffect(()=>{(async()=>{try{const v=await fetch("/movie_database.csv");if(!v.ok)throw new Error(`HTTP error! status: ${v.status}`);const b=await v.text();TV.parse(b,{header:!0,skipEmptyLines:!0,complete:E=>{const _=E.data.map(w=>({...w,roi:l(w["Adjusted Budget"])>0?l(w["Adjusted International Box Office"])/(l(w["Adjusted Budget"])*2.5)*100-100:-100,castList:f(w.Cast)}));console.log("Sample processed movie:",_[0]),t(_),i(!1)},error:E=>{console.error("Parse error:",E),a(`Failed to parse the movie database: ${E.message}`),i(!1)}})}catch(v){console.error("Load error details:",v),a(`Failed to load the movie database: ${v.message}`),i(!1)}})()},[]);const d=y=>{const v=new Map;y.forEach(_=>{_.castList&&_.castList.forEach(w=>{if(!w)return;v.has(w)||v.set(w,{movies:0,totalROI:0,averageROI:0});const A=v.get(w);A.movies+=1,A.totalROI+=_.roi,A.averageROI=A.totalROI/A.movies})});const E=[...Array.from(v.entries()).filter(([_,w])=>w.movies>=2).map(([_,w])=>({actor:_,...w}))].sort((_,w)=>w.averageROI-_.averageROI);return{topActors:E.slice(0,5),bottomActors:E.slice(-5).reverse()}},h=Y_.useMemo(()=>e.filter(y=>!(s.studio&&y.Studio!==s.studio||s.franchise&&y.Franchise!==s.franchise)),[e,s]),p=Y_.useMemo(()=>{if(!h.length)return{averageROI:0,topActors:[],bottomActors:[]};const y=d(h);return{averageROI:h.reduce((v,b)=>v+b.roi,0)/h.length,...y}},[h]);return n?rt.jsx("div",{className:"loading",children:"Loading movie database..."}):r?rt.jsx("div",{className:"error",children:r}):rt.jsxs("div",{className:"dashboard-container",children:[rt.jsxs("header",{className:"dashboard-header",children:[rt.jsx("h1",{children:"Movie ROI Analytics"}),rt.jsxs("div",{className:"filter-controls",children:[rt.jsxs("select",{value:s.studio,onChange:y=>o({studio:y.target.value,franchise:""}),className:"filter-select",children:[rt.jsx("option",{value:"",children:"Select Studio"}),[...new Set(e.map(y=>y.Studio))].sort().map(y=>rt.jsx("option",{value:y,children:y},y))]}),s.studio&&rt.jsxs("select",{value:s.franchise,onChange:y=>o(v=>({...v,franchise:y.target.value})),className:"filter-select",children:[rt.jsx("option",{value:"",children:"All Franchises"}),[...new Set(e.filter(y=>y.Studio===s.studio).map(y=>y.Franchise))].sort().map(y=>rt.jsx("option",{value:y,children:y},y))]})]})]}),rt.jsxs("main",{className:"dashboard-content",children:[rt.jsxs("div",{className:"metrics-panel",children:[rt.jsxs("div",{className:"metric-card",children:[rt.jsx("h3",{children:"Average ROI"}),rt.jsxs("div",{className:"metric-value",children:[p.averageROI.toFixed(2),"%"]})]}),rt.jsxs("div",{className:"metric-card",children:[rt.jsx("h3",{children:"Top ROI Actors (2+ Movies)"}),rt.jsx("div",{className:"metric-value actor-list",children:p.topActors.map((y,v)=>rt.jsxs("div",{className:"actor-item",children:[y.actor,": ",y.averageROI.toFixed(1),"%"]},y.actor))})]}),rt.jsxs("div",{className:"metric-card",children:[rt.jsx("h3",{children:"Lowest ROI Actors (2+ Movies)"}),rt.jsx("div",{className:"metric-value actor-list",children:p.bottomActors.map((y,v)=>rt.jsxs("div",{className:"actor-item",children:[y.actor,": ",y.averageROI.toFixed(1),"%"]},y.actor))})]})]}),rt.jsx(Nwe,{data:h,selectedStudio:s.studio,selectedFranchise:s.franchise})]})]})};wV.createRoot(document.getElementById("root")).render(rt.jsx(Y_.StrictMode,{children:rt.jsx(zwe,{})}));
